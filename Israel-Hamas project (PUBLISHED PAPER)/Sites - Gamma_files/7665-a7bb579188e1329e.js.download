"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7665],{88791:function(e,t,n){n.d(t,{O:function(){return ee}});var i=n(52322),a=n(38035),r=n(2784),s=n(91994),o=n(14324),l=n(67613),d=n(46409),c=n(90221),u=n(93441),m=n(28535),h=n(17993),g=n(62614),p=n(28165),x=n(54933),v=n(49929),f=n(5879),j=n(38045),b=n(4742),w=n.n(b),C=n(9850),y=n.n(C),S=n(86113),I=n(27333),k=n(80211),G=n(75586),_=n(31709),A=n(32186),N=n(13822),M=n(96933),E=n(87205),T=n(74153),z=n(75816),L=n(25493);let V=(0,j.E)(m.xu),R=e=>{let{card:t,theme:n,...a}=e,s=(0,r.useMemo)(()=>{if(t)return(0,_.vL)({docFlags:{cardLayoutsEnabled:!0}},[t])},[t]);return(0,i.jsx)(V,{pointerEvents:"none",sx:{"*":{backdropFilter:"none !important",transitionProperty:"background-color, color, border-color, padding, margin, width, maxWidth, fontSize",transitionDuration:".15s",[".button .".concat(I.A8)]:{transitionProperty:"none"}},".doc-content-wrapper *[data-doc-background-element], .motion-present-mode-bg":{display:"none"},".card-wrapper,.card-body,.doc-content-wrapper":{padding:0,margin:0,minHeight:"auto"},"[data-card-body]":{"--card-color-transparent":"var(--card-color)","--card-background-color":"var(--card-color)","--card-width":"60rem"}},...a,children:s&&n&&(0,i.jsx)(A.m,{content:s,initialContent:s,theme:n})})},q=(e,t,n)=>{let i=0,a=e=>{var r;return null===(r=e.content)||void 0===r?void 0:r.map(e=>{var r,s,o,l,d,c,u;let m={...e,attrs:{...e.attrs}};if("image"===e.type){let e=t.shift();e&&(m.attrs.src=e.imageUrl,m.attrs.tempUrl=e.imageUrl)}if("cardAccentLayoutItem"===e.type&&(null===(o=e.attrs)||void 0===o?void 0:null===(s=o.background)||void 0===s?void 0:null===(r=s.image)||void 0===r?void 0:r.src)){let e=null==n?void 0:null===(u=n.config)||void 0===u?void 0:null===(c=u.accentBackgrounds)||void 0===c?void 0:c[i];e&&(i++,m.attrs.background=e)}if("smartLayoutCell"===e.type&&(null===(d=e.attrs)||void 0===d?void 0:null===(l=d.image)||void 0===l?void 0:l.src)==="custom"){let e=t.shift();e&&(m.attrs.image.src=e.imageUrl,m.attrs.image.tempUrl=e.imageUrl)}return e.content&&(m.content=a(m)),m})};return Object.assign({},e,{content:a(e)})},F=e=>{e&&requestAnimationFrame(()=>{var t;return null===(t=document.querySelector('[data-theme-id="'.concat(e,'"]')))||void 0===t?void 0:t.scrollIntoView({behavior:"smooth"})})},O=e=>{let{images:t}=e,n=(0,s.TL)(),o=(0,s.CG)(l.ez),d=(0,s.CG)(l.$b),c=(0,N.zE)(),[u,m]=(0,T.Ns)("themeId"),j=o.find(e=>u===e.id);(0,r.useEffect)(()=>{if(u||!(null==o?void 0:o.length))return;n((0,l.uG)({activeView:"standard"}));let e=w()(d),t=(null==c?void 0:c.defaultThemeId)||(null==e?void 0:e.id);t&&(m(t),F(t))},[n,u,d,o,m,null==c?void 0:c.defaultThemeId]);let b=(0,r.useMemo)(()=>{let e=y()((0,S.s)()),n=q(e,y()(t),j);return n.content[0].content||[]},[j,t]),C=(0,r.useCallback)(()=>{if(!o)return;let e=w()(o);e&&(m(e.id),(null==e?void 0:e.workspaceId)?n((0,l.uG)({activeView:"custom"})):n((0,l.uG)({activeView:"standard"})),F(null==e?void 0:e.id))},[n,m,o]),I=(0,M.i)({base:0,"4xl":300})||0,_=(0,M.i)({base:600,xl:250,"4xl":0})||0,A=(0,M.i)({base:0,xl:1})||0,V=(0,M.i)({base:.5,lg:.6,xl:.7,"2xl":.85,"3xl":1,"4xl":1.125});return(0,r.useEffect)(function(){o&&0!==o.length&&Promise.all(o.map(e=>{var t,n,i,a,r,s,o,l,d,c;(null===(i=e.config.accentBackgrounds)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:null===(t=n.image)||void 0===t?void 0:t.src)&&(0,E.GN)(null===(l=e.config.accentBackgrounds)||void 0===l?void 0:null===(o=l[0].image)||void 0===o?void 0:o.src),(null===(s=e.config.accentBackgrounds)||void 0===s?void 0:null===(r=s[1])||void 0===r?void 0:null===(a=r.image)||void 0===a?void 0:a.src)&&(0,E.GN)(null===(c=e.config.accentBackgrounds)||void 0===c?void 0:null===(d=c[1].image)||void 0===d?void 0:d.src)}))},[o]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.B,{theme:j}),(0,i.jsxs)(a.k,{zIndex:1,py:0,px:6,"data-theme-desktop-root":!0,position:"relative",children:[(0,i.jsx)(p.xB,{styles:{html:{overflowX:"hidden",overflowY:"auto"}}}),(0,i.jsxs)(a.k,{direction:"column",pos:"relative",flex:1,h:"100%",transform:"scale(".concat(V,")"),justifyContent:"center",alignItems:"center",ml:[40,35,30,20,0],"data-id":"theme-picker-desktop-cards",children:[(0,i.jsx)(R,{pos:"absolute",theme:j,card:b[2],initial:{opacity:0},animate:{opacity:1,translateX:0,transition:{opacity:{duration:.5,delay:0,ease:"easeOut"},default:{duration:2,ease:"easeOut"}}},zIndex:1}),(0,i.jsx)(R,{pos:"absolute",theme:j,card:b[0],initial:{translateX:0,opacity:0},animate:{translateX:I,translateY:_,rotate:-A,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}}),(0,i.jsx)(R,{pos:"absolute",theme:j,card:b[1],initial:{translateX:0,opacity:0},transformOrigin:"center",animate:{translateX:-I,translateY:-_,rotate:A,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}})]}),(0,i.jsxs)(a.k,{w:"420px",p:6,direction:"column",justifyContent:"center",bg:"whiteAlpha.900",borderRadius:"lg",h:"calc(100vh - var(--chakra-sizes-20))",minH:"700px",mb:4,shadow:"md",pos:"relative",position:"sticky",mt:6,children:[(0,i.jsx)(G.v,{title:(0,i.jsx)(f.cC,{id:"cQGp8b"}),description:(0,i.jsxs)(h.g,{w:"100%",align:"center",justify:"center",children:[(0,i.jsx)(z.j,{w:"100%",children:(0,i.jsx)(f.cC,{id:"ziAjHi"})}),(0,i.jsx)(g.z,{w:"100%",leftIcon:(0,i.jsx)(v.G,{icon:x.a_u,color:"var(--chakra-colors-trueblue-800)"}),size:"md",onClick:C,children:(0,i.jsx)(f.cC,{id:"B8w15Q"})})]}),stackProps:{pb:4},currentTheme:j,showCreateButtons:!1,showDrawerCloseButton:!1}),(0,i.jsx)(k.t,{shouldScrollToCurrent:!0,currentTheme:j,setTheme:e=>{m(null==e?void 0:e.id)},flexProps:{overflowY:"auto",mx:-6,px:3},disableEditing:!0})]})]})]})};var P=n(43297),W=n(74409),D=n(77533),U=n(75768),B=n(29117),H=n(42946),Y=n(43997),K=n(8393),J=n(93624),Q=n(74411),X=n(18438),Z=n(39278);let $=()=>{let e=(0,r.useRef)(!1),t=(0,s.CG)(l.Y3),n=(0,s.CG)(l.$b),[o,d]=(0,T.Ns)("themeId",{debounce:500}),[c,u]=(0,r.useState)(()=>t.find(e=>e.id===o)),h=(0,Y.I0)(),{currentWorkspace:x}=(0,Z.SE)(),{data:j}=(0,J.WaV)({variables:{id:null==x?void 0:x.id},skip:!(null==x?void 0:x.id)}),b=null==j?void 0:j.workspace,C=(0,s.CG)(l.C0),y=(0,s.CG)(l.FM),S=c?(0,Q.wj)(c):void 0;(0,r.useEffect)(()=>{if(o||!(null==n?void 0:n.length)||e.current)return;let i=w()(n),a=t.find(e=>e.id===(null==b?void 0:b.defaultThemeId)),r=a||i;if(r){var s;h((0,l.uG)({activeView:"standard"})),u(r),null===(s=document.querySelector('[data-theme-mobile-preview="'.concat(r.id,'"]')))||void 0===s||s.scrollIntoView(),e.current=!0}},[h,n,o,t,null==b?void 0:b.defaultThemeId]),(0,r.useEffect)(()=>{var t;!e.current&&o&&c&&(c.workspaceId?h((0,l.uG)({activeView:"custom"})):h((0,l.uG)({activeView:"standard"})),null===(t=document.querySelector('[data-theme-mobile-preview="'.concat(c.id,'"]')))||void 0===t||t.scrollIntoView(),e.current=!0)},[h,c,o]);let I=(0,r.useCallback)(e=>{let{scrollLeft:n,scrollWidth:i,clientWidth:a}=e.target,r=Math.round(n/(i-a)*(t.length-1)),s=t[r];s.id!==(null==c?void 0:c.id)&&u(s)},[t,null==c?void 0:c.id,u]),k=(0,r.useCallback)(()=>{(null==c?void 0:c.id)&&d(c.id)},[null==c?void 0:c.id,d]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(L.B,{theme:c}),(0,i.jsxs)(P.K,{spacing:0,h:"100%",w:"100vw",children:[(0,i.jsx)(p.xB,{styles:{html:{height:"100%"},body:{height:"100%"}}}),(0,i.jsxs)(P.K,{spacing:0,mx:"auto",zIndex:1,px:6,pt:20,sx:A.n,w:"100%",children:[(0,i.jsxs)(P.K,{align:"center",spacing:1,children:[(0,i.jsx)(W.X,{letterSpacing:"-0.04em",fontWeight:"700",fontFamily:"p22-mackinac-pro",color:S?"#FFFFFF":"#0a1629",w:"100%",size:"2xl",transitionProperty:"common",transitionDuration:"normal",children:(0,i.jsx)(f.cC,{id:"cQGp8b"})}),(0,i.jsx)(D.x,{fontSize:"lg",color:S?"#FFFFFF":"#0a1629",letterSpacing:"-0.04em",transitionProperty:"common",transitionDuration:"normal",children:(0,i.jsx)(f.cC,{id:"950yV9"})})]}),C&&(0,i.jsxs)(U.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",pt:2,justifyContent:"center",children:[(0,i.jsx)(g.z,{borderRadius:"full",leftIcon:(0,i.jsx)(v.G,{icon:H.D0h,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===y?"trueblue":"gray",bg:"custom"===y?"trueblue.100":"gray.100",onClick:()=>h((0,l.uG)({activeView:"custom"})),children:(0,i.jsx)(f.cC,{id:"8Tg/JR"})}),(0,i.jsx)(g.z,{borderRadius:"full",leftIcon:(0,i.jsx)(m.xu,{w:3.5,children:(0,i.jsx)(K.Y,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===y?"trueblue":"gray",bg:"standard"===y?"trueblue.100":"gray.100",onClick:()=>h((0,l.uG)({activeView:"standard"})),children:(0,i.jsx)(f.cC,{id:"TJBHlP"})})]})]}),(0,i.jsx)(a.k,{zIndex:1,pos:"relative",overflow:"auto",py:8,sx:{"scroll-snap-type":"x mandatory"},onScroll:I,children:(0,i.jsx)(B.U,{flex:1,spacing:6,px:12,pt:1,children:t.map(e=>(0,i.jsx)(X.L,{isSelected:e.id===(null==c?void 0:c.id),theme:e},e.id))})}),(0,i.jsx)(a.k,{px:6,py:4,mb:2,justify:"center",zIndex:9,w:"100%",children:(0,i.jsx)(z.j,{size:"lg",w:"100%",onClick:k,children:(0,i.jsx)(f.cC,{id:"ziAjHi"})})})]})]})},ee=(0,r.memo)(e=>{let{images:t=[]}=e;(0,o.a)();let n=(0,s.CG)(l.ez);return(0,u.gF)()&&(null==n?void 0:n.length)?(0,i.jsxs)(a.k,{direction:"column",justifyContent:"flex-start",flex:1,w:"100vw",h:"100%",children:[(0,i.jsx)(d.Y,{}),(0,c.s2)()?(0,i.jsx)($,{}):(0,i.jsx)(O,{images:t})]}):null});ee.displayName="ThemeStep"},33872:function(e,t,n){n.d(t,{$3:function(){return N},Td:function(){return _},p3:function(){return M}});var i=n(52322),a=n(17993),r=n(75768),s=n(62614),o=n(75009),l=n(28535),d=n(82554),c=n(35183),u=n(97166),m=n(29494),h=n(54933),g=n(49929),p=n(94523),x=n(5879),v=n(87254),f=n(2784),j=n(42111),b=n(99787),w=n(9766),C=n(9883),y=n(68728),S=n(61185),I=n(63304),k=n(74153),G=n(39092);let _=(0,f.memo)(()=>{let[e]=(0,k.Ns)("imageProvider"),t=S.s[e]||b.QT,[n]=(0,k.Ns)("imageLicense"),r=(0,y.E)(n),[s]=(0,k.Ns)("imageStyle",{debounce:500});return(0,i.jsx)(G.j,{label:(0,i.jsx)(x.cC,{id:"an5hVd"}),colorScheme:"trueblue",icon:h.VmB,values:[null==t?void 0:t.label(),"web"===e&&r,"aiGenerated"===e&&s],children:(0,i.jsxs)(a.g,{spacing:4,children:[(0,i.jsx)(N,{}),(0,i.jsx)(M,{})]})})});_.displayName="ImageSettingsGroup";let A=(0,f.memo)(e=>{let{provider:t,setProvider:n}=e;return(0,i.jsx)(r.h,{isAttached:!0,size:"sm",display:"flex",children:Object.entries(S.s).map(e=>{let[a,{label:r,icon:c,image:u,badge:m,description:h}]=e,x=t.key===S.Q[a];return(0,i.jsx)(p.kH,{label:h?h():void 0,placement:"top",children:(0,i.jsxs)(s.z,{leftIcon:u?(0,i.jsx)(o.E,{display:"inline",mr:2,h:"1em",w:"1em",objectFit:"contain",src:u.src}):c?(0,i.jsx)(l.xu,{display:"inline",mr:2,color:"trueblue.600",children:(0,i.jsx)(g.G,{icon:c})}):void 0,variant:x?"plainSelected":"plain",boxShadow:"none",flex:"1",onClick:()=>n(a),children:[r(),m&&(0,i.jsx)(d.C,{ml:2,colorScheme:"green",children:m()})]})},a)})})});A.displayName="ImageProviderPicker";let N=()=>{let[e,t]=(0,k.Ns)("imageProvider"),n=S.s[e]||b.QT;return(0,i.jsxs)(c.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"qA0pmh"})}),(0,i.jsx)(A,{provider:n,setProvider:t})]})},M=()=>{let[e]=(0,k.Ns)("imageProvider"),[t,n]=(0,k.Ns)("imageLicense"),[a,r]=(0,k.Ns)("imageStyle",{debounce:500}),s=(0,j.ye)("aiGeneratedImagesDefaultModel"),[o,l]=(0,k.Ns)("imageModel"),d=(0,w.oj)();return(0,f.useEffect)(()=>{o&&(d(o)||l(s))},[o,s,l,d]),(0,i.jsxs)(i.Fragment,{children:["web"===e&&(0,i.jsxs)(c.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"6TSHCF"})}),(0,i.jsx)(y.A,{value:t,onChange:n})]}),"aiGenerated"===e&&(0,i.jsxs)(c.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"X2yiuT"})}),(0,i.jsx)(m.g,{value:a,onChange:e=>r(e.target.value),placeholder:v.ag._({id:"5x/foo"}),rows:2,maxLength:I.V4})]}),"aiGenerated"===e&&(0,i.jsxs)(c.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"emv9SK"})}),(0,i.jsx)(C.q,{value:o||s,setValue:l})]})]})}},39092:function(e,t,n){n.d(t,{i:function(){return b},j:function(){return j}});var i=n(52322),a=n(87436),r=n(95897),s=n(29117),o=n(28535),l=n(43297),d=n(77533),c=n(36474),u=n(89511),m=n(11121),h=n(67109),g=n(49929),p=n(2784),x=n(76282),v=n(91994);let f={_groupHover:{color:"purple.600"}},j=(0,p.memo)(e=>{let{icon:t,colorScheme:n="gray",label:p,values:j=[],children:b}=e,w=(0,v.CG)(x.RB);return(0,i.jsx)(a.Q,{border:"none",children:e=>{let{isExpanded:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.K,{_focus:{boxShadow:"none",outline:"none"},py:2,p:3,outline:"none",transitionProperty:"common",transitionDuration:"normal",bg:"transparent",_hover:{bg:"".concat(n,".50")},children:(0,i.jsxs)(s.U,{width:"100%",spacing:"3",align:"start",children:[(0,i.jsx)(o.xu,{...f,display:"inline",fontSize:"sm",color:"".concat(n,".300"),children:(0,i.jsx)(g.G,{icon:t,fixedWidth:!0})}),(0,i.jsxs)(l.K,{spacing:0,align:"start",textAlign:"left",children:[(0,i.jsx)(d.x,{...f,fontWeight:"700",children:p}),!a&&(0,i.jsx)(d.x,{fontSize:"sm",fontWeight:"500",noOfLines:2,...f,children:j.filter(Boolean).join(" \xb7 ")})]}),(0,i.jsx)(c.L,{}),(0,i.jsx)(u.X,{...f})]})}),(0,i.jsxs)(m.H,{p:4,pt:3,pb:6,children:[w&&b,!w&&(0,i.jsxs)(l.K,{spacing:4,pt:2,align:"start",children:[(0,i.jsx)(h.O,{w:"100%",height:"30px"}),(0,i.jsx)(h.O,{w:"100%",height:"30px"}),(0,i.jsx)(h.O,{w:"100%",height:"30px"})]})]})]})}})});j.displayName="SettingsGroup";let b=e=>{let{children:t}=e;return(0,i.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:t})}},62141:function(e,t,n){n.d(t,{B:function(){return T},o:function(){return A}});var i=n(52322),a=n(17993),r=n(77533),s=n(35183),o=n(97166),l=n(75768),d=n(62614),c=n(43297),u=n(29494),m=n(87651),h=n(54933),g=n(49929),p=n(94523),x=n(5879),v=n(87254),f=n(2784),j=n(48525),b=n(94199),w=n(45302),C=n(63304),y=n(74153),S=n(54012),I=n(39092),k=n(89099),G=n(16556);let _=(0,f.memo)(e=>{let{tagsList:t,onClick:n}=e;return(0,i.jsx)(k.E,{pb:"2",align:"flex-start",w:"100%",children:t.map(e=>(0,i.jsx)(k.U,{children:(0,i.jsx)(G.Vp,{cursor:"pointer",colorScheme:"purple",boxShadow:"sm",_hover:{color:"white",bg:"purple.600"},onClick:()=>{n(e.value)},children:e.label})},e.label))})});_.displayName="SettingsTags";let A=(0,f.memo)(()=>{var e;let[t]=(0,y.Ns)("locale"),n=t?(0,w.jw)(t):null,[s]=(0,y.Ns)("textAmount"),[o]=(0,y.Ns)("textMode"),l=null===(e=M.find(e=>e.key===o))||void 0===e?void 0:e.label();return(0,i.jsx)(I.j,{label:(0,i.jsx)(x.cC,{id:"OuNFIM"}),colorScheme:"blue",icon:h.elf,values:[l,"preserve"!==o&&(0,S.XL)(s).label,"generate"===o&&(null==n?void 0:n.displayName)],children:(0,i.jsxs)(a.g,{spacing:4,alignItems:"stretch",children:[(0,i.jsx)(N,{}),"preserve"===o&&(0,i.jsxs)(r.x,{fontSize:"xs",color:"gray.600",children:[(0,i.jsx)(x.cC,{id:"7j0VMp"})," ",(0,i.jsx)(p.Yq,{fontSize:"xs",label:v.ag._({id:"kVzbm6",values:{GAMMA_ARTIFACT_PROPER_NOUN:b.Yc}})})]}),"preserve"!==o&&(0,i.jsx)(T,{}),"generate"===o&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(z,{}),(0,i.jsx)(V,{})]}),(0,i.jsx)(E,{})]})})});A.displayName="TextSettingsGroup";let N=()=>{let[e,t]=(0,y.Ns)("textMode");return(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"OuNFIM"})}),(0,i.jsx)(l.h,{size:"sm",isAttached:!0,width:"100%",children:M.map(n=>(0,i.jsx)(p.kH,{placement:"top",label:n.tip(),children:(0,i.jsx)(d.z,{variant:n.key===e?"plainSelected":"plain",boxShadow:"none",leftIcon:(0,i.jsx)(g.G,{icon:n.icon}),onClick:()=>t(n.key),width:"100%",children:n.label()})},n.label()))})]})},M=[{label:()=>v.ag._({id:"ziAjHi"}),key:"generate",icon:h.ddb,tip:()=>v.ag._({id:"8mt5hR"})},{label:()=>v.ag._({id:"NIvI2q"}),key:"condense",icon:h.G_A,tip:()=>v.ag._({id:"owZbal"})},{label:()=>v.ag._({id:"c0sF7y"}),key:"preserve",icon:h.byT,tip:()=>v.ag._({id:"/JkXZq"})}],E=()=>{let[e,t]=(0,y.Ns)("locale"),n=(0,w.jw)(e);return(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"f6Pzgf"})}),(0,i.jsx)(j.k,{locale:n,setLocale:t,buttonProps:{variant:"plain",size:"sm",width:"100%",textAlign:"left"}})]})},T=()=>{let[e,t]=(0,y.Ns)("textAmount"),[n]=(0,y.Ns)("textMode"),a=(0,f.useMemo)(()=>(0,C.kq)(),[]);return(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{fontSize:"sm",fontWeight:"semibold",children:"condense"===n?(0,i.jsx)(x.cC,{id:"z7tEVo"}):(0,i.jsx)(x.cC,{id:"UmJg9q"})}),(0,i.jsx)(l.h,{size:"sm",isAttached:!0,width:"100%",children:Object.entries(a).map(n=>{let[a,{label:r,description:s,icon:o}]=n;return(0,i.jsx)(p.kH,{placement:"top",label:s,children:(0,i.jsx)(d.z,{variant:e===a?"plainSelected":"plain",boxShadow:"none",onClick:()=>t(a),leftIcon:(0,i.jsx)(g.G,{icon:o}),width:"100%",textAlign:"left",children:r})},a)})})]})},z=()=>{let[e,t]=(0,y.Ns)("audience",{debounce:500}),n=(0,f.useMemo)(()=>L(),[]);return(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"CfNFS9"})}),(0,i.jsxs)(c.K,{spacing:3,children:[(0,i.jsx)(u.g,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value),maxLength:C.V4}),(0,i.jsx)(m.U,{in:""===e||null===e,children:(0,i.jsx)(_,{tagsList:n,onClick:e=>{t(e)}})})]})]})},L=()=>[{label:v.ag._({id:"9N+p+g"}),value:v.ag._({id:"pCuan7"})},{label:v.ag._({id:"Y9OrUQ"}),value:v.ag._({id:"no1XFa"})},{label:v.ag._({id:"vINKFZ"}),value:v.ag._({id:"H13RWO"})},{label:v.ag._({id:"5AIqvu"}),value:v.ag._({id:"hqe36h"})},{label:v.ag._({id:"bNrMlq"}),value:v.ag._({id:"kImdWQ"})}],V=()=>{let[e,t]=(0,y.Ns)("tone",{debounce:500}),n=(0,f.useMemo)(()=>R(),[]);return(0,i.jsxs)(s.NI,{children:[(0,i.jsx)(o.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(x.cC,{id:"uAQyzk"})}),(0,i.jsxs)(c.K,{spacing:"3",children:[(0,i.jsx)(u.g,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value),maxLength:C.V4}),(0,i.jsx)(m.U,{in:""===e||null===e,children:(0,i.jsx)(_,{tagsList:n,onClick:e=>{t(e)}})})]})]})},R=()=>[{label:v.ag._({id:"Oojfbh"}),value:v.ag._({id:"L7fEtA"})},{label:v.ag._({id:"hzExWo"}),value:v.ag._({id:"F64cR2"})},{label:v.ag._({id:"wanXT9"}),value:v.ag._({id:"Gop378"})},{label:v.ag._({id:"ChasOQ"}),value:v.ag._({id:"lVYl+I"})},{label:v.ag._({id:"wTl0UK"}),value:v.ag._({id:"sFGQvg"})},{label:v.ag._({id:"4Nl9R0"}),value:v.ag._({id:"cspP/G"})}]},50896:function(e,t,n){n.d(t,{J:function(){return G},Y:function(){return k}});var i=n(52322),a=n(75768),r=n(32899),s=n(62614),o=n(29117),l=n(77533),d=n(28535),c=n(10625),u=n(67046),m=n(332),h=n(99058),g=n(44035),p=n(39237),x=n(42946),v=n(49929),f=n(94523),j=n(5879),b=n(87254),w=n(2784),C=n(62131),y=n(81640),S=n(11050),I=n(5026);let k=(0,w.memo)(e=>{let{onIncrement:t,onDecrement:n,maxCards:c,cardCount:u,...m}=e,h={boxShadow:"sm",bg:"white"};return(0,i.jsxs)(a.h,{isAttached:!0,flex:"1",...m,children:[null!=u&&(0,i.jsx)(r.h,{display:"flex",onClick:n,icon:(0,i.jsx)(v.G,{icon:x.Kl4}),"aria-label":b.ag._({id:"MrRUp2"}),width:2,...h}),(0,i.jsx)(s.z,{flex:"1",...h,_hover:{color:"inherit"},cursor:"default",children:(0,i.jsx)(f.kH,{label:(0,i.jsx)(j.cC,{id:"ukrE78"}),placement:"top",children:(0,i.jsx)(o.U,{spacing:1,cursor:"help",children:(0,i.jsxs)(l.x,{children:[(0,i.jsx)(d.xu,{as:"span",css:{fontVariantNumeric:"tabular-nums"},children:u})," ",(0,i.jsx)(j.cC,{id:"MU+gFM",values:{0:null!=u?u:0}})]})})})}),null!=u&&(0,i.jsx)(r.h,{display:"flex",onClick:t,icon:(0,i.jsx)(v.G,{icon:x.r8p}),"aria-label":b.ag._({id:"sFY+gw"}),width:2,isDisabled:u>=c,...h})]})});k.displayName="CardCountStepper";let G=(0,w.memo)(e=>{let{cardCount:t,maxCards:n,onChange:a}=e,{openUpsellModal:r}=(0,y.z)(),d=(0,w.useMemo)(()=>[...Array(n)],[n]),f=(0,w.useMemo)(()=>[15,20,25,30].filter(e=>e>n),[n]),b=()=>{r({segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER})};return(0,i.jsxs)(c.v,{isLazy:!0,modifiers:[{name:"flip",options:{fallbackPlacements:["bottom","top","right-start","right-end","right"]}}],children:[(0,i.jsx)(u.j,{size:"sm",boxShadow:"none",minW:"32",textAlign:"left",as:s.z,rightIcon:(0,i.jsx)(v.G,{size:"xs",icon:x.ptq}),children:(0,i.jsx)(j.cC,{id:"fFAIng",values:{0:null!=t?t:0}})}),(0,i.jsx)(m.h,{children:(0,i.jsx)(h.q,{zIndex:"tooltip",maxH:"90vh",overflow:"auto",children:(0,i.jsxs)(g._,{onChange:e=>{let t=Number(e);if(t>n){b();return}a(t)},value:"".concat(t),children:[d.map((e,t)=>{let n=t+1;return(0,i.jsx)(p.i,{value:"".concat(n),children:(0,i.jsx)(j.cC,{id:"bM4Wv5",values:{count:n}})},n)}),f.map(e=>(0,i.jsx)(p.i,{bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},value:"".concat(e),children:(0,i.jsxs)(o.U,{spacing:"3",children:[(0,i.jsx)(l.x,{w:"100%",children:(0,i.jsx)(j.cC,{id:"bM4Wv5",values:{count:e}})}),e>n&&(0,i.jsx)(C.ER,{product:e<=I.sj?"plus":"pro"})]})},e))]})})})]})});G.displayName="CardCountDropdown"},43305:function(e,t,n){n.d(t,{O:function(){return x}});var i=n(52322),a=n(62614),r=n(29117),s=n(54933),o=n(49929),l=n(94523),d=n(5879),c=n(2784),u=n(85420),m=n(97763),h=n(25566),g=n(74153);let p=()=>{let[e]=(0,g.Ns)("imageProvider");return"aiGenerated"===e?"generateV2WithImages":"generateV2"},x=(0,c.memo)(e=>{let{onClick:t}=e,n=p(),{hasEnoughCreditsToGenerateDeck:c}=(0,m.qO)(),g=(0,m.YO)(t,"generateV2",h.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(l.kH,{label:(0,i.jsx)(d.cC,{id:"mTJ1YV"}),isDisabled:c,shouldWrapChildren:!0,children:(0,i.jsx)(a.z,{variant:"solid",w:"100%",rightIcon:(0,i.jsxs)(r.U,{children:[(0,i.jsx)(u.J,{type:n}),(0,i.jsx)(o.G,{icon:s.eFW})]}),onClick:g,size:{base:"md",lg:"lg"},children:(0,i.jsx)(d.cC,{id:"xGVfLh"})})})})});x.displayName="ContinueToThemePickerButton"},75816:function(e,t,n){n.d(t,{j:function(){return D}});var i=n(52322),a=n(62614),r=n(54933),s=n(49929),o=n(94523),l=n(87254),d=n(2784),c=n(704),u=n(97763),m=n(11050),h=n(5632),g=n(39486),p=n(78537),x=n(22537),v=n(39122),f=n(93624),j=n(42111),b=n(91994),w=n(84405),C=n(31181),y=n(15041),S=n(74411),I=n(14027),k=n(39278),G=n(45302),_=n(76282),A=n(41003);let N=e=>{let t=(0,A.Y)("ai_premium_models"),n=(0,j.ye)("generatorGPT4"),i=(0,j.ye)("geminiGenerate"),a=(0,j.ye)("geminiProGenerate"),r=(0,j.ye)("gpt4oMiniGenerate"),s=(0,j.ye)("gpt4oMiniGenerateLong"),o=(0,j.ye)("generatorBigModelAlways"),l=r?"gpt-4o-mini":i?"gemini-1.5-flash":"claude-3-haiku-20240307",c=s?"gpt-4o-mini":a?"gemini-1.5-pro":"claude-3-5-sonnet-20240620",u=(0,d.useCallback)(i=>{if(o)return c;if(!t&&!n)return l;let a="preserve"===i.textMode||!i.cardByCard&&("condense"===i.textMode||"generate"!==i.generationType),r=e>=600&&!i.cardByCard,s=i.numCards&&i.numCards>=11&&!i.cardByCard;return a||s||r?c:l},[t,n,e,l,c,o]);return u};var M=n(43019),E=n(56920),T=n(50634),z=n(57124),L=n(78462),V=n(96796);let R=()=>{let{push:e}=(0,h.useRouter)(),[t]=(0,f.V$$)(),n=(0,j.ye)("createSiteAi"),i=(0,z._O)(),{generate:a}=(0,T.jz)("DetermineSiteMetadata",{}),[r]=(0,f.gVY)(),[s]=(0,f.Iyu)(),[o]=(0,f.D1_)(),c=(0,d.useCallback)(async n=>{let{workspaceId:i,docId:d,themeId:c,generateVars:u,firstCards:m}=n,h=m[0]?(0,M.getCardTitle)(m[0].content):void 0,{data:g}=await t({variables:{input:{workspaceId:i,name:h||l.ag._({id:"h3eRam"}),routes:[{docId:d,path:"/"}],themeId:c}}}),p=null==g?void 0:g.createSite;if(!p){console.error("[CreateSiteModal] Failed to create site, no site returned"),e("/docs/".concat(d,"?source=").concat(v.VY));return}try{let e=m.map(e=>e.raw).join("\n"),{language:t,instructions:n,input:l}=u,{promise:c}=a({workspaceId:i,variables:{topic:n||"",input:l,language:t,pageHtml:e}}),h=await c,{title:g,subdomain:x}=(0,V.R)(h);x=(0,E.IR)(x);let v="string"==typeof x&&x.length<=60&&/^[a-z0-9-]+$/.test(x.toLowerCase()),f=[];v&&f.push(r({variables:{input:{siteId:p.id,name:x}}})),g&&f.push(...[s({variables:{input:{siteId:p.id,name:g}}}),o({variables:{id:d,title:g}})]),await Promise.all(f)}catch(e){console.error("(caught) useGenerateSite error: ".concat(e))}let x=(0,L.yQ)({docId:d,params:{source:v.VY}});e(x)},[t,e,a,r,s,o]);return{canCreateSite:n&&i,createSiteWithAIAndRedirect:c}};var q=n(5026),F=n(1071),O=n(37164);let P=()=>{let{push:e}=(0,h.useRouter)(),[t]=(0,f.qbt)(),{generate:n}=(0,T.jz)("DeterminePageMetadata",{}),[i]=(0,f.D1_)(),a=(0,d.useCallback)(async a=>{let{site:r,docId:s,workspaceId:o,generateVars:l,firstCards:d}=a;try{let{language:e,instructions:a,input:c}=l,u=r.routes.map(e=>{var t;return{title:null===(t=e.doc)||void 0===t?void 0:t.title,path:e.path}}),m=d.map(e=>e.raw).join("\n"),h=d[0]?(0,M.getCardTitle)(d[0].content):void 0,g=!0,{promise:p}=n({workspaceId:o,variables:{topic:a||"",input:c,language:e,otherPages:u,pageHtml:m}}),x=await p,{path:v,title:f}=(0,V.R)(x);f||(f=h||"Untitled page",g=!1),v||(v=(0,E.IR)(f)),v=(0,E.IR)(v),r.routes.some(e=>e.path===v)&&(v="".concat(v,"-").concat((0,O.x0)(6))),await Promise.all([t({variables:{input:{siteId:r.id,docId:s,path:(0,y.fJ)(v),offline:!1}},refetchQueries:["GetSite"]}),i({variables:{id:s,title:f,titleEdited:g}})])}catch(e){console.error("(caught) useSetPageMetadataWithAI error: ".concat(e))}let c=(0,L.yQ)({docId:s,params:{source:v.VY}});e(c)},[n,e,t,i]);return{setPageMetadataWithAIAndRedirect:a}},W=e=>{let{onSuccess:t}=e,{push:n}=(0,h.useRouter)(),i=(0,b.qr)(),a=(0,b.CG)(C.lH),{canCreateSite:r,createSiteWithAIAndRedirect:s}=R(),{setPageMetadataWithAIAndRedirect:o}=P(),[c]=(0,f.Kb4)(),u=(0,j.ye)("generatorLazyImages"),[m,A]=(0,d.useState)(!1),M=(0,j.ye)("streamResumingEnabled"),E=(0,b.CG)(_.mO),T=!0,z="",{maxTokens:L}=(0,F.ml)(),{maxCards:V}=(0,q.hw)();E>L&&(T=!1,z=l.ag._({id:"ZcJO3k",values:{maxTokens:L}}));let O=N(E),W=(0,f.jLg)(f.vGj),D=(0,d.useCallback)(async()=>{var e;let l=i.getState(),d=(0,_.RB)(l),m=(0,_.U6)(l);if(!m)throw Error("Cannot generate with no docGenerateInputId");A(!0);let h=(0,k.n_)(),b=(0,_.au)(l),C=(0,_.lb)(l),N=(0,G.jw)((0,_.Mn)("locale")(l)),T=(0,_.Mn)("textAmount")(l),z=(0,_.Mn)("audience")(l),L=(0,_.Mn)("tone")(l),R=(0,_.Lh)(l),q=(0,_.CC)(l),F=(0,_.Mn)("imageLicense")(l),P=(0,_.Mn)("imageProvider")(l),D=(0,_.Mn)("imageModel")(l)||j.VH.get("aiGeneratedImagesDefaultModel"),U=(0,_.Mn)("imageStyle")(l),B=(0,_.Mn)("textMode")(l),H=(0,_.Mn)("editorMode")(l),Y=(0,_.PB)(l),K=(0,_.Mn)("cardWidth")(l),J=(0,_.Mn)("cardDimensions")(l),Q="generate"!==Y,X={instructions:C,input:b,language:N.englishName,numCards:Math.min(q,V),format:R,textAmount:T,audience:z,tone:L,textMode:B,editorMode:H,imageProvider:"aiGenerated"===P?"aiGenerated":"web"},Z=(0,_.Mn)("themeId")(l),$=Z?(await W({id:Z})).data.theme:void 0,ee=U?"Custom":"Theme";"aiGenerated"===P&&!U&&$&&(U=(0,S.A)($));let et=r&&"webpage"===R,en=(0,y.Vr)(a)||et,ei=j.VH.get("generateSerial"),ea=ei&&"freeform"===X.editorMode&&(X.numCards>20||E>=8e3&&"preserve"===X.textMode),er=j.VH.get("generateParallel"),es=er&&"structured"===X.editorMode&&(X.numCards>=11||E>=4e3),eo=O({numCards:q,editorMode:H,textMode:B,cardByCard:es||ea,textAmount:T,locale:N,generationType:Y}),el={docFormatKey:R,imageOptions:{license:F,provider:P,generateStyle:U,model:D,stylePreset:ee},lazyImages:"aiGenerated"===P||u,theme:$,preserveLayouts:!1},ed={defaultContentWidth:K,cardDimensions:J},ec=await c({variables:{docGenerateInputId:m,options:{themeId:en?void 0:Z||I.g.id,orgAccess:en?f.y3$.Manage:void 0,docSettings:ed,aiOptions:{preserveLayouts:el.preserveLayouts,imageOptions:el.imageOptions}}}}),eu=null===(e=ec.data)||void 0===e?void 0:e.generateDoc,em=null==eu?void 0:eu.docGenerateInput.id;if(!em)throw Error("No docGenerateInput.id to use as interactionId");if(!eu)throw Error("Could not create doc");let{input:eh,instructions:eg,...ep}=X;x.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:em,inputContent:X.input,inputMessage:X.instructions,inputData:{options:{...el,theme:Z},isGenerateV2:!0,isAdvancedMode:Q,isParallel:es,generationType:Y,...ep,textAmount:T,format:R,language:X.language,model:eo,docSettings:ed},docId:eu.id,docGenerationId:d,docGenerateInputId:em});let{stream:ex,cancel:ev}=(0,p.ZE)({promptKey:ea?"GenerateDeckSerial":es?"GenerateDeckParallel":"GenerateDeck",interactionId:em,variables:{...X,model:eo},workspaceId:h},{streamId:eu.id,streamResumingEnabled:M,retries:3}),ef=await (0,g.m3)({stream:ex,onCancel:ev,interactionId:em,options:el,bufferCards:1,store:i,docId:eu.id}).promise;(0,w.Q)({doc_id:eu.id,source:f.L17.AiGenerated,extra:"v2"}),!a&&et?await s({workspaceId:h,docId:eu.id,generateVars:X,themeId:Z,firstCards:ef.cards}):a?(await o({docId:eu.id,site:a,workspaceId:h,generateVars:X,firstCards:ef.cards}),null==t||t()):n("/docs/".concat(eu.id,"?source=").concat(v.VY))},[r,O,s,o,c,W,u,V,t,n,a,i,M,E]);return{generate:D,isGenerating:m,canGenerate:T,cantGenerateReason:z}},D=(0,d.memo)(e=>{let{children:t,onClick:n,...h}=e,{onGenerateSuccess:g}=(0,c.Ry)(),{isGenerating:p,generate:x,canGenerate:v,cantGenerateReason:f}=W({onSuccess:g}),j=(0,d.useCallback)(async()=>{null==n||n(),await x()},[n,x]),b=(0,u.YO)(j,"generateV2",m.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,i.jsx)(o.kH,{label:f,shouldWrapChildren:!0,children:(0,i.jsx)(a.z,{leftIcon:(0,i.jsx)(s.G,{icon:r.JyM}),variant:"solid",isLoading:p,loadingText:l.ag._({id:"NOdFZR"}),isDisabled:p,onClick:b,size:{base:"md",lg:"lg"},...h,children:t})})});D.displayName="GenerateButton"},88397:function(e,t,n){n.d(t,{U:function(){return w}});var i=n(52322),a=n(43297),r=n(38035),s=n(29117),o=n(76282),l=n(14764),d=n(91994),c=n(25566),u=n(77533),m=n(94523),h=n(5879),g=n(2784),p=n(50896),x=n(74153),v=n(5026);let f=(0,g.memo)(e=>{let{...t}=e,n=(0,d.CG)(o.CC),[r,s]=(0,x.Ns)("numCards"),{maxCards:l}=(0,v.hw)(),c=(0,g.useCallback)(()=>{n&&s(Math.min(n+1,l))},[n,s,l]),f=(0,g.useCallback)(()=>{n&&1!==n&&s(n-1)},[n,s]),[j]=(0,x.Ns)("editorMode"),b=n>l,w=Math.min(n,l);return"structured"===j?(0,i.jsx)(m.kH,{label:(0,i.jsx)(h.cC,{id:"Zne1Sw"}),placement:"top",children:(0,i.jsxs)(a.K,{spacing:{base:.5,sm:2},flex:"1",justifyContent:"center",alignItems:"center",direction:{base:"column-reverse",sm:"row"},children:[(0,i.jsx)(u.x,{cursor:"help",fontSize:b?"xs":"lg",fontWeight:b?void 0:"600",textDecoration:b?"line-through":void 0,color:b?"gray.500":void 0,css:{textWrap:"nowrap"},textAlign:"center",children:(0,i.jsx)(h.cC,{id:"AZLIlg",values:{cardCount:n}})}),b&&(0,i.jsx)(u.x,{fontSize:{base:"md",sm:"lg"},fontWeight:"600",lineHeight:"1",children:(0,i.jsx)(h.cC,{id:"gcpsjO",values:{adjustedCardCount:w}})})]})}):(0,i.jsx)(p.Y,{maxCards:l,cardCount:n,onIncrement:c,onDecrement:f,...t})});f.displayName="CardCountSettings";var j=n(47728),b=n(42610);let w=e=>{let{cta:t}=e,n=(0,d.CG)(o.Vn),u=(0,d.CG)(o.$X);if(u)return null;let m=(0,i.jsx)(l.r,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:c.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"});return(0,i.jsx)(b.J,{children:(0,i.jsxs)(a.K,{w:"100%",direction:{base:"column-reverse",md:"row"},spacing:{base:2,md:4},alignItems:{base:"center",md:"flex-end"},children:[(0,i.jsx)(r.k,{flex:"1",children:m}),(0,i.jsxs)(a.K,{w:"2xl",maxW:"100%",overflow:"hidden",children:[(0,i.jsx)(j.$0,{}),(0,i.jsx)(j.NM,{}),(0,i.jsx)(j.wq,{}),(0,i.jsxs)(s.U,{spacing:{base:2,md:3},opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsx)(f,{size:{base:"md",lg:"lg"}}),(0,i.jsx)(r.k,{flex:"1",alignItems:"stretch",flexDirection:"column",children:t})]})]}),(0,i.jsx)(r.k,{flex:"1",display:{base:"none",md:"flex"}})]})})}},39486:function(e,t,n){n.d(t,{Nl:function(){return x},m3:function(){return v},c1:function(){return p}});var i=n(95993),a=n(41774),r=n(22537),s=n(6501);class o extends i.GJ{constructor(e,t){super({transform:async(t,n)=>{if("data"!==t.event){n.enqueue(t);return}let{data:i}=t,a=await (0,s.sj)(i,{cardIndex:this.index,docFormatKey:e.docFormatKey,imageOptions:e.imageOptions,loadImages:!e.lazyImages,theme:e.theme,preserveLayouts:e.preserveLayouts}),r={index:this.index,cardComplete:!0,content:a,id:a.attrs.id,raw:i};n.enqueue({id:t.id,event:"data",data:r}),this.index++}}),this.index=0,null!=t&&(this.index=t+1)}}let l=e=>{let t=e.match(/(<[^>]+>|<\/[^>]+>)|\S+/g);if(!t)throw Error("Could not parse tokens");return t};class d extends i.GJ{constructor(e){super({transform:async(t,n)=>{if("data"!==t.event){n.enqueue(t);return}let i=t.data,a=performance.now()-this.startTime,r=l(i.raw);e({index:this.index,duration:a,numTokens:r.length}),this.index++,this.startTime=performance.now(),n.enqueue(t)}}),this.index=0,this.startTime=performance.now()}}class c extends i.GJ{constructor(){super({transform:async(e,t)=>{"done"===e.event||"cancel"===e.event?t.enqueue({...e,content:this.content}):(this.content+=e.data.raw||"",t.enqueue(e))}}),this.content=""}}class u extends i.GJ{constructor(){let e=(e,t)=>{for(;;){let n=this._buffer.match(/<section\b[^>]*>(?:(?!<\/?section\b)[\s\S])*<\/section>/i);if(!n)break;let i=n[0],a=n.index;this._buffer=this._buffer.slice(a+i.length);let r=i+"\n\n";e.enqueue({id:t,event:"data",data:r})}};super({transform:async(t,n)=>{if("data"===t.event){if(!t.data)return;this._buffer+=t.data,e(n,t.id);return}this.lastId=t.id,n.enqueue(t)},flush:async t=>{e(t,this.lastId)}}),this._buffer=""}}class m extends i.GJ{constructor(){super({transform(e,t){if("done"===e.event){t.enqueue({id:e.id,event:"done",finishReason:e.data,content:""});return}if("cancel"===e.event){t.enqueue({id:e.id,event:"cancel",content:""});return}if("content"===e.event){t.enqueue({id:e.id,event:"data",data:e.data});return}console.error("[StreamMessageEventParser] unknown event type",e)}})}}var h=n(1010);let g="CANCEL",p=e=>new i.GJ({transform(t,n){e(t),n.enqueue(t)}}),x=e=>{let{stream:t,docId:n,lastCompletedCardId:i,lastCompletedCardIndex:s,interactionId:o,options:l,store:d}=e,c=f(t,l,s),[u,m]=c.tee(),g=u.pipeThrough(p(e=>{"done"===e.event&&r.a.trackStreamResponse(d,{interactionId:o,outputContent:e.content})}));(0,h.GO)(g,{}),d.dispatch((0,a.kO)({stream:{id:o,status:"running",stream:m,docId:n,isResuming:!0,lastCompletedCardId:i}}));let x=(0,a.oH)(n)(d.getState());if(!x)throw Error("Expected valid StreamResponse when resuming from stream");return x},v=e=>{let t,{stream:n,onCancel:i,interactionId:s,options:o,bufferCards:l=2,docId:c,store:u}=e,m=f(n,o),[x,v]=m.tee(),j=x.pipeThrough(new d(e=>{u.dispatch((0,a.Ms)({interactionId:s,data:e}))})).pipeThrough(p(e=>{"done"===e.event&&r.a.trackStreamResponse(u,{interactionId:s,outputContent:e.content})}));u.dispatch((0,a.kO)({stream:{id:s,status:"running",stream:v,isResuming:!1,docId:c}}));let b=new Promise((e,n)=>{t=n;let i=[];(0,h.GO)(j,{onError:e=>{n(e)},onMessage(t){if("done"===t.event){e({status:"READY",cards:i});return}if("data"===t.event){let n=t.data.index+1;i.push(t.data),n>=l&&e({status:"READY",cards:i})}}})}).catch(e=>{if(e===g)return{status:"CANCELED",cards:[]};throw e}),w=!1;return{promise:b,cancel:()=>{w||(console.log("[AIStream] cancelling..."),w=!0,i(),null==t||t(g))}}},f=(e,t,n)=>e.pipeThrough(new m).pipeThrough(new u).pipeThrough(new o(t,n)).pipeThrough(p(e=>{"data"===e.event&&console.log("[AIStream] processed card ".concat(e.data.index+1))})).pipeThrough(new c).pipeThrough(p(e=>{"done"===e.event&&console.log("[AIStream] done (".concat(e.finishReason,")")),"cancel"===e.event&&console.log("[AIStream] cancelled")}))},22537:function(e,t,n){n.d(t,{a:function(){return o}});var i=n(1163),a=n(39278),r=n(31490),s=n(41774);let o={trackRequestSent(e,t){console.log("[AIStream] EVENT: ai.request.sent"),t.product=(0,i.K9)((0,a.rW)()),(0,r.hq)(t);let n=performance.now();e.dispatch((0,s.Jh)({...t,startTime:n}))},trackStreamError(e,t){e.dispatch((0,s.fj)({endTime:performance.now(),interactionId:t.interactionId}));let n=(0,s.Sn)(t.interactionId)(e.getState());if(!n)return;let{startTime:i,...a}=n,{errorName:o,errorMessage:l,errorCode:d}=t,c={...a,errorName:o,errorMessage:l,errorCode:d,outputMessage:"",latency:performance.now()-i};console.log("[AIStream] EVENT: ai.request.error"),(0,r.pQ)(c)},trackStreamAbort(e,t){let n=(0,s.Sn)(t.interactionId)(e.getState());if(!n)return;let{startTime:i,...a}=n,o={...a,abortReason:t.abortReason,timeToAbort:performance.now()-i};console.log("[AIStream] EVENT: ai.request.abort"),(0,r.mV)(o)},trackStreamStart(e,t){e.dispatch((0,s.af)(t));let n=(0,s.Sn)(t.interactionId)(e.getState());if(!n)return;let{startTime:i,...a}=n,o={...a,timeToStart:performance.now()-i};console.log("[AIStream] EVENT: ai.request.streamStart"),(0,r.qZ)(o)},trackStreamResponse(e,t){e.dispatch((0,s.fj)({endTime:performance.now(),...t}));let n=(0,s.Sn)(t.interactionId)(e.getState());if(!n)return;let{startTime:i,...a}=n;console.log("[AIStream] EVENT: ai.request.response"),(0,r.o)(a)},trackStreamComplete(e,t,n){let i=(0,s.Sn)(t)(e.getState());if(!i)return;let{startTime:a,...o}=i,l={...o,timeToComplete:performance.now()-a,...n};console.log("[AIStream] EVENT: ai.request.complete"),(0,r.gb)(l)}}},18438:function(e,t,n){n.d(t,{L:function(){return j}});var i=n(52322),a=n(28535),r=n(38035),s=n(43297),o=n(77533),l=n(73200),d=n(2784),c=n(74411),u=n(5200),m=n(30673),h=n(22569),g=n(87205),p=n(15151),x=n(46751),v=n(27333),f=n(5995);let j=(0,d.memo)(e=>{let{theme:t,isSelected:n=!1}=e,{contentStyles:d}=t.config,j=(0,h.R5)(t),b=(0,c.wj)(t),w=(0,f.l)(t),C=(0,p.J)(t,!1),y=(0,h.wh)(j,b,g.Iv);return(0,i.jsx)(a.xu,{css:w,sx:C,w:"100%","data-theme-mobile-preview":t.id,children:(0,i.jsxs)(r.k,{flexDir:"column",w:"calc(100vw - 5rem)",sx:{"scroll-snap-align":"center"},borderRadius:"lg",shadow:n?"outline":"xl",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease-out",pos:"relative",...y,children:[(0,i.jsx)(u.P,{theme:t}),(0,i.jsx)(a.xu,{sx:{...x.Fx,...d},borderRadius:"base",className:"".concat(m.pL," ").concat(b?"is-dark":""),color:b?"white":"gray.900",flex:1,pointerEvents:"none",children:(0,i.jsxs)(s.K,{p:6,children:[(0,i.jsx)(o.x,{className:"block-title",noOfLines:1,wordBreak:"break-all",mt:"0 !important",mb:"var(--chakra-space-2) !important",children:(0,i.jsx)(o.x,{as:"span",className:(0,l.cx)("title",v.A8),fontSize:"1.8em !important",paddingBottom:"0 !important",children:t.name})}),(0,i.jsxs)(o.x,{fontSize:"sm",noOfLines:[4,6],className:"block block-paragraph",my:"0 !important",children:["Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi dapibus iaculis sagittis."," ",(0,i.jsxs)(o.x,{as:"a",className:"link",children:[" ","Fusce pellentesque quam tortor,"]})," ","sit amet vulputate ligula sollicitudin nec. Etiam consectetur leo sed elit euismod, eget suscipit purus ullamcorper. Etiam id viverra purus. Nulla hendrerit sapien eget dui egestas posuere. Cras tristique condimentum tristique. Sed pellentesque felis sed justo ullamcorper molestie. Vestibulum et condimentum nibh, non pellentesque nisi."]})]})})]})})});j.displayName="ThemePreviewThumbnailMobile"}}]);
//# sourceMappingURL=7665-a7bb579188e1329e.js.map