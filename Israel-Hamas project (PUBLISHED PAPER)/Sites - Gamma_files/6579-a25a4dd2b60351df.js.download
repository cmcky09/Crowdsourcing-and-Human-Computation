(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6579],{89644:function(e,t,n){e.exports=n(25644)},70353:function(e,t,n){"use strict";var i=n(93044),r=n(86955),s=n(92233),o=n(68030),l=n(97948),a=n(51875),c=n(60842),d=n(88618);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||c(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},25644:function(e,t,n){"use strict";var i=n(93044),r=n(73644),s=n(62215),o=n(92937);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(1439));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(26714),a.CancelToken=n(34089),a.isCancel=n(98041),a.all=function(e){return Promise.all(e)},a.spread=n(70783),a.isAxiosError=n(65587),e.exports=a,e.exports.default=a},26714:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},34089:function(e,t,n){"use strict";var i=n(26714);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},98041:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},62215:function(e,t,n){"use strict";var i=n(93044),r=n(68030),s=n(946),o=n(6895),l=n(92937),a=n(17525),c=a.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var d=[o,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(s),t=Promise.resolve(e);d.length;)t=t.then(d.shift(),d.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},d.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){d.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=d},946:function(e,t,n){"use strict";var i=n(93044);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},97948:function(e,t,n){"use strict";var i=n(99192),r=n(48762);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},88618:function(e,t,n){"use strict";var i=n(11935);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},6895:function(e,t,n){"use strict";var i=n(93044),r=n(38556),s=n(98041),o=n(1439);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},11935:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},92937:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function c(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,c),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var d=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===d.indexOf(e)});return i.forEach(u,c),n}},86955:function(e,t,n){"use strict";var i=n(88618);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},38556:function(e,t,n){"use strict";var i=n(93044),r=n(1439);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},1439:function(e,t,n){"use strict";var i,r=n(34406),s=n(93044),o=n(98868),l=n(11935),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?i=n(70353):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(i=n(70353)),i),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e))?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(s.isString(e))try{return(0,JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw l(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){d.headers[e]={}}),s.forEach(["post","put","patch"],function(e){d.headers[e]=s.merge(a)}),e.exports=d},73644:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},68030:function(e,t,n){"use strict";var i=n(93044);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},48762:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},92233:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},99192:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},65587:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},60842:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},98868:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},51875:function(e,t,n){"use strict";var i=n(93044),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},70783:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},17525:function(e,t,n){"use strict";var i=n(19521),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},93044:function(e,t,n){"use strict";var i=n(73644),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function d(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)d(arguments[i],n);return t},extend:function(e,t,n){return d(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},6185:function(e){var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),c=0;c<11;++c)a[c]=n(.1*c,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,c=i(l,e,o);return c>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===c?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},10161:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,s),!0;case 6:return d.fn.call(d.context,t,i,r,s,o),!0}for(c=1,a=Array(u-1);c<u;c++)a[c-1]=arguments[c];d.fn.apply(d.context,a)}else{var h,x=d.length;for(c=0;c<x;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];d[c].fn.apply(d[c].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,c=[],d=l.length;a<d;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&c.push(l[a]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},41857:function(e){"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},68642:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},45820:function(e,t,n){"use strict";n.d(t,{N:function(){return eg}});var i=n(52322),r=n(69251),s=n(30523),o=n(28535),l=n(42946),a=n(5879),c=n(2784),d=n(704),u=n(88791),h=n(75816),x=n(45760),p=n(91994),m=n(76282),f=n(17993),g=n(5740),j=n(43297),v=n(29117),C=n(77533),b=n(54933),y=n(49929),k=n(74153),w=n(75258);let S=(0,c.memo)(()=>{let[e]=(0,k.Ns)("editorMode");return(0,i.jsxs)(f.g,{spacing:3,align:"stretch",children:[(0,i.jsx)(o.xu,{fontSize:"sm",children:(0,i.jsx)(a.cC,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(E,{title:w.D.freeform.label(),icon:w.D.freeform.icon,children:(0,i.jsx)(a.cC,{id:"ELg7Zs",values:{0:w.D.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E,{title:w.D.structured.label(),icon:w.D.structured.icon,children:(0,i.jsx)(a.cC,{id:"iKG7iK",values:{0:w.D.structured.label()}})}),(0,i.jsx)(E,{title:(0,i.jsx)(a.cC,{id:"+mgW41"}),icon:l.Yai,children:(0,i.jsx)(a.cC,{id:"oGNrqw",components:{0:(0,i.jsx)(g.T,{})}})}),(0,i.jsx)(E,{title:(0,i.jsx)(a.cC,{id:"1Nr9Bi"}),icon:b.BDt,children:(0,i.jsx)(a.cC,{id:"5cPTto",components:{0:(0,i.jsx)(g.T,{})}})})]})]})});S.displayName="AIGeneratorTips";let E=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.xu,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(j.K,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(v.U,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(y.G,{icon:t}),(0,i.jsx)(C.x,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(C.x,{fontSize:"sm",children:r})]})})};var I=n(51874),A=n(93546),_=n(8484),T=n(87651),O=n(62614);let D=(0,c.memo)(()=>{let e=(0,p.TL)(),t=(0,p.qr)(),n=(0,p.CG)(m.Zm),r=(0,p.CG)(m.d_),s=(0,p.CG)(m.Vn),d=(0,k.o7)(),u=(0,c.useCallback)(()=>{let n=(0,m.jj)(t.getState()),i=n.find(e=>e.isDraft);i&&e((0,m.J7)({num:i.num}))},[e,t]);return(0,i.jsx)(o.xu,{children:n&&(0,i.jsx)(T.U,{in:s,children:(0,i.jsxs)(j.K,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(v.U,{flex:"1",children:[(0,i.jsx)(y.G,{icon:l.On6}),(0,i.jsxs)(j.K,{spacing:0,children:[(0,i.jsx)(C.x,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(a.cC,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(C.x,{children:(0,i.jsx)(a.cC,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(O.z,{variant:"solid",colorScheme:"primary",onClick:d,children:(0,i.jsx)(a.cC,{id:"u52q7m"})}),(0,i.jsx)(O.z,{onClick:u,variant:"plain",children:(0,i.jsx)(a.cC,{id:"dEgA5A"})})]})})})});D.displayName="OverrideDraftWarning";var R=n(75768),P=n(32899),L=n(10625),z=n(67046),N=n(332),G=n(99058),M=n(44035),U=n(39237),F=n(27599),W=n(94523),H=n(18149),B=n.n(H);let q={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},V=(0,c.memo)(()=>{let e=(0,p.qr)(),t=(0,p.TL)(),n=(0,k.vS)(),r=(0,p.CG)(m.jj,(e,t)=>B()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:d}=(0,W.o5)(),u=(0,p.CG)(m.Zm),h=(0,c.useCallback)(()=>{t((0,m.ly)());let i=(0,m.au)(e.getState());n(i,!1)},[t,n,e]),x=(0,c.useCallback)(()=>{t((0,m.np)());let i=(0,m.au)(e.getState());n(i,!1)},[t,n,e]),f=(0,c.useCallback)(i=>{t((0,m.J7)({num:i}));let r=(0,m.au)(e.getState());n(r,!1)},[t,n,e]);if(0===r.length)return null;let g=r.findIndex(e=>e.isCurrent),j=r[g],v=g<r.length-1;return u?(0,i.jsxs)(R.h,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(P.h,{display:{base:"none",md:"inline-flex"},isDisabled:!(g>0),"aria-label":"previous version",onClick:x,...q,icon:(0,i.jsx)(y.G,{icon:l.A35,fixedWidth:!0})}),(0,i.jsxs)(L.v,{closeOnSelect:!0,children:[(0,i.jsx)(d,{children:(0,i.jsx)(W.kH,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(z.j,{colorScheme:"gray",minW:"10",size:"sm",as:O.z,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(N.h,{children:(0,i.jsxs)(G.q,{maxW:"260px",children:[(0,i.jsx)(M._,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(U.i,{value:String(e.num),onClick:()=>{f(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(C.x,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(F.R,{}),(0,i.jsx)(o.xu,{py:1,px:2,children:(0,i.jsx)(C.x,{fontSize:"xs",children:(0,i.jsx)(a.cC,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(P.h,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...q,icon:(0,i.jsx)(y.G,{icon:l._tD,fixedWidth:!0})})]}):null});V.displayName="VersionSwitcher";var K=n(67109),Z=n(49259),Y=n(74008),J=n(90980),X=n(1071),Q=n(35183),$=n(97166),ee=n(29494),et=n(82655),en=n(87254),ei=n(16893),er=n(97412),es=n(63304),eo=n(22902),el=n(39092);let ea=(0,c.memo)(()=>{let[e,t]=(0,k.ip)(),[n,r]=(0,k.Ns)("cardDimensions"),[s,o]=(0,k.Ns)("cardWidth"),l=(0,ei.A)(eo._J);return(0,i.jsx)(el.j,{label:(0,i.jsx)(a.cC,{id:"kI1qVD"}),colorScheme:"orchid",icon:b.Y$l,values:[l[e].label()],children:(0,i.jsxs)(f.g,{spacing:4,align:"start",children:[(0,i.jsxs)(Q.NI,{children:[(0,i.jsx)(eo.FQ,{selectedFormat:e,setSelectedFormat:e=>{t(e);let{cardDimensions:n}=(0,es.sJ)(e);n&&r(n)}}),(0,i.jsx)(el.i,{children:(0,i.jsx)(a.cC,{id:"qJHyoI"})})]}),(0,i.jsxs)(Q.NI,{children:[(0,i.jsx)($.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"mbS8l0"})}),(0,i.jsx)(er.Ft,{cardDimensions:n,updateCardDimensions:r}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"Q3Qdcd"})})})]}),(0,i.jsxs)(Q.NI,{children:[(0,i.jsx)($.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"cPp+Ef"})}),(0,i.jsx)(R.h,{size:"sm",isAttached:!0,width:"100%",children:ec.map(e=>{let t="default"===e.key?void 0:e.key;return(0,i.jsx)(O.z,{variant:t===s?"plainSelected":"plain",leftIcon:(0,i.jsx)(y.G,{icon:e.icon,color:"var(--chakra-colors-trueblue-500)"}),boxShadow:"none",onClick:()=>o(t),width:"100%",children:e.label()},e.key)})}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"LiF+HT"})})})]}),(0,i.jsxs)(Q.NI,{children:[(0,i.jsx)($.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"G57+qO"})}),(0,i.jsx)(ed,{})]})]})})}),ec=[{key:"default",label:()=>en.ag._({id:"TJBHlP"}),icon:et.pL1},{key:"lg",label:()=>en.ag._({id:"I5S9ZE"}),icon:et.r9b}];ea.displayName="FormatSettingsGroup";let ed=(0,c.memo)(()=>{let[e,t]=(0,k.Q_)(),n=(0,c.useCallback)(e=>t(e.target.value),[t]);return(0,i.jsx)(ee.g,{value:e||"",onChange:n,bg:"white",placeholder:en.ag._({id:"LLAa/9"}),maxLength:es.V4})});ed.displayName="PromptInput";var eu=n(33872),eh=n(62141);let ex=(0,c.memo)(e=>{let{isLoading:t}=e,n=(0,p.CG)(m.Vn);return(0,i.jsxs)(f.g,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.xu,{fontSize:"sm",children:[(0,i.jsx)(a.cC,{id:"Tz0i8g"})," ",(0,i.jsx)(W.Yq,{label:(0,i.jsx)(a.cC,{id:"FDel/s"})})]}),t?(0,i.jsxs)(j.K,{children:[(0,i.jsx)(K.O,{height:16}),(0,i.jsx)(K.O,{height:16}),(0,i.jsx)(K.O,{height:16})]}):(0,i.jsxs)(Z.U,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:j.K,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(Y.i,{}),boxShadow:"sm",children:[(0,i.jsx)(eh.o,{}),(0,i.jsx)(eu.Td,{}),(0,i.jsx)(ea,{})]}),(0,i.jsx)(o.xu,{display:{base:"none",lg:"block"},children:(0,i.jsx)(ep,{})})]})});ex.displayName="AIGeneratorSettings";let ep=(0,c.memo)(()=>{let e=(0,p.CG)(m.mO),{maxTokens:t}=(0,X.ml)();return(0,i.jsx)(J.H,{charCount:e,max:t,shouldShow:!0})});ep.displayName="AIGeneratorCharacterCount";var em=n(43305),ef=n(88397);let eg=(0,c.memo)(()=>{let[e,t]=(0,c.useState)("outline"),{skipThemeStep:n}=(0,d.Ry)(),f=(0,p.TL)();(0,c.useEffect)(()=>()=>{f((0,m.fB)())},[f]);let g=(0,c.useCallback)(()=>{t("outline")},[]),j="theme"===e?void 0:(0,i.jsx)(a.cC,{id:"opD9db"});return(0,i.jsx)(x.jX,{children:(0,i.jsxs)(I.v4,{children:[(0,i.jsx)(_.D,{onClick:"theme"===e?g:void 0,navIconOverride:"theme"===e?l.acZ:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(a.cC,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:j,rightItem:"outline"===e?(0,i.jsx)(V,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.r,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.P,{area:"overrideWarning",children:(0,i.jsx)(D,{})}),(0,i.jsx)(s.P,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ex,{isLoading:!1})}),(0,i.jsx)(s.P,{area:"editor",h:"100%",children:(0,i.jsx)(A.e,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"}},showContentTip:!0})}),(0,i.jsx)(s.P,{area:"tips",children:(0,i.jsx)(S,{})})]}),(0,i.jsx)(o.xu,{height:"20vh"})," ",(0,i.jsx)(ef.U,{cta:n?(0,i.jsx)(h.j,{children:(0,i.jsx)(a.cC,{id:"ziAjHi"})}):(0,i.jsx)(em.O,{onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(u.O,{}):null]})})});eg.displayName="AIGeneratorPage"},13871:function(e,t,n){"use strict";n.d(t,{j:function(){return q}});var i=n(52322),r=n(43297),s=n(28535),o=n(77533),l=n(11082),a=n(17993),c=n(74409),d=n(62614),u=n(17190),h=n(54933),x=n(49929),p=n(5879),m=n(87254),f=n(2784),g=n(40312),j=n(93624),v=n(42111),C=n(92329),b=n(91994),y=n(11050),k=n(86581),w=n(18455),S=n(5632),E=n(50267);let I=()=>{let[e]=(0,j.JBp)();return(0,f.useCallback)(async t=>{var n;let{settings:i}=t,r=await e({variables:{input:{workspaceId:(0,E.n_)(),generationType:j.FJd.UploadPptV2,input:{prompt:i.filename,format:j.j6H.Deck,settings:i}}}});if(r.errors){let e=r.errors.map(e=>e.message).join("\n\n");throw Error("Got the following graphql errors:\n\n"+e)}return null===(n=r.data)||void 0===n?void 0:n.createDocGeneration},[e])},A=()=>{let e=I(),{push:t}=(0,S.useRouter)(),[n,i]=(0,f.useState)(!1),[r,s]=(0,f.useState)(null),o=(0,f.useCallback)(async n=>{i(!0);let r={pdfUrl:n.pdfUrl,htmlUrl:n.xhtmlUrl,filename:n.filename,thumbnails:n.thumbnails};try{let n=await e({settings:r});if(!n)throw Error("Unable to create doc generation");t("/create/import-ppt/".concat(n.id))}catch(e){s(e.message),i(!1)}},[e,t]);return{continueToPptImport:o,isLoading:n,error:r}};var _=n(96796),T=n(76282),O=n(42655),D=n(95227),R=n(82863),P=n(14274),L=n(51874),z=n(83633),N=n(8484);let G=e=>{let{children:t}=e;return(0,i.jsx)(R.rg,{clientId:P.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsxs)(L.v4,{children:[(0,i.jsx)(N.D,{}),(0,i.jsx)(z.U,{title:(0,i.jsx)(p.cC,{id:"eumYBf"}),subtitle:(0,i.jsx)(p.cC,{id:"7aFH7x"}),icon:(0,i.jsx)(x.G,{icon:h.Vmj}),iconBoxProps:{color:"purple.300"},children:(0,i.jsx)(u.W,{maxW:"4xl",display:"flex",flexDirection:"column",alignItems:"center",children:t})})]})})};var M=n(94493),U=n(82655),F=n(22902);let W=(0,f.memo)(e=>{let{value:t,onSelect:n}=e;return(0,i.jsxs)(r.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,i.jsx)(s.xu,{flex:"1",children:(0,i.jsx)(F.qe,{label:(0,i.jsx)(p.cC,{id:"hEgO4f"}),icon:U.JyM,selectedIcon:h.JyM,onClick:()=>{n("text")},isSelected:"text"===t,description:(0,i.jsx)(p.cC,{id:"9GItSL",components:{0:(0,i.jsx)("strong",{})}})})}),(0,i.jsx)(s.xu,{flex:"1",children:(0,i.jsx)(F.qe,{label:(0,i.jsx)(p.cC,{id:"Mm48EF"}),icon:U.qHV,selectedIcon:h.qHV,onClick:()=>{n("vision")},description:(0,i.jsx)(p.cC,{id:"ApxVH5",components:{0:(0,i.jsx)("strong",{})}}),isSelected:"vision"===t,badge:"Beta"})})]})});W.displayName="PptImportTypeSelector";var H=n(704);let B={GoogleDocs:j.FJd.ImportGoogleDoc,GoogleSlides:j.FJd.ImportGoogleSlides,PptxUpload:j.FJd.UploadPpt,DocxUpload:j.FJd.UploadWordFile,WebpageUrl:j.FJd.ImportWebpage,PdfUpload:j.FJd.ImportPdf},q=(0,f.memo)(()=>{let e=(0,b.TL)(),t=(0,y.z$)(),{guessSettings:n,isLoading:S}=(0,_.d)({ref:"createImport"}),{goToScreen:E}=(0,H.Ry)(),I=(0,v.ye)("pptImportV2"),[R,P]=(0,f.useState)("freeform"),L=(0,b.CG)(T.$Q),z=(null==L?void 0:L.source)==="PptxUpload"||(null==L?void 0:L.source)==="GoogleSlides",[N,U]=(0,f.useState)("deck"),[q,V]=(0,f.useState)("text"),K=(0,f.useCallback)(n=>{let{source:i,src:r}=n;e((0,T.c_)(n)),"GoogleSlides"===i||"PptxUpload"===i?P("structured"):P("freeform"),r&&(null==t||t.track(y.AA.DOC_IMPORTED,{source:i,src:r,with_ai:!0,latency:n.latency}))},[e,t]),{continueToPptImport:Z,isLoading:Y}=A(),J=(0,g.Lm)(),X=(0,f.useCallback)(async()=>{if(!L)return;if(z&&I&&"vision"===q){await Z(L);return}let e=L.markdown,t=B[L.source];if(!e){let t=(0,w.B)(L.html);e=(0,k.c$)(t,void 0,O.G)}if(z&&I&&"text"===q)try{let t=await J(L);t&&(e=(0,g.fo)(e,t))}catch(e){console.error("[caught] Error parsing PPT HTML: ".concat(e))}let i="GoogleDocs"===L.source||"DocxUpload"===L.source||"PdfUpload"===L.source||"WebpageUrl"===L.source,r={format:N,content:e||"",settings:{textMode:i&&"document"!==N?"condense":i||"document"!==N?I&&z&&"text"===q?"generate":"preserve":"generate",editorMode:R}};await n(t,r)},[L,z,I,q,N,R,n,Z,J]),Q=(0,f.useCallback)(()=>{e((0,T.c_)(void 0))},[e]);return(0,i.jsxs)(G,{children:[!L&&(0,i.jsxs)(r.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,i.jsx)(C.v,{onImportComplete:K}),(0,i.jsx)(s.xu,{w:"100%",children:(0,i.jsx)(o.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(p.cC,{id:"HmmZUO",components:{0:(0,i.jsx)(l.r,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),E("createPaste",{ref:"createImport"})}})}})})})]}),L&&(0,i.jsxs)(a.g,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,i.jsx)(M.L,{importedFile:L,handleDelete:Q}),(0,i.jsxs)(a.g,{spacing:4,w:"100%",children:[!z&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(p.cC,{id:"SjATqV"})}),(0,i.jsx)(F.FQ,{setSelectedFormat:U,selectedFormat:N})]}),(0,i.jsx)(s.xu,{width:"100%",children:(0,i.jsx)(d.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(x.G,{icon:h.eFW}),onClick:X,isLoading:S,loadingText:m.ag._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(p.cC,{id:"xGVfLh"})})})]}),z&&(0,i.jsxs)(i.Fragment,{children:[I&&(0,i.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(p.cC,{id:"ETAPks"})}),(0,i.jsx)(W,{value:q,onSelect:V})]}),"text"===q&&(0,i.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(c.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(p.cC,{id:"SjATqV"})}),(0,i.jsx)(F.FQ,{setSelectedFormat:U,selectedFormat:N})]}),(0,i.jsx)(s.xu,{width:"100%",children:(0,i.jsx)(d.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(x.G,{icon:h.eFW}),onClick:X,isLoading:S||Y,loadingText:m.ag._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(p.cC,{id:"xGVfLh"})})})]})]})]}),(0,i.jsx)(u.W,{maxW:"2xl",pb:"10vw",mt:16,children:(0,i.jsx)(D.F,{generationTypes:[j.FJd.ImportPdf,j.FJd.ImportWebpage,j.FJd.ImportGoogleDoc,j.FJd.ImportGoogleSlides,j.FJd.UploadPpt,j.FJd.UploadPptV2,j.FJd.UploadWordFile]})})]})});q.displayName="CreateImportPage"},94493:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var i=n(52322),r=n(17993),s=n(29117),o=n(28535),l=n(77533),a=n(36474),c=n(32899),d=n(42946),u=n(54933),h=n(49929),x=n(94523),p=n(5879),m=n(87254);let f=e=>{let{importedFile:t,handleDelete:n}=e;return(0,i.jsx)(r.g,{spacing:4,align:"stretch",w:"100%",children:(0,i.jsxs)(s.U,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,i.jsx)(o.xu,{color:"green.500",fontSize:"lg",children:(0,i.jsx)(h.G,{icon:u.f8k})}),(0,i.jsx)(l.x,{noOfLines:1,children:null==t?void 0:t.filename}),(0,i.jsx)(a.L,{}),(0,i.jsx)(x.kH,{placement:"top",label:(0,i.jsx)(p.cC,{id:"cILfnJ"}),children:(0,i.jsx)(c.h,{onClick:n,variant:"ghost",colorScheme:"red","aria-label":m.ag._({id:"cILfnJ"}),icon:(0,i.jsx)(h.G,{icon:d.Vui})})})]})})}},35672:function(e,t,n){"use strict";n.d(t,{B:function(){return w}});var i=n(52322),r=n(17190),s=n(43297),o=n(69251),l=n(30523),a=n(11082),c=n(42946),d=n(54933),u=n(49929),h=n(5879),x=n(2784),p=n(16983),m=n(51874),f=n(42111),g=n(91994),j=n(76282),v=n(95227),C=n(83633),b=n(704),y=n(8484);let k=e=>{let{createGenerateV2Enabled:t}=e,n=f.VH.get("importUrl");return{paste:{label:(0,i.jsx)(h.cC,{id:"Q4xH1Z"}),description:(0,i.jsx)(h.cC,{id:"MxbdK6"}),icon:d.nfZ,colorScheme:"pink",imageUrl:"/_next/static/media/Thumbnail-paste.fdba31f6.svg",transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(h.cC,{id:"ziAjHi"}),description:(0,i.jsx)(h.cC,{id:"anOFr5"}),icon:d.JyM,colorScheme:"trueblue",imageUrl:"/_next/static/media/Thumbnail-generate.8e2e4605.svg",isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(h.cC,{id:"krF+YI"}):(0,i.jsx)(h.cC,{id:"2xoyqj"}),description:n?(0,i.jsx)(h.cC,{id:"fG2B2z"}):(0,i.jsx)(h.cC,{id:"5c5WYH"}),icon:d.Vmj,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-transform.76b5e76e.svg",transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},w=(0,x.memo)(()=>{let e=(0,g.TL)(),{goToScreen:t,navEnabled:n}=(0,b.Ry)(),d=(0,f.ye)("createGenerateV2");return(0,i.jsxs)(m.v4,{children:[n&&(0,i.jsx)(y.D,{}),(0,i.jsx)(C.U,{title:(0,i.jsx)(h.cC,{id:"1zuBj5"}),subtitle:(0,i.jsx)(h.cC,{id:"h0sjMM"}),children:(0,i.jsx)(r.W,{maxW:"4xl",children:(0,i.jsx)(s.K,{spacing:12,align:"center",children:(0,i.jsx)(o.r,{gap:[4,4,2],gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(k({createGenerateV2Enabled:d})).map(n=>{let[r,{label:s,description:o,isPopular:d,colorScheme:x,imageUrl:m,transform:f,screen:g}]=n;return(0,i.jsx)(l.P,{area:r,children:(0,i.jsx)(p.X,{as:a.r,label:s,description:o,isPopular:d,colorScheme:x,imageUrl:m,transform:f,onClick:n=>{e((0,j._8)()),n.preventDefault(),n.stopPropagation(),t(g,{ref:"createWithAI"})},ctaIcon:(0,i.jsx)(u.G,{icon:c.eFW}),ctaLabel:(0,i.jsx)(h.cC,{id:"xGVfLh"})})},r)})})})})}),(0,i.jsx)(r.W,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(v.F,{})})]})});w.displayName="CreatePage"},49197:function(e,t,n){"use strict";n.d(t,{L:function(){return D}});var i=n(52322),r=n(17190),s=n(17993),o=n(28535),l=n(87651),a=n(74409),c=n(62614),d=n(77533),u=n(11082),h=n(42946),x=n(54933),p=n(49929),m=n(94523),f=n(5879),g=n(87254),j=n(2784),v=n(51874),C=n(45760),b=n(28918),y=n(93624),k=n(91994),w=n(93546),S=n(96796),E=n(76282),I=n(54012),A=n(22902),_=n(83633),T=n(704),O=n(8484);let D=(0,j.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,S.d)({ref:"createPaste"}),n=(0,k.CG)(E.au),[D,R]=(0,j.useState)(!1),[P,L]=(0,j.useState)("deck"),{goToScreen:z}=(0,T.Ry)(),N=(0,j.useCallback)(async()=>{let t=(0,I.Yl)(n),i=(0,I.vE)(n),r=(0,b.J1)(n);await e(y.FJd.PasteText,{format:P,content:n,settings:{textMode:r>=1e3?"document"===P?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform"}})},[e,P,n]);return(0,i.jsx)(C.jX,{children:(0,i.jsxs)(v.v4,{children:[(0,i.jsx)(O.D,{}),(0,i.jsx)(_.U,{title:(0,i.jsx)(f.cC,{id:"RG+JLG"}),subtitle:(0,i.jsx)(f.cC,{id:"v2ydVh"}),icon:(0,i.jsx)(p.G,{icon:x.OEL}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.W,{maxW:"2xl",children:(0,i.jsxs)(s.g,{spacing:4,w:"100%",children:[(0,i.jsx)(s.g,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(w.e,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;R(!t.isEmpty)}})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:D,children:(0,i.jsxs)(s.g,{spacing:4,py:2,w:"100%",children:[(0,i.jsx)(a.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(f.cC,{id:"SjATqV"})}),(0,i.jsx)(A.FQ,{setSelectedFormat:L,selectedFormat:P})]})})}),(0,i.jsx)(m.kH,{label:n?"":(0,i.jsx)(f.cC,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(c.z,{size:"lg",minW:"16em",width:"100%",onClick:N,variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:h.eFW}),isLoading:t,isDisabled:!n,loadingText:g.ag._({id:"qgUvjm"}),children:(0,i.jsx)(f.cC,{id:"xGVfLh"})})})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:!D,children:(0,i.jsx)(d.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(f.cC,{id:"LVQnRo",components:{0:(0,i.jsx)(u.r,{onClick:e=>{e.preventDefault(),z("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});D.displayName="CreatePastePage"},21723:function(e,t,n){"use strict";n.d(t,{B:function(){return c}});var i=n(52322),r=n(38035),s=n(2784),o=n(71113),l=n(67496),a=n(51874);let c=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=(0,l.HL)({id:t});return s?(0,i.jsx)(r.k,{...a.ZQ,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.AA,{})}):(0,i.jsx)(i.Fragment,{children:n})});c.displayName="LoadDocGenerationPage"},90537:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});let i="ppt-import"},33022:function(e,t,n){"use strict";n.d(t,{C:function(){return j}});var i=n(52322),r=n(29117),s=n(5740),o=n(77533),l=n(28535),a=n(43297),c=n(74409),d=n(20437),u=n(74008),h=n(62614),x=n(42946),p=n(54933),m=n(49929),f=n(5879);n(2784);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.U,{children:[n.map((e,t)=>(0,i.jsx)(s.T,{padding:1,children:e},t)),(0,i.jsx)(o.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.xu,{children:(0,i.jsxs)(a.K,{spacing:6,children:[(0,i.jsxs)(a.K,{spacing:1,children:[(0,i.jsxs)(r.U,{color:"gray.500",children:[(0,i.jsx)(m.G,{icon:x.UFh})," ",(0,i.jsx)(c.X,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.cC,{id:"h7MgpO"})})]}),(0,i.jsx)(c.X,{size:"md",children:(0,i.jsx)(f.cC,{id:"UodEcE"})})]}),(0,i.jsxs)(d.M,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.acZ},"left"),(0,i.jsx)(m.G,{icon:p.eFW},"right")]}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.i,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.FPD},"up"),(0,i.jsx)(m.G,{icon:p.r5q},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,i.jsx)(h.z,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.cC,{id:"76gPWk"})})]})},"coach-bar")}},86783:function(e,t,n){"use strict";n.d(t,{z:function(){return j}});var i=n(52322),r=n(38035),s=n(87254),o=n(2784),l=n(64467),a=n(91994),c=n(3253),d=n(91579),u=n(58879),h=n(46741),x=n(97676);let p={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"left !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},m={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...p,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...x.FC}},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...p,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...x.FC},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},g=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...m,...h.dE,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?f:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},j=(0,o.memo)(e=>{let{isEditable:t,notesSx:n,canShowEditHint:h=!1,isDark:x=!1}=e,[p,m]=(0,o.useState)(null),{destroyEditor:f,mountEditor:j}=(0,a.CG)(l.Vy),v=(0,o.useRef)(!1);(0,o.useEffect)(()=>(j&&m(j()),()=>{null==f||f(),m(null)}),[f,j]),(0,o.useEffect)(()=>{p&&t&&!v.current&&(p.commands.focus("end"),v.current=!0)},[t,p]),(0,o.useEffect)(()=>{if(p){if(p.shouldUseLiteMenus=!0,t&&!p.isEditable){p.setEditable(!0);return}if(!t&&p.isEditable){p.setEditable(!1);return}}},[t,p]);let C=t?s.ag._({id:"fnNtuR"}):"Double click to edit",b=h&&p&&p.isEmpty,y=g({isDark:x});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.k,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:x?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...u.BI,content:'"'.concat(C,'"')},...y,...n,_before:b?{...u.BI,top:2,left:2,height:"auto",width:"auto",content:'"'.concat(s.ag._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.k,{flex:1,flexDirection:"column",children:p&&(0,i.jsx)(d.k,{editor:p,className:"highlight-mask",style:{height:"100%"}})})}),p&&(0,i.jsx)(c.u,{editor:p,appendToSelector:"[data-card-notes-bubble-menu-target]"})]})});j.displayName="CardNotesEditor"},75692:function(e,t,n){"use strict";n.d(t,{nP:function(){return T},tE:function(){return E},vP:function(){return S}});var i=n(52322),r=n(77533),s=n(332),o=n(28535),l=n(74409),a=n(69251),c=n(30523),d=n(19783),u=n(32899),h=n(54933),x=n(49929),p=n(5879),m=n(87254),f=n(87202),g=n(2784),j=n(17292),v=n(87827),C=n(91994),b=n(12825),y=n(44677),k=n(58184);let w=(0,f.ZP)("mod+Escape"),S=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),E=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,b._)(),{editCardInPresentMode:r}=(0,y.l)({editor:i}),s=(0,C.CG)(v.C),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,k._)();return(0,g.useEffect)(function(){if(t)return j.F7.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;switch(S.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault()),e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(w(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},I=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},A={ArrowUp:{icon:h.FPD,label:(0,i.jsx)(p.cC,{id:"VbggDE"}),ariaLabel:()=>m.ag._({id:"VbggDE"}),shortcuts:["","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:h.acZ,label:(0,i.jsx)(p.cC,{id:"4jciC3"}),ariaLabel:()=>m.ag._({id:"4jciC3"}),shortcuts:["","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:h.r5q,label:(0,i.jsx)(p.cC,{id:"e3GOIZ"}),ariaLabel:()=>m.ag._({id:"e3GOIZ"}),shortcuts:["","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:h.eFW,label:(0,i.jsx)(p.cC,{id:"ZjQRVw"}),ariaLabel:()=>m.ag._({id:"ZjQRVw"}),shortcuts:["","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:h.GTX,label:(0,i.jsx)(p.cC,{id:"Xon9jp"}),ariaLabel:()=>m.ag._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},_=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.x,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},T=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.h,{children:(0,i.jsxs)(o.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,i.jsx)(l.X,{children:(0,i.jsx)(p.cC,{id:"wja8aL"})}),(0,i.jsx)(a.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(A).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:a,shortcuts:h,key:p,onClick:m}=e,f=t===p;return(0,i.jsx)(c.P,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(d.u,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.x,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(_,{shortcuts:h})]}),children:(0,i.jsx)(u.h,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:f||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,i.jsx)(x.G,{icon:o})})})},p)})})]})})}},44677:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(2784),r=n(91994),s=n(47968);let o=e=>{let{editor:t}=e,n=(0,r.TL)(),o=(0,r.qr)(),l=(0,i.useCallback)(()=>{let e=(0,s.wc)(o.getState());e&&(n((0,s.e)({isEditingInSlideView:!0})),n((0,s.Qx)({attached:!1})),n((0,s.kI)()),null==t||t.commands.turnOffSpotlight())},[t,n,o]);return{editCardInPresentMode:l}}},58184:function(e,t,n){"use strict";n.d(t,{_:function(){return m}});var i=n(2784),r=n(34922),s=n(91994),o=n(24781),l=n(11050),a=n(97857),c=n(61750),d=n(82400),u=n(54999),h=n(47968),x=n(12825);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.cC)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){let t=i.isAtBottom(90),o=t&&n&&e.commands.spotlightNextCard(!1,"top");if(!o){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else{let t=i.isAtTop(90),s=t&&n&&e.commands.spotlightNextCard(!0,"bottom");if(!s){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.R0.MAIN_PRESENT_VIEW,{editor:t}=(0,x._)(),n=(0,l.z$)(),{enabled:o}=(0,c.gZ)(t),m=(0,s.qr)(),f=(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:c="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.k8)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,d.Jg)(t,g)),C=Object.keys((0,h.X9)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.kI)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.Qx)({attached:!1})),!0}case"arrowRight":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_NEXT,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_PREV,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_DOWN,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_UP,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(C[0])return(0,r.p7)(),t.commands.spotlightCardById(C[0]),m.dispatch((0,h.Qx)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.Qx)({attached:!1})),null==n||n.track(l.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j,n=t.commands.expandOrCollapseExpandableNode(e?j:null);if(n)return!0;if(e){let e=t.state.doc.resolve(j),n=e.parent;if(n&&(0,u.AH)(n))return(0,u.xB)(n.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]);return{handlePresentNavigationEvent:f,spotlightingByBlock:o}}},48105:function(e,t,n){"use strict";n.d(t,{VN:function(){return p},rJ:function(){return h},us:function(){return x}});var i=n(27875),r=n.n(i),s=n(2784),o=n(42111),l=n(91994),a=n(30673),c=n(47968),d=n(90439);let u="disable-card-size-animations",h=()=>{let e=(0,o.ye)("autoZoomToFit"),t=(0,l.CG)(c.Kk);return(0,s.useEffect)(()=>{t||m()},[t]),null!=t?t:e},x=()=>{let e=(0,l.CG)(c.i2),t=(0,s.useRef)(),n=h(),i=!d.Pv&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),n&&setTimeout(()=>{document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.nY))},[e,i])},p=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;t.style.setProperty("--zoom-level","1");let n=t.scrollHeight,i=r()(e/n,(d.QX,.7),1);t.style.setProperty("--zoom-level",i.toString());let s=(0,l.bh)();s.dispatch((0,c.Ic)({zoomLevel:i}))},m=()=>{let e=document.querySelectorAll("[data-card-scroll-element]");e.forEach(e=>{e.style.removeProperty("--zoom-level")})}},86793:function(e,t,n){"use strict";n.d(t,{o:function(){return x}});var i=n(21805),r=n(2784),s=n(14274),o=n(76332),l=n(42111),a=n(91994),c=n(50267),d=n(82245),u=n(44631),h=n(97590);let x=e=>{let t=(0,a.CG)(h.yx),n=(0,r.useMemo)(()=>!!i.Z.get(d.ir),[]),x=(0,c.we)(),p=(0,a.TL)(),m=(0,a.CG)(h.fh),f=(0,l.ye)("docEditorForcePublicStatic"),g=window!==window.top,j=(0,r.useMemo)(()=>{var e,i;if(g)return!1;let r=new URLSearchParams(window.location.search),l=r.get("following_id")&&r.get("follow_on_start");if(l)return!0;if(!t)return n;let a=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.v.SHARE_TOKEN))||void 0===e?void 0:e.permission,c=a&&[o.y3$.Edit,o.y3$.Comment].includes(a);return c||x.can(o.y3$.Comment,t)||x.can(o.y3$.Edit,t)||x.can(o.y3$.Manage,t)},[x,t,n,g]);(0,r.useEffect)(()=>{let t=f?u.Z.PUBLIC_STATIC:e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);p((0,h.R8)({docEditorType:t}))},[p,e,f,j]);let v=e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);return m||v}},25934:function(e,t,n){"use strict";n.d(t,{dM:function(){return x1},Ur:function(){return xM},nz:function(){return pi},_i:function(){return tw._i}});var i,r,s,o,l,a=n(52322),c=n(38035),d=n(77533),u=n(28535),h=n(73200),x=n(42946),p=n(49929),m=n(5879),f=n(87254),g=n(97729),j=n.n(g),v=n(2784),C=n(43997),b=n(13055),y=n(93624),k=n(75279),w=n(30384),S=n(37869),E=n(16690),I=n(55478),A=n(43679),_=n(34071),T=n(32899),O=n(39429),D=n(48394),R=n(30733),P=n.n(R),L=n(12436),z=n.n(L),N=n(76919);class G extends N.v{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=z()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let M=P()(()=>new G),U=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=M(),[i,r]=(0,v.useState)(!1),s=(0,v.useRef)(t);return(0,v.useEffect)(()=>{s.current=t},[t]),(0,v.useEffect)(()=>n.on("move",t=>{s.current||r(e(t))}),[n,e]),i};var F=n(91994),W=n(47968),H=n(89458),B=n(88640),q=n(27537),V=n(60617),K=n(33022);let Z=(0,v.memo)(()=>{let{isOpen:e,onToggle:t,onClose:n}=(0,I.q)(),[i,r]=(0,H.I)(B.H.hasSeenCoachBar,!1),s=(0,F.CG)(W.Tf),o=(0,v.useCallback)(()=>{i||r(!0),n()},[i,n,r]),l=!i||e,c=U((0,v.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,a.jsx)(V.H,{mr:s&&i&&!l&&!c?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,a.jsxs)(A.J,{returnFocusOnClose:!1,isOpen:l,onClose:o,closeOnBlur:!0,children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(T.h,{onClick:()=>{e&&r(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,a.jsx)(p.G,{icon:x.UFh})})}),(0,a.jsx)(O.y,{...q.Ro,children:(0,a.jsx)(D.b,{children:(0,a.jsx)(K.C,{onClose:o})})})]})})});Z.displayName="PresentModeHelpWidget";var Y=n(94199),J=n(41003),X=n(58632),Q=n(10653),$=n(16770);let ee=()=>(0,F.CG)((0,$.CO)("left")),et=()=>(0,F.CG)((0,$.CO)("right")),en=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,i=(0,C.I0)(),r=(0,F.CG)((0,$.OC)(e)),s=(0,v.useCallback)(()=>{i((0,$.uJ)({component:e}))},[e,i]);(0,X.v)(()=>{!t&&r&&i((0,$.sR)({position:n}))},[r,i,t,n],[t]);let o=(0,v.useCallback)(s=>{if(!t)return;let o=!r;(null==s?void 0:s.override)==="open"?o=!0:(null==s?void 0:s.override)==="closed"&&(o=!1),o?i((0,$.Yp)({component:e,disableTransition:!!(null==s?void 0:s.disableTransition)})):i((0,$.sR)({position:n}))},[e,n,r,i,t]);return{togglePanel:o,initPanel:s,isPanelOpen:r}},ei=()=>{let e=(0,v.useMemo)(()=>new Q.st,[]),t=(0,v.useMemo)(()=>new Q.st,[]),n=(0,v.useMemo)(()=>new Q.st,[]);return(0,v.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),r=t.pipe(n);return()=>{i(),r()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}};var er=n(48929),es=n(90419),eo=n(96933),el=n(4425);let ea=(e,t,n)=>Math.min(Math.max(e,t),n),ec=e=>{let{setWidth:t,width:n,position:i,onClose:r,panelRef:s,initialWidth:o,isDragging:l,setIsDragging:d}=e,h=(0,v.useMemo)(()=>(0,el.n)(),[]),x=h>0&&"right"===i,[p,m]=(0,v.useState)(n),[f,g]=(0,v.useState)(null),j=z()(e=>{let t;let n=ea(t="left"===i?e.clientX:-((e.clientX-f)*1)+p,es.pn,es.ZQ);t<=es.Nh?(s.current.style.transitionProperty="width",s.current.style.transitionDuration="var(--chakra-transition-duration-normal)",n=0):n>es.pn&&(s.current.style.transitionProperty="",s.current.style.transitionDuration=""),s.current.style.width="".concat(n,"px")},30),C=()=>{d(!1),g(null);let e=s.current.style.width;"0px"===e?(r(),t(o)):t(parseInt(e.replace("px",""),10)),s.current.style.transitionProperty="",s.current.style.transitionDuration="",window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",C)};(0,v.useEffect)(()=>(f&&(window.addEventListener("mousemove",j),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",C)}),[f]);let b={};return b="left"===i?{right:-4,position:"absolute"}:x?{position:"relative"}:{left:-4,position:"absolute"},(0,a.jsx)(c.k,{h:"100%",bg:x?"gray.200":l?"blackAlpha.200":"rgba(0,0,0,0)",w:x?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:x?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:e=>{e.preventDefault(),d(!0),g(e.clientX),m(n)},position:"absolute",display:["none","none","none","flex"],...b,children:!x&&(0,a.jsx)(u.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:l?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})})},ed={ifPanelHasRoomToOpen:function(e,t){return{base:t,xl:e}}},eu=e=>{var t;let{position:n,panelLifecycle:i}=e,r=(0,v.useRef)(),[s,o]=(0,v.useState)(!1),l=(0,C.I0)(),d=(0,F.CG)((0,$.SL)(n)),u=(0,F.CG)((0,$.Fw)(n)),h=(0,F.CG)((0,$.CO)(n)),x=(0,F.CG)((0,$.eh)(n)),p=null!==(t=null==x?void 0:x.canCollapse)&&void 0!==t&&t,m=(0,v.useCallback)(()=>{l((0,$.sR)({position:n}))},[l,n]),f=(0,v.useCallback)(()=>{l((0,$.Yp)({component:x}))},[x,l]),g=(0,v.useCallback)(e=>{l((0,$.UG)({width:e,position:n})),i.emit("resize",{})},[l,i,n]),j={zIndex:Number((0,er.dQ)("zIndices","overlay"))+1,position:ed.ifPanelHasRoomToOpen("relative","fixed"),top:ed.ifPanelHasRoomToOpen(0,"var(--editor-padding-top)"),bottom:0,[n]:0};u||s||(j.transitionProperty="width",j.transitionDuration="normal"),(0,v.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return r.current.addEventListener("transitionend",e),()=>{r.current&&r.current.removeEventListener("transitionend",e)}},[i,r]);let b=(0,eo.i)(ed.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,v.useEffect)(()=>{d&&!b&&p&&m()},[b,d,m,p]),(0,a.jsxs)(c.k,{ref:r,...j,style:{width:d||p?h:0},maxW:"100%","data-print-hidden":!0,children:[d&&"right"===n&&(0,a.jsx)(ec,{isDragging:s,setIsDragging:o,position:n,width:h,setWidth:g,panelRef:r,onClose:m,initialWidth:es.Ld}),(0,a.jsx)(Q.Mn.Provider,{value:i,children:x&&(d||p)&&(0,a.jsx)(x,{isDragging:s,isOpen:d,closePanel:m,openPanel:f,panelRef:r,lifecycle:i,hasRoomToOpen:b})}),d&&"left"===n&&(0,a.jsx)(ec,{isDragging:s,setIsDragging:o,position:n,width:h,setWidth:g,panelRef:r,onClose:m,initialWidth:es.X9})]})},eh=(0,v.memo)(e=>(0,a.jsx)(eu,{position:"right",...e}));eh.displayName="RightPanelContainer";let ex=(0,v.memo)(e=>(0,a.jsx)(eu,{position:"left",...e}));ex.displayName="LeftPanelContainer";var ep=n(50019),em=n(29117),ef=n(62614),eg=n(75768),ej=n(94523),ev=n(5632),eC=n(17292),eb=n(90221),ey=n(78462),ek=n(84698);let ew=e=>{let{docId:t}=e,n=(0,F.TL)(),i=(0,ep.ff)("gray.300","gray.800"),r=(0,ep.ff)("white","gray.900"),s=(0,ep.ff)("transparent","transparent"),o=(0,ep.ff)("gray.500","gray.400"),l=(0,ep.ff)("trueblue.50","trueblue.400"),d=(0,ep.ff)("trueblue.500","white"),h=(0,ep.ff)("gray.600","gray.100"),g=(0,ep.ff)("gray.100","gray.700"),j=(0,ep.ff)("trueblue.50","trueblue.400"),C=(0,ep.ff)("trueblue.500","white"),{replace:b}=(0,ev.useRouter)(),y=(0,F.CG)(ek.tv),k=(0,v.useCallback)(()=>{if(!t)return;let e=(0,ey.yQ)({docId:t});b(e,void 0,{shallow:!0})},[t,b]),w=(0,v.useCallback)(e=>{n((0,ek.Tj)({previewSize:e}))},[n]);return(0,v.useEffect)(()=>eC.F7.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&k(),!0)),[k]),(0,a.jsx)(c.k,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,a.jsxs)(em.U,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,a.jsx)(em.U,{spacing:2,flexBasis:"30%",children:!(0,eb.s2)()&&(0,a.jsx)(ef.z,{size:"sm",variant:"plain",onClick:k,children:(0,a.jsx)(em.U,{children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.acZ})})})})}),(0,a.jsxs)(eg.h,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"58m6Qy"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.Z__}),bg:"mobile"===y?l:s,_hover:{color:"mobile"===y?C:h,bg:"mobile"===y?j:g},color:"mobile"===y?d:o,onClick:()=>{w("mobile")}})}),!(0,eb.s2)()&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"fpcKeD"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.ep5}),bg:"tablet"===y?l:s,_hover:{color:"tablet"===y?C:h,bg:"tablet"===y?j:g},color:"tablet"===y?d:o,onClick:()=>{w("tablet")}})}),!(0,eb.s2)()&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"K3p0ar"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(p.G,{icon:x.tc$}),bg:"desktop"===y?l:s,_hover:{color:"desktop"===y?C:h,bg:"desktop"===y?j:g},color:"desktop"===y?d:o,onClick:()=>{w("desktop")}})})]}),(0,a.jsx)(em.U,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var eS=n(31341),eE=n(85326),eI=n(54073),eA=n.n(eI),e_=n(31181),eT=n(23147);let eO=(e,t)=>{let n=(0,F.TL)(),i=(0,F.qr)(),r=!!(0,F.CG)(e_.$U),s=(0,F.CG)(W.wc),o=(0,F.CG)(e_.B$),l=t&&r&&s;(0,v.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,W.yx)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let c=!(0,eT.G0)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:c}),c&&n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,v.useEffect)(()=>{if(!l||!e)return;let t=eA()(()=>{n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var eD=n(15041),eR=n(29318),eP=n(91257),eL=n(74389),ez=n(56904),eN=n(78160),eG=n(17132),eM=n(11050),eU=n(97563),eF=n(37243),eW=n(84636),eH=n.n(eW),eB=n(24781),eq=n(96255),eV=n(60742),eK=n(90604);let eZ=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},eY=(e,t)=>{let n=(0,eB.As)("editor"),[i,r]=(0,v.useState)(null),s=(0,v.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,F.CG)(W.gh),l=(0,F.CG)(W.i2);(0,v.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,F.CG)(W.Q5);(0,v.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,v.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let t=e.getBoundingClientRect(),{height:i}=t;s.current.scrollTop=e.scrollTop,s.current.containerHeight=i},[n.scrollSelector,s]),(0,v.useEffect)(()=>{let e=eA()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,v.useEffect)(()=>{let e=eA()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,v.useEffect)(()=>{if(!e)return;if(o===eK.q.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;eH()((0,eF.N2)(e.state.doc,eq.KH),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,eV.LY)(r,n.scrollSelector),{offsetHeight:t}=r,o=t+e;return{id:s,...eZ(i,l,e,o,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},eJ=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,eM.z$)(),[r,s]=(0,v.useState)(15e3);eY(t,eU.f);let o=(0,v.useCallback)(()=>{eU.f.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,v.useEffect)(()=>{if(!i)return;eU.f.initialize(),eU.f.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(eM.AA.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),eU.f.destroy()}},[i,r,o]),null};var eX=n(39278),eQ=n(81672),e$=n(74409),e0=n(17993),e1=n(36474),e2=n(54933),e5=n(85420),e4=n(8713),e3=n(69420),e6=n(86783),e8=n(18149),e9=n.n(e8),e7=n(64467),te=n(48776),tt=n(98462);let tn=e=>{let t=(0,F.CG)(e7.AD),{title:n}=(0,te.T)({cardId:t||void 0}),i=(0,F.CG)(W.pN,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e9()(...t)}),r=i.indexOf(t||""),s=(0,v.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,eq.Bw)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,tt.vS)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,eB.cC)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var ti=n(89996),tr=n(42111),ts=n(30673);let to=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,ti.t)(t),r=(0,F.TL)(),s=(0,tr.ye)("cardNotes");(0,v.useEffect)(()=>{if(!t||!s)return;let e=(0,ts.AQ)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,tt.Qp)(e.node)){if(n){r((0,e7.NK)());return}(0,tt.Fi)(t,e.pos)}},[s,r,t,n,i])};var tl=n(77787),ta=n(50634),tc=n(31490),td=n(97763),tu=n(7144),th=n(25566),tx=n(21782),tp=n(89019),tm=n(86581),tf=n(93441);let tg=e=>{let{editor:t,cardId:n}=e,i=(0,F.CG)(W.Wl),r=(0,F.CG)(W.hN),s=(0,tr.ye)("aiCardNotes"),o=(0,v.useCallback)(e=>{if(!t||!n)return;let i=(0,eq.Bw)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,tt.cM)(r);if(!s)return;let o=(0,tm.aT)(e,t.schema),{tr:l}=t.state,a=s.pos+1,c=a+s.node.content.size;l.delete(a,c).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,tf.Z_)(o,200),[a,c]=(0,v.useState)(!1),{generate:d}=(0,ta.jz)("GenerateSpeakerNotes",{onStart(){c(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),c(!1)},timeout:3e4}),u=(0,F.qr)(),h=(0,v.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,eq.Bw)(t,n);if(!e)return;let r=(0,tl.c)(t,e.node),s=(0,tc.nZ)(),o=(0,tp.vR)(t,e.pos),l=(0,tx.D)(u);await d({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,tu.d)("generateCardNotes",i,s)},[d,i,t,n,u]),x=(0,td.YO)(h,"generateCardNotes",th.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD);return{onClickGenerate:x,isGenerating:a,canGenerateCardNotes:s&&r}},tj=e=>{let{closePanel:t}=e,{editor:n}=(0,tw._i)(),i=(0,F.CG)(W.hN),{cardId:r,canGoBack:s,canGoForward:o,title:l,goToNextCard:u,goToPreviousCard:h}=tn(n),g=(0,F.TL)();to({editor:n,isReadonly:!i}),(0,v.useEffect)(()=>e4.F7.on("keydown","CARD_NOTES_PANEL",e=>{let n=document.activeElement;return!!(n instanceof HTMLElement&&n.closest('[data-panelid="card-notes-panel"]'))&&"Escape"===e.key&&(t(),!0)}),[t,g]);let j=(0,eR.Yy)(),{onClickGenerate:C,isGenerating:b,canGenerateCardNotes:y}=tg({editor:n,cardId:r});return(0,a.jsx)(ej.Wk,{isDark:j,children:(0,a.jsx)(e3.s,{bgColor:j?"gray.900":"white","data-panelid":"card-notes-panel",color:j?"white":"gray.900",children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",flex:1,children:[(0,a.jsx)(eQ.P,{"data-card-notes-close-button":!0,position:"absolute",top:2,right:3,onClick:t}),(0,a.jsxs)(em.U,{px:6,py:4,spacing:4,children:[(0,a.jsx)(e$.X,{fontSize:"3xl",fontWeight:800,letterSpacing:-1,children:"Notes"}),i&&(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"qcPeK2"})})]}),(0,a.jsxs)(e0.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,a.jsxs)(em.U,{align:"end",children:[(0,a.jsx)(d.x,{fontWeight:"600",color:j?"gray.300":"gray.500",wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:l}),(0,a.jsx)(e1.L,{}),y&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(em.U,{spacing:0,children:[(0,a.jsx)(m.cC,{id:"GyxUS3"}),(0,a.jsx)(e5.J,{type:"generateCardNotes"})]}),placement:"top",children:(0,a.jsx)(ef.z,{variant:"ghost",onClick:C,isLoading:b,size:"sm","aria-label":f.ag._({id:"ziAjHi"}),rightIcon:(0,a.jsx)(p.G,{icon:e2.JyM}),flexShrink:0,children:(0,a.jsx)(m.cC,{id:"ziAjHi"})})})]}),(0,a.jsx)(e6.z,{isEditable:i,isDark:j}),i&&(0,a.jsxs)(em.U,{children:[(0,a.jsx)(ej.kH,{label:s?(0,a.jsx)(m.cC,{id:"cbqngJ"}):(0,a.jsx)(m.cC,{id:"4OtlnH"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(T.h,{"aria-label":s?f.ag._({id:"cbqngJ"}):f.ag._({id:"4OtlnH"}),icon:(0,a.jsx)(p.G,{icon:x.acZ}),onClick:h,isDisabled:!s,flex:1})})}),(0,a.jsx)(ej.kH,{label:o?(0,a.jsx)(m.cC,{id:"EyUKqu"}):(0,a.jsx)(m.cC,{id:"ggpGEd"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(T.h,{"aria-label":o?f.ag._({id:"EyUKqu"}):f.ag._({id:"ggpGEd"}),icon:(0,a.jsx)(p.G,{icon:x.eFW}),onClick:u,isDisabled:!o,flex:1})})})]})]})]})})})};tj.panelPosition="right",tj.panelName="card-notes";var tv=n(15830);let tC=e=>{let{toggleCardNotesPanel:t,isCardNotesPanelOpen:n,editor:i}=e,r=(0,F.TL)(),s=(0,tr.ye)("cardNotes"),o=(0,F.CG)(W.gh),l=o===eK.q.SLIDE_VIEW;(0,v.useEffect)(()=>{n&&(!s||l)&&t()},[s,n,t,l]),(0,v.useEffect)(()=>{!n&&i&&(r((0,e7.mK)({isOpen:!1})),i.view.dispatch(i.state.tr))},[r,i,n,t]),(0,v.useEffect)(()=>{if(s&&i)return tv.T.on("toggle",e=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=e;n&&o!==l||(t(s),r((0,e7.mK)({isOpen:!n})),i.view.dispatch(i.state.tr))})},[r,i,s,n,t])},tb="drag-in-progress",ty=()=>{(0,v.useEffect)(()=>{let e=()=>{document.body.classList.add(tb)},t=()=>{document.body.classList.remove(tb)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var tk=n(44631),tw=n(52926),tS=n(42822),tE=n(43297),tI=n(81540),tA=n(34972),t_=n(50788),tT=n(38660),tO=n(27058),tD=n(98576),tR=n(94465),tP=n(42703),tL=n(90383),tz=n(74339);let tN=e=>"tablet"===e?"768px":"mobile"===e?(0,eb.s2)()?"100vw":"375px":"100vw",tG=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:s}=n;return(0,a.jsxs)(tA.BU,{children:[(0,a.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:tz.W.toString()}}),(0,a.jsx)(t_.cL,{children:(0,a.jsx)(c.k,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,a.jsx)(tM,{...n,editor:i,docId:r}):(0,a.jsx)(u.xu,{flexDirection:"column",w:tN(s),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,a.jsx)(tS.M,{h:"100%",children:(0,a.jsx)(tE.K,{align:"center",children:(0,a.jsx)(tI.$,{})})})})})})]})},tM=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,s=(0,v.useMemo)(()=>(0,tT.e)().concat(tO.F),[]),o=(0,v.useMemo)(()=>n.getJSON(),[n]),l="mobile"===i?"mobile":"desktop",d=(0,tR.j)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:o,extensions:s,editable:!1});d.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:p}=(0,eL.k)({editor:d,instanceId:l,scrollingParentSelector:".".concat(tk.B)}),m=(0,F.CG)(e_.lH),f=(0,F.CG)(W.Pu),g=(0,tL.nT)(m),j=g?eN.ZQ:0,C=tN(i);return(0,a.jsxs)(u.xu,{className:(0,h.cx)("preview-editor-root",x),style:p,w:C,h:"100%",css:{"--editor-width":C,"--doc-padding-top":"".concat(j,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[m&&g&&(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,a.jsx)(tD.n,{theme:f,editable:!1,content:m.navContent},"".concat(t,"__preview-editor-nav__").concat(l,"}"))}),(0,a.jsx)(tP.f,{editor:d},"".concat(t,"__preview-editor__").concat(l,"}"))]})};var tU=n(97590),tF=n(83905);let tW=()=>{let e=(0,F.CG)(e_.lH),t=(0,F.CG)(W.Pu),n=(0,F.qr)(),[i]=(0,y.Iyu)(),r=(0,v.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,e_.lH)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),s=(0,tf.Kt)(r,500);return e?(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:tF.S.siteNav,children:(0,a.jsx)(tD.n,{theme:t,onUpdate:s,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(tk.B)})}):null};var tH=n(55274),tB=n(32981),tq=n(26468),tV=n(73751),tK=n(2338),tZ=n(97217),tY=n(50250),tJ=n(58125),tX=n(30764),tQ=n(71113),t$=n(29957),t0=n(76109),t1=n(66479),t2=n(79671),t5=n(32186),t4=n(46409),t3=n(22569);let t6=v.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function t8(){let e=(0,v.useContext)(t6);return e}let t9=e=>{let{children:t}=e,n=(0,v.useRef)(new Map),i=(0,v.useRef)(""),r=(0,v.useRef)((e,t)=>{n.current.set(e,t)}),s=(0,v.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),o=(0,v.useCallback)(e=>{i.current=e},[]);return(0,a.jsx)(t6.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:s.current,userMessage:i.current,setUserMessage:o},children:t})};var t7=n(8776),ne=n(40335),nt=n(56581),nn=n(31709);let ni=e=>{let{cardId:t,onClick:n}=e,i=(0,F.CG)((0,t7.l_)(t)),r=(0,F.CG)(W.Pu);return i?(0,a.jsxs)(tE.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:s,card:o,id:l}=e;return(0,a.jsx)(nr,{theme:r,isSelected:i.selected===l,label:s,card:o,onClick:()=>{n({cardId:t,variationId:l})}},l)}),i.variants.length<2&&(0,a.jsx)(tS.M,{children:(0,a.jsx)(tI.$,{})})]}):null},nr=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:s=()=>{}}=e,o=(0,v.useMemo)(()=>(0,nn.vL)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]);return(0,a.jsxs)(tE.K,{align:"start",children:[(0,a.jsx)(c.k,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:s,children:(0,a.jsx)(c.k,{sx:t5.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,a.jsx)(t5.m,{content:o,theme:i,isThumbnail:!0})})}),(0,a.jsxs)(d.x,{fontSize:"sm",children:[r&&(0,a.jsx)(nt.n,{boxSize:3,mr:2}),t]})]})},ns="ai-wizard-editor-root",no=e=>{let{doc:t,cards:n,theme:i=(0,t0.y)()}=e,r=(0,t3.R5)(i),s=(0,t1.wj)(i),o=(0,t3.wh)(r,s),l=(0,F.TL)(),{registerEditor:d}=t8();return((0,v.useEffect)(()=>()=>{l((0,t7.mc)())},[l]),t)?(0,a.jsxs)(c.k,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:ns,...o,children:[(0,a.jsx)(t4.Y,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,a.jsx)(nl,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{d(r,e)}},r):null})]}):null},nl=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:s}=e,o=(0,F.TL)(),[l,d]=(0,v.useState)(null),{userMessage:u}=t8(),h=(0,ne.b)({editor:l});(0,v.useEffect)(()=>{l&&h({doc:l.state.doc,cardId:t,message:u})},[h,l,t,n,u]);let x=(0,v.useMemo)(()=>(0,t2.vL)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]),p=(0,F.CG)((0,t7.a4)(t));(0,tf.vm)(()=>{if(!l||!p)return;let e=(0,eq.Bw)(l,t);e&&l.commands.command(t=>{let{tr:n}=t,i=tX.NB.fromJSON(l.schema,p.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[l,p,t],[p]);let m=(0,v.useCallback)(e=>{let{cardId:n,variationId:i}=e;l&&n===t&&o((0,t7.dx)({cardId:t,variantId:i}))},[o,l,t]);return(null==r?void 0:r.id)?(0,a.jsxs)(c.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:t5.n,my:-8,children:[(0,a.jsx)(ni,{cardId:t,onClick:m}),(0,a.jsx)(tT.y,{initialContent:x,onCreate:e=>{let{editor:t}=e;d(t),s(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(ns),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var na=n(11550);let nc=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,na.M)({id:"cardSuggestionDrawer"}),r=(0,F.CG)(W.Pu),[s]=(0,v.useState)(()=>(0,tJ.xC)({reducer:F.Ct}));return(0,a.jsx)(C.zt,{store:s,children:(0,a.jsx)(nd,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},nd=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:s,onOpen:o}=e,[l,c]=(0,v.useState)([]),[d,u]=(0,v.useState)(null),{getAllCards:h,setUserMessage:x}=t8(),p=(0,v.useCallback)(()=>{s(),c([]),u(null)},[s]),f=(0,v.useCallback)(()=>{if(p(),!n)return;let e={type:"document",content:h()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,eq.Bw)(n,d);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===d});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,tX.NB.fromJSON(n.schema,e)),!0})},[p,n,d,h]),g=(0,v.useCallback)(async(e,t,n)=>{o(),u(t);let i=e.toJSON().content[0].content;c(i.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),x(n)},[o,x]);return(0,v.useEffect)(()=>{if(n)return t$.T.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;g(n.view.state.doc,t,i)})},[n,g]),(0,a.jsxs)(tB.d,{placement:"bottom",onClose:s,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(tV.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tK.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,a.jsx)(tZ.f,{p:0,h:"100%",children:l.length>0&&t?(0,a.jsx)(no,{doc:t,cards:l,theme:i}):(0,a.jsx)(tQ.AA,{})}),(0,a.jsx)(tY.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,a.jsxs)(eg.h,{spacing:4,children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:s,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:f,children:(0,a.jsx)(m.cC,{id:"7VpPHA"})})]})})]})]})},(0,v.memo)(e=>(0,a.jsx)(t9,{children:(0,a.jsx)(i,{...e})})));var nu=n(69747),nh=n(12825),nx=n(75009),np=n(723),nm=n(4030),nf=n(3561),ng={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},nj=n(46640),nv=n(83906),nC=n(10625),nb=n(67046),ny=n(99058),nk=n(44035),nw=n(39237),nS=n(82108),nE=n.n(nS);let nI=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e,s=i===y.Ux9.Open?f.ag._({id:"Kz1TxG"}):f.ag._({id:"kywJax"});return(0,a.jsxs)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,a.jsx)(e$.X,{size:"md",flex:1,noOfLines:1,children:(0,a.jsx)(m.cC,{id:"eiUA4k",values:{count:t}})}),(0,a.jsxs)(nC.v,{closeOnSelect:!0,children:[(0,a.jsx)(nb.j,{as:ef.z,size:"sm",rightIcon:(0,a.jsx)(nv.v,{}),mr:8,children:nE()(s)}),(0,a.jsx)(ny.q,{zIndex:3,children:(0,a.jsxs)(nk._,{defaultValue:i,title:f.ag._({id:"0cVgUw"}),type:"radio",children:[(0,a.jsx)(nw.i,{onClick:()=>r(y.Ux9.Open),value:"open",children:(0,a.jsx)(m.cC,{id:"1TNIig"})}),(0,a.jsx)(nw.i,{onClick:()=>r(y.Ux9.Closed),value:"closed",children:(0,a.jsx)(m.cC,{id:"D87pha"})})]})})]}),(0,a.jsx)(eQ.P,{position:"absolute",top:2,right:2,onClick:n,"data-comment-feed-close-button":!0})]})};var nA=n(57480);let n_=e=>{let{user:t,editor:n}=e,[i,r]=(0,v.useState)(()=>{let e=(0,nm.W1)(n,nA.Et),t=e&&e.length?e[0]:(0,nm.xN)(()=>nA.Et,n,"");return t});(0,v.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let s=(0,nm.iZ)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,nm.xN)(()=>nA.Et,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),o=(0,v.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,a.jsx)(nm.Ag,{draftComment:i,user:t,onCommentDraftUpdate:o,onCommentSave:s,commentIdToHighlight:null})},nT=()=>({today:f.ag._({id:"ecUA8p"}),thisWeek:f.ag._({id:"yByRxz"}),earlier:f.ag._({id:"HPqZkW"})}),nO=e=>{var t;let{onClose:n,editor:i}=e,r=(0,F.CG)(W.yx),{isConnected:s}=(0,y.$gs)(),[o,l]=(0,v.useState)(y.Ux9.Open),h=null==r?void 0:r.comments,x=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===o),p=(0,F.CG)(W.gh),f=(0,eX.py)("comment",r),g=f&&s,{user:j}=(0,eX.SE)(),C=(0,k.$m)(r,j),b=(0,v.useMemo)(()=>{let e=(0,nj.yd)({items:x||[],sortBy:nj.Yz,latestTimeGetterFn:nj.z3});return e},[x]);return h&&r&&i?(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowX:"hidden",className:nf.G,w:"100%",children:[(0,a.jsx)(nI,{commentStatusFilter:o,setCommentStatusFilter:l,count:(null==x?void 0:x.length)||0,onClose:n}),(0,a.jsxs)(c.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,a.jsx)(np.V,{label:(0,a.jsx)(m.cC,{id:"pQvCbR"}),isConnected:s,mx:6}),C&&!j&&r&&(0,a.jsx)(nm.IZ,{doc:r,accessLink:C}),g&&(0,a.jsx)(u.xu,{px:6,py:2,children:(0,a.jsx)(n_,{user:j,editor:i})}),!(null==x?void 0:x.length)&&(0,a.jsxs)(e0.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,a.jsx)(u.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,a.jsx)(nx.E,{src:ng.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(e$.X,{size:"xs",mb:2,children:"open"===o?(0,a.jsx)(m.cC,{id:"W7i5f5"}):(0,a.jsx)(m.cC,{id:"mpDN1V"})}),(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"iB9OEi"})})]})]}),Object.entries(b).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,s]=e;return(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(ej.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:nT()[t]}),(0,a.jsx)(c.k,{direction:"column",children:s.map(e=>(0,a.jsx)(nm.q5,{instanceType:"feed",userCanComment:g,editor:i,comment:e,selfUser:j,docId:null==r?void 0:r.id,editorMode:p,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},nD=e=>{let{closePanel:t,...n}=e,{editor:i}=(0,nh._)();return(0,v.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return nu.pw.on(nu.TI.POPUP_COMMENT_TOGGLED,e),()=>{nu.pw.on(nu.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,v.useEffect)(()=>eC.F7.on("keydown","COMMENT_FEED_PANEL",e=>!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&t(),!0)),[t]),(0,a.jsx)(e3.s,{...n,bgColor:"white","data-panelid":"comment-feed-panel",children:(0,a.jsx)(nO,{onClose:t,editor:i})})};nD.panelPosition="right",nD.panelName="comment-feed";var nR=n(87202),nP=n(73681),nL=n(39097),nz=n.n(nL),nN=n(14764),nG=n(74684),nM=n(50267);let nU=()=>{var e,t;let n=(0,F.CG)(W.yx),{user:i}=(0,nM.SE)(),r=(0,nM.py)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,ey.Xn)(s)};var nF=n(47443),nW=n(80877),nH=n(74444),nB=n(67422);let nq=e=>{let{onClose:t}=e;return(0,a.jsxs)(tE.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,a.jsx)(nx.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,a.jsx)(nB.K,{children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"jVQv+Q"})})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.g82}),onClick:t,children:(0,a.jsx)(m.cC,{id:"pqZJT2"})})]})},nV=()=>(0,a.jsxs)(nF.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,a.jsx)(nW.C,{children:(0,a.jsx)(m.cC,{id:"rvbk/4"})}),(0,a.jsx)(nH.X,{children:(0,a.jsx)(m.cC,{id:"XNkIFY"})})]});var nK=n(74105),nZ=n(29494),nY=n(27191),nJ=n(4878);let nX="40px",nQ=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:s,resetMessages:o}=e;(0,nJ.F1)(s);let{selection:l,doc:c}=s.state,u=c.textBetween(l.from,l.to,"\n"),h=(0,J.Y)("unlimited_credits"),x=(0,v.useRef)(null),[g,j]=(0,v.useState)(!1),C=l instanceof nY.qv,b=l instanceof nY.Bs,y=C&&"card"===l.node.type.name,k=l.empty||y?f.ag._({id:"XrfE9D"}):C?f.ag._({id:"CsUli9"}):b&&u?f.ag._({id:"+NPPZN",values:{0:u.length>50?u.slice(0,50)+"...":u}}):f.ag._({id:"/fY1js"}),w=(0,v.useCallback)(()=>{x.current&&(x.current.style.height=nX,x.current.style.height="".concat(x.current.scrollHeight,"px"))},[]);return(0,v.useEffect)(()=>(s.on("selectionUpdate",w),()=>{s.off("selectionUpdate",w)}),[s,w]),(0,v.useEffect)(()=>{g?w():setTimeout(()=>{j(!0),w()},400)},[g,k,w,t]),(0,a.jsxs)(em.U,{align:"end",children:[(0,a.jsx)(nK.B,{size:"md",children:(0,a.jsx)(nZ.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:nX,minH:nX,ref:x,resize:"none",maxH:g?32:nX,bg:"white",shadow:"md",autoFocus:!0,placeholder:k,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),pr:12})}),(0,a.jsx)(ej.kH,{placement:"top",label:(0,a.jsxs)(e0.g,{spacing:0,children:[(0,a.jsx)(m.cC,{id:"4k2VbT"}),!h&&(0,a.jsx)(d.x,{color:"gray.400",children:(0,a.jsx)(m.cC,{id:"jxCfNz",components:{0:(0,a.jsx)(e5.J,{type:"chatSuggestion",ml:0})}})}),(0,a.jsx)(ej.f2,{shortcut:"Enter"})]}),children:(0,a.jsx)(T.h,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:nX,w:nX,variant:"solid",icon:(0,a.jsx)(p.G,{icon:e2.FzC,fixedWidth:!0}),onClick:i})})]})};var n$=n(28086),n0=n(26031),n1=n(66214);let n2=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,s]=(0,v.useState)(""),o=(0,tr.ye)("openAiStatus"),l=(0,F.TL)(),d=(0,eB.As)("editor"),u=(0,F.qr)(),h=(0,F.CG)(n0.AZ),f=(0,F.CG)(n0.Q_),[g,j]=(0,v.useState)(null),C=(0,v.useCallback)(()=>{let e=(0,n0.AZ)(u.getState());return e},[u]),b=(0,v.useCallback)(e=>{let t={timestamp:Date.now(),...e};l((0,n0.Hz)({message:t}))},[l]),y=(0,v.useCallback)(()=>{l((0,n0.mc)())},[l]),{status:k,sendMessage:w}=(0,n1.n)({addMessage:b,getMessageHistory:C,editor:t});(0,v.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,h]);let S="idle"!==k;(0,v.useEffect)(()=>{if(!f.length||S)return;let{task:e,id:t}=f[0];!1===e.submit?s(e.message):w({message:e.message}),l((0,n0.VB)({id:t}))},[S,w,l,f]);let E=(0,v.useCallback)(()=>{if(!g||!t)return;let e=document.querySelector('[data-card-id="'.concat(g,'"]')),n=(0,eB.v4)(e,100);null!=n&&n.yAxisInView||d.scrollElementIntoView({element:e})},[t,d,g]),I=(0,v.useCallback)(e=>{E(),w({message:e})},[E,w]),A=(0,v.useCallback)(()=>{I(r),s("")},[I,r]),_=(0,td.YO)(A,"chatSuggestion",eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,v.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,nG.AQ)(t.state.doc,t.state.selection.from);e&&j(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let O=nU();return t?"DOWN"===o?(0,a.jsx)(nq,{onClose:i}):(0,a.jsxs)(c.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===o&&(0,a.jsx)(nV,{}),(0,a.jsx)(n$.rN,{scrollSelector:n,messages:h,editor:t,sendMessage:I,isLoading:S,onClose:i}),(0,a.jsxs)(tE.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,a.jsx)(nQ,{editor:t,value:r,onChange:s,onSubmit:_,isLoading:S,resetMessages:y}),(0,a.jsx)(nN.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,a.jsxs)(eg.h,{position:"absolute",left:4,top:1,variant:"ghost",colorScheme:"blackAlpha",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5eg0kp"}),placement:"top",children:(0,a.jsx)(T.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,a.jsx)(p.G,{icon:x.YcH}),onClick:y,isRound:!0})}),O&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),placement:"top",children:(0,a.jsx)(T.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,a.jsx)(p.G,{icon:x.Fzb}),as:nz(),href:O,target:(0,eb.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null},n5=e=>{let{onClose:t}=e;return(0,a.jsx)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,a.jsx)(eQ.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},n4="design-partner-panel-wrapper",n3=e=>{let{toggleDesignPartnerPanel:t,isDesignPartnerPanelOpen:n,editor:i}=e,r=(0,tr.ye)("aiChat"),s=(0,F.TL)();(0,v.useEffect)(()=>()=>{s((0,n0.mc)())},[]);let o=(0,F.CG)(W.hN);(0,v.useEffect)(()=>{!o&&n&&t()},[o,n,t]),(0,v.useEffect)(()=>{var e,t;i&&(null===(e=(t=i.commands).setSalOpen)||void 0===e||e.call(t,n))},[i,n]),(0,v.useEffect)(()=>{if(r)return nP.T.on("toggle",e=>{let{config:n}=e;t(n)})},[t,r]),(0,v.useEffect)(()=>{if(r)return nu.pw.on("queueDesignPartnerTask",e=>{s((0,n0.Lj)({task:e})),t({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[s,r,t]),(0,v.useEffect)(()=>{if(!r||!o)return;let e=(0,nR.ZP)("mod+shift+S");return eC.F7.on("keydown","DESIGN_PARTNER_PANEL",n=>!!e(n)&&(t(),!0))},[t,r,o])},n6=e=>{let{closePanel:t,...n}=e,{editor:i}=(0,nh._)();return(0,v.useEffect)(()=>eC.F7.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,a.jsx)(e3.s,{...n,bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:n4,w:"100%",children:[(0,a.jsx)(n5,{onClose:t}),(0,a.jsx)(n2,{editor:i,scrollSelector:".".concat(n4),onClose:t})]})})};n6.panelPosition="right",n6.panelName="chat";let n8=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,a.jsxs)(c.k,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,a.jsxs)(e0.g,{flex:"1",align:"start",spacing:0,children:[(0,a.jsxs)(d.x,{fontWeight:"bold",children:["This ",Y.Yc," is disabled."]}),(0,a.jsx)(d.x,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,a.jsx)(ef.z,{variant:"plain",size:"sm",mr:4,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var n9=n(70065),n7=n(26284),ie=n(87651),it=n(17190),ii=n(84405),ir=n(7207),is=n(41774),io=n(39122),il=n(34881);let ia=["90%","360px"],ic=e=>{let{onClose:t,eyebrowText:n,mainText:i,callsToAction:r}=e;return(0,a.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:ia,maxW:ia,position:"relative",children:[(0,a.jsx)(eQ.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(tE.K,{spacing:1,paddingEnd:3,children:[!(0,eb.s2)()&&(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:n}),(0,a.jsx)(d.x,{fontSize:"md",children:i})]}),(0,a.jsx)(u.xu,{w:"100%",children:r})]})]})},id=e=>{let{onClose:t,startTour:n}=e;return(0,a.jsx)(ic,{eyebrowText:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,a.jsx)(m.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]}),mainText:(0,a.jsx)(m.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,a.jsx)(ef.z,{size:"md",w:"100%",variant:"solid",onClick:()=>{n(0),t()},children:(0,a.jsx)(m.cC,{id:"VzFYDl"})})})};var iu=n(38914);let ih=["90%","360px"],ix=e=>{let{onClose:t}=e,[n,i]=(0,v.useState)(!0);return(0,v.useEffect)(()=>{setTimeout(()=>{i(!1)},3e3)},[]),(0,a.jsxs)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:ih,maxW:ih,position:"relative",children:[(0,a.jsx)(eQ.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tE.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,a.jsx)(u.xu,{color:"trueblue.300",children:(0,a.jsx)(p.G,{icon:iu.tc$,size:"2x",className:n?"fa-bounce":void 0})}),(0,a.jsxs)(tE.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"eoDgVo"})}),(0,a.jsx)(d.x,{fontSize:"md",children:(0,a.jsx)(m.cC,{id:"p7dFyi"})})]})]})]})},ip="source",im="desktop-tour-toast",ig="switch-from-mobile-to-desktop-toast",ij=e=>{var t;let{editor:n}=e,i=(0,n9.p)(),r=(0,F.CG)(tU.yx),{startTour:s}=(0,w.c8)(),{user:o,setSettings:l}=(0,eX.SE)(),[a,c]=(0,v.useState)(!1),d=(0,v.useRef)(!1),u=!!(null==o?void 0:null===(t=o.settings)||void 0===t?void 0:t.needsEditorOnboarding),h=(0,F.CG)((0,is.oH)(null==n?void 0:n.gammaDocId)),x=!!h&&"running"===h.status,p=(0,eB.As)("editor"),[m,f]=(0,v.useState)(null),[g]=(0,v.useState)(()=>(0,ey.SJ)()[ip]===io.VY),[j]=(0,v.useState)(()=>g&&(0,eb.s2)());(0,v.useEffect)(()=>{n&&c(!x&&!(0,eb.s2)()&&g&&u)},[n,g,x,u]),(0,v.useEffect)(()=>{setTimeout(()=>{(0,il.lO)({query:{...(0,ey.SJ)(),[ip]:void 0},emitChange:!1})})},[]),(0,v.useEffect)(function(){return a&&!i.isActive(im)&&setTimeout(()=>{i({id:im,position:"bottom-left",render:e=>{let{onClose:t}=e;return id({onClose:()=>{null==l||l({remove:["needsEditorOnboarding"]}),t()},startTour:s})},isClosable:!0,duration:null})},2e3),()=>{i.isActive(im)&&i.close(im)}},[l,a,s,i]),(0,v.useEffect)(function(){if(!(0,eb.s2)())return;let e=document.querySelector(p.scrollSelector);if(!e)return;f(e);let t=()=>{if(!m||!(0,eb.s2)())return;let e=(null==m?void 0:m.scrollTop)>=(null==m?void 0:m.scrollHeight)/4;e&&j&&!i.isActive(ig)&&!d.current&&(d.current=!0,i({id:ig,position:"top",render:e=>{let{onClose:t}=e;return ix({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),i.isActive(ig)&&i.close(ig)}},[r,m,p.scrollSelector,j,i])};var iv=n(76332);let iC=e=>{var t;let{doc:n,site:i,path:r}=e,s=(0,n9.p)(),o=(0,F.TL)(),l=(0,F.CG)(e_.v),[c]=(0,iv.zU5)(),[h]=(0,iv.sIg)(),[f]=(0,iv.odt)(),g=(0,F.CG)(e_.B$),j=null==n?void 0:n.id,C=(0,eD.mn)({domain:null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],path:r}),b=null==i?void 0:i.id,y=(0,v.useCallback)(async()=>{j&&((0,e_.yB)(o)(!0),await (0,eD.iL)(j),await h({variables:{id:j},refetchQueries:["GetDoc","GetSite"]}).then(()=>{s({render:function(){return(0,a.jsx)(u.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(em.U,{spacing:4,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.fV7})}),(0,a.jsx)(d.x,{fontWeight:"semibold",children:(0,a.jsx)(m.cC,{id:"V6Byuz"})}),C&&(0,a.jsx)(ef.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:C,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),children:(0,a.jsx)(m.cC,{id:"Zel0o2"})}),(0,a.jsx)(eQ.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)}))},[o,j,h,s,C]),k=(0,v.useCallback)(async()=>{b&&((0,e_.yB)(o)(!0),g&&await (0,eD.iL)(g),await c({variables:{id:b},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:iv.yE1,variables:{id:t.docId}},e=>{var n,i,r;if(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),!(null==e?void 0:e.doc))return e;let s=e.doc;return{doc:{...s,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}})})}}).then(()=>{s({render:function(){return(0,a.jsx)(u.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(em.U,{spacing:4,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.fV7})}),(0,a.jsx)(d.x,{fontWeight:"semibold",children:(0,a.jsx)(m.cC,{id:"V6Byuz"})}),C&&(0,a.jsx)(ef.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:C,rightIcon:(0,a.jsx)(p.G,{icon:x.wlW}),children:(0,a.jsx)(m.cC,{id:"Zel0o2"})}),(0,a.jsx)(eQ.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"DD5mqk"}),description:(0,a.jsx)(m.cC,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)}))},[b,o,g,c,s,C]);return{publishSite:k,publishDoc:y,isPublishing:l}};var ib=n(45820),iy=n(73230),ik=n(13871),iw=n(35672),iS=n(49197),iE=n(21723),iI=n(704);let iA=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,v.useState)("createGenerate"),[r,s]=(0,v.useState)([]),[o,l]=(0,v.useState)(void 0),c=(0,v.useMemo)(()=>({goToScreen:(e,t)=>{l(null==t?void 0:t.generateId),s(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),d=(0,v.useMemo)(()=>{switch(n){case"createWithAI":return iw.B;case"createImport":return ik.j;case"createPaste":return iS.L;case"promptEditor":return function(){return(0,a.jsx)(iE.B,{id:o,children:(0,a.jsx)(ib.N,{})})};case"createGenerate":return function(){return o?(0,a.jsx)(iE.B,{id:o,children:(0,a.jsx)(iy.m,{autosetLocale:!1})}):(0,a.jsx)(iy.m,{autosetLocale:!0})};default:throw Error("invalid page")}},[o,n]);return(0,a.jsx)(iI.u$.Provider,{value:c,children:(0,a.jsx)(d,{})})},i_=e=>{let{isOpen:t,onClose:n}=e;return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(tV.s,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,a.jsx)(tK.o,{zIndex:"sticky"}),(0,a.jsx)(tZ.f,{p:0,children:(0,a.jsx)(iA,{onGenerateSuccess:n})})]})]})})},iT=e=>{var t;let{doc:n}=e,i=(0,eR.Yy)(),r=(0,n9.p)(),s=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],o=(0,v.useMemo)(()=>(0,ey.Gn)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==s?void 0:s.token,absolute:!0}),[n,null==s?void 0:s.token]),{onCopy:l}=(0,n7.V)(o),c=(0,v.useCallback)(()=>{(0,ii.J)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),l(),r({title:(0,a.jsx)(m.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,l,r]),d=nU();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(e$.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"bB+DHs"})})," ",(0,a.jsx)(ef.z,{as:nz(),target:(0,eb.Q5)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.r8p}),href:"/create",children:(0,a.jsx)(m.cC,{id:"xFxi2V"})}),d?(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.Fzb}),variant:"plain",as:nz(),target:(0,eb.Q5)()?"_self":"_blank",href:d,children:(0,a.jsx)(m.cC,{id:"550oRP"})}):(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.nNP}),variant:"plain",onClick:c,children:(0,a.jsx)(m.cC,{id:"RGCCrg"})})]})},iO=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,na.M)({id:"add-page-ai-modal"}),i=(0,F.CG)(e_.lH),r=(0,eD.Vr)(i),{publishSite:s,isPublishing:o}=iC({site:i}),l=(0,eR.Yy)();return(0,a.jsxs)(tE.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(e$.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"bB+DHs"})}),(0,a.jsx)(ef.z,{variant:"solid",colorScheme:l?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(p.G,{icon:x.r8p}),onClick:n,children:(0,a.jsx)(m.cC,{id:"K3193W"})}),r&&(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.A$k}),variant:"plain",onClick:s,isLoading:o,children:(0,a.jsx)(m.cC,{id:"2uGo/E"})}),(0,a.jsx)(i_,{isOpen:e,onClose:t})]})},iD=()=>(0,a.jsx)(tE.K,{spacing:4,textAlign:"center",children:(0,a.jsx)(e$.X,{size:"md",children:(0,a.jsx)(m.cC,{id:"v1HDJV"})})}),iR=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===y.FJd.UploadPptV2?(0,a.jsx)(iD,{}):i.site?i.site&&!(0,eb.s2)()?(0,a.jsx)(iO,{}):null:(0,a.jsx)(iT,{doc:i}):null};var iP=n(35676),iL=n.n(iP),iz=n(3440),iN=n.n(iz),iG=n(46152),iM=n.n(iG),iU=n(93336);let iF=[{key:"num_cards",category:"length",label:(0,a.jsx)(m.cC,{id:"UnRHxh"})},{key:"content_quality",category:"content",label:(0,a.jsx)(m.cC,{id:"5w/BaJ"})},{key:"missing_content",category:"content",label:(0,a.jsx)(m.cC,{id:"XoKzka"})},{key:"wrong_language",category:"content",label:(0,a.jsx)(m.cC,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,a.jsx)(m.cC,{id:"pi+Tez"})},{key:"inappropriate_content",category:"content",label:(0,a.jsx)(m.cC,{id:"i/9pR4"})},{key:"citations",category:"content",label:(0,a.jsx)(m.cC,{id:"EpFwDO"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(m.cC,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,a.jsx)(m.cC,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,a.jsx)(m.cC,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,a.jsx)(m.cC,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,a.jsx)(m.cC,{id:"d3n/st"})}],iW={key:"other",category:"other",label:(0,a.jsx)(m.cC,{id:"/IX/7x"})},iH=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,s=(0,v.useMemo)(()=>iL()(iM()(iN()(iM()(iF),"category"))).concat([iW]),[]),o=(0,v.useCallback)(e=>{(0,tc.fM)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),l=(0,v.useCallback)((e,n,s)=>{(0,tc.XH)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,a.jsx)(iU.o8,{feedbackTags:s,trackRating:o,trackFeedback:l,isDark:n})};var iB=n(90537),iq=n(87148);let iV=e=>{let[t]=(0,v.useState)(()=>(0,ey.SJ)()[e]);return(0,v.useEffect)(()=>{setTimeout(()=>{(0,il.lO)({query:{...(0,ey.SJ)(),[e]:void 0},emitChange:!1})})},[]),t},iK=e=>{var t,n,i;let{editor:r}=e,s=r&&null!==(n=null===(t=(0,iq.VA)(r))||void 0===t?void 0:t.generateInfo)&&void 0!==n?n:{},o=iV("source"),l=(0,F.CG)((0,is.oH)(null==r?void 0:r.gammaDocId)),a=null,c=!0;return o===io.VY?l&&("complete"===l.status||"error"===l.status)&&(a=l.id,c=!0):o===iB.u&&(c=!0,a=null!==(i=s.interactionId)&&void 0!==i?i:null),{showDocWizardFooter:c,source:o,interactionId:a}},iZ=(0,v.memo)(e=>{var t,n,i;let{interactionId:r}=e,s=(0,F.CG)(tU.yx),o=(0,eR.Yy)(),l=null==s?void 0:null===(n=s.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,[d,u]=(0,v.useState)(!1),h=(0,n9.p)(),x=null==s?void 0:null===(i=s.accessLinks)||void 0===i?void 0:i[0],p=(0,v.useMemo)(()=>(0,ey.Gn)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==x?void 0:x.token,absolute:!0}),[s,null==x?void 0:x.token]),{onCopy:f}=(0,n7.V)(p);(0,v.useCallback)(()=>{(0,ii.J)({docId:null==s?void 0:s.id,source:"docWizardFooter",type:"tokenUrl"}),f(),h({title:(0,a.jsx)(m.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==s?void 0:s.id,f,h]);let g=(0,v.useCallback)(()=>{u(!0)},[]);return(nU(),s)?(0,a.jsx)(ej.Wk,{isDark:o,children:(0,a.jsx)(c.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,eb.s2)()?void 0:"-".concat(ir.m),children:(0,a.jsx)(ie.U,{in:!d,style:{width:"100%"},unmountOnExit:!0,children:(0,a.jsx)(c.k,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"},children:(0,a.jsx)(it.W,{maxW:"450px",children:(0,a.jsxs)(tE.K,{spacing:8,children:[(0,a.jsx)(iR,{doc:s}),(0,a.jsx)(iH,{docId:s.id,isDark:o,interactionId:r,generationType:l}),(0,a.jsx)(tS.M,{pt:[0,0,4],w:"100%",children:(0,a.jsx)(ef.z,{size:"sm",onClick:g,variant:"text",colorScheme:"blackAlpha",children:(0,a.jsx)(m.cC,{id:"vLyv1R"})})})]})})})})})}):null});iZ.displayName="DocWizardFooterInner";let iY=e=>{let{editor:t}=e;ij({editor:t});let{showDocWizardFooter:n,interactionId:i}=iK({editor:t});return n&&i?(0,a.jsx)(iZ,{interactionId:i}):null};var iJ=n(98537),iX=n.n(iJ),iQ=n(11082),i$=n(12136);let i0=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,a.jsx)(u.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{mr:1,children:[(0,a.jsx)(m.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(ef.z,{variant:"solid",onClick:t,children:(0,a.jsx)(m.cC,{id:"he3ygx"})})]}):(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{mr:1,children:[(0,a.jsx)(m.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,GAMMA_PROPER_NOUN:Y.N6},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(nz(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(ef.z,{as:iQ.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,a.jsx)(m.cC,{id:"e+RpCP"})})})]})})},i1=e=>{let t=!(0,eb.s2)(),{user:n}=(0,eX.SE)(),i=(0,n9.p)(),r=(0,v.useRef)(),s=(0,i$.e)(),o=(0,v.useCallback)(()=>{e&&(null===eM.co||void 0===eM.co||eM.co.track(eM.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,v.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,v.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,c=!!n;(0,tf.vm)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>i0({onCloneClick:l,isLoggedIn:c,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,c],[a,c])};var i2=n(97857),i5=n(61750),i4=n(35847);let i3="sessionId1",i6=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=iX()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:i3})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),i8=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s}=e,o=(0,F.CG)(tU.yx);i1(o);let[l]=(0,v.useState)(()=>[tO.F,i5.$1.configure({scrollerSelector:r}),i6,i2._g]),{user:d,anonymousUser:h,isUserLoading:x,color:p}=(0,eX.SE)(),[m,f]=(0,v.useState)(),{data:g,loading:j,error:C}=(0,y.EDv)({variables:{docId:n,snapshotId:i},skip:!i});(0,v.useEffect)(()=>{!x&&m&&m.commands.user({id:(null==d?void 0:d.id)||h.id,color:p.value,sessionId:i3,idleSince:null,name:(null==d?void 0:d.displayName)||h.displayName||"",profileImageUrl:(null==d?void 0:d.profileImageUrl)||"",isReady:!x})},[m,d,p,x,h]);let b=g&&void 0!==g.snapshot&&!j&&o;return(0,a.jsxs)(u.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!b||C?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!b&&(0,a.jsx)(tI.$,{}),C&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",C.message]})]}):(0,a.jsx)(u.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:b?1:0,children:(0,a.jsx)(eP.yE,{doc:o,editorId:"main",docId:n,extensions:l,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=g.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,a.jsx)(i4.m,{forceShow:!0,abuseReportingEnabled:!1})]})};var i9=n(332),i7=n(48832);let re=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,v.useMemo)(()=>({fromNow:(0,i7.Km)(i),calendar:(0,i7.p6)(i,"PPpp")}),[i]);return(0,a.jsx)(m.cC,{id:"XHgRJj",values:{0:r.fromNow},components:{0:(0,a.jsx)(ej.kH,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,a.jsx)(d.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},rt=e=>{let t=(0,F.CG)(e_.lH),n=(0,eD.k2)(t),i=!(0,eD.Vr)(t),r=(0,F.CG)(e_.RM),s=(0,F.CG)(e_.rc),o=e?(0,a.jsx)(m.cC,{id:"mkk40+"}):i?(0,a.jsx)(m.cC,{id:"r5OY1d"}):n?r>0?(0,a.jsx)(m.cC,{id:"pxio6v",values:{changedPagesCount:r}}):s?(0,a.jsx)(m.cC,{id:"G971z4"}):(0,a.jsx)(m.cC,{id:"o+bOqE"}):(0,a.jsx)(m.cC,{id:"tpB6bH"}),l=e?null:i?(0,a.jsx)(m.cC,{id:"u8Rqhk"}):!1===n?(0,a.jsx)(m.cC,{id:"Ys0XoA"}):r>0||s?(0,a.jsx)(m.cC,{id:"Ys0XoA"}):null,c=t?(0,a.jsx)(re,{site:t}):null;return{statusText:o,detailText:l,needsPublish:!n||s||r>0,lastPublishedTime:c,publishEnabled:!1===i&&!e}},rn=e=>{let{context:t,openSiteSettings:n}=e,i=(0,F.CG)(e_.lH),r=(0,eE.O1)(),{publishSite:s,isPublishing:o}=iC({site:i}),{statusText:l,detailText:c,needsPublish:u,publishEnabled:h}=rt(o),f=(0,ep.ff)(!1,!0);return("pages"!==t||u||o)&&r&&i&&(0,eD.Vr)(i)?(0,a.jsx)(it.W,{px:0,children:(0,a.jsxs)(tE.K,{w:"100%",bg:f?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,a.jsxs)(e0.g,{spacing:0,color:f?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,a.jsx)(d.x,{fontWeight:"500",fontSize:"sm",children:l}),c&&(0,a.jsx)(d.x,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:c})]}),"pages"!==t&&(0,a.jsx)(e1.L,{}),(0,a.jsx)(ef.z,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,a.jsx)(p.G,{icon:x.A$k}),isDisabled:!h,onClick:s,isLoading:o,children:(0,a.jsx)(m.cC,{id:"1EeNDU"})}),"pages"===t&&(0,a.jsx)(ef.z,{textAlign:"left",color:f?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,a.jsx)(m.cC,{id:"WtsmDd"})})]})}):null};var ri=n(27599),rr=n(25481),rs=n(83669),ro=n(69024),rl=n(29705),ra=n(92850),rc=n(22226),rd=n(54326);let ru=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:s}=(0,ev.useRouter)(),o=(0,n9.p)(),[l,{data:u,loading:h}]=(0,y.jUI)(),x=null==u?void 0:null===(t=u.archiveSite)||void 0===t?void 0:t.archived,p=(0,v.useCallback)(async()=>{if(null==r?void 0:r.id)try{await l({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),o({title:(0,a.jsx)(m.cC,{id:"aBvGpM"}),description:(0,a.jsx)(m.cC,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l,null==r?void 0:r.id,o]);return((0,v.useEffect)(()=>{x&&(n(),s("/#sites"),o({title:(0,a.jsx)(m.cC,{id:"oGP1Fe"}),description:(0,a.jsx)(m.cC,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[x,n,s,o,r]),h||x)?(0,a.jsx)(i9.h,{children:(0,a.jsx)(c.k,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,a.jsx)(tQ.AA,{})})}):(0,a.jsxs)(ra.u_,{onClose:n,isOpen:i,size:"lg",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tK.o,{isDisabled:h}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Y.aq},components:{0:(0,a.jsx)(iQ.r,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,a.jsx)(rl.h,{mx:"2px"})}})})]})}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:n,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",color:"red.600",onClick:p,isLoading:h,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})]})]})},rh=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,I.q)({id:"trash-site-modal"}),[s]=(0,y.sJX)(),o=(0,eE.O1)(),l=null==t?void 0:t.archived,c=(0,v.useCallback)(()=>{(null==t?void 0:t.id)&&s({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,s]);return o&&t?l?(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:e2.XnX}),onClick:c,children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{color:"red.500",icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.XAH}),onClick:()=>{i()},children:(0,a.jsx)(m.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),n&&(0,a.jsx)(ru,{isOpen:n,onClose:r,site:t})]}):(0,a.jsx)(a.Fragment,{})},rx=()=>({[eK.q.DOC_VIEW]:{buttonLabel:(0,a.jsx)(m.cC,{id:"eZb+lw"}),shortcutIcon:e2.zc,shortcutKeys:(0,ej.cE)("Mod+Enter"),shortcutLabel:(0,a.jsx)(m.cC,{id:"tbDuNX"})},[eK.q.SLIDE_VIEW]:{buttonLabel:(0,a.jsx)(m.cC,{id:"ydzS9x"}),shortcutIcon:e2.Bg$,shortcutKeys:"Esc",shortcutLabel:(0,a.jsx)(m.cC,{id:"5Rfo7J"})}});var rp=n(65610),rm=n(87827),rf=n(25944),rg=n(52332),rj=n(54999),rv=n(67748);let rC=(0,nR.ZP)("mod+Enter"),rb=(0,nR.ZP)("Esc"),ry=(0,nR.ZP)("mod+Esc"),rk=(0,nR.ZP)("shift+mod+Enter"),rw=e=>function(t){t((0,W.Qx)({attached:!1})),t((0,W.PM)({mode:e}))},rS=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},rE=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.TL)(),[r,s]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1),{editor:a}=(0,tw._i)(),c=(0,F.CG)(W.gh),d=(0,v.useRef)(c);(0,v.useEffect)(()=>{d.current=c},[c]);let u=(0,F.CG)(W.yq),h=(0,F.CG)(W.JA),x=(0,F.CG)(rm.C),p=(0,eM.z$)(),m=(0,v.useCallback)(e=>{a&&!a.isDestroyed&&(e===eK.q.SLIDE_VIEW?((0,rg.E0)(a.state.doc,i),(0,rj.U6)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),rS(a,n)),i(rw(e)))},[i,a,n]),f=(0,v.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),g=(0,v.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),j=(0,tr.ye)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:b}=(0,rf.wK)(j),y=(0,v.useCallback)(e=>{let{fullscreen:t=!1}=e;d.current!==eK.q.SLIDE_VIEW&&(m(eK.q.SLIDE_VIEW),t&&f(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_ENTERED),b({isFullscreen:t}),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[m,b,f,d,p]),k=(0,v.useCallback)(()=>{d.current!==eK.q.DOC_VIEW&&(m(eK.q.DOC_VIEW),r&&g(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[m,r,g,C,d,p]);return(0,v.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||o||k(),null!==document.webkitCurrentFullScreenElement||o||k(),s(e=>!e),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[o,k,g]),(0,rp.r)(()=>{a&&!a.isDestroyed&&c===eK.q.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof rv.c&&a.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[a,c]),(0,v.useEffect)(()=>eC.F7.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=d.current===eK.q.SLIDE_VIEW;if(!x){if(rC(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!1}),!0}if(rk(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!0}),!0}if(ry(e)&&r)return k(),!0;if(rb(e)&&r&&!u&&!h){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return k(),!0}}}),[y,k,f,u,h,t,x]),{enterSlideView:y,exitSlideView:k,enterFullscreen:f,exitFullscreen:g,exitedFullscreenByClick:o,isFullscreen:r,setIsFullscreen:s,setExitedFullscreenByClick:l}},rI=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,F.CG)(W.gh),r=(0,tr.ye)("presentFullScreen"),{shortcutIcon:s,shortcutKeys:o,buttonLabel:l}=rx()[i],{enterSlideView:c,exitSlideView:d}=rE({editorWrapperEl:t,scrollingParentSelector:n});return(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:s,fixedWidth:!0}),command:o,onClick:()=>{i===eK.q.SLIDE_VIEW?d():c({fullscreen:r})},children:l})};var rA=n(74008),r_=n(67109),rT=n(87342),rO=n(81640);let rD="gray.700";var rR=n(52929);let rP=e=>{let{error:t,refetch:n,...i}=e;return(0,a.jsx)(u.xu,{px:6,py:4,...i,children:(0,a.jsxs)(nF.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,a.jsx)(rR.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,a.jsx)(nW.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(m.cC,{id:"uNQm3r"})}),(0,a.jsx)(nH.X,{maxWidth:"md",children:t.message}),(0,a.jsx)(ef.z,{mt:4,onClick:()=>n(),children:(0,a.jsx)(m.cC,{id:"6gRgw8"})})]})})};var rL=n(89099);let rz=()=>f.ag._({id:"QbrUIo"}),rN=()=>f.ag._({id:"FbBkvL"}),rG=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:s}=e;return n?(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"ZlwDi6"})}):(0,a.jsxs)(c.k,{direction:"column",flex:1,children:[(0,a.jsx)(rd.x,{children:t?(0,a.jsx)(rM,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.cC,{id:"ZlwDi6"}),(0,a.jsxs)(e0.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,a.jsxs)(rL.E,{children:[(0,a.jsx)(rL.U,{children:(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e2.Ma4,"aria-label":rz()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":rD,onClick:()=>r("deckView"),children:rz()})}),(0,a.jsx)(rL.U,{children:(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e2.AGo,"aria-label":rN()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":rD,onClick:()=>r("cardEngagement"),children:rN()})})]})]})]})}),(0,a.jsx)(tK.o,{})]})},rM=()=>(0,a.jsxs)(e0.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(r_.O,{h:12,width:"30%"}),(0,a.jsx)(r_.O,{h:4,width:"80%"})]});var rU=n(98621),rF=n.n(rU),rW=n(17831);let rH=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return rF()("#e5e0df").toHex8String();let s=rF()(i).toHsl(),o=rF()(r).toHsl();return rF()({h:(0,rW.t7)(s.h,o.h,t),s:(0,rW.t7)(s.s,o.s,t),l:(0,rW.t7)(s.l,o.l,t),a:n}).toHex8String()},rB=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),rq=(e,t)=>{let n=0;for(let r in e){var i;n+=(null!==(i=t[r])&&void 0!==i?i:0)+rq(e[r],t)}return n},rV=(e,t)=>{let n=0;for(let r in e){var i;let s=null!==(i=t[r])&&void 0!==i?i:0;n=Math.max(s+rq(e[r],t),n)}return n};var rK=n(25195),rZ=n(62349),rY=n.n(rZ);let rJ=e=>{let{cardsViewed:t,totalCards:n}=e,i=rH({degree:t/n}),r=n>0;return(0,a.jsxs)(em.U,{spacing:3,children:[(0,a.jsxs)(c.k,{flex:1,position:"relative",children:[(0,a.jsx)(rK.E,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,a.jsx)(rQ,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,a.jsx)(d.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,a.jsx)(m.cC,{id:"8Va3Pt"})})]})},rX=e=>{let{cardCount:t}=e,n=(0,v.useMemo)(()=>rY()(1,t),[t]);return(0,a.jsxs)(em.U,{spacing:3,filter:"blur(3px)",children:[(0,a.jsx)(c.k,{flex:1,position:"relative",children:(0,a.jsx)(rK.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,a.jsxs)(d.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},rQ=e=>{let{...t}=e;return(0,a.jsx)(u.Cd,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,a.jsx)(p.G,{icon:e2.LEp,"aria-label":f.ag._({id:"y886Ns"}),size:"xs"})})},r$=e=>t=>(0,rW.t7)(0,100,t/e),r0=e=>{var t;let{cards:n,isColorized:i=!1,scaleToMax:r=!1,includeChildren:s,showViewersPercent:o=!1,leftLabel:l,rightLabel:c,tooltipLabel:d,cardLookupTable:h,onAnalyticsPanelClose:x}=e,p=s?rV(n,h):Math.max(...Object.values(h)),m=r$(p),f=(0,v.useCallback)(e=>m(e),[m]);return(0,a.jsxs)(u.xu,{mt:6,mb:4,children:[(0,a.jsxs)(em.U,{mb:3,children:[(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.NZ,{children:l})}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.kH,{placement:"top",label:d,children:(0,a.jsx)(em.U,{children:(0,a.jsx)(ej.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:c})})})})]}),(0,a.jsx)(u.xu,{width:"100%",children:Object.entries(n).map(e=>{let[n,l]=e;return(0,a.jsx)(r1,{id:n,childCards:l,percentage:null!==(t=h[n])&&void 0!==t?t:0,calculatePercentageScale:f,isColorized:i,cardLookupTable:h,scaleToMax:r,includeChildren:s,showViewersPercent:o,onAnalyticsPanelClose:x},n)})})]})},r1=e=>{var t;let{id:n,cardLookupTable:i,childCards:r,percentage:s,calculatePercentageScale:o,isColorized:l,scaleToMax:h,includeChildren:f,showViewersPercent:g,onAnalyticsPanelClose:j}=e,[C,b]=(0,v.useState)(!1),y=(0,v.useCallback)(()=>{b(!C)},[C]),{title:k}=(0,te.T)({cardId:n}),w=Object.values(r).length>0,S=0===s,E=f?s+rq(r,i):s,I=C?E:0,A=h?o(E):Math.min(100,I),_=C?s:E,O=h?o(_):Math.min(100,_),D={startColor:"#F6AD55",endColor:"#68D391"},R=l?rH({degree:A/100,...D}):"trueblue.50",P=l?rH({degree:O/100,...D}):"trueblue.100";return(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(c.k,{direction:"column",children:(0,a.jsxs)(c.k,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,a.jsxs)(em.U,{pos:"absolute",zIndex:1,children:[w&&(0,a.jsx)(T.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,a.jsx)(p.G,{icon:x._tD}),transform:C?"rotate(90deg)":"",onClick:y,_focus:{shadow:"none"}}),!w&&(0,a.jsx)(c.k,{w:6,justifyContent:"center",alignItems:"center",children:S?(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"s+PDNe"}),children:(0,a.jsx)(u.xu,{color:"blackAlpha.500",children:(0,a.jsx)(p.G,{icon:e2.Aq,size:"sm"})})}):(0,a.jsx)(u.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,a.jsx)(p.G,{icon:e2.nZ9,size:"sm"})})}),(0,a.jsx)(d.x,{color:S?"blackAlpha.500":void 0,noOfLines:1,children:k||(0,a.jsx)(m.cC,{id:"wja8aL"})})]}),(0,a.jsxs)(u.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,a.jsx)(u.xu,{position:"absolute",h:"100%",bg:S?"blackAlpha.200":R,w:"".concat(A,"%")}),(0,a.jsx)(u.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:S?"blackAlpha.300":P,w:"".concat(O,"%")})]}),l&&100===s&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e1.L,{}),(0,a.jsx)(rQ,{alignSelf:"center",zIndex:1})]})]})}),(0,a.jsx)(u.xu,{pl:8,children:w&&Object.entries(r).map(e=>{let[n,r]=e;return(0,a.jsx)(ie.U,{in:C,children:(0,a.jsx)(r1,{id:n,childCards:r,percentage:null!==(t=i[n])&&void 0!==t?t:0,cardLookupTable:i,calculatePercentageScale:o,scaleToMax:h,isColorized:l,includeChildren:f,showViewersPercent:g,onAnalyticsPanelClose:j})},n)})})]})},r2=()=>(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(m.cC,{id:"QXJTby",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{}),2:(0,a.jsx)(d.x,{})}})}),r5=e=>{let{timeInMS:t}=e;return void 0===t?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(m.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},r4=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,a.jsx)(m.cC,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"})}:{chartDescription:(0,a.jsx)(m.cC,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(m.cC,{id:"kTgCTO"}),rightLabel:(0,a.jsx)(m.cC,{id:"AKDcmS"})},r3=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,s=(0,F.qr)(),o=s.getState(),l=(0,W.X9)(o),{data:c,error:d,loading:h,refetch:f}=(0,y.IrH)({variables:{docId:t}}),[g,j]=(0,v.useState)("viewTimePercent"),{chartDescription:C,rightLabel:b,leftLabel:k}=r4(g,i),w="viewersOnly"===n?"viewers":"everyone",S=(0,tr.ye)("cardViewedThreshold"),E=(0,v.useMemo)(()=>{var e;return(null==c?void 0:null===(e=c.docCardsStats)||void 0===e?void 0:e[w])||[]},[null==c?void 0:c.docCardsStats,w]),I=(0,v.useMemo)(()=>rB(E,g),[E,g]),A=(0,v.useCallback)(()=>j("viewTimePercent"),[]),_=(0,v.useCallback)(()=>j("viewersPercent"),[]);return(0,a.jsxs)(u.xu,{children:[(0,a.jsxs)(em.U,{my:4,children:[(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.SZw,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===g?"trueblue.50":"transparent",color:"viewTimePercent"===g?"trueblue.500":rD,onClick:A,children:(0,a.jsx)(m.cC,{id:"XyvAeS"})}),(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:e2.jGC,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===g?"trueblue.50":"transparent",color:"viewersPercent"===g?"trueblue.500":rD,onClick:_,children:(0,a.jsx)(m.cC,{id:"vXtpAZ"})})]}),(0,a.jsx)(r8,{description:C}),d&&(0,a.jsx)(rP,{error:d,refetch:f}),h&&!d&&(0,a.jsx)(r6,{}),!h&&!d&&(0,a.jsx)(r0,{cards:l.tree,cardLookupTable:I,scaleToMax:"viewTimePercent"===g,isColorized:"viewersPercent"===g,includeChildren:"viewTimePercent"===g,showViewersPercent:"viewersPercent"===g,rightLabel:b,leftLabel:k,tooltipLabel:"viewTimePercent"===g?(0,a.jsx)(r2,{}):(0,a.jsx)(r5,{timeInMS:S}),onAnalyticsPanelClose:r})]})},r6=e=>{let{includeDescription:t=!1}=e;return(0,a.jsx)(c.k,{direction:"column",mt:6,mb:4,children:(0,a.jsxs)(e0.g,{align:"stretch",children:[t&&(0,a.jsx)(r_.O,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(r_.O,{h:8},t))]})})},r8=e=>{let{description:t}=e;return(0,a.jsx)(d.x,{color:rD,children:t})};var r9=n(89364),r7=n(78534),se=n(80774),st=n(5832),sn=n(14093),si=n(70189),sr=n(66983),ss=n(79443),so=n(109),sl=n(16556),sa=n(829),sc=n.n(sa);let sd=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,tr.ye)("cardViewedThreshold");return(0,a.jsx)(r7.h,{children:(0,a.jsxs)(se.Tr,{children:[(0,a.jsx)(su,{label:(0,a.jsx)(m.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,a.jsx)(m.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,a.jsx)(su,{label:(0,a.jsx)(m.cC,{id:"pRGfP3"}),width:"35%"}),(0,a.jsx)(su,{label:(0,a.jsx)(m.cC,{id:"QfqHuz"}),tooltip:(0,a.jsx)(r5,{timeInMS:i}),width:"25%"})]})})},su=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,a.jsx)(st.Th,{w:n,children:(0,a.jsx)(d.x,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,a.jsx)(ej.kH,{placement:"top",label:i,children:r}):r},sh=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],sx=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:s,cardCount:o,handleTableRowClick:l,hasIndividualAnalytics:c}=e,{user:u}=(0,eX.SE)(),h=c?t:sc()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==u?void 0:u.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,a.jsx)(sn.x,{children:(0,a.jsxs)(si.i,{colorScheme:"blackAlpha",children:[(0,a.jsx)(sd,{uniqueViewers:n,docCreatedDate:i}),(0,a.jsx)(sr.p,{children:h.map((e,n)=>{let{user:i,lastOpened:h,visitorId:x}=e,p=(null==i?void 0:i.id)===r,m=s.some(e=>e.user.id===(null==i?void 0:i.id)),g=i?i.displayName+(i.id===(null==u?void 0:u.id)?" "+f.ag._({id:"dDUgzP"}):"")||"":f.ag._({id:"VmjbJY"}),j=h?nE()((0,nj.P9)(h)):f.ag._({id:"/JO3xr"}),v={name:g,id:(null==i?void 0:i.id)||x||"",email:null==i?void 0:i.email,isCreator:p,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:j},C=n===t.length-1,b=(null==i?void 0:i.id)===(null==u?void 0:u.id),y=!c&&!b;return(0,a.jsxs)(se.Tr,{cursor:"pointer",onClick:()=>l(v),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,a.jsx)(ss.Td,{borderBottom:C?"0 none":void 0,children:(0,a.jsx)(sp,{name:g,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:p,isAnonymous:!i})}),(0,a.jsx)(ss.Td,{borderBottom:C?"0 none":void 0,children:y?(0,a.jsx)(d.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:sh[n%sh.length]}):(0,a.jsx)(d.x,{fontSize:"sm",children:j})}),(0,a.jsx)(ss.Td,{borderBottom:C?"0 none":void 0,children:y?(0,a.jsx)(rX,{cardCount:o}):(0,a.jsx)(rJ,{cardsViewed:e.cardsViewed||0,totalCards:o||0})})]},(null==i?void 0:i.id)||x)})})]})})},sp=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:s=!1,isAnonymous:o=!1,...l}=e;return(0,a.jsxs)(em.U,{...l,children:[(0,a.jsx)(so.q,{size:"sm",name:t,src:n}),(0,a.jsxs)(tE.K,{spacing:.5,children:[(0,a.jsxs)(d.x,{children:[t,o&&(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),ml:2})]}),(0,a.jsxs)(em.U,{mt:1,children:[(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:i}),(r||s)&&(0,a.jsx)(sl.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,a.jsx)(m.cC,{id:"UE2beD"}):(0,a.jsx)(m.cC,{id:"3L51iw"})})]})]})]})},sm=e=>{var t,n,i,r;let{user:s,onBackClick:o,docId:l,onAnalyticsPanelClose:c}=e,d=(0,F.qr)(),h=d.getState(),x=(0,W.X9)(h),{data:p,error:f,loading:g,refetch:j}=(0,y.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),C=null!==(r=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,b=null==p?void 0:null===(i=p.docCardsStats)||void 0===i?void 0:i.cardCount,k=(0,v.useMemo)(()=>{var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),w=(0,v.useMemo)(()=>rB(k,"viewTimePercent"),[k]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(ef.z,{"aria-label":"Back",leftIcon:(0,a.jsx)(r9.R,{}),variant:"ghost",onClick:o,children:(0,a.jsx)(m.cC,{id:"iH8pgl"})})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(rA.i,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(sf,{user:s,showLastOpened:!0}),b&&(0,a.jsx)(r8,{description:(0,a.jsx)(m.cC,{id:"YJOrjl",values:{cardsViewed:C,totalCards:b}})}),g&&!f&&(0,a.jsx)(r6,{includeDescription:!0}),f&&(0,a.jsx)(rP,{error:f,refetch:j}),!f&&!g&&(0,a.jsx)(r0,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,a.jsx)(r2,{}),onAnalyticsPanelClose:c})]})})]})},sf=e=>{let{user:t,showLastOpened:n}=e;return(0,a.jsxs)(em.U,{align:"center",my:6,children:[(0,a.jsx)(sp,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,a.jsxs)(e0.g,{align:"flex-start",spacing:0,children:[(0,a.jsx)(ej.NZ,{children:(0,a.jsx)(m.cC,{id:"pRGfP3"})}),(0,a.jsx)(d.x,{children:t.lastOpened})]})]})},sg=(e,t,n)=>"everyone"===e?f.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?f.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):f.ag._({id:"V9JX7d"}),sj={everyone:e2.NdV,viewersOnly:e2.Mdf,accessLinkOnly:e2.uWk},sv=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,a.jsxs)(nC.v,{children:[(0,a.jsx)(nb.j,{leftIcon:(0,a.jsx)(p.G,{size:"xs",icon:sj[t]}),as:ef.z,size:"md",rightIcon:(0,a.jsx)(p.G,{size:"xs",icon:x.ptq}),children:sg(t,i,r)}),(0,a.jsx)(ny.q,{zIndex:2,maxW:"380px",children:(0,a.jsxs)(nk._,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,a.jsx)(nw.i,{value:"everyone",isDisabled:0===i,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(p.G,{icon:sj.everyone,size:"xs"}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(d.x,{children:sg("everyone",i,r)}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),(0,a.jsx)(nw.i,{value:"viewersOnly",isDisabled:0===r,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(p.G,{icon:sj.viewersOnly,size:"xs"}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(d.x,{children:sg("viewersOnly",i,r)}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),!1]})})]})};var sC=n(66700),sb=n(4478),sy=n(36012),sk=n(6802),sw=n(70258),sS=n(80237),sE=n(59309),sI=n(2574),sA=n(92638),s_=n(33951),sT=n(10897),sO=n(14582),sD=n(75715),sR=n(96492),sP=n(14141),sL=n(40837);let sz={top:55,right:20,bottom:40,left:24},sN=e=>Math.round(e).toString(),sG=e=>Math.max(...e.map(e=>(0,sD.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),sM={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},sU="var(--chakra-colors-gray-500)",sF="var(--chakra-colors-gray-200)",sW=e=>e.map(e=>e.x),sH=e=>e.map(e=>e.y),sB=e=>{let{width:t,height:n,margin:i=sz,chartData:r,TooltipInner:s,showZero:o,shouldRoundYValues:l,showMaxAndMiddle:c,barColor:d,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:p,tooltipOpen:m,tooltipLeft:f,tooltipTop:g,tooltipData:j,hideTooltip:C}=(0,sR.Z)(),b=(0,v.useRef)(),y=(0,v.useRef)();(0,v.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)},[]);let k=sH(r),w=Math.max(...k),S=[w,Math.round(w/2)],E=sG(c?S:k),I=i.left+E,A=t-I-i.right,_=n-i.top-i.bottom,T={...sP.j,...sM,...h},O=(0,v.useMemo)(()=>(0,sA.Z)({range:[0,A],domain:sW(r),padding:.3}),[A,r]),D=(0,v.useMemo)(()=>(0,s_.Z)({range:[_,0],round:!0,domain:[0,w]}),[_,w]),R=o?D(Math.min(...k.filter(e=>0!==e))):_,P=o&&_-R>6;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.xu,{children:(0,a.jsxs)("svg",{width:t,height:n,children:[(0,a.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,a.jsx)(sE.Z,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,s="bar-".concat(r,"-").concat(i),l=O.bandwidth(),c=_-(null!==(t=D(i))&&void 0!==t?t:0),u=P&&0===c?6:c,h=null!==(n=O(r))&&void 0!==n?n:0,m=_-u;return(0,a.jsxs)(sE.Z,{children:[(0,a.jsx)(sT.Z,{x:h,y:m,width:l,height:u,radius:5,topLeft:!0,topRight:!0,fill:o&&0===i?sF:d,onMouseLeave:()=>{b.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let n=(0,sS.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,a.jsx)(sO.Z,{x:h,y:0,width:l,height:Math.max(0,_-u),opacity:0,onMouseLeave:()=>{y.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let n=(0,sS.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},s)})}),(0,a.jsx)(sk.Z,{top:i.top,left:I,scale:D,stroke:sF,strokeWidth:2,tickValues:c?S:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:l?sN:void 0,tickLength:6,tickStroke:sF,tickLabelProps:()=>({fill:sU,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,a.jsx)(sw.Z,{top:_+i.top,left:I,scale:O,stroke:sF,numTicks:4,tickStroke:sF,tickLabelProps:()=>({fill:sU,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),m&&j&&(0,a.jsx)(sL.Z,{top:g,left:f,style:T,children:(0,a.jsx)(s,{x:j.x,y:j.y})})]})},sq=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:s=!0,data:o,barColor:l="var(--chakra-colors-trueblue-200)",customTooltipStyles:c,onClick:h=()=>{},...x}=e;return(0,a.jsxs)(u.xu,{position:"relative",height:"300px",...x,children:[(0,a.jsx)(d.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,a.jsx)(sI.Z,{children:e=>{let{width:t,height:d}=e;return t<10?null:(0,a.jsx)(sB,{width:t,height:d,showZero:i,chartData:o,barColor:l,customTooltipStyles:c,onClick:h,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:s})}})]})},sV=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,sC.Z)(e);if(!(0,sb.Z)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var c=(0,sy.Z)(n.getDate(),2),d=(0,sy.Z)(n.getMonth()+1,2),u=(0,sy.Z)(n.getFullYear(),4);o="".concat(u).concat(a).concat(d).concat(a).concat(c)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,sy.Z)(Math.floor(x/60),2),m=(0,sy.Z)(x%60,2),f=h<0?"+":"-";l="".concat(f).concat(p,":").concat(m)}else l="Z";var g=(0,sy.Z)(n.getHours(),2),j=(0,sy.Z)(n.getMinutes(),2),v=(0,sy.Z)(n.getSeconds(),2),C=""===o?"":"T",b=[g,j,v].join("extended"===r?":":"");o="".concat(o).concat(C).concat(b).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,i7.p6)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,i7.p6)(o,n),y:0})}return r},sK=e=>{let{viewData:t,dayCount:n}=e,i=sV(t,n);return(0,a.jsx)(sq,{data:i,my:3,chartTitle:(0,a.jsx)(m.cC,{id:"mSEibf"}),TooltipInner:sZ})},sZ=e=>{let{x:t,y:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{children:t}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"6MKtHx",values:{y:n}})})]})},sY=e=>e.every(e=>0===e.uniqueVisitors),sJ=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],sX=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},sQ=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:s,canShare:o}=e,{loading:l,data:d,error:u,refetch:h}=(0,y.xls)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:x}=(0,eX.SE)(),[p,g]=(0,v.useState)("deckView"),[j,C]=(0,v.useState)(null),[b,k]=(0,v.useState)("everyone"),w=(0,i7.p6)(i.createdTime,"PPP"),S=i.title||(0,a.jsx)(m.cC,{id:"wja8aL"}),E=(null==d?void 0:d.memoStats.viewers)||[],I=(null==d?void 0:null===(t=d.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,A=sJ(b,null==d?void 0:d.memoStats),_=(0,J.Y)("individual_analytics",i.organization),{openUpsellModal:T}=(0,rO.z)(),O=sY(A),D=E.filter(e=>{var t;return"everyone"===b||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),R=sX(i,b,null==d?void 0:d.memoStats),P=(0,v.useCallback)(e=>{k(e)},[]),L=(0,v.useCallback)(e=>{g(e)},[]),z=(0,v.useCallback)(e=>{if(!_&&e.id!==(null==x?void 0:x.id)){T({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}C(e)},[T,_,x]),N=(0,v.useCallback)(()=>{C(null)},[]),G=void 0!==u;return(0,a.jsxs)(a.Fragment,{children:[j&&(0,a.jsx)(sm,{user:j,onBackClick:N,docId:i.id,onAnalyticsPanelClose:s}),!j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rG,{hasError:G,isAnalyticsLoading:l,setView:L,view:p,description:(0,a.jsx)(m.cC,{id:"uEtUah",values:{docTitle:S,docCreatedDate:w}})}),G&&(0,a.jsx)(rP,{error:u,refetch:h}),!G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rA.i,{}),(0,a.jsxs)(tZ.f,{children:[l&&(0,a.jsx)(s$,{}),!l&&E.length<=1&&o&&(0,a.jsx)(s0,{handleSharePanelOpen:r}),!l&&(0,a.jsxs)(tE.K,{direction:"column",mt:4,spacing:4,children:[(0,a.jsxs)(c.k,{direction:"row",justify:"space-between",align:"center",children:[(0,a.jsx)(e$.X,{as:"h2",size:"md",children:"cardEngagement"===p?rN():rz()}),(0,a.jsx)(sv,{selected:b,handleMenuItemChange:P,everyoneCount:sX(i,"everyone",null==d?void 0:d.memoStats),viewersOnlyCount:sX(i,"viewersOnly",null==d?void 0:d.memoStats)})]}),"deckView"===p&&O&&(0,a.jsx)(s1,{handleSharePanelOpen:r,dayCount:I}),"deckView"===p&&!O&&(0,a.jsx)(sK,{viewData:A,dayCount:I}),"cardEngagement"===p&&(0,a.jsx)(r3,{docId:i.id,viewerFilter:b,currentViewerFilterCount:R,onAnalyticsPanelClose:s}),(0,a.jsx)(sx,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:D,currentViewerFilterCount:R,docCreatedDate:w,contributors:i.editors||[],cardCount:(null==d?void 0:d.memoStats.cardCount)||0,handleTableRowClick:z,hasIndividualAnalytics:_}),D.length>3&&!_&&(0,a.jsx)(ef.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>T({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,a.jsx)(m.cC,{id:"BKBX4n",values:{0:D.length-3}})}),!_&&(0,a.jsx)(rT.m,{segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:f.ag._({id:"GYgPBy"})})]})]})]})]})]})},s$=()=>(0,a.jsxs)(c.k,{direction:"column",py:2,children:[(0,a.jsx)(r_.O,{h:10,width:"40%",mb:4}),(0,a.jsx)(r_.O,{h:40,mb:4}),(0,a.jsx)(e0.g,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(r_.O,{h:12},t))})]}),s0=e=>{let{handleSharePanelOpen:t}=e;return(0,a.jsx)(c.k,{p:3,px:4,mt:2,bg:"gray.100",color:rD,borderRadius:"base",children:(0,a.jsxs)(c.k,{align:"baseline",fontSize:"sm",children:[(0,a.jsx)(u.xu,{pr:2,children:(0,a.jsx)(p.G,{icon:e2.ILF,"aria-label":"user-icon",size:"sm"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"FNMh4I",components:{0:(0,a.jsx)(d.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},s1=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,a.jsxs)(nF.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,a.jsx)(u.Cd,{size:"30px",bg:"gray.500",children:(0,a.jsx)(p.G,{icon:e2.ImE,color:"white"})}),(0,a.jsx)(nW.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(m.cC,{id:"2OzAI5"})}),n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nH.X,{maxWidth:"sm",children:(0,a.jsx)(m.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,a.jsx)(ef.z,{mt:4,onClick:t,children:(0,a.jsx)(m.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})},s2=e=>{var t,n,i,r,s,o;let{doc:l,onAnalyticsPanelClose:c}=e,h=(0,F.qr)(),x=h.getState(),p=(0,W.X9)(x),{user:f}=(0,eX.SE)(),{data:g,error:j,loading:C,refetch:b}=(0,y.IrH)({variables:{docId:l.id,userId:null==f?void 0:f.id},skip:!(null==f?void 0:f.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),k=null!==(o=null==g?void 0:null===(n=g.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==o?o:0,w=null==g?void 0:null===(i=g.docCardsStats)||void 0===i?void 0:i.cardCount,S=(0,v.useMemo)(()=>{var e;return(null==g?void 0:null===(e=g.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==g?void 0:g.docCardsStats]),E=(0,v.useMemo)(()=>rB(S,"viewTimePercent"),[S]);if(!f)return null;let I=f.id===(null===(r=l.createdBy)||void 0===r?void 0:r.id),A=null===(s=l.editors)||void 0===s?void 0:s.some(e=>e.user.id===f.id),_={name:f.displayName,id:f.id,profileImg:f.profileImageUrl,email:f.email,isContributor:A,isCreator:I};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rd.x,{children:[(0,a.jsx)(m.cC,{id:"ZlwDi6"}),(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,a.jsx)(m.cC,{id:"wja8aL"})})]}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(rA.i,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(u.xu,{children:[(0,a.jsx)(sf,{user:_}),void 0!==w&&(0,a.jsx)(r8,{description:(0,a.jsx)(m.cC,{id:"YJOrjl",values:{cardsViewed:k,totalCards:w}})}),C&&!j&&(0,a.jsx)(r6,{includeDescription:!0}),j&&(0,a.jsx)(rP,{error:j,refetch:b,px:0}),!j&&!C&&(0,a.jsx)(r0,{cards:p.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(m.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(m.cC,{id:"8R7bfR"}),cardLookupTable:E,tooltipLabel:(0,a.jsx)(r2,{}),onAnalyticsPanelClose:c}),(0,a.jsxs)(nF.b,{children:[(0,a.jsx)(rR.z,{}),(0,a.jsx)(m.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:Y.N6,GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]})]})})]})},s5=e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:s}=e,o=(0,eo.i)({base:"sm",md:"2xl",lg:"4xl"}),l=!!s&&"full"==n,d=(0,v.useCallback)(()=>{s&&(s(),r())},[s,r]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(ra.u_,{onClose:r,isOpen:i,size:o,blockScrollOnMount:!1,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{mx:2,minW:0,children:["full"===n?(0,a.jsx)(sQ,{doc:t,handleSharePanelOpen:d,onAnalyticsPanelClose:r,canShare:l}):(0,a.jsx)(s2,{doc:t,onAnalyticsPanelClose:r}),(0,a.jsx)(rA.i,{my:4}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(c.k,{justifyContent:l?"space-between":"flex-end",flex:1,children:[l&&(0,a.jsx)(ef.z,{leftIcon:(0,a.jsx)(p.G,{icon:x.zBy}),variant:"ghost",onClick:d,children:(0,a.jsx)(m.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:r,children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})]})})]})]})})},s4=e=>{let{doc:t,mode:n}=e,i=(0,eM.z$)(),{isOpen:r,onClose:s,onOpen:o}=(0,na.M)({id:"analyticsPanelDisclosure"}),l=(0,v.useCallback)(()=>{null==i||i.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),o()},[i,null==t?void 0:t.id,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.Ma4,fixedWidth:!0}),onClick:l,children:(0,a.jsx)(m.cC,{id:"ZlwDi6"})}),t&&r&&(0,a.jsx)(s5,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:s,mode:n})]})},s3=e=>{let{toggleCommentsPanel:t}=e;return(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.Mzg,fixedWidth:!0}),onClick:t,children:(0,a.jsx)(m.cC,{id:"VbyRUy"})})};var s6=n(82554),s8=n(35183),s9=n(97166),s7=n(99793),oe=n(12985);let ot=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:s,language:o,...l}=e,[c,d]=(0,v.useState)(i),[h,x]=(0,v.useState)(null),p=(0,tf.Kt)(r,100),[m,f]=(0,v.useState)();(0,v.useEffect)(()=>{"css"===o?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,65284)).then(e=>{f(e.css())}):"html"===o&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(e=>{f(e.html())})},[o]),(0,tf.vm)(()=>{x(null),p(c)},[c,p],[c]);let g=[m].filter(Boolean);return(0,a.jsxs)(s8.NI,{isInvalid:!!h,children:[(0,a.jsx)(s9.l,{children:t}),h&&(0,a.jsx)(s7.J1,{children:h}),s&&(0,a.jsx)(s8.Q6,{children:s}),(0,a.jsx)(u.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,a.jsx)(v.Suspense,{fallback:(0,a.jsx)("span",{}),children:(0,a.jsx)(oe.B,{value:c,extensions:g,onChange:d,...l})})})]})};var on=n(61840);let oi=(0,v.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,on.A)(i),{bodyStart:s}=(0,F.CG)(W.$p),o=(0,v.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,a.jsx)(tq.Z,{background:"none"}),(0,a.jsxs)(tV.s,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(tK.o,{}),(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"E16GGw"})}),(0,a.jsx)(tZ.f,{overflowX:"hidden",children:(0,a.jsx)(ot,{label:f.ag._({id:"fC5kYg"}),helperText:f.ag._({id:"0AZNtw"}),initialValue:s,updateValue:o,language:"html",height:"600px"})}),(0,a.jsx)(tY.m,{children:(0,a.jsx)(ef.z,{w:"100%",variant:"solid",onClick:n,children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})})]})]})})});oi.displayName="CustomCodeDrawer";let or=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,na.M)({id:"codeEditor"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.dT$,fixedWidth:!0}),onClick:i,children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(m.cC,{id:"cnlGIm"}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(s6.C,{colorScheme:"green",ml:2,children:(0,a.jsx)(m.cC,{id:"YBt9YP"})})]})}),(0,a.jsx)(oi,{editor:t,isOpen:n,onClose:r})]})},os=e=>{let{doc:t}=e,[n]=(0,y.LT4)(),[i]=(0,y.iX9)(),r=(0,v.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.ZeM,fixedWidth:!0}),onClick:r(!1),children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsx)(rr.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:r(!0),children:(0,a.jsx)(m.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})};var oo=n(82282),ol=n(31807),oa=n(20678);let oc=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,oo.Z)((0,ol.Z)(i.createdTime),"PPP"),s=(0,oa.$)(null==i?void 0:i.title);return(0,a.jsxs)(u.xu,{px:4,py:2,maxW:"300px",children:[(0,a.jsx)(d.x,{noOfLines:6,children:s}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:r}})}),(0,a.jsx)(ej.kH,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},od=e=>{let{doc:t,editor:n}=e,i=(0,i$.e)(),r=(0,v.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,eb.Q5)()})},[t.id,i,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(m.cC,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})})};var ou=n(18412);let oh=()=>(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.kwI,fixedWidth:!0}),onClick:()=>{ou.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(m.cC,{id:"U8WPSi"})}),ox=e=>{let{site:t,path:n}=e,i=(0,eD.AR)({site:t,path:n});return i?(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"kcKqQj"}),children:(0,a.jsx)(T.h,{ml:-1,href:i,as:nz(),target:"_blank","aria-label":f.ag._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,a.jsx)(p.G,{icon:x.ZE5})})}):null},op=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:s}=e,o=(0,oa.$)(null==i?void 0:i.title),l=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),c=(0,eD.jl)(i,r);return(0,a.jsxs)(u.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsxs)(em.U,{align:"start",children:[(0,a.jsx)(d.x,{noOfLines:2,children:o}),c&&(0,a.jsx)(ox,{site:r,path:null==l?void 0:l.path})]}),l&&(0,a.jsx)(om,{path:l.path}),s&&"createdTime"in i&&(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,a.jsx)(m.cC,{id:"oJFw5Q",values:{0:(0,i7.Dw)(i.createdTime)}})}),"createdBy"in i&&s&&(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},om=e=>{let{path:t}=e;return"/"===t?(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"wFCbbC"})}):(0,a.jsx)(d.x,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})};var of=n(24772),og=n(36371),oj=n(73582),ov=n(2969),oC=n(3181),ob=n(13272),oy=n(41098),ok=n(82729),ow=n(4170),oS=n(97412);let oE=e=>{let{updateDocSetting:t,editor:n}=e,{animationsEnabled:i,defaultFullBleed:r,defaultContentWidth:s,presentBackdrop:o,cardDimensions:l}=(0,F.CG)(W.US),c=(0,oS.l)(l);return(0,a.jsxs)(tE.K,{spacing:5,mt:4,divider:(0,a.jsx)(rA.i,{}),children:[(0,a.jsx)(oI,{title:f.ag._({id:"jBvtuq"}),description:f.ag._({id:"Q3Qdcd"}),icon:x.qnl,control:(0,a.jsx)(oS.Ft,{cardDimensions:l,updateCardDimensions:e=>t("cardDimensions",e)})}),(0,a.jsx)(oI,{title:f.ag._({id:"lklIf1"}),description:f.ag._({id:"aJ+ISV"}),icon:x.dH7,value:"lg"===s,onChange:e=>{t("defaultContentWidth",e?"lg":void 0),n.commands.resetCardSettings({container:{width:void 0}})}}),(0,a.jsx)(oI,{title:f.ag._({id:"lsVq2Z"}),description:f.ag._({id:"u/0NJZ"}),icon:x.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0),n.commands.resetCardSettings({cardSize:"default"})}}),(0,a.jsx)(oI,{title:f.ag._({id:"7VfbQM"}),description:f.ag._({id:"XZHPlI"}),icon:x.UHQ,value:o,onChange:e=>t("presentBackdrop",e)}),(0,a.jsx)(oI,{title:f.ag._({id:"HgWdP3"}),description:f.ag._({id:"X3TlS6"}),icon:x.kq2,value:(0,ow.C)({animationsEnabled:i}),onChange:e=>{t("animationsEnabled",e)}}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ymPKi7"})}),(0,a.jsxs)(em.U,{alignItems:"flex-start",spacing:"4",children:[(0,a.jsx)(o_,{label:f.ag._({id:"wl99H6"}),cardDimensions:c,isWide:"lg"===s,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,a.jsx)(o_,{label:f.ag._({id:"GWjDlt"}),cardDimensions:c,isWide:"lg"===s,showBackdrop:o&&"full"!==r,scaleCardUp:!o||"full"===r})]})]})]})},oI=e=>{let{title:t,description:n,icon:i,children:r,helpDescription:s,value:o,onChange:l,control:c,direction:u="row"}=e;return(0,a.jsxs)(tE.K,{alignItems:"flex-start",spacing:2,direction:u,children:[i&&(0,a.jsx)(d.x,{fontSize:"lg",width:8,maxW:8,children:(0,a.jsx)(p.G,{icon:i,fixedWidth:!0})}),(0,a.jsxs)(tE.K,{spacing:4,flex:1,children:[(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsxs)(e$.X,{size:"sm",fontWeight:"semibold",children:[t," ",s?(0,a.jsx)(ej.Yq,{label:s,ml:1}):null]}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.600",children:n}),c]}),r]}),l&&(0,a.jsx)(oy.r,{isChecked:o,onChange:e=>l(e.target.checked)})]})},oA=e=>{let{hideExtraLines:t}=e;return(0,a.jsxs)(tE.K,{w:"100%",py:2,px:2.5,children:[(0,a.jsx)(u.xu,{w:20,h:1.5,bg:"gray.200"}),(0,a.jsxs)(em.U,{flex:"1",alignItems:"flex-start",children:[(0,a.jsx)(ok.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,a.jsx)(u.xu,{fontSize:"lg",children:(0,a.jsx)(p.G,{icon:x.VmB})})}),(0,a.jsxs)(tE.K,{flex:"1",spacing:"1",children:[(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(u.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,a.jsx)(u.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},o_=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:s}=e,o={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(s?"scale(1.15)":"none")};return(0,a.jsxs)(tE.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,a.jsx)(c.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,a.jsx)(ok.o,{...o,ratio:t.aspectRatio,children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(oA,{hideExtraLines:i})})}):(0,a.jsx)(tE.K,{...o,children:(0,a.jsx)(oA,{hideExtraLines:i})})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.700",children:r})]})};var oT=n(64743),oO=n(55891);let oD=e=>{let{editor:t}=e,n=(0,F.CG)(W.Pu),i=(0,F.CG)(W.XV),r=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,a.jsx)(oO.o,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,a.jsxs)(nF.b,{children:[(0,a.jsx)(rR.z,{}),(0,a.jsx)(m.cC,{id:"dyXYfJ"})]}),isDark:(0,t1.wj)(n),isValidSource:oT.Rr})};var oR=n(85573);let oP=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,a.jsxs)(d.x,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,a.jsx)(p.G,{icon:e2.e7M})," ",t,"/",n]})};var oL=n(66625),oz=n(60536),oN=n(82476),oG=n(92768),oM=n(37733),oU=n(56920),oF=n(57124);let oW=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},oH=()=>{let e=(0,n9.p)(),[t,n]=(0,v.useState)(!1),{openPageSetup:i}=(0,tH.AA)(),r=(0,oF._O)(),s=(0,F.CG)(tU.yx),o=(0,F.CG)(e_.lH),[l,{loading:c}]=(0,y.qbt)(),h=oW(o,null==s?void 0:s.id),[x,p]=(0,v.useState)(()=>(0,eD.es)(h||"")),[f,g]=(0,v.useState)(()=>(0,eD.es)(h||"")),j=(0,eD.gT)({routes:(null==o?void 0:o.routes)||[],path:(0,eD.fJ)(x),docId:null==s?void 0:s.id}),C=!!j,b=f!==x&&!C,k=(0,v.useCallback)(()=>{p(f)},[f]),w=(0,v.useCallback)(()=>{if(!b)return;if(!(null==o?void 0:o.id)||!(null==s?void 0:s.id)){console.error("Missing site or doc");return}let t=(0,eD.Is)(x);l({variables:{input:{siteId:o.id,docId:s.id,path:t}},refetchQueries:["GetSite"]}).then(()=>{g((0,eD.es)(t)),p((0,eD.es)(t)),n(!0)}).catch(t=>{e({status:"error",title:(0,a.jsx)(m.cC,{id:"dl5vwx"}),description:t.message}),console.error("[UrlSlugForm] Error setting route",t.message)})},[b,null==s?void 0:s.id,x,l,null==o?void 0:o.id,e]);return r?(0,a.jsxs)(tE.K,{pb:6,children:[(0,a.jsx)(tE.K,{direction:"row",children:(0,a.jsxs)(d.x,{children:[(0,a.jsx)(m.cC,{id:"dq8+qI"})," "]})}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(tE.K,{spacing:2,children:(0,a.jsx)(em.U,{spacing:1,children:(0,a.jsxs)(s8.NI,{as:"fieldset",isInvalid:C,children:[(0,a.jsx)(em.U,{children:(0,a.jsxs)(nK.B,{children:[(0,a.jsx)(oG.Ui,{children:"/"}),(0,a.jsx)(oR.I,{isDisabled:c,bg:"white",flex:2,value:x,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},onChange:e=>{let t=(0,oU.IR)(e.currentTarget.value);p(t)}}),(0,a.jsx)(oM.R,{in:b,unmountOnExit:!0,children:(0,a.jsx)(u.xu,{ml:2,children:(0,a.jsxs)(eg.h,{w:"100%",children:[(0,a.jsx)(ef.z,{variant:"solid",isLoading:c,isDisabled:C,onClick:w,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})}),(0,a.jsx)(ef.z,{onClick:k,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})})]})})})]})}),j?(0,a.jsx)(s7.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,a.jsx)(d.x,{fontSize:"xs",children:(0,a.jsx)(m.cC,{id:"DQaTdC",components:{0:(0,a.jsx)(iQ.r,{textDecoration:"underline",onClick:()=>i(j.docId,"preview")})}})})}):(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(s8.Q6,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"ZMlbHK"})}),t&&(0,a.jsxs)(nF.b,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,a.jsx)(rR.z,{}),(0,a.jsx)(nH.X,{children:(0,a.jsx)(m.cC,{id:"ZyBxCy"})})]})]})]})})})]}):(0,a.jsx)(a.Fragment,{})},oB=e=>{let{updateDocSetting:t}=e,{metaDescription:n}=(0,F.CG)(W.US),i=(0,F.CG)(W.yx),r=(0,F.CG)((0,oL.cn)(null==i?void 0:i.id)),s=(0,F.CG)(oL.$4),[o,l]=(0,v.useState)(()=>(null==i?void 0:i.title)||""),[c,h]=(0,v.useState)(()=>n||""),x=i&&!!i.site&&(0,eD.Vr)(i.site),[p]=(0,y.D1_)(),g=(0,v.useCallback)(e=>{i&&p({variables:{id:i.id,title:e,titleEdited:!0}})},[i,p]),j=(0,tf.Kt)(g,300),C=(0,v.useCallback)(e=>{l(e.target.value.substring(0,oN.S8)),j(e.target.value.substring(0,oN.S8))},[j]),b=(0,v.useCallback)(e=>{t("metaDescription",e)},[t]),k=(0,tf.Kt)(b,300),w=(0,F.CG)(oL.NN),E=null==w?void 0:w.previewUrl,I=(0,J.dU)(null==i?void 0:i.organization),A=(0,S.U)(o||r,I),_=(0,S.V)(c||s,I);return(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(s8.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"MHrjPM"})}),(0,a.jsx)(oP,{length:o.length||0,idealLength:oN.si,maxLength:oN.S8})]}),(0,a.jsx)(oR.I,{value:o,placeholder:r||f.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&g(o)},onChange:C,"data-title-input":!0})]}),(null==i?void 0:i.site)&&(0,a.jsx)(oH,{}),(0,a.jsxs)(s8.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"Nu4oKW"})}),(0,a.jsx)(oP,{length:c.length||0,idealLength:oN.cl,maxLength:oN.Us})]}),(0,a.jsx)(nZ.g,{bg:"white",rows:4,value:c,placeholder:(null==s?void 0:s.trim())||f.ag._({id:"2VBqT4"}),onChange:e=>{h(e.target.value.substring(0,oN.Us)),k(e.target.value.substring(0,oN.Us))}})]}),(0,a.jsxs)(u.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,a.jsxs)(tE.K,{spacing:2,mb:4,children:[(0,a.jsx)(d.x,{size:"sm",children:(0,a.jsx)(m.cC,{id:"h8sMnd"})}),(0,a.jsx)(oq,{title:A,description:_,screenshotUrl:E})]}),x&&(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(rA.i,{}),(0,a.jsx)(d.x,{size:"sm",children:(0,a.jsx)(m.cC,{id:"d3xOlk"})}),(0,a.jsx)(oV,{title:A,description:_,screenshotUrl:E}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"Ubf8D8"})})]})]}),(0,a.jsx)(oz.V,{label:(0,a.jsx)(m.cC,{id:"SDyz5I"}),segmentEvent:th.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:i})]})},oq=e=>{let{title:t,description:n,screenshotUrl:i}=e;return(0,a.jsxs)(u.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,a.jsx)(ok.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,a.jsx)(u.xu,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative"})}),(0,a.jsxs)(tE.K,{px:4,py:3,spacing:1,children:[(0,a.jsx)(d.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,a.jsx)(d.x,{fontSize:"xs",noOfLines:2,children:n})]})]})},oV=e=>{let{title:t,description:n}=e;return(0,a.jsxs)(tE.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,a.jsx)(d.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,a.jsx)(d.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},oK=["cards","background","preview"],oZ=e=>{let{editor:t}=e,n=(0,F.CG)(W.ke),{isOpen:i,onClose:r,onOpen:s}=(0,na.M)({id:"pageSetupDisclosure"}),[o,l]=(0,v.useState)(0);(0,v.useEffect)(()=>{let e=e=>{let t=oK.indexOf(e);l(t),s()},t=ou.T.on("openPageSetup",e),n=nu.pw.on(nu.TI.OPEN_PAGE_SETUP,e);return()=>{t(),n()}},[s,r]);let c=(0,on.A)(t),d=(0,v.useCallback)((e,n)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:{[e]:n}})},[t]),h=(0,of.S)({base:"calc(100% - 1rem)",lg:"auto"}),f=(0,of.S)({base:"bottom",lg:"right"})||"right";return t?(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,isOpen:i,placement:f,onClose:r,size:"md",blockScrollOnMount:!1,children:[(0,a.jsx)(tq.Z,{background:{base:void 0,lg:"none"}}),(0,a.jsxs)(tV.s,{"data-testid":"page-setup-drawer",onKeyDown:c,h:h,children:[(0,a.jsx)(tK.o,{}),(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"fvaOtb"})}),(0,a.jsx)(tZ.f,{overflowX:"hidden",children:(0,a.jsxs)(og.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:o,onChange:l,children:[(0,a.jsxs)(oj.t,{children:[(0,a.jsxs)(ov.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.s2})}),(0,a.jsx)(m.cC,{id:"Ccpbzh"})]}),(0,a.jsxs)(ov.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.UHQ})}),(0,a.jsx)(m.cC,{id:"GtJbUa"})]}),(0,a.jsxs)(ov.O,{children:[(0,a.jsx)(u.xu,{mr:2,children:(0,a.jsx)(p.G,{icon:x.g4A})}),(0,a.jsx)(m.cC,{id:"rdUucN"})]})]}),(0,a.jsxs)(oC.n,{children:[(0,a.jsx)(ob.x,{p:2,mt:4,children:(0,a.jsx)(oE,{editor:t,updateDocSetting:d},n)}),(0,a.jsx)(ob.x,{p:2,mt:4,children:(0,a.jsx)(oD,{editor:t,updateDocSetting:d},n)}),(0,a.jsx)(ob.x,{p:2,mt:4,children:(0,a.jsx)(oB,{editor:t,updateDocSetting:d},n)})]})]})})]})]})}):null},oY=e=>{let{editor:t,withDrawer:n=!1,onClick:i,icon:r,label:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:r||(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),onClick:i||(()=>{ou.T.emit("openPageSetup","cards")}),children:s||(0,a.jsx)(m.cC,{id:"Kx2GmY"})}),n&&(0,a.jsx)(oZ,{editor:t})]})},oJ=e=>{let{site:t}=e,n=(0,oo.Z)((0,ol.Z)(t.createdTime),"PPP");return(0,a.jsxs)(u.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsx)(d.x,{noOfLines:6,children:t.name}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:n}})})]})},oX=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,a.jsxs)(ra.u_,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T3exbL",values:{domainName:n}})})})}),(0,a.jsx)(tZ.f,{children:(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"DkFGZj"})})})}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"red",isLoading:r,onClick:i,loadingText:f.ag._({id:"EF2EU9"}),children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})]})]})};var oQ=n(56453),o$=n(75397);let o0=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,s=(0,n9.p)(),o=null==i?void 0:i.name,l=null==o?void 0:o.split(".")[0].split("-").slice(-1)[0],[c,u]=(0,v.useState)(null==o?void 0:o.split(".")[0].split("-").slice(0,-1).join("-")),h=null==o?void 0:o.split(".").slice(1).join("."),[x,{loading:p}]=(0,y.gVY)(),g=(0,v.useCallback)(()=>{x({variables:{input:{siteId:r,name:c}}}).then(()=>{s({title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{s({title:(0,a.jsx)(m.cC,{id:"YoFYYT"}),description:(0,a.jsx)(m.cC,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[x,r,c,s,n]);return(0,a.jsxs)(ra.u_,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"VMKg48"})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(s8.NI,{children:[(0,a.jsxs)(em.U,{children:[(0,a.jsx)(oR.I,{value:c,onKeyDown:e=>{"Enter"===e.key&&g()},onChange:e=>{let t=(0,oU.IR)(e.target.value);u(t)},placeholder:f.ag._({id:"dcSbw0"})}),(0,a.jsxs)(s9.l,{whiteSpace:"nowrap",children:["-",l,".",h]})]}),(0,a.jsx)(s8.Q6,{lineHeight:"normal",children:(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"bvN4Vx"})})})]})}),(0,a.jsxs)(tY.m,{children:[(0,a.jsx)(ef.z,{onClick:n,mr:3,variant:"ghost",children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:g,isLoading:p,isDisabled:c.length<3,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})]})]})]})},o1={pending:{tooltip:(0,a.jsx)(m.cC,{id:"/BjVEU"}),badgeText:(0,a.jsx)(m.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,a.jsx)(m.cC,{id:"7Bj3x9"}),badgeText:(0,a.jsx)(m.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},o2=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:s}=o1[t];return(0,a.jsx)(ej.kH,{label:i,placement:"top",children:(0,a.jsx)(s6.C,{display:"flex",justifyContent:"center",colorScheme:s,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},o5=e=>{let{domain:t,onDomainSetupClick:n,path:i,onDeleteClick:r,numDomains:s,siteId:o}=e,l=(0,eD.mn)({domain:t,path:i}),c=(0,n9.p)(),h=!t.builtin,g=t.builtin,j=h&&("verified"!==t.status||"verified"===t.status&&s>1),[C]=(0,y.NEQ)(),b=(0,v.useCallback)(async()=>{await C({variables:{id:t.id}}),c({title:(0,a.jsx)(m.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[C,t.id,c]),{isOpen:k,onOpen:w,onClose:S}=(0,I.q)({id:"edit-domain-modal"});return(0,a.jsxs)(oQ.Z,{variant:"outline",children:[(0,a.jsx)(o$.e,{children:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsxs)(em.U,{children:[(0,a.jsx)(tE.K,{children:"verified"===t.status?(0,a.jsx)(ej.kH,{label:l,placement:"top",children:(0,a.jsx)(ef.z,{as:iQ.r,variant:"link",href:l,wordBreak:"break-all",target:"_blank",rightIcon:(0,a.jsx)(u.xu,{ml:2,children:(0,a.jsx)(p.G,{icon:e2.wlW,size:"xs"})}),whiteSpace:"normal",children:t.name})}):(0,a.jsx)(d.x,{children:t.name})}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(em.U,{children:(0,a.jsx)(o2,{status:t.status,onClick:"failed"===t.status?b:null})}),(0,a.jsxs)(eg.h,{children:[g&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"VMKg48"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:w,"aria-label":f.ag._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,a.jsx)(p.G,{icon:x.Xcf})})}),h&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"UqSZMD"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:()=>{n(t.name)},"aria-label":f.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,a.jsx)(p.G,{icon:x.DBf})})}),j&&(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"C2YqXi"}),placement:"top",children:(0,a.jsx)(T.h,{onClick:()=>{r(null==t?void 0:t.id)},"aria-label":f.ag._({id:"C2YqXi"}),size:"sm",variant:"ghost",colorScheme:"red",icon:(0,a.jsx)(p.G,{icon:x.Vui})})})]})]}),g&&(0,a.jsx)(u.xu,{children:(0,a.jsxs)(d.x,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,a.jsx)(m.cC,{id:"Zzuxg+"})," ",(0,a.jsx)(ej.Yq,{label:(0,a.jsx)(m.cC,{id:"FdwjYK"})})]})})]})}),(0,a.jsx)(o0,{isOpen:k,onClose:S,domain:t,siteId:o})]})},o4=()=>{let e=(0,v.useRef)(!1),[t,n]=(0,v.useState)(()=>void 0!==window.entri);return(0,tf.Gq)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}},o3=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},o6=async()=>{let e=await o3();if(!window.entri)throw Error("Entri not found");let{dnsRecords:t}=(0,eD.Yd)(""),n={applicationId:"gamma",token:e,dnsRecords:t};return console.log("[launchEntri] Purchasing Entri with config",n),window.entri.purchaseDomain(n),o9()},o8=async e=>{let t=await o3(),{domain:n,dnsRecords:i}=(0,eD.Yd)(e),r={applicationId:"gamma",token:t,prefilledDomain:n,dnsRecords:i};return console.log("[launchEntri] Launching Entri with config",r),window.entri.showEntri(r),o9()},o9=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s,o;let e=(null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error)?"".concat((null===(s=i.detail.error)||void 0===s?void 0:s.title)?"".concat(i.detail.error.title,": "):""," ").concat((null===(o=i.detail.error)||void 0===o?void 0:o.details)?i.detail.error.details:""):void 0;t(e)}};window.addEventListener("onEntriClose",n,!1)}),o7=e=>{let{siteId:t}=e,n=(0,eM.z$)(),{entriReady:i}=o4(),r=(0,n9.p)(),[s,o]=(0,v.useState)(!1),[l,{loading:c}]=(0,y.kui)(),d=(0,v.useCallback)(async()=>{t&&(o(!0),o6().then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(eM.AA.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),l({variables:{input:{name:i,siteId:t,method:y.Q0V.Purchase}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),r({title:(0,a.jsx)(m.cC,{id:"5Ae0kE"}),description:(0,a.jsx)(m.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),r({title:(0,a.jsx)(m.cC,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),r({title:e?(0,a.jsx)(m.cC,{id:"H7PVmT"}):(0,a.jsx)(m.cC,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{o(!1)}))},[l,n,t,r]);return t?(0,a.jsx)(ef.z,{variant:"outline",size:"md",onClick:d,isLoading:s,isDisabled:!i,children:(0,a.jsx)(m.cC,{id:"+VODT0"})}):null},le=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:s,domainToTransfer:o,isTransferring:l}=e,c=(0,v.useCallback)(()=>{s(),n()},[n,s]),u=(0,v.useCallback)(async()=>{r(),n()},[n,r]);return o?(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(ra.u_,{isOpen:t,onClose:c,size:"lg",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"hqplvI"})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(d.x,{children:o.siteArchived?(0,a.jsx)(m.cC,{id:"SeHn75",values:{domainName:i,0:o.siteName}}):(0,a.jsx)(m.cC,{id:"tX38ij",values:{domainName:i,0:o.siteName}})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"rKH6wM"})})]})}),(0,a.jsxs)(tY.m,{children:[(0,a.jsx)(ef.z,{variant:"ghost",mr:3,onClick:c,children:(0,a.jsx)(m.cC,{id:"yz7wBu"})}),(0,a.jsx)(ef.z,{isLoading:l,variant:"ghost",colorScheme:"red",onClick:u,children:(0,a.jsx)(m.cC,{id:"vTZxnA"})})]})]})]})}):(0,a.jsx)(a.Fragment,{})},lt=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:s,isAddingDomain:o,refetchSites:l}=e,c=(0,tr.ye)("purchaseDomain"),u=(0,n9.p)(),{currentWorkspace:h}=(0,eX.SE)(),[x,p]=(0,v.useState)(),[g,j]=(0,v.useState)(),[C,b]=(0,v.useState)(""),{isOpen:k,onOpen:w,onClose:S}=(0,I.q)({id:"delete-domain-modal"}),{isOpen:E,onOpen:A,onClose:_}=(0,na.M)({id:"transferDomainModal"}),[T,{loading:O}]=(0,y.KtP)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),D=n.domains.find(e=>e.id===x),R=(0,eD.m6)(C)&&void 0===n.domains.find(e=>e.name===C),[P,{loading:L}]=(0,y.Yqv)(),[z,{loading:N}]=(0,y.dLz)(),[G,M]=(0,v.useState)(void 0),U=(0,v.useCallback)(async e=>{var t;let i=await T({variables:{name:e,workspaceId:null==h?void 0:h.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,o=null==r?void 0:r[0];if(n&&o){j(o),A();return}s(e),j(void 0),b("")},[null==h?void 0:h.id,T,s,A,n]);(0,tf.vm)(()=>{x?M(null==D?void 0:D.name):M(void 0)},[x,null==D?void 0:D.name],[x]);let F=(0,v.useCallback)(()=>{S(),p(()=>void 0)},[S]),W=(0,v.useCallback)(async()=>{D&&(await P({variables:{id:x}}),await l(),u({title:(0,a.jsx)(m.cC,{id:"V4fbcv",values:{0:D.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),F())},[l,P,x,D,F,u]),H=(0,oF.Y)("custom_domains"),B=H&&c,q=(0,eD.Zz)(n.domains),V=(0,v.useCallback)(()=>{j(void 0)},[]),K=(0,v.useCallback)(async()=>{g&&(await z({variables:{id:null==g?void 0:g.id,siteId:n.id},refetchQueries:["GetSite"]}),u({title:(0,a.jsx)(m.cC,{id:"dHhDGG",values:{0:g.name}}),position:"top",status:"success",duration:5e3}),b(""),j(void 0))},[g,n.id,u,z]);return(0,a.jsxs)(tE.K,{spacing:8,p:2,children:[H&&(0,a.jsxs)(tE.K,{spacing:4,mb:2,children:[B&&(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontSize:"md",children:(0,a.jsx)(m.cC,{id:"gBiND0"})}),(0,a.jsx)(o7,{siteId:null==n?void 0:n.id})]}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{children:B?(0,a.jsx)(m.cC,{id:"9UtMWk"}):(0,a.jsx)(m.cC,{id:"ssWCSl"})}),(0,a.jsxs)(em.U,{children:[(0,a.jsx)(oR.I,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?f.ag._({id:"jt/2Ky"}):f.ag._({id:"1y9z1r"}),value:C,onChange:e=>b(e.target.value),onKeyDown:e=>{"Enter"===e.key&&R&&(e.preventDefault(),U(C))}}),(0,a.jsx)(tE.K,{children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:R,children:(0,a.jsx)(ef.z,{isDisabled:!R,variant:"plain",onClick:()=>{U(C)},isLoading:o||O,children:(0,a.jsx)(m.cC,{id:"EdEpYN"})})})})]})]})]}),(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsx)(m.cC,{id:"bwl+tv"}),q.map(e=>(0,a.jsx)(o5,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{p(e),w()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!H&&(0,a.jsx)(rT.m,{segmentEvent:eM.AA.GAMMA_PRO_UPSELL_DOMAINS,title:(0,a.jsx)(m.cC,{id:"m6aLo0"}),description:(0,a.jsx)(m.cC,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:Y.x8,GAMMA_PROPER_NOUN:Y.N6}})}),k&&(0,a.jsx)(oX,{onClose:F,onDelete:W,domainName:G,isDeleting:L}),(0,a.jsx)(le,{isOpen:E,onClose:_,onTransferCancel:V,domainName:C,domainToTransfer:g,onTransferConfirm:K,isTransferring:N})]})};var ln=n(97010),li=n(44438),lr=n(12483);let ls=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[s,o]=(0,v.useState)("initial"),{entriReady:l}=o4(),[u,h]=(0,v.useState)(!1),f=(0,n9.p)(),{dnsRecords:g,isRootDomain:j,subdomain:C}=(0,v.useMemo)(()=>(0,eD.Yd)(i||""),[i]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(ra.u_,{isOpen:t,onClose:n,size:"3xl",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"xQMU8T",values:{domainName:i}})}),(0,a.jsx)(tK.o,{}),(0,a.jsxs)(tZ.f,{children:["initial"===s&&(0,a.jsx)(oQ.Z,{variant:"filled",children:(0,a.jsx)(o$.e,{children:(0,a.jsxs)(tE.K,{spacing:4,py:4,mx:"auto",children:[(0,a.jsxs)(tE.K,{spacing:2,children:[(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(d.x,{textAlign:"center",fontSize:"2xl",children:(0,a.jsx)(p.G,{icon:x.g4A,size:"lg"})}),(0,a.jsx)(d.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,a.jsx)(m.cC,{id:"w5l5pM"})})]}),(0,a.jsx)(d.x,{textAlign:"center",maxW:"unset",children:(0,a.jsx)(m.cC,{id:"MhdvBQ"})})]}),(0,a.jsx)(c.k,{align:"center",justify:"center",w:"100%",children:(0,a.jsxs)(tE.K,{w:64,maxW:"100%",children:[(0,a.jsx)(ef.z,{size:"md",variant:"solid",isDisabled:!l,isLoading:u,onClick:()=>{i&&(h(!0),o8(i).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&lr.Tb("[entri.showEntri] Error setting up domain: ".concat(e)),f({title:e?(0,a.jsx)(m.cC,{id:"l/2jzv"}):(0,a.jsx)(m.cC,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{h(!1)}))},children:(0,a.jsx)(m.cC,{id:"qu+sXe"})}),(0,a.jsxs)(em.U,{children:[(0,a.jsx)(rA.i,{}),(0,a.jsx)(d.x,{color:"gray.600",children:(0,a.jsx)(m.cC,{id:"BzEFor"})}),(0,a.jsx)(rA.i,{})]}),(0,a.jsx)(ef.z,{size:"md",variant:"plain",onClick:()=>{o("manualSetup")},children:(0,a.jsx)(m.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===s&&(0,a.jsx)(oQ.Z,{variant:"filled",children:(0,a.jsx)(o$.e,{children:(0,a.jsxs)(tE.K,{spacing:6,children:[(0,a.jsx)(d.x,{fontWeight:"semibold",fontSize:"lg",children:(0,a.jsx)(m.cC,{id:"L5N7HX"})}),(0,a.jsxs)(si.i,{variant:"simple",children:[(0,a.jsx)(r7.h,{children:(0,a.jsxs)(se.Tr,{children:[(0,a.jsx)(st.Th,{children:(0,a.jsx)(m.cC,{id:"6YtxFj"})}),(0,a.jsx)(st.Th,{children:(0,a.jsx)(m.cC,{id:"+zy2Nq"})}),(0,a.jsx)(st.Th,{isNumeric:!0,children:(0,a.jsx)(m.cC,{id:"HKH+W+"})})]})}),(0,a.jsx)(sr.p,{children:(g||[]).map(e=>(0,a.jsxs)(se.Tr,{children:[(0,a.jsx)(ss.Td,{fontFamily:"mono",children:e.host}),(0,a.jsx)(ss.Td,{fontFamily:"mono",children:e.type}),(0,a.jsx)(ss.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,a.jsxs)(nF.b,{status:"info",colorScheme:"orange",children:[(0,a.jsx)(rR.z,{}),(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{fontWeight:"bold",fontSize:"md",children:(0,a.jsx)(m.cC,{id:"NxHkkp"})}),(0,a.jsxs)(ln.GS,{pl:"4",spacing:"2",children:[j?1===oN.Co.length?(0,a.jsx)(ln.HC,{children:(0,a.jsx)(m.cC,{id:"YMrXdT",values:{0:oN.Co[0]},components:{0:(0,a.jsx)(li.E,{colorScheme:"gray"}),1:(0,a.jsx)(li.E,{colorScheme:"gray"}),2:(0,a.jsx)(li.E,{colorScheme:"gray"})}})}):(0,a.jsx)(ln.HC,{children:(0,a.jsx)(m.cC,{id:"FM+LNW",values:{0:oN.Co.slice(0,-1).map(e=>(0,a.jsx)(li.E,{colorScheme:"gray",children:e},e)),1:oN.Co.slice(-1)[0]},components:{0:(0,a.jsx)(li.E,{colorScheme:"gray"}),1:(0,a.jsx)(em.U,{display:"inline",divider:(0,a.jsx)("span",{children:", "})}),2:(0,a.jsx)(li.E,{colorScheme:"gray"}),3:(0,a.jsx)(li.E,{colorScheme:"gray"})}})}):null,(0,a.jsx)(ln.HC,{children:(0,a.jsx)(m.cC,{id:"Jmb6Yp",values:{subdomain:C,GAMMA_SITES_HOST:oN.ax},components:{0:(0,a.jsx)(li.E,{colorScheme:"gray"}),1:(0,a.jsx)(li.E,{colorScheme:"gray"}),2:(0,a.jsx)(li.E,{colorScheme:"gray"})}})})]})]})]}),r&&(0,a.jsxs)(em.U,{justifyContent:"space-between",children:[(0,a.jsx)(ef.z,{variant:"plain",onClick:()=>o("initial"),children:(0,a.jsx)(m.cC,{id:"iH8pgl"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,a.jsx)(m.cC,{id:"RyhVuk"})})]})]})})})]}),(0,a.jsx)(tY.m,{})]})]})})},lo=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,a.jsx)(it.W,{py:16,maxW:"container.md",children:t}):(0,a.jsx)(a.Fragment,{children:t})},ll=e=>{let{showHeadings:t=!0}=e,n=(0,eM.z$)(),i=(0,F.CG)(e_.lH),r=(0,n9.p)(),{refetch:s}=(0,iv.ZUZ)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:o,onOpen:l,onClose:u}=(0,na.M)({id:"domainSetupModal"}),h=null==i?void 0:i.domains.find(e=>"pending"===e.status),[x,p]=(0,v.useState)(null),[f,{loading:g}]=(0,iv.kui)(),[j,C]=(0,v.useState)();(0,v.useEffect)(()=>{if(!h)return;let e=setInterval(()=>{s()},1e4);return()=>{clearInterval(e)}},[h,s,i]);let b=(0,v.useCallback)(e=>{C(e),l()},[l]),y=(0,v.useCallback)(e=>{let{domainName:t,source:s}=e;"addDomain"===x&&f({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===s?iv.Q0V.Automatic:iv.Q0V.Manual}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:s}),r({title:(0,a.jsx)(m.cC,{id:"p8Oc6N"}),description:(0,a.jsx)(m.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),u()})},[f,n,x,u,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",mt:4,children:(0,a.jsxs)(lo,{shouldWrap:t,children:[t&&(0,a.jsxs)(tE.K,{spacing:1,mb:4,children:[(0,a.jsx)(e$.X,{children:(0,a.jsx)(m.cC,{id:"AZ4xlc"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"KuoJwF"})})]}),i?(0,a.jsx)(lt,{site:i,onDomainSetupClick:b,onAddDomain:e=>{l(),C(e),p("addDomain")},isAddingDomain:g,refetchSites:s}):(0,a.jsx)(tQ.AA,{}),o&&j&&(0,a.jsx)(ls,{domainName:j,isOpen:o,onClose:()=>{u(),p(null)},onDomainConfirmed:x?y:null})]})})};var la=n(20437),lc=n(99787),ld=n(16494),lu=n(19576),lh={src:"/_next/static/media/no-navbar.e9d28333.png"},lx={src:"/_next/static/media/top-navbar.97a69a83.png"};let lp=e=>{let t=(0,F.CG)(e_.lH);return t?(0,a.jsx)(lm,{site:t,...e}):null},lm=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,n9.p)(),s=(0,tr.ye)("sitesNav"),[o,l]=(0,v.useState)(t.name),[u,h]=(0,v.useState)(t.gtmContainerId),[g,j]=(0,v.useState)(t.navEnabled),[C,b]=(0,v.useState)(!1),[k,w]=(0,v.useState)(!1),[S,E]=(0,v.useState)(null),{currentWorkspace:I}=(0,eX.SE)(),[A]=(0,y.Iyu)(),_=(0,v.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;b(!0);let e={siteId:null==t?void 0:t.id,name:o,navEnabled:g,gtmContainerId:u};!g||(null==t?void 0:t.navContent)||(e.navContent=(0,eN.JB)()),await A({variables:{input:e}}),r({title:(0,a.jsx)(m.cC,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),b(!1)},[u,o,g,t,r,A]),O=(0,v.useCallback)(async e=>{(null==t?void 0:t.id)&&(w(!0),await A({variables:{input:{siteId:null==t?void 0:t.id,faviconUrl:e}}}),r({title:e?(0,a.jsx)(m.cC,{id:"64GEyu"}):(0,a.jsx)(m.cC,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),w(!1))},[null==t?void 0:t.id,r,A]),D=o!==(null==t?void 0:t.name)||g!==(null==t?void 0:t.navEnabled)||u!==(null==t?void 0:t.gtmContainerId);return(0,a.jsxs)(c.k,{w:"100%",flex:1,direction:"column",px:2,children:[(0,a.jsxs)(lo,{shouldWrap:n,children:[n&&(0,a.jsx)(e$.X,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,a.jsx)(m.cC,{id:"Tz0i8g"})}),(0,a.jsxs)(tE.K,{spacing:4,mt:6,children:[(0,a.jsxs)(s8.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"Lve3H6"})})}),(0,a.jsx)(oR.I,{onChange:e=>{l(e.currentTarget.value)},placeholder:f.ag._({id:"ZiMSMQ"}),value:o})]}),(0,a.jsxs)(s8.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"+Qaboy"})})}),(0,a.jsx)(c.k,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,a.jsx)(nx.E,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"XyBdok"}),children:(0,a.jsx)(T.h,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:k,size:"sm",icon:(0,a.jsx)(p.G,{icon:x.XAH}),"aria-label":f.ag._({id:"XyBdok"}),onClick:()=>O(null)})})]}):k||S===ld.D.Uploading?(0,a.jsx)(tI.$,{}):(0,a.jsx)(lc.un,{orgId:null==I?void 0:I.id,uploadType:"icon",editType:"icon",dropHereText:f.ag._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{E(ld.D.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await O(n),E(ld.D.Done))},onUploadFailed:e=>{E(ld.D.Error),r({title:(0,a.jsx)(m.cC,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(m.cC,{id:"ifTGl2"})})]}),s&&(0,a.jsxs)(s8.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"UxKoFf"})})}),(0,a.jsxs)(la.M,{columns:2,spacing:6,flex:1,children:[(0,a.jsx)(lf,{name:f.ag._({id:"Nom9QG"}),src:lx.src,isSelected:g,onClick:()=>{j(!0)}}),(0,a.jsx)(lf,{name:f.ag._({id:"BvDFuc"}),src:lh.src,isSelected:!g,onClick:()=>{j(!1)}})]})]}),(0,a.jsxs)(s8.NI,{children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"d4WWfP"})})}),(0,a.jsxs)(c.k,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,a.jsx)(c.k,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==u?void 0:u.length)?"gray.800":"gray.500",fontWeight:"400",h:10,pl:4}),(0,a.jsx)(oR.I,{pl:16,placeholder:"XXXXXX",value:u||"",onChange:e=>{let t=lu.R.sanitize(e.currentTarget.value);h(t.replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(m.cC,{id:"6LEeiE",components:{0:(0,a.jsx)("br",{}),1:(0,a.jsx)(ef.z,{"aria-label":"Learn more about Google Tag Manager",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"xs",rightIcon:(0,a.jsx)(rl.h,{ml:-1})})}})})]}),i&&(0,a.jsx)(oz.V,{label:(0,a.jsx)(m.cC,{id:"SDyz5I"}),segmentEvent:th.AA.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,a.jsxs)(c.k,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,a.jsx)(e1.L,{}),(0,a.jsx)(ef.z,{variant:"solid",isDisabled:!D,onClick:_,isLoading:C,children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})]})})]})},lf=e=>{let{name:t,src:n,onClick:i,isSelected:r,...s}=e;return(0,a.jsxs)(tE.K,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...s,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,a.jsx)(u.xu,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,a.jsx)(nx.E,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,a.jsxs)(em.U,{children:[r&&(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.LEp})}),(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"500",children:t})]})]})},lg=(0,v.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,F.CG)(W.$p),i=(0,v.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,a.jsx)(ot,{label:f.ag._({id:"fC5kYg"}),helperText:f.ag._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});lg.displayName="CustomCodePanel";let lj=(0,v.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,tr.ye)("docCustomCode");return(0,a.jsx)(tE.K,{spacing:4,children:(0,a.jsx)(tE.K,{spacing:8,children:(0,a.jsxs)(eg.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.ovd,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,a.jsx)(m.cC,{id:"AZ4xlc"})}),(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,a.jsx)(m.cC,{id:"Tz0i8g"})}),i&&(0,a.jsx)(ef.z,{borderRadius:"md",leftIcon:(0,a.jsx)(p.G,{icon:x.dT$,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,a.jsx)(m.cC,{id:"E16GGw"})})]})})})});lj.displayName="SettingsPanelHeader";var lv=n(37164);let lC=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,oU.IR)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,lv.x0)(6))),r},lb={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},ly=e=>{let{sites:t}=e,n=(0,F.CG)(W.yx),i=(0,eM.z$)(),{currentWorkspace:r}=(0,eX.SE)(),[s]=(0,y.qbt)(),[o,l]=(0,v.useState)(!1),u=(0,n9.p)(),{push:h,reload:f}=(0,ev.useRouter)(),g=(0,v.useCallback)(async e=>{if(!n)return;l(!0);let o=null==t?void 0:t.find(t=>t.id===e),c=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let d=lC({title:n.title,site:o});if(await (0,eD.iL)(c),!c){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(eM.AA.DOC_MOVED_TO_SITE,{doc_id:c,site_id:e}),s({variables:{input:{siteId:e,docId:c,path:d}},refetchQueries:["GetSite"]}).then(()=>{(0,ey.yQ)({docId:c}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",c),u({position:"top",title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"rYG2u6"}),status:"success",duration:5e3}),f()}).catch(e=>{u({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),l(!1)}).finally(()=>{l(!1)})},[i,null==r?void 0:r.id,n,f,s,t,u]);return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)(c.k,{w:"100",h:"400px",maxH:"30vh",children:(0,a.jsx)(tQ.AA,{})}),!o&&(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(tE.K,{pt:2,pb:2,children:(0,a.jsxs)(d.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,a.jsx)(m.cC,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ",(0,a.jsxs)(iQ.r,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,a.jsx)(m.cC,{id:"Px95UX"}),(0,a.jsx)(rl.h,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,a.jsx)(m.cC,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),null==t?void 0:t.map(e=>(0,a.jsx)(oQ.Z,{onClick:()=>g(e.id),onKeyPress:t=>{"Enter"===t.key&&g(e.id)},...lb,children:(0,a.jsx)(o$.e,{children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(tE.K,{spacing:0,children:(0,a.jsxs)(em.U,{children:[e.faviconUrl&&(0,a.jsx)(nx.E,{w:"4",src:e.faviconUrl}),(0,a.jsx)(d.x,{fontWeight:"600",children:e.name})]})}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(p.G,{icon:x.eFW})]})})},e.id))]})]})]})},lk=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,na.M)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,eX.SE)(),{data:r,loading:s}=(0,y.bBo)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),o=null==r?void 0:r.sites;return s?(0,a.jsx)(tI.$,{size:"xs"}):o&&0===o.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.z,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,a.jsx)(m.cC,{id:"hsMvVQ"})}),(0,a.jsxs)(ra.u_,{isOpen:e,onClose:n,size:"3xl",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"i4b0iJ"})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(tZ.f,{maxH:"80vh",overflowY:"auto",children:(0,a.jsx)(ly,{sites:o})}),(0,a.jsx)(tY.m,{children:(0,a.jsx)(ef.z,{mr:3,onClick:n,children:(0,a.jsx)(m.cC,{id:"yz7wBu"})})})]})]})]})},lw=e=>{let{onEnable:t,isLoading:n}=e;return(0,a.jsxs)(tE.K,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,a.jsx)(nx.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,a.jsx)(e$.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",textAlign:"center",css:{textWrap:"pretty"},children:(0,a.jsx)(m.cC,{id:"0864Ii",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"dapHcS",components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)("code",{})}})}),(0,a.jsxs)(tE.K,{w:"100%",children:[(0,a.jsx)(ef.z,{variant:"solid",onClick:t,isLoading:n,children:(0,a.jsx)(m.cC,{id:"6/5iNu"})}),(0,a.jsx)(lk,{})]}),(0,a.jsx)(ef.z,{as:iQ.r,variant:"ghost",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,a.jsx)(p.G,{icon:x.gJF,size:"sm"}),children:(0,a.jsx)(m.cC,{id:"Px95UX"})})]})};var lS=n(28165),lE=n(38045),lI=n(25925);let lA=(0,lE.E)(u.xu),l_={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},lT=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:s,disabledText:o}=e;return(0,a.jsxs)(c.k,{cursor:r?"not-allowed":"pointer",className:(0,h.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,a.jsx)(u.xu,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,a.jsx)(lI.M,{initial:!1,children:t?(0,a.jsx)(lA,{as:"span",position:"absolute",...l_,children:(0,a.jsx)(tI.$,{size:"sm"})},"loading"):i?(0,a.jsx)(lA,{as:"span",position:"absolute",...l_,children:s},"checked"):(0,a.jsx)(lA,{as:"span",position:"absolute",...l_,children:o},"unchecked")})}),(0,a.jsxs)(u.xu,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,a.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,a.jsx)("span",{className:"slider round"})]})]})},lO=(0,lS.F4)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lD=(0,lS.F4)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lR=(0,lS.F4)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),lP=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:s="gray.800"}=e;return(0,a.jsx)(u.Cd,{color:s,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(lR," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lO," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lD," 2.7s infinite")}:{}},children:n?(0,a.jsxs)("span",{className:"fa-stack",children:[(0,a.jsx)(p.G,{icon:x.u6k,className:"fa-stack-1x"}),(0,a.jsx)(p.G,{icon:t,className:"fa-stack-1x"})]}):(0,a.jsx)(p.G,{size:"1x",icon:t})})},lL=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:s}=e,o=(0,eD.Vr)(n),l=(0,eE.Lu)(),h=(0,eX.py)("manage",s),p=l||h,f=(0,eD.k2)(n),g=p?r||(t?(0,a.jsx)(m.cC,{id:"mkk40+"}):o?(0,a.jsx)(m.cC,{id:"f4CBNf"}):(0,a.jsx)(m.cC,{id:"5G4vd5"})):(0,a.jsx)(m.cC,{id:"Z2uNdQ"});return(0,a.jsxs)(em.U,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,a.jsx)(u.xu,{children:(0,a.jsxs)(c.k,{alignItems:"center",children:[(0,a.jsx)(lP,{shouldPulse:f,bg:f?"#6910D1":"gray.200",color:f?"white":"gray.800",icon:f?x.cL$:x.g4A}),(0,a.jsxs)(u.xu,{ml:3,children:[(0,a.jsx)(em.U,{children:(0,a.jsx)(d.x,{children:f?(0,a.jsx)(m.cC,{id:"MuDTSp"}):o?(0,a.jsx)(m.cC,{id:"AAm5jh"}):(0,a.jsx)(m.cC,{id:"HzFHhy"})})}),(0,a.jsx)(c.k,{align:"center",children:(0,a.jsx)(em.U,{spacing:1,align:"center",children:(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&f?(0,a.jsx)(re,{site:n}):o?(0,a.jsx)(m.cC,{id:"N4VTXP"}):(0,a.jsx)(m.cC,{id:"1bmqGL"})})})})]})]})}),(0,a.jsx)(u.xu,{children:(0,a.jsx)(ej.kH,{label:g,placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(lT,{isChecked:o,isDisabled:!!(t||r||!p),isLoading:t,onChange:i})})})]})},lz=e=>{var t,n;let{doc:i,isOpen:r,onOpen:s,onPublishSettingsClose:o}=e,l=(0,n9.p)(),d=(0,F.TL)(),u=(0,F.CG)(e_.lH),h=(0,F.CG)(e_.$U),{editor:x}=(0,tw._i)(),{currentWorkspace:p}=(0,eX.SE)(),[f,g]=(0,v.useState)(!1),[j]=(0,y.V$$)(),[C]=(0,y.cxO)(),[b]=(0,y.A0Z)(),[k]=(0,y.UoQ)(),[w,S]=(0,v.useState)("domains"),E=i.id,I=i.title,A=null==p?void 0:p.id,_=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,T=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",O=(null==u?void 0:u.archived)?(0,a.jsx)(m.cC,{id:"VAyYv6"}):null;(0,v.useEffect)(()=>{let e=ou.T.on("openSiteSettings",e=>{S(e),s()});return()=>{e()}},[s]);let D=(0,v.useCallback)(async()=>{if(A){g(!0),k({variables:{id:E,themeId:null}});try{await j({variables:{input:{workspaceId:A,name:I,themeId:_,routes:[{docId:E,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,e_.zs)(d)({site:null==t?void 0:t.createSite,docId:E})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),l({title:(0,a.jsx)(m.cC,{id:"Pdboh4"}),description:(0,a.jsx)(m.cC,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[j,d,E,I,_,l,k,A]),R=(0,v.useCallback)(async()=>{if(h){g(!0);try{await C({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:y.yE1,variables:{id:E}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),l({title:(0,a.jsx)(m.cC,{id:"ksq4sM"}),description:(0,a.jsx)(m.cC,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[C,E,h,l]),P=(0,v.useCallback)(async()=>{if(h){g(!0);try{await b({variables:{id:h},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:y.yE1,variables:{id:E}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),l({title:(0,a.jsx)(m.cC,{id:"aQnYTJ"}),description:(0,a.jsx)(m.cC,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{g(!1)}}},[E,b,h,l]),L=(0,v.useCallback)(()=>{null===T?D():"enabled"===T?R():"disabled"===T&&P()},[D,R,P,T]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsx)(tB.d,{isOpen:r,onClose:o,size:"md",children:(0,a.jsxs)(tV.s,{p:0,shadow:"xl",children:[(0,a.jsxs)(rd.x,{children:[(0,a.jsx)(m.cC,{id:"WtsmDd"})," ",(0,a.jsx)(s6.C,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"YBt9YP"})})]}),(0,a.jsx)(tK.o,{}),(0,a.jsxs)(tZ.f,{children:[(0,a.jsxs)(e0.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(lL,{isLoading:f,site:u,doc:i,onChange:L,disabledText:O}),!!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rn,{context:"settings"}),(0,a.jsx)(rA.i,{}),"disabled"===T&&(0,a.jsxs)(nF.b,{status:"warning",mb:6,children:[(0,a.jsx)(rR.z,{}),(0,a.jsx)(m.cC,{id:"CHu+l0"})]}),(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(lj,{selectedPanel:w,setSelectedPanel:S}),"website"===w?(0,a.jsx)(lp,{showHeadings:!1,doc:i}):"domains"===w?(0,a.jsx)(ll,{showHeadings:!1}):"code"===w?(0,a.jsx)(lg,{editor:x}):null]})]})]}),!u&&(0,a.jsx)(lw,{onEnable:L,isLoading:f})]})]})})})},lN=e=>{let{doc:t}=e,n=!!(null==t?void 0:t.site),{isOpen:i,onClose:r,onOpen:s}=(0,na.M)({id:"PublishSettingsDisclosure"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.g4A,fixedWidth:!0}),onClick:s,children:n?(0,a.jsx)(m.cC,{id:"gKmuNS"}):(0,a.jsx)(m.cC,{id:"sAalO9"})}),t&&(0,a.jsx)(lz,{isOpen:i,onOpen:s,doc:t,onPublishSettingsClose:r})]})};var lG=n(43019),lM=n(74411);let lU=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},lF=()=>({today:f.ag._({id:"ecUA8p"}),thisWeek:f.ag._({id:"yByRxz"}),earlier:f.ag._({id:"HGg4T/"})}),lW=()=>(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(r_.O,{w:"max(350px, 30%)",h:10}),(0,a.jsx)(r_.O,{w:"max(320px, 22%)",h:5})]}),lH=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:s,paywallCount:o}=e;if(!n||!n.length)return(0,a.jsx)(a.Fragment,{});let l=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",h=(0,a.jsxs)(ov.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:l,maskImage:l},border:"none",isDisabled:s,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,a.jsxs)(c.k,{w:"100%",direction:"column",children:[(0,a.jsx)(d.x,{fontSize:"sm",children:nE()((0,nj.P9)(t))}),(0,a.jsx)(d.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,a.jsx)(s6.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,a.jsx)(m.cC,{id:"wL3cK8"})})]});return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.kH,{placement:"top",isDisabled:!s,label:s?(0,a.jsx)(m.cC,{id:"PYTBm5",values:{paywallCount:o}}):void 0,children:(0,a.jsx)(u.xu,{mb:4,children:h})}),(0,a.jsx)(rT.m,{isNarrow:!0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,a.jsx)(m.cC,{id:"mVKYtH"})})]}):h},lB=e=>{var t;let n=[],i=(0,v.useMemo)(()=>(0,nj.yd)({items:e,sortBy:"createdTime"}),[e]);return{groupedSnapshots:i,paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},lq=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:s,onFetchMoreClick:o,isFetchingMore:l}=e;return(0,a.jsxs)(oj.t,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[s,o]=e;return(0,a.jsxs)(v.Fragment,{children:[(0,a.jsx)(ej.NZ,{px:4,py:2,mx:0,mt:2,children:lF()[s]}),o.map((e,s)=>{let{createdTime:o,editors:l,id:c}=e;return(0,a.jsx)(lH,{onClick:()=>r(c),isLatest:0===t&&0===s,createdTime:o,editors:l,showPaywall:n===c,paywallCount:i},c)})]},s)}),s&&(0,a.jsx)(ef.z,{isLoading:l,onClick:o,children:(0,a.jsx)(m.cC,{id:"yQ2kGp"})})]})},lV=()=>(0,a.jsxs)(oj.t,{w:"100%",children:[(0,a.jsx)(r_.O,{h:16}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2}),(0,a.jsx)(r_.O,{h:16,mt:2})]}),lK=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{mt:1,children:(0,a.jsx)(m.cC,{id:"yf//Op",values:{numSnapshots:r,0:(0,i7.Dw)(i),1:(0,i7.Dw)(i)}})}),(0,a.jsx)(d.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,i7.p6)(i,"PPp")}})})]})},lZ="snapshot-editor-root",lY=e=>{let{id:t,doc:n,content:i}=e,r=(0,v.useMemo)(()=>{if(i)return lU(i,e=>e.type===ts.W4).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,lG.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,a.jsx)(eP.fb,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(lZ),isInsideDrawer:!0},t)},lJ=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,s=(0,n9.p)(),{getCollaborativeEditorInstance:o}=(0,tw._i)(),[l,d]=(0,v.useState)(!1),[h,{data:x}]=(0,y.e8E)();(0,tf.vm)(()=>{h({variables:{id:r.id}})},[r.id,h,n],[n]);let p=null==x?void 0:null===(t=x.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:f,data:g,called:j,fetchMore:C}=(0,y.pfN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[b,{loading:k,data:w}]=(0,y.opq)({nextFetchPolicy:"cache-only"}),S=(null==g?void 0:g.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:E,paywalledSnapshotId:I,paywallCount:A}=lB(S),_=null==g?void 0:g.snapshots.pageInfo,T=!!(!I&&j&&(null==_?void 0:_.hasNextPage)&&(null==_?void 0:_.endCursor)),O=(0,v.useCallback)(()=>{(null==_?void 0:_.hasNextPage)&&(null==_?void 0:_.endCursor)&&(d(!0),C({variables:{after:_.endCursor}}).finally(()=>{d(!1)}))},[C,null==_?void 0:_.endCursor,null==_?void 0:_.hasNextPage]),D=S[0];(0,v.useEffect)(()=>{(null==D?void 0:D.id)&&b({variables:{snapshotId:D.id,docId:r.id}})},[r.id,b,null==D?void 0:D.id]);let R=(0,oa.$)(null==r?void 0:r.title),P="createdBy"in r?r.createdBy:void 0,L=null==r?void 0:r.createdTime,z=null==w?void 0:w.snapshot,N=z&&z.id===p,G=(0,of.S)(lM._o);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(tV.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tK.o,{}),(0,a.jsxs)(rd.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[f&&(0,a.jsx)(lW,{}),!f&&r&&S&&(0,a.jsx)(lK,{numSnapshots:(null==S?void 0:S.length)||0,createdBy:P,createdTime:L,title:R})]}),(0,a.jsx)(tZ.f,{p:0,h:"100%",children:(0,a.jsxs)(c.k,{direction:"row",h:"100%",children:[(0,a.jsx)(u.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,a.jsxs)(og.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[f&&(0,a.jsx)(lV,{}),!f&&S&&(0,a.jsx)(lq,{onClick:e=>{b({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:E,paywalledSnapshotId:I,paywallCount:A,showFetchMore:T,onFetchMoreClick:O,isFetchingMore:l})]})}),(0,a.jsx)(c.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:lZ,css:{"--editor-width":"100%","--editor-font-size":G},children:(0,a.jsxs)(c.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,a.jsx)(t4.Y,{}),(!z||k)&&(0,a.jsx)(tQ.AA,{}),z&&!k&&(0,a.jsx)(lY,{id:z.id,doc:r,content:null==z?void 0:z.content.default})]})})]})}),(0,a.jsx)(tY.m,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,a.jsxs)(eg.h,{spacing:4,children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:i,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.kH,{label:N?(0,a.jsx)(m.cC,{id:"HJo72u"}):(0,a.jsx)(m.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,a.jsx)(ef.z,{variant:"solid",isDisabled:!z||N,onClick:()=>{var e;if(!z)return;let t=null==S?void 0:null===(e=S.find(e=>e.id===z.id))||void 0===e?void 0:e.createdTime,n=o();if(!n)return;n.commands.setContent(z.content.default,!0);let{annotationsAbsolute:r}=z.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),s({title:(0,a.jsx)(m.cC,{id:"7ovf4C"}),description:(0,a.jsx)(m.cC,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:t?(0,i7.p6)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})})})]})})]})]})})},lX=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,na.M)({id:"snapshotsDrawer"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.SZw,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(m.cC,{id:"6Z5x06"})}),t&&(0,a.jsx)(lJ,{doc:t,isOpen:n,onClose:i})]})},lQ=()=>{let e=nU();return e?(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.Fzb,fixedWidth:!0}),as:iQ.r,textDecoration:"none !important",href:e,target:(0,eb.Q5)()?"_self":"_blank",children:(0,a.jsx)(m.cC,{id:"7U0bM7"})}):null},l$=()=>(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.q2v,fixedWidth:!0}),onClick:()=>nu.pw.emit(nu.TI.OPEN_THEME_DRAWER,{}),children:(0,a.jsx)(m.cC,{id:"90/Rx7"})}),l0=e=>{let{editor:t}=e,n=(0,v.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.paY,fixedWidth:!0}),onClick:n,command:(0,ej.cE)("Mod+Z"),children:(0,a.jsx)(m.cC,{id:"9uI/rE"})})},l1=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:s}=(0,y.$gs)(),o=(0,tr.ye)("editDocAI"),{user:l}=(0,eX.SE)(),c=(0,eX.py)("view",t),d=(0,eX.py)("comment",t),u=(0,eX.py)("edit",t),h=(0,eX.py)("manage",t),x=(0,F.CG)(e_.lH),p=(0,eE.lP)(),{editor:m}=(0,nh._)(),f=(0,F.CG)(W.hN),g=!!l&&(!!o||!h)&&!t.site,j=!!(l&&0!==l.workspaceMemberships.length&&!t.site),v=(0,tr.ye)("docCustomCode")&&u;return s?(0,a.jsxs)(ny.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsxs)(ro.k,{children:[x?(0,a.jsx)(op,{doc:t,site:x}):(0,a.jsx)(oc,{doc:t}),(0,a.jsx)(ri.R,{}),f&&(0,a.jsx)(l0,{editor:m}),u&&(0,a.jsx)(lX,{doc:t}),t.site&&(0,a.jsx)(rI,{editorWrapperEl:i,scrollingParentSelector:r}),(0,a.jsx)(lQ,{}),p&&(0,a.jsx)(l$,{}),u&&m&&(0,a.jsx)(oY,{editor:m,withDrawer:!0}),c&&!!l&&(0,a.jsx)(oh,{}),v&&(0,a.jsx)(or,{editor:m})]}),x?(0,a.jsx)(ri.R,{}):null,(0,a.jsxs)(ro.k,{children:[x&&(0,a.jsx)(oJ,{site:x}),x?null:(0,a.jsx)(ri.R,{}),!!o&&d&&(0,a.jsx)(s3,{toggleCommentsPanel:n}),g&&(0,a.jsx)(s4,{doc:t,mode:h?"full":"personal"}),h&&(0,a.jsx)(lN,{doc:t}),j&&(0,a.jsx)(od,{doc:t,editor:m}),h&&(0,a.jsx)(rh,{site:x}),!t.site&&h?(0,a.jsx)(os,{doc:t}):null]})]}):(0,a.jsxs)(ny.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[x?(0,a.jsx)(oJ,{site:x}):(0,a.jsx)(oc,{doc:t}),(0,a.jsx)(l2,{})]})},l2=()=>(0,a.jsx)(ny.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:(0,a.jsx)(np.V,{label:(0,a.jsx)(m.cC,{id:"IdcoRx"}),isConnected:!1,maxWidth:"300px"})}),l5=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,a.jsx)(ej.kH,{placement:"top",label:(0,a.jsx)(m.cC,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,a.jsx)(rr.s,{icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.PQh,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,a.jsxs)(c.k,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,a.jsx)(m.cC,{id:"jNnwuI"}),i&&(0,a.jsx)(tI.$,{size:"xs"})]})})})},l4=e=>{let{title:t,path:n}=e;return(0,a.jsxs)(a.Fragment,{children:[t?"".concat(t," "):"",n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(li.E,{as:"span",fontFamily:"mono",children:n})," "]})]})},l3=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:s}=(0,ev.useRouter)(),[o,{loading:l}]=(0,y.nRC)(),c=(0,n9.p)(),u=(0,F.CG)(e_.B$),h=(0,v.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await o({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),c({title:(0,a.jsx)(m.cC,{id:"oMgC5V"}),description:(0,a.jsx)(m.cC,{id:"gw6aHP",components:{0:(0,a.jsx)(l4,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),u===n.id){let e=(0,ey.hm)({site:i,docId:n.id});e&&await s(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,u,o,c,r,t,s]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(ra.u_,{onClose:t,isOpen:!0,size:"xl",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"kbKU/5"})}),(0,a.jsx)(tK.o,{isDisabled:l}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,a.jsx)(li.E,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,a.jsx)(d.x,{color:"red.500",children:(0,a.jsx)(m.cC,{id:"2xOCJW"})})]})}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",onClick:t,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"red",onClick:h,isLoading:l,children:(0,a.jsx)(m.cC,{id:"O1M1zi"})})]})})]})]})})},l6=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:s,onOpen:o,onClose:l}=(0,I.q)({id:"confirm-remove-page-modal"}),c=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(l3,{site:n,doc:i,path:r,onClose:l}),(0,a.jsx)(ej.kH,{placement:"top",isDisabled:c,label:(0,a.jsx)(m.cC,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,a.jsx)(rr.s,{color:"red.500",isDisabled:!c,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0})}),onClick:o,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})})]})},l8=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:s,onToggleOffline:o,...l}=e,c=(0,rs.b)(),{openPageSetup:d}=(0,tH.AA)(),{editor:h}=(0,nh._)(),{replace:f}=(0,ev.useRouter)(),{isConnected:g}=(0,y.$gs)(),j=(null==n?void 0:n.id)&&(0,eD.Rh)({site:t,docId:n.id}),{publishDoc:C,isPublishing:b}=iC({doc:n,site:t,path:j}),k=(0,eD.Vr)(t),w=(0,F.CG)(W.yx),S=(0,eX.py)("edit",w),E=(0,eX.py)("edit",w),I=(0,eX.py)("manage",w),A=(0,eE.O1)(),_=(0,F.CG)(W.hN),T=(0,v.useCallback)(()=>{(null==n?void 0:n.id)&&c({path:"".concat((0,eD.Is)(i.path),"-copy"),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[c,null==n?void 0:n.id,i.path,t.id,t.routes]);return g?(0,a.jsx)(i9.h,{children:n&&(0,a.jsxs)(ny.q,{...l,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:[(0,a.jsx)(op,{doc:n,site:t,showCreatedInfo:!0}),(0,a.jsx)(ri.R,{}),E&&h&&(0,a.jsx)(oY,{icon:(0,a.jsx)(p.G,{icon:x.Lc0,fixedWidth:!0}),onClick:()=>d(i.docId,"preview"),label:(0,a.jsx)(m.cC,{id:"aBZSpm"}),editor:h}),E&&h&&(0,a.jsx)(oY,{onClick:()=>d(i.docId,"cards"),withDrawer:r,editor:h})," ",(0,a.jsx)(ri.R,{}),A&&!i.offline&&(s||b)&&(0,a.jsx)(l5,{onClick:C,isDisabled:!k,isPublishing:b}),(0,a.jsx)(rr.s,{icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:e2.sl_,fixedWidth:!0})}),onClick:()=>{let e=(0,ey.yQ)({docId:n.id,preview:!0});f(e,void 0,{shallow:!0})},children:(0,a.jsx)(m.cC,{id:"rdUucN"})}),!!o&&(0,a.jsx)(rr.s,{onClick:o,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(p.G,{icon:i.offline?x.gMD:x.uoY,fixedWidth:!0})}),children:i.offline?(0,a.jsx)(m.cC,{id:"i/zQgj"}):(0,a.jsx)(m.cC,{id:"ySCSAn"})}),(0,a.jsx)(ri.R,{}),E&&h&&(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:T,children:(0,a.jsx)(m.cC,{id:"IVskn1"})}),_&&r&&(0,a.jsx)(l0,{editor:h}),S&&r&&(0,a.jsx)(lX,{doc:n}),I&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ri.R,{}),(0,a.jsx)(l6,{site:t,doc:n,path:j})]})]})}):(0,a.jsx)(l2,{})},l9=e=>{if(!e)return{path:"untitled-page",title:f.ag._({id:"kveQAJ"})};let t=e.filter(e=>e.path.startsWith("/untitled-page"));if(0===t.length)return{title:f.ag._({id:"kveQAJ"}),path:"untitled-page"};let n=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.ag._({id:"kveQAJ"})+" "+String(n+1),path:"untitled-page-".concat(n+1)}},l7=e=>{let{site:t}=e,n=(0,rs.b)(),{isOpen:i,onClose:r,onOpen:s}=(0,na.M)({id:"add-page-ai-modal"}),[o,l]=(0,v.useState)(!1),c=(0,v.useCallback)(()=>{s()},[s]),u=(0,v.useCallback)(()=>{let{path:e}=l9(null==t?void 0:t.routes);l(!0),n({path:(0,eD.Is)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{l(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,a.jsxs)(nC.v,{children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"yLRlZm"}),placement:"bottom",children:(0,a.jsx)(nb.j,{as:T.h,isRound:!0,size:"xs",isLoading:o,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,a.jsx)(p.G,{icon:x.r8p}),sx:{span:{flexGrow:0}}})}),(0,a.jsx)(i9.h,{children:(0,a.jsx)(ny.q,{maxW:"350px",zIndex:"tooltip",children:(0,a.jsxs)(ro.k,{title:f.ag._({id:"yLRlZm"}),children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:e2.JyM,fixedWidth:!0}),onClick:c,children:(0,a.jsxs)(em.U,{align:"flex-start",children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"OppH33"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"P/o+t+"})})]}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(s6.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,a.jsx)(m.cC,{id:"jsQZMk"})})]})}),(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.r8p,fixedWidth:!0}),onClick:u,children:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"SSZKB9"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"S65lUr"})})]})})]})})}),(0,a.jsx)(i_,{isOpen:i,onClose:r})]})},ae=e=>{if(!e)return{path:"untitled-page",title:f.ag._({id:"kveQAJ"})};let t=e.filter(e=>e.path.startsWith("/untitled-page"));if(0===t.length)return{title:f.ag._({id:"kveQAJ"}),path:"untitled-page"};let n=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:f.ag._({id:"kveQAJ"})+" "+String(n+1),path:"untitled-page-".concat(n+1)}},at=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,rs.b)(),[s,o]=(0,v.useState)(()=>ae(null==i?void 0:i.routes).title),[l,c]=(0,v.useState)(()=>ae(null==i?void 0:i.routes).path),u=(0,v.useRef)(null),[h,x]=(0,v.useState)(!1),p=(null==i?void 0:i.routes.map(e=>e.path))||[],g=p.includes("/".concat(l)),j=(0,ep.ff)("gray.900","gray.50"),C=(0,v.useCallback)(()=>{h||g||(x(!0),r({title:s,path:(0,eD.Is)(l),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{x(!1),n()}))},[r,g,h,n,l,null==i?void 0:i.id,null==i?void 0:i.routes,s]);return((0,v.useEffect)(()=>{t&&setTimeout(()=>{u.current&&u.current.select()},50)},[t]),i)?(0,a.jsxs)(ra.u_,{isOpen:t,onClose:n,size:"xl",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{color:j,children:[(0,a.jsx)(rd.x,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"yLRlZm"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(m.cC,{id:"7TUZvz"})})]})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsxs)(tE.K,{spacing:4,children:[(0,a.jsxs)(s8.NI,{children:[(0,a.jsxs)(em.U,{justifyContent:"center",children:[(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"MHrjPM"})}),(0,a.jsx)(oP,{length:s.length||0,idealLength:oN.si,maxLength:oN.S8})]}),(0,a.jsx)(oR.I,{ref:u,value:s,onChange:e=>{o(e.target.value),c((0,oU.IR)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&C()}})]}),(0,a.jsxs)(s8.NI,{isInvalid:g,children:[(0,a.jsx)(em.U,{justifyContent:"center",children:(0,a.jsx)(s9.l,{flex:"1",children:(0,a.jsx)(m.cC,{id:"dq8+qI"})})}),(0,a.jsxs)(nK.B,{children:[(0,a.jsx)(oG.Ui,{children:"/"}),(0,a.jsx)(oR.I,{fontFamily:"mono",value:l,onKeyDown:e=>{"Enter"===e.key&&C()},onChange:e=>{c((0,oU.IR)(e.target.value))},placeholder:f.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),g&&!h&&(0,a.jsx)(s7.J1,{children:(0,a.jsx)(m.cC,{id:"hw1fjn"})})]})]})}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,a.jsx)(m.cC,{id:"dEgA5A"})}),(0,a.jsx)(ef.z,{onClick:C,isDisabled:g,variant:"solid",isLoading:h,children:(0,a.jsx)(m.cC,{id:"yLRlZm"})})]})})]})]}):(0,a.jsx)(a.Fragment,{})},an=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,I.q)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(u.xu,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,a.jsx)(d.x,{fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"6TCEnS"})}),(0,a.jsx)(d.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,a.jsx)(iQ.r,{color:"trueblue.600",href:"#",onClick:r,children:(0,a.jsx)(m.cC,{id:"S0WoXy"})})})]}),n&&(0,a.jsx)(at,{isOpen:n,onClose:i,site:t})]})},ai=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,s=(0,v.useRef)(null),o=(0,ep.ff)("gray.600","gray.50"),l=(0,ep.ff)("trueblue.50","whiteAlpha.100"),c=(0,ep.ff)("gray.900","gray.50"),d=(0,ep.ff)("blackAlpha.50","whiteAlpha.100"),h=(0,ep.ff)("gray.600","gray.50"),x=(0,ep.ff)("trueblue.400","trueblue.200");(0,v.useEffect)(()=>{if(!n||!(null==s?void 0:s.current))return;let{inView:e}=(0,eB.v4)(s.current)||{};e||s.current.scrollIntoView()},[n]);let p=(0,v.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,a.jsx)(nz(),{href:r,passHref:!0,shallow:!0,children:(0,a.jsx)(ef.z,{ref:s,onClick:p,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?c:o,bgColor:n?l:"transparent",_hover:{bgColor:n?l:d,color:n?c:h},h:"auto",py:1.5,px:2,role:"group",children:(0,a.jsxs)(em.U,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,a.jsx)(u.xu,{color:n?x:o,mt:"0.2em",w:4,children:t}),(0,a.jsx)(tE.K,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},ar=e=>{let{title:t,children:n}=e;return(0,a.jsxs)(em.U,{justify:"space-between",children:[(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},as=(e,t,n)=>n?(0,a.jsx)(tI.$,{size:"xs"}):e?(0,a.jsx)(p.G,{icon:x.t22,fixedWidth:!0}):t?(0,a.jsx)(p.G,{icon:x.BKg,fixedWidth:!0}):(0,a.jsx)(p.G,{icon:x.gMD,fixedWidth:!0}),ao=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:s,onToggleOffline:o}=e,l=(0,ep.ff)("trueblue.50","whiteAlpha.200"),c=(0,ep.ff)("trueblue.100","whiteAlpha.200");return(0,a.jsx)(nC.v,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:d}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nb.j,{"data-id":"sidebar-item-menu-button",ml:3,as:T.h,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?c:l},icon:(0,a.jsx)(u.xu,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:d?1:0,children:(0,a.jsx)(p.G,{icon:x.S6C,fixedWidth:!0})})}),(0,a.jsx)(i9.h,{children:(0,a.jsx)(l8,{site:t,doc:i,route:r,hasChanges:s,"data-id":"sidebar-item-menu-list",onToggleOffline:o})})]})}})},al=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:s,doc:o}=n,l=(0,tf.gF)(),u=(0,F.CG)(e_.lH),h=(0,F.CG)((0,e_.hZ)(s)),x=(0,v.useRef)(null),p=(0,F.CG)(e_.B$),[f,{loading:g}]=(0,y.qbt)(),j=as(i,h,g),C="currentColor",b=(0,ep.ff)("gray.500","gray.400"),k=(0,ep.ff)("trueblue.400","trueblue.200"),w=(0,v.useCallback)(async()=>{if(!(null==o?void 0:o.id)||!u)return;let e=!(null==n?void 0:n.offline);await f({variables:{input:{siteId:u.id,docId:o.id,offline:e,path:null==n?void 0:n.path}}})},[null==o?void 0:o.id,n,f,u]);(0,v.useEffect)(()=>{if(!x.current||p!==s)return;let{inView:e}=(0,eB.v4)(x.current)||{};e||x.current.scrollIntoView()},[p,s]);let S=(0,ey.yQ)({docId:s});return(0,a.jsxs)(ai,{icon:j,"data-sidebar-doc":s,isSelected:r,href:S,children:[(0,a.jsxs)(tE.K,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,a.jsx)(d.x,{textAlign:"left",color:r?k:C,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,oa.$)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,a.jsxs)(em.U,{color:b,children:[h&&!n.offline?(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:1,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"cFW7WD"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:"whiteAlpha.700",children:(0,a.jsx)(m.cC,{id:"qliBJ3"})})]}),placement:"top",children:(0,a.jsx)(c.k,{bg:r?k:C,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,a.jsx)(d.x,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",children:i?(0,a.jsx)(m.cC,{id:"i0qMbr"}):n.path})]})]}),w&&l&&u&&(0,a.jsx)(ao,{site:u,doc:o,route:n,hasChanges:h,isSelected:r,onToggleOffline:w})]})},aa=()=>{let e=(0,F.CG)(e_.lH),{openSiteSettings:t}=(0,tH.AA)(),n=(0,F.CG)(e_.B$),{onlineRoutes:i,offlineRoutes:r}=(0,v.useMemo)(()=>{let t=(null==e?void 0:e.routes)?[...e.routes]:[],n=t.sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:n.filter(e=>!e.offline),offlineRoutes:n.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,a.jsxs)(tE.K,{spacing:2,w:"100%",p:0,children:[(0,a.jsx)(rn,{context:"pages",openSiteSettings:()=>t("website")}),(0,a.jsxs)(ar,{title:(0,a.jsx)(m.cC,{id:"wRR604"}),children:[(0,a.jsx)(e1.L,{}),(0,a.jsx)(l7,{site:e})]}),(0,a.jsxs)(tE.K,{spacing:1,px:0,children:[0===i.length&&(0,a.jsx)(an,{site:e}),i.map(e=>{let t=e.docId===n;return(0,a.jsx)(al,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ar,{title:(0,a.jsx)(m.cC,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,a.jsx)(al,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,a.jsx)(a.Fragment,{})},ac=()=>{let e=(0,eR.Yy)();return(0,a.jsx)(ej.Wk,{isDark:e,children:(0,a.jsx)(e3.s,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,a.jsx)(aa,{})})})};ac.panelPosition="left",ac.panelName="pages";var ad=n(20816),au=n(951),ah=n(71508);let ax=[{transform:"translateX(0px)"},{transform:"translateX(5px)"},{transform:"translateX(0px)"},{transform:"translateX(-5px)"},{transform:"translateX(0px)"}],ap={duration:200},am=e=>{var t;let{docId:n}=e,{onClose:i}=(0,I.q)(),{onPasswordSubmitted:r}=(0,nh._)(),[s,o]=(0,v.useState)(!1),[l,u]=(0,v.useState)(""),[h,x]=(0,v.useState)(!1),[p,g]=(0,v.useState)(""),j=(0,v.useRef)(null),[C,{data:b}]=(0,y.VEy)();(0,v.useEffect)(()=>{C({variables:{docId:n}})},[n,C]);let k=(0,v.useCallback)(()=>{h||null==r||r(l).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?x(!0):(j.current&&j.current.animate(ax,ap),g(f.ag._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})))})},[l,h,g,x,r]);return(0,a.jsxs)(ra.u_,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{ref:j,children:[(0,a.jsx)(rd.x,{children:(0,a.jsxs)(tE.K,{alignItems:"center",children:[(0,a.jsx)(so.q,{src:(null==b?void 0:null===(t=b.publicDoc)||void 0===t?void 0:t.logoUrl)||ah.Z.src,size:"lg"}),(0,a.jsx)(e$.X,{children:(0,a.jsx)(m.cC,{id:"GZ6qi2"})}),(0,a.jsx)(d.x,{fontSize:"md",letterSpacing:"normal",fontWeight:"normal",children:(0,a.jsx)(m.cC,{id:"rp/zfh"})})]})}),(0,a.jsx)(tZ.f,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsx)(tE.K,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),l.length&&k()},children:(0,a.jsxs)(s8.NI,{isInvalid:!!p,children:[(0,a.jsx)(s9.l,{children:(0,a.jsx)(m.cC,{id:"8ZsakT"})}),(0,a.jsxs)(nK.B,{children:[(0,a.jsx)(oR.I,{type:s?"text":"password",placeholder:"Enter the password",value:l,onChange:e=>{u(e.target.value)},borderColor:p?"red":"gray.200"}),(0,a.jsx)(ad.x,{children:(0,a.jsx)(T.h,{variant:"link",size:"lg",onClick:()=>o(!s),"aria-label":f.ag._({id:"tniYMG"}),icon:s?(0,a.jsx)(au.p3W,{}):(0,a.jsx)(au.w8I,{}),_focus:{outline:"none"}})})]}),p&&(0,a.jsx)(s7.J1,{children:p}),!p&&(0,a.jsx)(s8.Q6,{color:"gray.600",children:(0,a.jsx)(m.cC,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})}),(0,a.jsx)(tY.m,{flex:1,w:"100%",children:(0,a.jsx)(c.k,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,a.jsx)(ef.z,{w:"85%",variant:"solid",isDisabled:!l.length,onClick:k,children:(0,a.jsx)(m.cC,{id:"xGVfLh"})})})})]})]})};var af=n(11093);let ag=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,F.TL)(),i=(0,eB.As)("editor"),r=ee(),s=(0,F.CG)(W.yn,e9()),o=(0,F.CG)(W.k8,e9()),l=!!(null==o?void 0:o.pos);(0,v.useEffect)(()=>{if(!e)return;let t=eA()(()=>{s&&n((0,W.Qx)({attached:!1}))},500,{leading:!0}),i=(0,eV.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,F.CG)(W.ks,e9());(0,v.useEffect)(()=>{if(!e||a)return;let t=eA()(()=>{if(i.inProgress)return;let t=(0,af.lI)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,W.Us)(t))},250,{trailing:!0,maxWait:500}),s=eA()(()=>{let t=e.state.selection;if(t instanceof rv.c)return;let r=document.querySelector(i.scrollSelector||""),s=null==r?void 0:r.getBoundingClientRect(),o=e.state.selection.from,l=(0,af.Sh)(e,o);if(!r||!s||!l){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:l});return}let a=l.getBoundingClientRect(),c=e.view.coordsAtPos(o),d=parseFloat(((c.top-a.y)/a.height).toFixed(2));n((0,W.Us)({pos:o,pct:d}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},aj=()=>{let e=(0,n9.p)(),t=(0,F.TL)(),n=(0,v.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:s}=n,o={attached:!0};r?s?o.following=null:e.closeAll():(o.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(so.q,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:rF()(i.color).isDark()?"white":"black",bg:i.color}),(0,a.jsx)(d.x,{ml:2,children:(0,a.jsx)(m.cC,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(o)),t((0,W.Qx)(o))},[e,t]);return n},av=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,v.useRef)(!1),s=aj(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,v.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},aC="sessionId1",ab=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,F.bh)();return this.storage.user=iX()({},this.storage.user,e),t.dispatch((0,W.MU)({sessionId:aC})),t.dispatch((0,W.Tx)({collaborators:[this.storage.user]})),!0}}}}),ay=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s,theme:o,hideMadeWithGammaBadge:l=!1}=e,[d]=(0,v.useState)(()=>[tO.F,i5.$1.configure({scrollerSelector:r}),ab,i2._g]),{user:h,isUserLoading:x,anonymousUser:p,color:m}=(0,eX.SE)(),[f]=(0,H.I)(B.H.gammaDocPasswords,{}),[g,j]=(0,v.useState)(),{data:C,loading:b,error:k}=(0,y.EDv)({variables:{docId:n,snapshotId:i,password:f[n]},skip:!i}),w=(0,F.CG)(tU.yx);(0,v.useEffect)(()=>{!x&&g&&g.commands.user({id:(null==h?void 0:h.id)||p.id,color:m.value,sessionId:aC,idleSince:null,name:(null==h?void 0:h.displayName)||p.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[g,h,m,x,p]);let S=C&&void 0!==C.snapshot&&!b&&w;return(0,a.jsxs)(u.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!S||k?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!S&&(0,a.jsx)(tI.$,{}),k&&(0,a.jsxs)(tS.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",k.message]})]}):(0,a.jsx)(u.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:S?1:0,children:(0,a.jsx)(eP.yE,{doc:w,editorId:"main",docId:n,theme:o||void 0,extensions:d,onCreate:e=>{let{editor:t}=e;j(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),g&&(0,a.jsx)(eJ,{editor:g,backoffFactor:2}),!l&&(0,a.jsx)(i4.m,{docWorkspace:null==w?void 0:w.organization})]})},ak={[eK.q.DOC_VIEW]:"doc",[eK.q.SLIDE_VIEW]:"present"},aw=e=>{let t=(0,C.I0)(),n=(0,ey.SJ)(),i=n.mode,r=(0,F.CG)(W.gh),s=(0,v.useCallback)(e=>{let t=e||r,{mode:n}=(0,ey.SJ)(),i=ak[t];n!==i&&(0,il.lO)({query:{...(0,ey.SJ)(),mode:i},emitChange:!1})},[r]);(0,rp.r)(s,[r]),(0,v.useEffect)(()=>il.fI.on("changed",()=>s()),[s]),(0,tf.vm)(function(){if(!e)return;let n=i===ak.SLIDE_VIEW?eK.q.SLIDE_VIEW:eK.q.DOC_VIEW,{cardId:r}=(0,ey.sY)();n===eK.q.SLIDE_VIEW&&(r?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",r),e.commands.spotlightCardById(r)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,W.PM)({mode:n})),s(n)},[e,t,i,s],[e])};var aS=n(76643),aE=n(58184);let aI=e=>{let t=(0,F.CG)(W.uD),n=(0,F.CG)(W.e0),{handlePresentNavigationEvent:i}=(0,aE._)(th.R0.PRESENTER_VIEW_POPUP);(0,v.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let e=JSON.parse(r),{payload:t}=e,{action:s,eventKey:o,method:l,toSessionId:a,fromUserId:c}=t;if(a!==(null==n?void 0:n.sessionId)||c!==(null==n?void 0:n.id))return;switch(s){case"goToCard":{let{cardId:e}=t;if(!e)break;i({eventType:s,eventKey:o,method:l,payload:{cardId:e}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:s,eventKey:o,method:l});break;default:console.warn("[usePresenterViewMessages] Unknown message type",t)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},aA=e=>{let{editor:t,enabled:n}=e,i=(0,F.TL)(),r=(0,v.useRef)(null),[s,o]=(0,v.useState)(!1),[l,a]=(0,v.useState)([0,0]),[c,d]=(0,v.useState)("bottom"),u=(0,F.CG)(W.Od),h=(0,v.useCallback)(()=>{o(!1)},[]),x=(0,v.useCallback)(()=>{a([0,0]),d("bottom")},[]),p=(0,v.useCallback)(e=>{o(!0),a(e)},[]),m=(0,v.useCallback)(e=>{var t;e.preventDefault(),p([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?d("top"):i&&s?d("center"):d("bottom")},[r,p]);(0,v.useEffect)(()=>{u||o(!1)},[u]),(0,v.useEffect)(()=>{if(t&&n)return nu.pw.on(nu.TI.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;m(t),i((0,W.$B)({pos:n,cardId:r}))})},[t,n,m,i]);let f=(0,v.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===c&&i?"translateY(".concat(i,"px)"):"top"===c?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[c,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:m,menuRootStyles:f,clearPositioning:x}};var a_=n(48105),aT=n(75692),aO=n(27988),aD=n(44677);let aR=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rr.s,{icon:n,onClick:i,...s,children:t})},aP=(0,v.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l}=e,[c,d]=(0,v.useState)(null),u=(0,aO.q)(t,d),{pos:h,cardId:f}=(0,F.CG)(W.OH),{enabled:g}=(0,i5.gZ)(n),{editCardInPresentMode:j}=(0,aD.l)({editor:n}),C=(0,eR.Yy)(),b=(0,v.useCallback)(()=>{g?null==n||n.commands.turnOffSpotlight():h?null==n||n.commands.spotlightNodeAtPos(h):f&&(null==n||n.commands.spotlightNextBlock()),r()},[g,h,f,r,null==n?void 0:n.commands]);return(0,v.useEffect)(()=>{var e;null==c||null===(e=c.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[c]),(0,a.jsx)(i9.h,{children:(0,a.jsx)(ej.Wk,{isDark:C,children:(0,a.jsx)(nC.v,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,a.jsxs)(ny.q,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:u,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[(0,a.jsx)(aR,{"data-testid":"present-mode-menu-item-edit",command:(0,ej.cE)("E"),shouldHide:s,icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.TzT}),onClick:j,children:(0,a.jsx)(m.cC,{id:"IkOuqb"})}),(0,a.jsx)(aR,{"data-testid":"present-mode-menu-item-spotlight",command:(0,ej.cE)("S"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.QMW}),onClick:b,children:g?(0,a.jsx)(m.cC,{id:"CzYGrQ"}):h?(0,a.jsx)(m.cC,{id:"LoLA00"}):f?(0,a.jsx)(m.cC,{id:"X1FNEK"}):null})]})})})})});aP.displayName="PresentModeContextMenuComponent";let aL=(0,v.memo)(aP);var az=n(63176),aN=n(19376),aG=(0,n(76801).m)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});aG.displayName="CircularProgressLabel";var aM=n(6185),aU=n.n(aM),aF=n(68642),aW=n(27875),aH=n.n(aW),aB=n(93814);let aq={easeOutLinear:rW.gA,easeOutSine:rW.vh,easeOutCubic:rW.w2,easeOutCirc:rW.ei,easeOutQuad:rW.hl,easeOutQuart:rW.Y3,easeOutExpo:rW.ad,bezierCustom1:aU()(.13,.97,.035,.73),bezierCustom2:aU()(.105,1.15,.15,.355)},aV={UP:"up",DOWN:"down"},aK=e=>e?+new Date-+new Date(e):1/0,aZ=(e,t)=>{let n=(0,v.useMemo)(()=>new aF.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,eB.As)("editor"),l=(0,F.CG)(W.i2),a=(0,v.useRef)(null),c=(0,v.useRef)(null),d=(0,v.useRef)(null),u=(0,v.useRef)(!1),h=(0,v.useRef)(null),x=(0,v.useRef)(null),[p,m]=(0,v.useState)(!1),[f,g]=(0,v.useState)(!1),j=(0,v.useRef)({counterTarget:0,counterCurrent:0,direction:aV.DOWN}),C=(0,v.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=j.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),b=(0,v.useCallback)(()=>{let e=d.current,t=c.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=j.current.counterCurrent/s,l=550>aK(x.current),a=(l?1:null!=o?o:0)*264,u="".concat(a," ").concat(264-a),h=56*aq[i](Math.min(o,1)),p=Math.max(56-h,0);e.style.transform="translateY(".concat(p,"px)"),t.style.transform="translateY(-".concat(p,"px)"),r.setAttribute("stroke-dasharray",u),n.setAttribute("stroke-dasharray",u)},[i,s]),y=(0,v.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;e=n;let r=j.current.counterTarget-j.current.counterCurrent;if(.1>Math.abs(r)){j.current.counterCurrent=j.current.counterTarget,b(),u.current=!1;return}j.current.counterCurrent=(0,rW.t7)(j.current.counterCurrent,j.current.counterTarget,aH()(.3*(60/(i?1e3/i:60)),.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),k=(0,v.useCallback)(()=>{j.current.counterTarget=0,m(!1),g(!1),C(),y()},[y,C]);return(0,v.useEffect)(()=>{let t,i;if(!l||!e)return k();let a=document.querySelector((0,aB.U8)(l));if(!a)return k();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===d.current||null===c.current)return;let a=aK(h.current);if(a<500||a<1e3&&!1===l)return;let u=aK(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?j.current.direction:t.deltaY>0?aV.DOWN:aV.UP,f="down"===p?o.isAtBottom():o.isAtTop();if(!f)return;clearTimeout(i);let v=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,b=Math.abs(void 0!==t.deltaY?t.deltaY:40),w=b*(v?r:1);if(p!==j.current.direction){j.current.direction=p,k();return}g(p===aV.DOWN),m(p===aV.UP),j.current.counterTarget+=w,j.current.direction=p;let S=j.current.counterTarget/s;S>=1?(e.commands.spotlightNextCard(p===aV.UP,p===aV.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{k(),C()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(k,500),y(),C()},p=()=>{h.current=+new Date,clearTimeout(t),k(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),C(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,y,i,r,s,o,C,b,k,l]),{debugRef:a,nextCardRef:d,prevCardRef:c,showNextCard:f,showPrevCard:p}},aY=e=>{let{editor:t}=e,n=(0,tr.ye)("debugLogging"),[i,r]=(0,v.useState)("easeOutExpo"),[s,o]=(0,v.useState)(1.5),[l,c]=(0,v.useState)(1200),{debugRef:d,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:p}=aZ(t,{easing:i,touchpadFactor:s,triggerThreshold:l}),{prevCard:m,nextCard:f}=(0,F.CG)(e=>{let t=(0,W.i2)(e)||"",n=(0,W.X9)(e),i=n.parents[t]||[],r=i.reduce((e,t)=>e[t],n.tree),s=Object.keys(r),o=null,l=null;return s.forEach((e,i)=>{if(e!==t)return;let r=n.parents[t];0===i?r.length&&(o={cardId:r[r.length-1],isSibling:!1}):o={cardId:s[i-1],isSibling:!0},i===s.length-1?r.length&&(l={cardId:r[r.length-1],isSibling:!1}):l={cardId:s[i+1],isSibling:!0}}),{prevCard:o,nextCard:l}},e9()),g=null==f?void 0:f.cardId,j=null==m?void 0:m.cardId,C=(0,v.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,eq.KH)(t)||(t.attrs.id===j?e=t:t.attrs.id===g&&(n=t),!!(!e&&j)||!!(!n&&g))),{prev:e,next:n}},[t,g,j]);return(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(aJ,{ref:d,setEasing:r,setTouchpadFactor:o,setTriggerThreshold:c}),(0,a.jsx)(aX,{ref:h,direction:"up",node:C.prev,enabled:p,offset:16}),(0,a.jsx)(aX,{ref:u,direction:"down",node:C.next,enabled:x,offset:24})]})},aJ=v.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,a.jsxs)(c.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,a.jsxs)(nC.v,{closeOnSelect:!1,children:[(0,a.jsx)(nb.j,{as:ef.z,colorScheme:"trueblue",children:"Options"}),(0,a.jsxs)(ny.q,{minWidth:"240px",children:[(0,a.jsx)(ej.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,a.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,a.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,a.jsxs)(az.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,a.jsx)(az.zu,{}),(0,a.jsxs)(az.Fi,{children:[(0,a.jsx)(az.WQ,{}),(0,a.jsx)(az.Y_,{})]})]}),(0,a.jsx)(ri.R,{}),(0,a.jsx)(ej.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,a.jsxs)(d.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,a.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,a.jsxs)(az.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,a.jsx)(az.zu,{}),(0,a.jsxs)(az.Fi,{children:[(0,a.jsx)(az.WQ,{}),(0,a.jsx)(az.Y_,{})]})]}),(0,a.jsx)(ri.R,{}),(0,a.jsxs)(nk._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,a.jsx)(nw.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,a.jsx)(nw.i,{value:"easeOutSine",children:"easeOutSine"}),(0,a.jsx)(nw.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,a.jsx)(nw.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,a.jsx)(nw.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,a.jsx)(nw.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,a.jsx)(nw.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,a.jsx)(nw.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,a.jsx)(nw.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,a.jsx)(c.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,a.jsx)(aN.D,{value:40,color:"trueblue.500",children:(0,a.jsx)(aG,{})})})]})});aJ.displayName="PeekDebugger";let aX=v.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:s}=e,[o,l]=(0,v.useState)(!1),[u,h]=(0,v.useState)(r);(0,v.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1),h(r)},550);return()=>{clearTimeout(e)}},[r]);let m=(0,v.useMemo)(()=>u?(0,lG.getCardTitle)(u.toJSON()):"",[u]),f=!!u;return(0,a.jsx)(c.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(s,"px"):"inherit",bottom:"down"===n?"".concat(s,"px"):"inherit",children:(0,a.jsxs)(c.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,a.jsx)(aN.D,{display:f?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,a.jsx)(aG,{visibility:o?"visible":"hidden",children:(0,a.jsx)(p.G,{icon:x.fV7,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),f||"up"!==n?f||"down"!==n?null:(0,a.jsx)(p.G,{icon:x.m5q,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,a.jsx)(p.G,{icon:x.ytF,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,a.jsx)(c.k,{width:1}),(0,a.jsx)(d.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:f?"gray.800":"gray.600",px:2,children:f?m:"down"===n?"End of presentation":"Start of presentation"})]})})});aX.displayName="PeekCardTab";let aQ=()=>{let[e,t]=(0,v.useState)(["",[],{}]),n=(0,F.qr)();return(0,v.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,W.X9)(e),r=(0,W.i2)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},a$=()=>{let[e,t,n]=aQ(),i=Object.keys(n);return(0,a.jsx)(em.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map((r,s)=>{let o=[...t,e][0],l=i.indexOf(o),c=n[o],d=0,u=100;if(e&&c&&-1===i.indexOf(e)){let t=c.indexOf(e);d=(t+1)/c.length*100,u=1/c.length*100}return(0,a.jsx)(a2,{cardId:r,state:s===l?"current":s<=l?"prev":"next",percent:d,unit:u},r)})})},a0="var(--chakra-colors-trueblue-200)",a1="var(--chakra-colors-trueblue-100)",a2=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,s="linear-gradient(to right, ".concat(a0," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(a1," ").concat(i+r,"% 100%)");return(0,a.jsx)(c.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?s:"prev"===n?a0:a1},t)},a5=(0,nR.ZP)("Esc"),a4=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,v.useState)(null),s=(0,C.v9)(W.JA),o=(0,v.useRef)(s),l=(0,C.I0)(),u=(0,nJ.Br)("edit"),h=(0,aT.tE)({enabled:!s,setActiveKey:r});aI(t);let{menuRef:x,isPresentModeMenuOpen:p,onPresentModeMenuClose:f,menuRootStyles:g,clearPositioning:j}=aA({editor:t,enabled:!0});return(0,v.useEffect)(()=>(l((0,W.e)({isEditingInSlideView:!1})),()=>{l((0,W.e)({isEditingInSlideView:!1}))}),[l]),o.current=s,(0,v.useEffect)(()=>eC.F7.on("keydown","SLIDE_VIEW",e=>!!(o.current&&a5(e))&&(l((0,W.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[l]),(0,a_.us)(),(0,aS.O)({ref:x,enabled:p,handler(e){e instanceof MouseEvent&&2!==e.button&&f()}}),(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(aL,{ref:x,editor:t,readOnly:!u,isOpen:p,onClose:f,clearPositioning:j,rootStyles:g}),(0,a.jsx)(aY,{editor:t}),(0,a.jsx)(a$,{}),(0,a.jsx)(c.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,a.jsxs)(c.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:s?1:0,pointerEvents:s?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:s?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,a.jsx)(d.x,{size:"sm",mr:3,children:(0,a.jsx)(m.cC,{id:"DjD/sG"})}),(0,a.jsx)(ef.z,{size:"sm",variant:"solid",onClick:()=>l((0,W.e)({isEditingInSlideView:!1})),children:(0,a.jsx)(m.cC,{id:"DPfwMq"})})]})}),n&&(0,a.jsx)(aT.nP,{activeKey:i,spotlightingByBlock:h})]})};var a3=n(50423);let a6=tF.S.filmstrip,a8=tF.S.filmstrip-1,a9={duration:.25,delay:.75},a7={duration:.25},ce="filmstrip-root",ct=".".concat(ce),cn="filmstrip-scroller",ci=".".concat(cn),cr=v.createContext({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")}}),cs=e=>{let{children:t}=e,[n,i]=(0,v.useState)({navItemPreviewRefMap:{}}),r=(0,v.useMemo)(()=>{let e=[],t=null,r=()=>{let r;t=null;let s={...n.navItemPreviewRefMap},o=!1;for(;r=e.shift();){let[e,t]=r;s[e]!==t&&(s[e]=t,o=!0)}o&&i(e=>({...e,navItemPreviewRefMap:s}))},s=()=>{t&&(clearTimeout(t),t=null)};return(n,i)=>{s(),e.push([n,i]),t=setTimeout(r,0)}},[n.navItemPreviewRefMap]);return(0,a.jsx)(cr.Provider,{value:{state:n,setNavItemPreviewRef:r},children:t})};function co(){let e=(0,v.useContext)(cr);return e}var cl=n(9340);let ca=(0,v.createContext)(null);var cc=n(3105),cd=n(44866),cu=n(65339);let ch=(0,v.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,cc.h)(()=>(0,lE.E)(t)),a=[],c=(0,v.useRef)(!1);return(0,cl.k)(!!r,"Reorder.Group must be provided a values prop"),(0,v.useEffect)(()=>{c.current=!1}),v.createElement(l,{...s,ref:o},v.createElement(ca.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(cp))},updateOrder:(e,t,n)=>{if(c.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,c=(0,cu.C)(a.min,a.max,.5);return 1===s&&l.layout.max+n>c||-1===s&&l.layout.min+n<c?(0,cd.uo)(e,r,r+s):e}(a,e,t,n);a!==s&&(c.current=!0,i(s.map(cx).filter(e=>-1!==r.indexOf(e))))}}},e))});function cx(e){return e.value}function cp(e,t){return e.layout.min-t.layout.min}var cm=n(40226),cf=n(60976);function cg(e){let t=(0,cc.h)(()=>(0,cm.B)(e)),{isStatic:n}=(0,v.useContext)(cf._);if(n){let[,n]=(0,v.useState)(e);(0,v.useEffect)(()=>t.on("change",n),[])}return t}var cj=n(83972);let cv=e=>"object"==typeof e&&e.mix,cC=e=>cv(e)?e.mix:void 0;var cb=n(23617),cy=n(58387);function ck(e,t){let n=(0,cc.h)(()=>[]);return function(e,t){var n,i;let r=cg(t()),s=()=>r.set(t());return s(),n=()=>cy.Z_.update(s,!1,!0),i=()=>cy.qY.update(s),(0,cb.L)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var cw=n(15815);function cS(e,t=0){return(0,cw.i)(e)?e:cg(t)}let cE=(0,v.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,cc.h)(()=>(0,lE.E)(i)),c=(0,v.useContext)(ca),d={x:cS(t.x),y:cS(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,cj.s)(r,s,{mixer:cC(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?ck(e,r):ck([e],([e])=>r(e))}([d.x,d.y],([e,t])=>e||t?1:"unset"),h=(0,v.useRef)(null);(0,cl.k)(!!c,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:p,updateOrder:m}=c;return(0,v.useEffect)(()=>{p(n,h.current)},[c]),v.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&m(n,d[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)}),cI={Group:ch,Item:cE};var cA=n(22662),c_=n(70347),cT=n(791),cO=n(17007);let cD=e=>{let{content:t,selection:n}=(0,cT.i)(e),i=!!(null==t?void 0:t.content),r=(0,v.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;if(!s||!(null===(t=e.attrs)||void 0===t?void 0:t.id))return null;let n={cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"};return n}).filter(e=>null!==e)},[t,i]),s=(0,F.CG)(cO.ZD,(e,t)=>e9()(e,t)),o=s.map(e=>{let t=r.find(t=>t.cardId===e.cardId);if(!t)return null;let n={...e};return n}).filter(e=>null!==e),l=(0,F.CG)(cO.Ae);return{isDragging:l,cards:l?o:r,editorContent:t,selection:n,isLoaded:i}};var cR=n(66028);let cP=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),cL=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r}=e,s="list"===i,{activeButtonColor:o,inactiveButtonColor:l,backgroundColor:d,closeButtonColorScheme:u}=cP(n),h=(0,eM.z$)(),g=(0,v.useCallback)(e=>()=>{r(e),null==h||h.track(eM.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})},[h,r]);return(0,a.jsxs)(c.k,{p:"8px",pb:"2px",children:[(0,a.jsxs)(em.U,{spacing:0,bg:d,p:.5,borderRadius:"md",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"Rv+zkJ"}),children:(0,a.jsx)(ef.z,{size:"xs",variant:s?"ghost":"plain",color:s?l:o,onClick:g("film"),"data-testid":"filmstrip-view-button",children:(0,a.jsx)(em.U,{children:(0,a.jsx)(p.G,{icon:x.CjD})})})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5NZpX8"}),children:(0,a.jsx)(ef.z,{size:"xs",variant:s?"plain":"ghost",color:s?o:l,onClick:g("list"),"data-testid":"list-view-button",children:(0,a.jsx)(em.U,{children:(0,a.jsx)(p.G,{icon:x.Zrf})})})})]}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,a.jsx)(T.h,{variant:"ghost","aria-label":f.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:u,isRound:!0,size:"xs",icon:(0,a.jsx)(p.G,{icon:x.g82}),outlineOffset:"0px",ml:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:cR.br})})]})};var cz=n(73208),cN=n(65895),cG=n(38564),cM=n(56143),cU=n(43818),cF=n(50381),cW=n.n(cF),cH=n(9850),cB=n.n(cH),cq=n(86323),cV=n(78699),cK=n(50105),cZ=n(33169),cY=n(87008),cJ=n(38322);let cX=(e,t)=>{let n=cG.Gk.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},cQ=e=>{let t=(0,F.CG)(cA.wg),n=(0,F.CG)(cA.zq),i=(0,F.TL)(),r=(0,n9.p)(),s=(0,v.useCallback)(n=>{var i;if(!e)return;let s=(0,eq.Lz)(e,t);if(!s.length)return;let o=tX.HY.from(s),l=(0,cY.G8)(o,e.schema);if(!l){r({title:n?(0,a.jsx)(m.cC,{id:"33a+2Q"}):(0,a.jsx)(m.cC,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),cW()(l,{format:"text/html"});let c=cK.Z.getState(e.state);c&&!n&&c.clearCutData(),r({title:n?(0,a.jsx)(m.cC,{id:"VG4BD6",values:{0:s.length,1:s.length}}):(0,a.jsx)(m.cC,{id:"GtH+14",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})},[e,t,r]),o=(0,v.useCallback)(()=>{s(!1)},[s]),l=(0,v.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,cA.ym)((0,F.bh)().getState());i((0,cA.jf)()),e.commands.deleteCardsById(t,n),cX(e,r)},[i,e,t]),c=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,eq.Bw)(e,t[0]);i&&(n=(0,cU.getCardTitle)(i.node.toJSON())||"")}l();let i=n?'"'.concat(n,'"'):f.ag._({id:"FyJPFh"}),s=r({title:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(d.x,{noOfLines:1,children:(0,a.jsx)(m.cC,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,a.jsx)(iQ.r,{textDecoration:"underline",onClick:()=>{(0,cM.Yw)(e.state),r.close(s)},children:(0,a.jsx)(m.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[l,e,t,r]),u=(0,v.useCallback)(()=>{0!==t.length&&(s(!0),l(!0))},[l,s,t]),h=(0,v.useCallback)(()=>{if(!e||0===t.length)return;let s=(0,eq.Lz)(e,t);if(s.length){let t=(0,eq.Bw)(e,n),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=s.map(e=>(0,eT.hs)(cB()(e.toJSON()))),c=l.map(e=>(0,cZ.Zs)(e)),d=(0,cA.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,c,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,cJ.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(cV.k,!0),!0}).scrollIntoView().run(),cX(e,d),i((0,cA.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:c.length})),r({title:(0,a.jsx)(m.cC,{id:"ClnFsQ",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,r,t]),x=(0,v.useCallback)(()=>{if(!e)return;let t=(0,cA.zq)((0,F.bh)().getState()),n=(0,eq.Bw)(e,t);if(!n)return;let{pos:r}=n,s=e.view.state.doc.nodeAt(r);if(!s){console.error("[Filmstrip] Cannot append card. Node unknown");return}let o=r+s.nodeSize,l=(0,cq.e1)().blankCard;(0,cq.ZT)({key:"blankCard",nodeName:"card"},th.fe.FILMSTRIP_CARD_MENU);let a=(0,cA.ym)((0,F.bh)().getState());e.chain().insertContentAt(o,(0,cZ.Zs)(l),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,cJ.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(cV.k,!0),!0}).scrollIntoView().run(),cX(e,a),i((0,cA.xi)({beforeCardId:null==n?void 0:n.node.attrs.id,cardCount:1}))},[i,e]);return{handleAddCard:x,handleCopy:o,handleDelete:c,handleCut:u,handleDuplicate:h}},c$=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rr.s,{icon:n,onClick:i,...s,children:t})},c0=(0,v.memo)(e=>{let{isDark:t}=e;return(0,a.jsxs)(u.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.lCX}),(0,a.jsx)(p.G,{icon:e2.diR,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,a.jsx)(p.G,{icon:e2.diR,transform:"shrink-7 right-6 down-4"}),(0,a.jsx)(p.G,{icon:e2.r8p,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});c0.displayName="AddCardIcon";let c1=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,eq.Bw)(t,e[0]);if(!n)return null;{let e=(0,lG.getCardTitle)(n.node.toJSON());return e||"Untitled card"}}return"Multiple cards selected"},c2=(0,v.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l,isDark:c}=e,u=(0,F.CG)(W.yx),h=(0,n9.p)(),{handleCopy:f,handleDelete:g,handleCut:j,handleDuplicate:C,handleAddCard:b}=cQ(n),y=(0,F.CG)(cA.wg),k=1===y.length,w=(0,v.useMemo)(()=>k?(0,ey.gq)({cardId:y[0],docId:null==u?void 0:u.id,isPresentMode:!1}):"",[null==u?void 0:u.id,k,y]),{onCopy:S}=(0,n7.V)(w),E=(0,v.useCallback)(()=>{S(),h({title:(0,a.jsx)(m.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[S,h]),I=(0,cN.K)(),A=(0,v.useMemo)(()=>c1(y,n),[n,y]),_=(0,v.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]);return(0,a.jsx)(nC.v,{isOpen:i,onClose:r,children:(0,a.jsxs)(ny.q,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[A&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{pl:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:A}),(0,a.jsx)(ri.R,{})]}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:s,command:(0,ej.cE)("Mod+X"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.EQg}),onClick:j,children:(0,a.jsx)(m.cC,{id:"cCd8Bs"})}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:s,command:(0,ej.cE)("Mod+C"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.kZ_}),onClick:f,children:(0,a.jsx)(m.cC,{id:"he3ygx"})}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:s,command:(0,ej.cE)("Mod+D"),icon:(0,a.jsx)(p.G,{fixedWidth:!0,icon:x.WM4}),onClick:C,children:(0,a.jsx)(m.cC,{id:"euc6Ns"})}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:s,icon:(0,a.jsx)(c0,{isDark:c}),onClick:b,sx:_,children:(0,a.jsx)(m.cC,{id:"90n2YU"})}),!s&&(0,a.jsx)(ri.R,{}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!k,icon:(0,a.jsx)(cz.x,{isLocked:!I,isDark:c}),onClick:E,children:(0,a.jsx)(m.cC,{id:"F0YmUY"})}),(0,a.jsx)(c$,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:g,shouldHide:s,children:(0,a.jsx)(m.cC,{id:"cnGeoo"})})]})})});c2.displayName="FilmstripCardMenuComponent";let c5=(0,v.memo)(c2);var c4=n(15151),c3=n(56253);let c6=(0,lE.E)(u.xu),c8=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:s,isDragInProgress:o,index:l}=e;return(0,a.jsxs)(c.k,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,children:[(0,a.jsx)(c9,{isDragInProgress:o,cardId:r}),(0,a.jsx)(lI.M,{children:!i&&!s&&(0,a.jsx)(c6,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,a.jsx)(d.x,{children:l})},l)})]})},c9=e=>{let{cardId:t,isDragInProgress:n}=e,{setNavItemPreviewRef:i}=co(),r=(0,F.CG)(W.Pu),s=(0,c4.J)(r,!1),o=(0,v.useRef)(null);return(0,v.useEffect)(()=>{o.current&&(n?o.current.style.height="".concat(o.current.offsetHeight,"px"):o.current.style.height="")},[n]),(0,a.jsx)(c.k,{ref:o,className:"filmstrip-nav-item-wrapper",sx:t5.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(c3.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,a.jsx)("div",{className:"ProseMirror",children:(0,a.jsx)(c.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:s,children:(0,a.jsx)("div",{style:{width:"100%"},ref:e=>{e&&i(t,e)}})})})})},c7=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r}=e,{title:s}=(0,te.T)({cardId:t});return(0,a.jsxs)(c.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,a.jsxs)(c.k,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,a.jsx)(u.xu,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,a.jsx)(u.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,a.jsx)(p.G,{icon:x.Okg})})]}),(0,a.jsx)(c.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",children:(0,a.jsx)(d.x,{noOfLines:1,children:s||"Untitled"})})]})},de=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,editor:s,isAnimating:o}=e,l=(0,eB.As)("filmstrip"),a=(0,F.CG)(cA.DM);(0,v.useEffect)(()=>{t.current&&n===r&&(((null==s?void 0:s.isFocused)||(null==s?void 0:s.isThumbnail))&&!o?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=l.scroller,t=o+s,n=Math.max(0,t-e.clientHeight+4);l.scrollTo({top:n})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,s,a,i,l,t,o])},dt=()=>{let e=(0,eo.i)({lg:100,xl:125,"2xl":150})||100,t=(0,F.CG)(cA.K5),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/c3.DB}},dn=(0,lE.E)(c.k),di=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:s,isFilmstripSelected:o,readOnly:l,shouldHide:c,isDragInProgress:h,numberOfCardsDragging:x,onContextClick:p,editor:m,isAnimating:f,showTextOnly:g}=e,{cardId:j,isDragging:C}=t,b=(0,v.useRef)(null);de({filmstripItemRef:b,cardId:j,isFilmstripSelected:o,currentFocusedCard:s,editor:m,isAnimating:f});let y=(0,F.TL)(),{previewWidth:k}=dt(),w=(0,v.useCallback)(e=>{if(!j)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!l)y((0,cA.YC)({id:j,currentFocusedCard:s}));else if(n&&!l)y((0,cA.sY)({id:j}));else{if(h)return;y((0,cA.Ti)({id:j})),y((0,W.Qx)({attached:!1})),m&&(0,nG.YS)({cardId:j,editor:m})}},[j,l,y,s,h,m]);return(0,a.jsxs)(u.xu,{className:"filmstrip-item",ref:b,pos:"relative",pt:g?void 0:1,mt:g?1.5:i?void 0:1,onClick:w,onContextMenu:p,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:c?"none":void 0,"data-filmstrip-selected":o,"data-filmstrip-view":g?"list":"filmstrip",css:{"--editor-width":"".concat(k,"px")},children:[g&&(0,a.jsx)(c7,{cardId:j,index:n,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(c8,{shouldHide:g,cardId:j,index:n,isDraggingCard:C,isDragInProgress:h,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(lI.M,{children:x&&(0,a.jsx)(u.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,a.jsx)(dn,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,a.jsx)(d.x,{children:x})},"badge-number")})})]})};var dr=n(28316),ds=n(65878),dl=n(28858),da=n(90507),dc=n(85069);let dd=(0,v.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,dc.c)(n);return(0,a.jsx)(C.zt,{store:r,children:(0,a.jsx)(du,{ref:t,...i})})}),du=(0,v.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r}=e,s=(0,v.useMemo)(()=>(0,tT.e)(),[]),o=(0,F.TL)();(0,v.useEffect)(()=>{o((0,W.Dc)({theme:i||null})),o((0,W.iS)({isAllowedToEdit:!1})),o((0,W.Nr)({animationsEnabled:!1}))},[i,o]);let l=(0,da.jE)({extensions:s,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(l):t.current=l),l.isThumbnail=!0,(0,v.useEffect)(()=>{var e;let t=n.getJSON();t&&l&&(l.commands.setContent(t),l.commands.command(()=>((0,rg.E0)(l.state.doc,o),!0)),null===(e=ds.S.getState(l.state))||void 0===e||e.compute(l.state.doc).processChanges(o))},[n,l,o]),(0,cV.M)({sourceEditor:n,targetEditor:l}),(0,a.jsx)(u.xu,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:dl.Y,children:(0,a.jsx)(da.kg,{editor:l,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})});var dh=n(91073);let dx=(0,v.memo)(e=>{let{content:t,theme:n}=e,[i,r]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),i)?(0,a.jsx)(t5.m,{theme:n,content:t,isThumbnail:!0,portalComponent:dm}):null}),dp=(0,v.memo)((0,v.forwardRef)((e,t)=>{let{parent:n,theme:i}=e,[r,s]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{requestAnimationFrame(()=>{s(!0)})},[]),r)?(0,a.jsx)(dd,{parent:n,theme:i,portalComponent:dm,ref:t}):null}));dp.displayName="TransactionalFilmstripPreviewEditor";let dm=e=>{let{renderers:t}=e,n=co(),{state:{navItemPreviewRefMap:i}}=n;return(0,a.jsx)(a.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e,r=n.props.node;if("document"===r.type.name)return null;let s=(0,dh.KH)(r)?i[r.attrs.id]:null;return dr.createPortal(n.reactElement,s||n.element,t)})})};dx.displayName="FilmstripPreviewEditor";var df=n(33522);let dg=(0,v.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r}=e,{previewWidth:s}=dt(),o=(0,v.useRef)(null),l=(0,v.useRef)(s),d=(0,v.useRef)(null),h=(0,F.TL)(),x=(0,v.useCallback)(e=>{if(e.preventDefault(),!o.current||!l.current||!d.current)return;let{width:n,x:i}=o.current,r=e.clientX-i,s=n+r;if(s<=30){t();return}let a=aH()(n+r,90,200);a!==l.current&&(l.current=a,d.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(a,"px;\n          }"))},[t]),p=(0,df.Z_)(x,30),m=(0,v.useCallback)(e=>{e.preventDefault(),o.current={x:e.clientX,width:l.current},r(!0);let t=()=>{o.current=null,d.current&&(d.current.innerHTML=""),h((0,cA.lh)({width:l.current})),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",t)},[h,r,p]);return(0,a.jsxs)(c.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:m,zIndex:a8,children:[(0,a.jsx)("style",{ref:d}),(0,a.jsx)(u.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});dg.displayName="FilmstripResizer";let dj=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),dv=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,eq.KH)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},dC=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(ct))},db=()=>{let e=(0,v.useRef)(null),[t,n]=(0,v.useState)(!1),[i,r]=(0,v.useState)([0,0]),[s,o]=(0,v.useState)("bottom"),l=(0,F.TL)(),a=(0,v.useCallback)(()=>{n(!1)},[]),c=(0,v.useCallback)(()=>{r([0,0]),o("bottom")},[]),d=(0,v.useCallback)(e=>{n(!0),r(e)},[]),u=(0,v.useCallback)(t=>n=>{var i;n.preventDefault(),l((0,cA.uu)({id:t})),d([n.clientX,n.clientY]);let r=null===(i=e.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,a=n.clientY<r;s&&!a?o("top"):s&&a?o("center"):o("bottom")},[l,e,d]),h=(0,v.useMemo)(()=>{var t;let n=i[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,o=r?window.innerHeight-(n+r+8):void 0,l="center"===s&&o?"translateY(".concat(o,"px)"):"top"===s?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:l,transformOrigin:"top"}},[s,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:h,clearPositioning:c}},dy=eA()(ts.YS,200),dk=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:c}=cQ(r),d=(0,F.TL)(),u=(0,F.qr)();(0,v.useEffect)(()=>e4.F7.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return d((0,cO.vL)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d((0,cA.td)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{d((0,cA.ut)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,cA.wg)(u.getState()),s=t[0];return!e.shiftKey&&r&&s&&(dy({cardId:s,editor:r}),d((0,W.Qx)({attached:!1}))),!0}case"ArrowUp":{d((0,cA.ut)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,cA.wg)(u.getState()),s=t[0];return!e.shiftKey&&r&&s&&(dy({cardId:s,editor:r}),d((0,W.Qx)({attached:!1}))),!0}default:return!1}}),[d,i,t,s,l,o,c,a,n,r,u])};var dw=n(3402);let dS=e=>{let t=(0,F.qr)(),n=(0,n9.p)(),i=(0,F.TL)();(0,v.useEffect)(()=>{let r=r=>{var s;let o=t.getState();if(!e||!dC()||!(0,W.hN)(o))return;let l=null===(s=r.clipboardData)||void 0===s?void 0:s.getData("text/html");if(!l)return;let{content:c}=(0,dw.T)(l,e.schema),d=c.content.filter(e=>(0,dh.KH)(e));if(d.length){let t=(0,eq.Bw)(e,(0,cA.zq)(o)),s=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=d.map(e=>(0,eT.hs)(cB()(e.toJSON()))),c=l.map(e=>(0,cZ.Zs)(e)),u=(0,cA.ym)((0,F.bh)().getState());e.chain().insertContentAt(s,c,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:s});let n=(0,cJ.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),cX(e,u),i((0,cA.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:c.length})),n({title:(0,a.jsx)(m.cC,{id:"3viq5b",values:{0:d.length,1:d.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class dE{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let dI=()=>new dE,dA=()=>{let e=(0,cc.h)(dI),t=(0,v.useRef)(null),n=(0,v.useRef)(),i=(0,v.useRef)(),r=(0,v.useRef)(),s=(0,v.useCallback)(e=>{if(!r.current)return;let t=dT(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current;t.y=i.current-o},[]),o=(0,v.useCallback)((e,n)=>{let i=t.current;if(!i)return;let r=i.getBoundingClientRect(),s=n.point.y,o=e.target;if(!(o instanceof Element))return;let l=o.closest("[draggable]"),a=null==l?void 0:l.parentElement;a&&(s<r.top+25&&(l!==a.firstElementChild||i.scrollTop>0)?i.scrollTop-=5:s>r.bottom-25&&(l!==a.lastElementChild||i.scrollTop<i.scrollHeight)&&(i.scrollTop+=5))},[]),l=(0,v.useCallback)(()=>{let s=t.current,o=d_(e);if(!s||!o)return;r.current=o,n.current=s.scrollTop;let l=dT(o);l&&(i.current=l.y)},[e]),a=(0,v.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:a}},d_=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},dT=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},dO=(0,lE.E)(c.k),dD=(0,lE.E)(u.xu),dR="data-".concat(nJ.dh),dP=e=>({initial:{x:-e},animate:{x:0,transition:a9},exit:{x:-e,transition:a7}}),dL=e=>{let{onClose:t,editor:n,readOnly:i}=e,[r,s]=(0,v.useState)(null),[o,l]=(0,v.useState)(!1),[d,h]=(0,H.I)(B.H.filmstripViewPreference,"film"),x=(0,tr.ye)("transactionalFilmstrip"),p=(0,v.useRef)(null),{cards:m,editorContent:f,isDragging:g,selection:j,isLoaded:C}=cD(x?null!=r?r:void 0:n),{id:b}=(0,v.useMemo)(()=>dv(j,n),[n,j]),y=(0,F.TL)(),k=(0,F.CG)(cA.wg),w=(0,F.CG)(cO.pe),S=(0,F.CG)(cO.u9),E=(0,F.CG)(cO.K3),[I,A]=(0,v.useState)(!1),{menuRef:_,isFilmstripCardMenuOpen:T,onFilmstripCardMenuClose:O,clearPositioning:D,handleContextMenu:R,menuRootStyles:P}=db(),L=(0,v.useCallback)(()=>{if(O(),o){var e;null===(e=p.current)||void 0===e||e.focus()}},[o,O]),{scrollerRef:z,onScroll:N,dragControls:G,onDrag:M,onDragStart:U,onDragEnd:q}=dA(),V=(0,v.useCallback)(e=>()=>{if(A(!0),U(),p.current){let e=p.current.getBoundingClientRect().height;p.current.style.height="".concat(e,"px")}let t=k.includes(e)?k:[e];y((0,cA.WF)({selectedCardIdsToDrag:t})),y((0,cO.CA)({cardIds:m.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[m,y,k,U]),K=(0,v.useCallback)(()=>{n&&(n.commands.rearrangeCardsById(m.map(e=>e.cardId),S),y((0,cO.vL)()),q())},[m,y,n,S,q]),Z=(0,v.useCallback)(()=>{p.current&&(p.current.style.height="auto"),A(!1)},[]);dS(n),dk({isFocused:o,readOnly:i,firstFocusedCardId:b,editor:n,isDragging:g}),(0,aS.O)({ref:p,handler(e){_.current&&_.current.contains(e.target)||(T&&O(),y((0,cA.Mt)()))}});let Y=(0,F.CG)(W.Pu),J=(0,ep.ff)("whiteAlpha.600","whiteAlpha.100"),X=(0,ep.ff)("#F9FAFBDD","gray.900"),Q=(0,ep.ff)("gray.800","gray.200"),$=(0,ep.ff)("blackAlpha.400","whiteAlpha.500"),{colorMode:ee}=(0,ep.If)(),et="dark"===ee,en=(0,v.useMemo)(()=>dj(et),[et]),[ei,er]=(0,v.useState)(!1),{width:es}=dt(),eo=dP(es),el=(0,v.useMemo)(()=>{let e=S.length;return g&&e>1?e:null},[g,S.length]),[ea,ec]=(0,v.useState)(!1),ed=(0,eB.As)("filmstrip");(0,v.useEffect)(()=>{ed.setScrollSelector(ci)},[ed]);let eu=(0,c_.WD)(),eh=!!eu.src,ex=x?r:n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:14,bottom:eh?"".concat(eu.height+2*eu.paddingY,"px"):2,justifyContent:"center",color:Q,children:[n&&x?(0,a.jsx)(dp,{parent:n,theme:Y,ref:s}):(0,a.jsx)(dx,{theme:Y,content:f}),(0,a.jsxs)(u.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:ea?0:1}},maxHeight:"100%",children:[(0,a.jsxs)(dO,{ref:p,"data-guider-highlight":"filmstrip",className:ce,[dR]:!0,pos:"relative",direction:"column",zIndex:a6,...eo,onAnimationStart:()=>{ec(!0)},onAnimationComplete:()=>{ec(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{l(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;p.current&&(null===(t=p.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=_.current)||void 0===n?void 0:n.contains(e.relatedTarget))||l(!1)},borderRadius:"md",bg:X,borderWidth:"1px",borderColor:J,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,a.jsx)(cL,{isDark:et,onClose:t,viewPreference:d,setViewPreference:h}),(0,a.jsx)(dD,{className:cn,layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:$,borderRadius:"full"},...en},ref:z,onScroll:N,p:"8px",pt:0,children:(0,a.jsx)(cI.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);y((0,cO.k)({reorderedCardIds:t}))},values:m,axis:"y",children:ex&&n&&C&&m.map((e,t)=>{let{cardId:r,displayBehavior:s}=e,o=k.includes(r),l=E===r;return(0,a.jsx)(cI.Item,{drag:!i&&"y",value:e,onDragStart:V(r),onDragEnd:K,onDragTransitionEnd:Z,className:"reorder-item",dragControls:G,transition:{layout:{duration:ei?0:void 0}},onDrag:M,style:{position:"relative",listStyle:"none"},children:(0,a.jsx)(di,{readOnly:i,editor:ex,card:e,index:g&&void 0!==w[r]?w[r]:t+1,isFirst:0===t,shouldHide:"hidden"===s,isDragInProgress:I,isEditorFocused:b===r&&n.isFocused,isFilmstripSelected:!!o,currentFocusedCard:b,numberOfCardsDragging:l?el:null,onContextClick:R(r),isAnimating:ea,showTextOnly:"list"===d})},r)})})})]}),(0,a.jsx)(dg,{onClose:t,isDark:et,isResizing:ei,setIsResizing:er})]})]}),n&&(0,a.jsx)(c5,{ref:_,editor:n,readOnly:i,isOpen:T,onClose:L,clearPositioning:D,rootStyles:P,isDark:et})]})},dz=()=>{let e=(0,F.TL)(),t=(0,F.CG)(cA.GX),n=(0,eo.i)({base:!1,lg:!0})||!1,[i,r]=(0,v.useState)(!1),[s,o]=(0,v.useState)(!1),l=(0,v.useCallback)(()=>{e((0,cA.dQ)({isOpen:!1})),e((0,cA.Mt)()),o(!0)},[e]),a=(0,v.useCallback)(()=>{n||r(!0),e((0,cA.dQ)({isOpen:!0}))},[n,e]),c=!n&&i;return(0,v.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,cA.dQ)({isOpen:!1})):r&&e((0,cA.dQ)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&c)}},dN=(0,lE.E)(ef.z),dG=(0,v.memo)(()=>{let{editor:e}=(0,tw._i)(),{isOpen:t,onClose:n,onOpen:i}=dz(),r=(0,nJ.Br)("edit"),s=(0,F.CG)(W.hN),o=(0,eR.Yy)(),[l,d]=(0,v.useState)(!1),u=(0,v.useCallback)(()=>{d(!0),setTimeout(()=>{i()}),setTimeout(()=>{d(!1)},750)},[i]);return(0,v.useEffect)(()=>e4.F7.on("keydown","FILMSTRIP",e=>!!(0,nR.ZP)("Mod+\\")(e)&&(t?n():u(),!0)),[t,n,u]),(0,a.jsx)(cs,{children:(0,a.jsx)(ej.Wk,{isDark:o,children:(0,a.jsx)(lI.M,{children:t?(0,a.jsx)(dL,{onClose:n,editor:e,readOnly:!r||!s},"filmstrip"):(0,a.jsx)(ej.kH,{placement:"top-end",label:(0,a.jsx)(m.cC,{id:"7ShgZt"}),isDisabled:l,shortcut:"Mod+\\",children:(0,a.jsxs)(dN,{initial:{opacity:0},animate:{opacity:1,transition:a7},exit:{opacity:0,transition:a9},zIndex:a6,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:u,children:[(0,a.jsx)(a3.TX,{children:(0,a.jsx)(m.cC,{id:"7ShgZt"})}),l?(0,a.jsx)(c.k,{children:(0,a.jsx)(tI.$,{size:"sm"})}):(0,a.jsx)(p.G,{icon:x.CjD})]},"filmstrip-opener")})})})})});dG.displayName="Filmstrip";var dM=n(94207),dU=n(26900),dF=n(56256);let dW=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,s=(0,n9.p)(),o=(0,v.useRef)(null),[l,c]=(0,v.useState)(""),[d,{loading:u}]=(0,y.D1_)(),h=()=>{d({variables:{id:r,title:l}}).then(()=>{c(()=>""),i()}).catch(e=>{console.error(e),s({title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,a.jsxs)(ra.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:o,children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(tZ.f,{children:(0,a.jsx)(oR.I,{ref:o,value:l,required:!0,placeholder:(0,oa.$)(),onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&h()}})}),(0,a.jsx)(tY.m,{children:(0,a.jsx)(tE.K,{spacing:2,direction:"row",align:"center",children:(0,a.jsx)(ef.z,{isLoading:u,isDisabled:u||!l||!l.length,onClick:()=>{h()},children:(0,a.jsx)(m.cC,{id:"tfDRzk"})})})})]})]})},dH=(0,v.memo)(e=>{let{doc:t}=e,n=(0,v.useCallback)(()=>ou.T.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:s}=(0,na.M)({id:"analyticsModalDisclosure"}),{isOpen:o,onOpen:l,onClose:d}=(0,na.M)({id:"titleModalDisclosure"}),u=(0,eM.z$)(),{user:h}=(0,eX.SE)(),g=(0,eX.py)("manage",t)&&!!h,j=(0,tr.ye)("editDocAI"),C=(0,v.useCallback)(()=>{t&&(t.title&&""!==t.title?n():l())},[t,n,l]),b=(0,v.useCallback)(e=>()=>{null==u||u.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()},[u,null==t?void 0:t.id,s]);return g&&t&&!j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(m.cC,{id:"YaUqUV"}),children:(0,a.jsx)(dF.r,{"data-guider-highlight":"view-analytics-button","aria-label":f.ag._({id:"YaUqUV"}),onMouseDown:cR.br,onClick:b("toolbar_analytics_block"),icon:(0,a.jsx)(p.G,{icon:x.Ma4})})})}),o&&(0,a.jsx)(dW,{onClose:d,isOpen:o,onSaveSuccess:()=>{d(),n()},docId:null==t?void 0:t.id}),i&&(0,a.jsx)(s5,{doc:t,onSharePanelOpen:C,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var dB=n(58905),dq=n(75230),dV=n(64951),dK=n(25215),dZ=n(58450),dY=n(41421),dJ=n(14304),dX=n.n(dJ),dQ=n(7628),d$=n(7e4);let d0=(0,lE.E)(c.k),d1=e=>{let{doc:t}=e;return(0,a.jsx)(d0,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(lI.M,{initial:!1,children:(0,a.jsx)(d6,{doc:t})})})},d2=(0,v.memo)(e=>{let{doc:t}=e,{editor:n}=(0,tw._i)(),{isConnected:i}=(0,y.$gs)(),r=(0,n9.p)(),s=(0,v.useRef)(null),o=(0,v.useRef)(null),[l,{loading:c}]=(0,y.D1_)(),[d,h]=(0,v.useState)(null),[x,p]=(0,v.useState)(!1),[g,j]=(0,v.useState)(!1),C=(0,eX.py)("edit",t),b=C?300:500,k=(0,v.useCallback)(()=>{if(!n)return"";let[e]=(0,eF.N2)(n.state.doc,eq.KH);if(!e)return"";let t=(0,lG.getCardTitle)(e.node.toJSON());return t||""},[n]);(0,v.useEffect)(()=>{!t||x||c||(h(t.title||""),j(!!t.titleEdited))},[t,x,c]);let w=()=>{s.current.style.width=o.current.offsetWidth+0+"px"},S=(0,ep.ff)("gray.800","gray.200");return(0,a.jsx)(ej.kH,{label:C?i?(0,a.jsx)(m.cC,{id:"2wxgft"}):(0,a.jsx)(m.cC,{id:"Cb+Bgk"}):null,"aria-label":f.ag._({id:"2wxgft"}),children:(0,a.jsxs)(dB.C,{value:d||"",placeholder:d||k(),isDisabled:c||!C||!i,isPreviewFocusable:C,maxW:b,width:"100%",fontWeight:"normal",onCancel:()=>{w(),p(!1)},onFocus:()=>{w(),t&&!c&&p(!0)},onChange:e=>{w(),x&&(h(e),j(!!e))},onSubmit:()=>{if(!t||c)return;p(!1);let e=d||k();l({variables:{id:t.id,title:e,titleEdited:g}}).catch(e=>{console.error(e),r({title:(0,a.jsx)(m.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,a.jsx)(dq.w,{px:1,py:.5,display:x?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:g?S:"inherit"}),(0,a.jsx)(dV.V,{ref:s,px:1,py:.5,color:g?S:"inherit",maxW:b,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,a.jsx)(u.xu,{ref:o,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:dX().sanitize((d||"").replace(/\s/g,"&nbsp;"))}})]})})});d2.displayName="EditableDocTitle";let d5=e=>{let{cardId:t,isEllipsis:n,value:i,onClick:r}=e,s=(0,te.c)(t);if(n)return(0,a.jsx)(p.G,{icon:x.cNd});if(!t&&!i)return null;let o=i||(null==s?void 0:s.title)||"";return(0,a.jsx)(d.x,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:o})},d4=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,W.gh)(e),i=(0,W.i2)(e)||"",r=(0,W.X9)(e),s=r.parents[i]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];let o=s[0],l=s[s.length-1];return[{isHome:!0},s.length>1?{cardId:o}:null,s.length>2?{isEllipsis:!0}:null,s.length>0?{cardId:l}:null,{cardId:i}]}},d3=()=>{let e=(0,tr.ye)("presentModeFlat"),t=(0,F.CG)(d4({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t));return t},d6=(0,v.memo)(e=>{let{doc:t}=e,n=d3(),[i]=(0,d$.X)(B.H.lastHomeUrl,"/"),r=(0,tr.ye)("offline"),{user:s}=(0,eX.SE)(),{isConnected:o}=(0,y.$gs)(),{confirmNavigation:l}=(0,tw._i)(),{push:h}=(0,ev.useRouter)(),g=(0,eo.i)({base:"xs",sm:"sm"}),j=(0,ep.ff)("gray.500","gray.400"),v=(0,ep.ff)("gray.800","gray.100");return(0,a.jsxs)(em.U,{spacing:0,as:ef.z,textAlign:"left",px:0,_hover:{color:v},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,a.jsx)(dK.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:g,spacing:["4px","8px"],separator:(0,a.jsx)(u.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,a.jsx)(p.G,{icon:x._tD})}),children:n.map((e,r)=>{if(!e)return null;let o=r===n.length-1,{cardId:c,isEllipsis:d,isDocTitle:u,isHome:m,value:f}=e,g=m?"home":d?"ellipsis":c||f||r;if(m&&!s)return null;let v={as:nz(),href:i||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,a.jsx)(dZ.g,{children:(0,a.jsx)(d0,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,a.jsx)(dY.A,{isCurrentPage:o,pointerEvents:o&&!u?"none":"inherit",color:o?j:"inherit",...m?{...v}:{},children:u?(0,a.jsx)(d2,{doc:t}):m?(0,a.jsx)(iQ.r,{ml:-3,as:dF.h,href:v.href,onClick:e=>{let t=!e.shiftKey&&(e.metaKey||e.ctrlKey);t||(e.preventDefault(),l().then(()=>{h(v.href)}))},mr:-1,children:(0,a.jsx)(p.G,{size:"1x",icon:x.J9Y})}):(0,a.jsx)(d5,{cardId:c,value:f,isEllipsis:d,onClick:()=>{c&&(0,dQ.D)({cardId:c,method:"push"})}})})},g)},g)})}),!o&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.x,{mr:2,children:(0,a.jsx)(m.cC,{id:"ysdDIA"})}),r&&(0,a.jsx)(d.x,{color:"gray.300",children:(0,a.jsx)(m.cC,{id:"+QNhGE"})})]}),"aria-label":f.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",pr:3,children:(0,a.jsx)(p.G,{icon:x.bKP})})})]})});d6.displayName="BreadcrumbGroup";var d8=n(82642),d9=n(62453),d7=n(93274),ue=n(3422);let ut=(0,v.createContext)(null);var un=n(85886);let ui=e=>!e.isLayoutDirty&&e.willUpdate(!1),ur=e=>!0===e,us=e=>ur(!0===e)||"id"===e,uo=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,v.useContext)(ue.p),s=(0,v.useContext)(ut),[o,l]=(0,un.N)(),a=(0,v.useRef)(null),c=r.id||s;null===a.current&&(us(i)&&c&&(t=t?c+"-"+t:c),a.current={id:t,group:ur(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(ui);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let d=(0,v.useMemo)(()=>({...a.current,forceRender:o}),[l]);return v.createElement(ue.p.Provider,{value:d},e)},ul=()=>{let{user:e,anonymousUser:t}=(0,eX.SE)(),n=(0,C.I0)(),i=(0,n9.p)(),{editor:r}=(0,tw._i)(),{collaborators:s,followers:l}=(0,C.v9)((0,W._h)((null==e?void 0:e.id)||t.id));av({editor:r,collaborators:s,user:e});let u=(0,C.v9)(W.Ok),h=(0,C.v9)(W.e0),x=(0,C.v9)(W.yn),p=(0,C.v9)(W.gs),g=(0,C.v9)(W.JA);(0,v.useEffect)(()=>{u.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(so.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:rF()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,a.jsx)(d.x,{ml:2,children:(0,a.jsx)(m.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[u,i]),(0,v.useEffect)(()=>{let e=!x&&p&&!g;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(d.x,{size:"sm",mr:6,children:(0,a.jsx)(m.cC,{id:"PjodLp"})}),(0,a.jsxs)(eg.h,{size:"sm",alignItems:"center",children:[(0,a.jsx)(ef.z,{onClick:()=>{n((0,W.Qx)({attached:!0}))},variant:"solid",children:(0,a.jsx)(m.cC,{id:"f/C2ic"})}),(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"5JWVnj"}),children:(0,a.jsx)(T.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":f.ag._({id:"5JWVnj"}),icon:(0,a.jsx)(d8.T,{}),onClick:()=>{n((0,W.Qx)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,x,p,g,i,n]),(0,v.useEffect)(()=>{p||!r||r.isDestroyed||n((0,W.Qx)({following:null}))},[r,p,n]);let j=(0,eo.i)({base:4,md:6,xl:8})||6,b=j/(l.length?2:1),y=j/(s.length?2:1);return(0,a.jsx)(c.k,{children:(0,a.jsxs)(em.U,{divider:(0,a.jsx)(d9.c,{borderColor:"gray.200"}),children:[l.length&&(0,a.jsx)(ua,{type:o.FOLLOWERS,collaborators:l,max:y,isEveryone:0===s.length,localCollaborator:h,localIsAttached:x}),s.length&&(0,a.jsx)(ua,{type:o.COLLABORATORS,collaborators:s,max:b,isEveryone:0===l.length,localCollaborator:h,localIsAttached:x})]})})};(r=o||(o={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";let ua=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:s,isEveryone:l}=e,u=aj(),h=r===o.FOLLOWERS,x=t.length>s,p=x?t.slice(0,s-1):t,g=x?t.length-s+1:0,j=e=>{let{localIsFollowing:t,collaborator:n}=e;h||u({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,a.jsx)(uo,{children:(0,a.jsxs)(d7.H,{size:"sm",spacing:h?-2:0,children:[h&&(0,a.jsx)(uc,{isEveryone:l}),p.map((e,t)=>{var r;let s=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,o=!!e.idleSince,l=!h&&(x||p.length-1!==t);return(0,a.jsx)(ej.Vw,{ignoreFallback:!0,name:e.name,label:(0,a.jsxs)(c.k,{direction:"column",justify:"center",align:"center",children:[(0,a.jsx)(d.x,{children:e.name}),(0,a.jsx)(d.x,{fontSize:"xs",children:h?(0,a.jsx)(m.cC,{id:"iRohzP"}):s&&i?(0,a.jsx)(m.cC,{id:"1QTvS5"}):(0,a.jsx)(m.cC,{id:"2Ldadb"})})]}),pointerEvents:o?"none":"auto",opacity:o?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:s&&i,bg:e.color,shadow:"base",color:rF()(e.color).isDark()?"white":"black",cursor:h?"":"pointer",boxProps:l?{marginEnd:-2}:{},onClick:()=>j({localIsFollowing:s,collaborator:e})},e.sessionId)}),g>0&&(0,a.jsxs)(ej.Z9,{tooltipLabel:f.ag._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id),s=!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId);j({localIsFollowing:s,collaborator:r})},avatars:t,count:g,disabled:h,children:[(0,a.jsx)(d.x,{px:2,children:h?(0,a.jsx)(m.cC,{id:"vliZud",values:{0:t.length}}):(0,a.jsx)(m.cC,{id:"sC4bhw",values:{0:t.length}})}),!h&&(0,a.jsx)(d.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"miJbY4"})}),(0,a.jsx)(ri.R,{})]})]})})},uc=e=>{let{isEveryone:t}=e,[n,i]=(0,v.useState)(!1),[r,s]=(0,v.useState)(!1),[o,l]=(0,v.useState)(!1);return((0,v.useEffect)(()=>{!n&&t&&(s(!0),i(!0),setTimeout(()=>{s(!1)},3e3))},[t,n]),t)?(0,a.jsx)(u.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"w7dTyp"}),isOpen:o||r,children:(0,a.jsx)(u.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a.jsx)(p.G,{icon:x.Mdf})})})}):(0,a.jsx)(u.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,a.jsx)(p.G,{icon:x.Mdf})})};var ud=n(46164),uu=n(43970);let uh=(0,lE.E)(u.xu),ux=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,a.jsx)(tE.K,{p:2,children:(0,a.jsx)(lI.M,{initial:!1,children:t.map(e=>(0,a.jsx)(uh,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,a.jsx)(uu.q,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var up=n(56666);function um(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function uf(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){um(s,i,r,o,l,"next",e)}function l(e){um(s,i,r,o,l,"throw",e)}o(void 0)})}}var ug=n(89644),uj=n.n(ug),uv=n(41857);function uC(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function ub(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){uC(s,i,r,o,l,"next",e)}function l(e){uC(s,i,r,o,l,"throw",e)}o(void 0)})}}function uy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function uk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uy(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uy(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uw="axios-retry";function uS(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&uv(e)}var uE=["get","head","options"],uI=uE.concat(["put","delete"]);function uA(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function u_(e){return!!e.config&&uA(e)&&-1!==uI.indexOf(e.config.method)}function uT(e){return uS(e)||u_(e)}function uO(){return 0}function uD(e){var t=e[uw]||{};return t.retryCount=t.retryCount||0,e[uw]=t,t}function uR(){return(uR=ub(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function uP(e,t){var n;e.interceptors.request.use(e=>(uD(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=ub(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=uT,retryDelay:o=uO,shouldResetTimeout:l=!1}=uk(uk({},t),i[uw]),a=uD(i);if(yield function(e,t,n,i){return uR.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var c=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var d=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-d-c,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),c))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}uP.isNetworkError=uS,uP.isSafeRequestError=function(e){return!!e.config&&uA(e)&&-1!==uE.indexOf(e.config.method)},uP.isIdempotentRequestError=u_,uP.isNetworkOrIdempotentRequestError=uT,uP.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()},uP.isRetryableError=uA;var uL=n(31003),uz=class{constructor(e){(0,up.Z)(this,"host",void 0),(0,up.Z)(this,"apiKey",void 0),(0,up.Z)(this,"userToken",void 0),(0,up.Z)(this,"axiosClient",void 0),(0,up.Z)(this,"socket",void 0),(0,up.Z)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=uj().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new uL.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),uP(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:uP.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return uf(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!uP.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}},uN=n(10161),uG=n.n(uN);function uM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function uU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uM(Object(n),!0).forEach(function(t){(0,up.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(s=l||(l={})).loading="loading",s.fetchMore="fetchMore",s.ready="ready",s.error="error";var uF={shouldSetPage:!0,shouldAppend:!1};function uW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function uH(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uW(Object(n),!0).forEach(function(t){(0,up.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var uB=class{constructor(e,t,n){this.knock=e,this.feedId=t,(0,up.Z)(this,"apiClient",void 0),(0,up.Z)(this,"userFeedId",void 0),(0,up.Z)(this,"channelConnected",!1),(0,up.Z)(this,"channel",void 0),(0,up.Z)(this,"broadcaster",void 0),(0,up.Z)(this,"defaultOptions",void 0),(0,up.Z)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:l.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===l.loading})),setResult:function(t){var{entries:n,meta:i,page_info:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uF;return e(e=>{var t;return{items:s.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:s.shouldSetPage?r:e.pageInfo,loading:!1,networkStatus:l.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>uU(uU({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?uU(uU({},e),i[e.id]):e)}))}})),this.broadcaster=new(uG()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return uf(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return uf(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return uf(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return uf(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return uf(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,c=o.filter(e=>!e.read_at).length,d=uH(uH({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-c});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:d,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(d),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return uf(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return uf(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:r}=t.store,{networkStatus:s}=r();if(![l.loading,l.fetchMore].includes(s)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:l.loading)});var o=uH(uH({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:o});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(l.error)),{status:a.statusCode,data:a.error||a.body};var c={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var d={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(c,d))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(c,u))}else i(e=>e.setResult(c));return t.broadcast("messages.new",c),{data:c,status:a.statusCode}}})()}fetchNextPage(){var e=this;return uf(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:l.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return uf(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(uH(uH({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return uf(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}},uq=class{constructor(e){(0,up.Z)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new uB(this.instance,e,t)}},uV="default";function uK(e){return"object"==typeof e?e:{subscribed:e}}var uZ=class{constructor(e){(0,up.Z)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return uf(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return uf(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||uV,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return uf(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||uV,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return uf(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||uV,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return uf(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||uV,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return uf(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||uV,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return uf(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||uV,s=uK(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return uf(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||uV,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return uf(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||uV,s=uK(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}},uY=class{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,up.Z)(this,"host",void 0),(0,up.Z)(this,"userToken",void 0),(0,up.Z)(this,"apiClient",null),(0,up.Z)(this,"userId",void 0),(0,up.Z)(this,"feeds",new uq(this)),(0,up.Z)(this,"preferences",new uZ(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new uz({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}},uJ=n(14274);let uX=e=>!!e.comment&&null!==e.timeout,uQ=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,n9.p)(),l=null==t?void 0:t.id,a=(0,v.useMemo)(()=>{if(!l)return null;let e=new uY(uJ.v.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[c,d]=(0,v.useState)({}),u=(0,v.useRef)(!0),h=(0,v.useRef)(r);h.current=r,(0,v.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,v.useCallback)(()=>d({}),[]),p=(0,v.useCallback)(e=>{d(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n,s=!0===e?-1===r.timeout:i===e;return s||(t[i]=r),t},{}))},[]);(0,v.useEffect)(()=>{r||p(!0)},[p,r]),(0,v.useEffect)(()=>{Object.entries(c).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?d(e=>{let n={...e};return n[t].timeout=-1,n}):p(t))},s);d(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[c,i,s,p]),(0,v.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(uJ.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(d(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:m}=(0,y.$gs)();return(0,v.useEffect)(()=>{if(!a||!n)return;let e=a.client();m?e.connectSocket():e.disconnectSocket()},[n,m,a]),{reset:x,comments:Object.values(c).filter(uX).map(e=>e.comment)}},u$=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:s}=e,{user:o}=(0,eX.SE)(),{editor:l}=(0,tw._i)(),c=(0,tr.ye)("editDocAI"),[d,u]=(0,tf.XI)(),{comments:h,reset:m}=uQ({user:o,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),f=!!(l&&r&&r.comments);(0,v.useEffect)(()=>{if(!f)return;let{commentId:e}=(0,ey.sY)();e&&nu.pw.emit(nu.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[f]),(0,v.useEffect)(()=>{(i||s===eK.q.SLIDE_VIEW)&&m()},[i,m,s]);let g=!!h.length&&!i&&s!==eK.q.SLIDE_VIEW,j=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===y.Ux9.Open).length)||0;return c&&0===j?null:(0,a.jsxs)(A.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:g,placement:"bottom",children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(dF.h,{onMouseDown:cR.br,onClick:n,icon:(0,a.jsx)(p.G,{icon:x.Mzg}),isActive:i,"aria-label":i?"Hide comments":"Show comments",borderRadius:5,children:j})}),(0,a.jsx)(i9.h,{children:r&&(0,a.jsxs)(O.y,{bg:"white",shadow:"lg",border:"none",ref:d,children:[(0,a.jsx)(ud.Q,{bg:"white"}),(0,a.jsx)(ux,{editor:l,user:o,commentFeedItems:h,doc:r})]})})]})},u0=()=>(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(m.cC,{id:"EVnzPs"}),children:(0,a.jsx)(dF.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:()=>{nP.T.emit("toggle",{})},icon:(0,a.jsx)(p.G,{icon:x.JyM})})})});var u1=n(82655);let u2=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},u5=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...s}=e,o=(0,v.useRef)(null),l=(0,ep.ff)("gray.200","gray.700"),c=(0,ep.ff)("trueblue.400","trueblue.300"),d=(0,ep.ff)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,v.useEffect)(()=>{let e,i;let s=o.current;if(!s||!r)return;u2(s,0);let l=r=>{e||(e=r);let o=Math.min(100,(r-e)/(10*t));u2(s,o),o<100?i=requestAnimationFrame(l):null==n||n()};return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,a.jsx)(u.xu,{ref:o,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:l}},...s,children:(0,a.jsx)(aN.D,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,a.jsx)(aG,{children:(0,a.jsx)(p.G,{icon:x.g82,fontSize:"14px",style:{color:d,borderRadius:"6px"}})})})})};var u4=n(79829),u3=n(54012),u6=n(6501),u8=n(42505),u9=n(25154),u7=n(9068),he=n(1163),ht=n(66659),hn=n(44885);let hi=()=>{let{generate:e}=(0,ta.jz)("EditCardParallel",{}),{generate:t}=(0,ta.jz)("TranslateCardParallel",{});return(0,v.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},hr=e=>{var t;let{editor:n}=e,i=hi(),r=(0,F.CG)(W.yx),s=(0,F.CG)(W.Pu),o=(0,F.qr)(),l=(0,F.CG)(t7.oh),a=(0,tp.W7)(),c=(0,iq.VA)(n),d=(0,v.useCallback)(async e=>{var t;let{instructions:n="",inputHtml:l,operation:d}=e,u=(null==a?void 0:a.format)||"deck",h=(null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||tr.VH.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let x=r.organization.id,p=(0,tc.nZ)(),m=performance.now(),f=(0,tx.D)(o),g={interface:"edit-card-parallel",interactionId:p,inputContent:l,inputMessage:n,inputData:{custom:!!d,operation:null==d?void 0:d.key,operationGroup:null==d?void 0:d.group,format:u,imageProvider:h},product:(0,he.K9)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:l,request:n,format:u,outline:f,imageProvider:h},interactionId:p},d),t=null==a?void 0:a.settings.imageStyle;!t&&"aiGenerated"===h&&s&&(t=(0,lM.A)(s)),(0,tc.hq)(g);let o=await e;console.log("[EditCardParallel] Response",o);let c=(0,u3.Au)(o);console.log("[EditCardParallel] Parsing HTML",c);let m=await Promise.all(c.map(async e=>(0,u6.sj)(e,{docFormatKey:u,loadImages:!1,context:{workspaceId:x,docId:r.id,interactionId:p},imageOptions:{provider:h,generateStyle:t},theme:s})));return{output:m,interactionId:p}}catch(e){throw(0,tc.pQ)({...g,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-m}),e}},[null==a?void 0:a.format,null==a?void 0:a.settings.imageStyle,null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),u=(0,v.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,eq.Y0)(n.state.doc);if(r)try{o.dispatch((0,t7.dt)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,t7.t)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,tl.c)(n,t.node))});let s=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await d({instructions:t,operation:i,inputHtml:s});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let c={};r.forEach((e,n)=>{var r;let s=l[n];s.attrs=(0,hn.yH)(e.node.attrs,s.attrs),c[e.node.attrs.id]=s,o.dispatch((0,t7.t)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:t,variants:[{label:f.ag._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(r=i.variationName)||void 0===r?void 0:r.call(i))||f.ag._({id:"YledUl"}),isOriginal:!1,id:"v1",card:s}]}}))}),ho(n,c)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,t7.t)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,t7.dt)(!1))}},[n,d,o]);(0,v.useEffect)(()=>u9.T.on("translate",e=>{let{type:t,language:n}=e,i=ht.xd.find(e=>"edit.translate"===e.key);"doc"===t&&i&&u({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[u]);let h=(0,v.useCallback)(()=>{o.dispatch((0,t7.Mq)({}))},[o]),x=(0,v.useCallback)(()=>{hs(n,o.getState(),!0),o.dispatch((0,t7.Mq)({}))},[n,o]);return{editDoc:u,acceptAll:h,rejectAll:x,status:l}},hs=(e,t,n)=>{let i=(0,t7.Ir)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,eq.Bw)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=tX.NB.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},ho=(e,t)=>{let n=(0,eq.Y0)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=n.node.attrs.id,r=t[i];if(!r){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let s=tX.NB.fromJSON(e.state.schema,r),o=(0,W.Pu)((0,F.bh)().getState());return(0,u8.eM)(e,s,o),r}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},hl=()=>{let e=!!(0,F.CG)(e_.lH),{isOpen:t,onClose:n,onOpen:i}=(0,na.M)({id:"TranslateDocDisclosure"}),r=(0,v.useCallback)(e=>{u9.T.emit("translate",{type:"doc",language:e}),n()},[n]),s=t?(0,a.jsx)(u7.o,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null;return{translateDocModal:s,onTranslateDocOpen:i}},ha=(0,lE.E)(e0.g),hc=e=>{let{editor:t}=e,{openUpsellModal:n}=(0,rO.z)(),{editDoc:i,status:r,acceptAll:s,rejectAll:o}=hr({editor:t}),l=(0,eR.Yy)(),d=(0,v.useRef)(null),u=(0,v.useRef)(null),h=(0,tr.ye)("editCard2"),x=(0,ep.ff)("gray.200","whiteAlpha.200"),[g,j]=(0,v.useState)(),C=(0,v.useCallback)(()=>j(void 0),[]),b=(0,J.Y)("edit_doc_ai"),{translateDocModal:y,onTranslateDocOpen:k}=hl(),w="loading"===r,S=(0,v.useCallback)(e=>{var t;if(!b){n({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(s(),j(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){k();return}i(e)},[s,b,i,k,n]);return h?(0,a.jsxs)(ej.Wk,{isDark:l,children:[(0,a.jsx)(nC.v,{placement:"bottom-end",isLazy:!0,initialFocusRef:u,onOpen:()=>{j(void 0)},children:e=>{let{onClose:t,isOpen:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"nIHiKm"}),placement:"bottom",children:(0,a.jsx)(nb.j,{as:dF.r,position:"relative",colorScheme:"trueblue","aria-label":f.ag._({id:"nIHiKm"}),borderRadius:"md",bg:n?x:void 0,isDisabled:w,icon:w?(0,a.jsx)(tI.$,{size:"sm"}):(0,a.jsx)(p.G,{icon:u1.JyM})})}),(0,a.jsx)(hu,{currentOperation:g,onConfirm:s,onReject:o,onClose:C})]}),(0,a.jsx)(i9.h,{children:(0,a.jsxs)(ny.q,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,a.jsx)(u4.M,{firstItemRef:d,inputRef:u,editCardIfAllowed:S,onClose:t,isDisabled:w,opacityFadeUpsell:!b,groups:["writing"],showCreditCosts:!1}),(0,a.jsx)(rT.m,{maxW:"320px",isNarrow:!0,mb:0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,a.jsx)(m.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:Y.x8}}),description:(0,a.jsx)(m.cC,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})]})}}),y]}):null},hd={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},hu=e=>{var t,n,i;let{currentOperation:r,onConfirm:s,onReject:o,onClose:l}=e,u=(0,F.CG)(t7.oo),[h,g]=(0,v.useState)(!0),j="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,a.jsx)(m.cC,{id:"MRZxAn"}),C=null!==(n=u.done)&&void 0!==n?n:0,b=null!==(i=u.error)&&void 0!==i?i:0,y=!!((C||b)&&r);(0,v.useEffect)(()=>{y||g(!0)},[y]);let k={activeColor:(0,ep.ff)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,ep.ff)(b?"red.200":"gray.100","whiteAlpha.200"),bg:(0,ep.ff)("white","gray.900"),bgError:(0,ep.ff)("red.100","red.700"),textColor:(0,ep.ff)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,ep.ff)("red.500","red.100"),iconColor:(0,ep.ff)("blackAlpha.800","whiteAlpha.800")};return(0,a.jsx)(lI.M,{children:y&&(0,a.jsxs)(ha,{position:"absolute",bg:b?k.bgError:k.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,right:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>g(!1),...hd,children:[b>0?(0,a.jsxs)(em.U,{spacing:0,children:[(0,a.jsx)(c.k,{mx:2,justifyContent:"center",alignItems:"center",color:k.textErrorColor,children:(0,a.jsx)(p.G,{icon:x.e7M,size:"lg"})}),(0,a.jsxs)(e0.g,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,a.jsx)(d.x,{fontSize:"sm",color:k.textErrorColor,children:(0,a.jsx)(m.cC,{id:"nwtY4N"})}),(0,a.jsx)(d.x,{fontSize:"xs",color:k.textErrorColor,children:(0,a.jsx)(m.cC,{id:"xbrcey"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e0.g,{spacing:0,alignItems:"flex-start",children:[(0,a.jsxs)(c.k,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(p.G,{icon:u1.JyM,color:"var(--chakra-colors-trueblue-400)"}),(0,a.jsx)(d.x,{fontSize:"sm",mx:2,color:k.textColor,children:j})]}),(0,a.jsx)(c.k,{mx:2,children:(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"Dj1qYd",values:{doneCount:C}})})})]}),(0,a.jsxs)(eg.h,{spacing:0,children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"I1yW7+"}),placement:"top",children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,a.jsx)(p.G,{icon:x.X7o}),onClick:o})}),(0,a.jsx)(ej.kH,{label:f.ag._({id:"kOU1RP"}),placement:"top",children:(0,a.jsx)(ef.z,{"aria-label":f.ag._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,a.jsx)(p.G,{icon:x.FFp}),onClick:s,children:(0,a.jsx)(m.cC,{id:"PHWHEO"})})})]})]}),(0,a.jsx)(c.k,{mt:-6,mr:-1,children:(0,a.jsx)(ej.kH,{label:f.ag._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(u5,{onClose:l,enabled:h&&!b,duration:30,borderRadius:"full",_hover:{bg:k.hoverColorCloseButton,color:k.textColor}})})})]},"confirm-edit-doc-toast")})},hh=(0,lE.E)(u.xu),hx=()=>{let e=(0,F.CG)(W.WI),t=(0,F.CG)(W.yn);return(0,a.jsx)(lI.M,{initial:!1,children:e&&t&&(0,a.jsx)(hh,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},hp=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,a.jsxs)(nC.v,{placement:"bottom-end",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,a.jsx)(nb.j,{as:dF.r,borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:x.cNd}),onMouseDown:cR.br,"data-testid":"doc-toolbar-menu-button"}),(0,a.jsx)(i9.h,{children:t&&(0,a.jsx)(l1,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},hm=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,F.CG)(W.e0),s=(0,v.useRef)(null),o=(0,n9.p)();(0,v.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,v.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]);let l=(0,v.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,ey.C3)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o]);return{handlePresentViewClick:l}};var hf=n(73235),hg=n(21979);function hj(){let e=(0,hf._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return hj=function(){return e},e}let hv=e=>({followOnStart:!0,followingId:e}),hC=e=>{switch(e){case"edit":return f.ag._({id:"UZN1cZ"});case"comment":return f.ag._({id:"jFTs0A"});case"view":return f.ag._({id:"Ya6CJ0"});default:return f.ag._({id:"Txd1qM"})}},hb=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:s,onPlayClick:o}=e,{user:l}=(0,eX.SE)(),{replace:c}=(0,ev.useRouter)(),h=hv(null==l?void 0:l.id),[x,g]=(0,v.useState)(h),j=(0,ey.eo)(s,x),{user:C,color:b}=(0,eX.SE)(),y=(0,F.CG)(tU.yx),k=null==y?void 0:null===(n=y.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,w=(0,lS.F4)(hj());return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(ra.u_,{isOpen:i,onClose:r,size:"lg",children:[(0,a.jsx)(tq.Z,{}),(0,a.jsxs)(rc.h,{children:[(0,a.jsx)(rd.x,{children:(0,a.jsx)(m.cC,{id:"88XnIQ"})}),(0,a.jsx)(tK.o,{}),(0,a.jsx)(rA.i,{}),(0,a.jsx)(tZ.f,{pt:"6",children:(0,a.jsxs)(tE.K,{spacing:"4",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:hC(k)},components:{0:(0,a.jsx)(d.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,a.jsx)(ej.kH,{label:f.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,a.jsx)(u.xu,{mb:"2",children:(0,a.jsx)(hg.I,{url:j,variant:"solid"})}),(0,a.jsxs)(nF.b,{children:[(0,a.jsx)(rR.z,{}),(0,a.jsxs)(em.U,{flexBasis:"100%",alignItems:"top",children:[(0,a.jsx)(d.x,{fontSize:"sm",width:"100%",children:(0,a.jsx)(m.cC,{id:"EApNIe"})}),(0,a.jsxs)(u.xu,{position:"relative",textShadow:"sm",children:[(0,a.jsx)(so.q,{animation:"".concat(w," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(b.value),shadow:"lg"}),(0,a.jsx)(u.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,a.jsx)(p.G,{icon:e2.qaO,fixedWidth:!0})})]})]})]})]})}),(0,a.jsx)(tY.m,{children:(0,a.jsxs)(eg.h,{children:[(0,a.jsx)(ef.z,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,a.jsx)(m.cC,{id:"DPfwMq"})}),(0,a.jsx)(ef.z,{variant:"solid",onClick:()=>{r(),o(),c(j,j,{shallow:!0})},leftIcon:(0,a.jsx)(p.G,{icon:e2.zc}),children:(0,a.jsx)(m.cC,{id:"tbDuNX"})})]})})]})]})})},hy=e=>{var t,n,i,r;let{doc:s,docEditorType:o,isStaticEditor:l,enterSlideView:h,exitSlideView:g,setExitedFullscreenByClick:j,isFullscreen:C,enterFullscreen:b,exitFullscreen:y,shouldHide:k}=e,{onOpen:w,onClose:S,isOpen:E}=(0,na.M)({id:"meetModal"}),{user:I}=(0,eX.SE)(),A=(0,F.CG)(W.gh),_=(0,v.useRef)(A);(0,v.useEffect)(()=>{_.current=A},[A]);let{shortcutLabel:T,shortcutIcon:O,shortcutKeys:D,buttonLabel:R}=rx()[A],P=null==s?void 0:null===(n=s.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,L=!!(null==s?void 0:null===(r=s.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),z=(0,eX.py)("comment",s||void 0),N=(0,eX.py)("manage",s||void 0),G=!l&&I&&P&&N,M=(0,tr.ye)("cardNotes"),U=A===eK.q.SLIDE_VIEW,H=A===eK.q.DOC_VIEW,B=M&&z&&o!==tk.Z.PUBLIC_STATIC,{handlePresentViewClick:q}=hm({docId:null==s?void 0:s.id,enabled:M&&U,enterSlideView:h}),V=(0,tr.ye)("presentFullScreen"),K=(0,F.CG)(W.e_),Z="present"===K.primaryAction?"solid":"plain";return(0,a.jsxs)(c.k,{display:k?"none":"flex",children:[(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":U?"slide":"doc",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:T,shortcut:D,children:(0,a.jsx)(dF.h,{fontWeight:"normal",size:"sm",variant:Z,onClick:()=>{U?g():h({fullscreen:V})},onMouseDown:cR.br,icon:(0,a.jsx)(p.G,{icon:O}),"data-present-button":!0,children:R})}),(0,a.jsxs)(nC.v,{children:[(0,a.jsx)(nb.j,{variant:Z,as:dF.r,icon:(0,a.jsx)(p.G,{icon:x.ptq})}),(0,a.jsx)(i9.h,{children:(0,a.jsxs)(ny.q,{zIndex:"popover",children:[H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ro.k,{title:f.ag._({id:"tbDuNX"}),children:[B&&(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.s0r,fixedWidth:!0}),onClick:q,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T+GUKl"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ACelDx"})})]})}),B&&(0,a.jsx)(ri.R,{}),(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.Rkb,fixedWidth:!0}),command:(0,ej.cE)("Mod+Enter"),onClick:()=>h({fullscreen:!1}),children:(0,a.jsx)(m.cC,{id:"LRFe2O"})}),(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.tc$,fixedWidth:!0}),command:(0,ej.cE)("Mod+Shift+Enter"),onClick:()=>h({fullscreen:!0}),children:(0,a.jsx)(m.cC,{id:"OwIqiD"})})]}),G&&(0,a.jsx)(ri.R,{})]}),U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:e2.Bg$,fixedWidth:!0}),command:(0,ej.cE)("Esc"),onClick:g,children:(0,a.jsx)(m.cC,{id:"5Rfo7J"})}),(B||G)&&(0,a.jsx)(ri.R,{}),B&&(0,a.jsx)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.s0r,fixedWidth:!0}),onClick:q,children:(0,a.jsxs)(tE.K,{spacing:"0",children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"T+GUKl"})}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(m.cC,{id:"ACelDx"})})]})})]}),G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.kH,{isDisabled:L,label:(0,a.jsx)(m.cC,{id:"zk6wKo"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(rr.s,{onClick:()=>{var e;(null==s?void 0:null===(e=s.accessLinks)||void 0===e?void 0:e[0].permission)&&w()},isDisabled:!L,icon:(0,a.jsx)(p.G,{icon:x.ASo,fixedWidth:!0}),children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(m.cC,{id:"z7gRub",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,a.jsx)(hb,{isOpen:E,onClose:S,accessLinkUrl:P,onPlayClick:()=>{h({fullscreen:!1})}})]})]})})]})]}),U&&(0,a.jsx)(c.k,{ml:U?2:0,children:(0,a.jsx)(ej.kH,{label:C?"Exit full screen":"Enter full screen",children:(0,a.jsx)(dF.r,{"aria-label":C?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:C?x.Qj4:x.TL5}),onClick:C?()=>{j(!0),y()}:b})})})]})},hk=e=>{let{doc:t}=e,{replace:n}=(0,ev.useRouter)(),i=(0,F.CG)(e_.lH),r=null==t?void 0:t.id,s=(0,eD.D5)({site:i,docId:r}),{publishDoc:o,publishSite:l,isPublishing:h}=iC({doc:t,site:i,path:s}),{statusText:g,detailText:j,lastPublishedTime:C,needsPublish:b,publishEnabled:y}=rt(h),k=i&&(0,eD.jl)(t,i),w=(0,v.useCallback)(()=>{if(!r)return;let e=(0,ey.yQ)({docId:r,preview:!0});n(e,void 0,{shallow:!0})},[r,n]);return i?(0,a.jsx)(c.k,{children:(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!y,label:b&&!h?(0,a.jsxs)(tE.K,{children:[g,(0,a.jsx)(d.x,{color:"gray.400",children:(0,a.jsx)(m.cC,{id:"FmP7uY"})})]}):(0,a.jsx)(m.cC,{id:"o+bOqE"}),children:(0,a.jsx)(dF.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:l,onMouseDown:cR.br,isDisabled:!y,isLoading:h,icon:b?(0,a.jsx)(p.G,{icon:x.A$k}):(0,a.jsx)(p.G,{icon:x.LEp}),"data-publish-button":!0,children:b?(0,a.jsx)(m.cC,{id:"EEYbdt"}):(0,a.jsx)(m.cC,{id:"u3wRF+"})})}),(0,a.jsxs)(nC.v,{children:[(0,a.jsx)(nb.j,{variant:"solid",as:dF.r,isDisabled:!y,icon:(0,a.jsx)(p.G,{icon:x.ptq})}),(0,a.jsx)(i9.h,{children:(0,a.jsxs)(ny.q,{zIndex:"popover",maxW:"360px",children:[(0,a.jsxs)(tE.K,{w:"100%",p:2,direction:"column",spacing:.5,children:[(0,a.jsx)(d.x,{fontSize:"sm",children:g}),j&&(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:j}),C&&(null==t?void 0:t.site)&&(0,a.jsxs)(em.U,{mx:2,mt:2,children:[(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:k?C:(0,a.jsx)(m.cC,{id:"0bSVwO"})}),k&&(0,a.jsx)(ox,{site:t.site,path:(0,eD.fJ)(s)})]})]}),(0,a.jsx)(ri.R,{}),(0,a.jsxs)(ro.k,{title:f.ag._({id:"EEYbdt"}),children:[(0,a.jsxs)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.A$k,fixedWidth:!0}),onClick:l,alignItems:"baseline",children:[(0,a.jsx)(m.cC,{id:"1EeNDU"}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"TG5c7I"})})]}),(0,a.jsxs)(rr.s,{icon:(0,a.jsx)(p.G,{icon:x.PQh,fixedWidth:!0}),onClick:o,alignItems:"baseline",children:[(0,a.jsx)(m.cC,{id:"jNnwuI"}),(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"+s7ng3"})})]})]}),(0,a.jsx)(ri.R,{}),(0,a.jsx)(ro.k,{title:f.ag._({id:"rdUucN"}),children:(0,a.jsx)(ej.kH,{label:(0,a.jsx)(m.cC,{id:"aChIoL"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(rr.s,{onClick:w,icon:(0,a.jsx)(p.G,{icon:e2.sl_,fixedWidth:!0}),alignItems:"baseline",children:(0,a.jsx)(tE.K,{spacing:"0",children:(0,a.jsx)(m.cC,{id:"Y5Jq49",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{fontSize:"xs",color:"gray.500"})}})})})})})})]})})]})]})}):null};var hw=n(34613),hS=n(60740),hE=n(16710),hI=n(62549);let hA=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:s=!0,showEmbed:o=!0,showButton:l=!0}=e,{isOpen:c,onClose:h,onOpen:x}=(0,na.M)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,view:j,setView:C}=(0,hS.y)(),{user:b,currentWorkspace:y}=(0,eX.SE)(),{editor:k}=(0,tw._i)(),w=(0,eX.py)("view",i),S=(0,eX.py)("edit",i),E=(0,eX.py)("manage",i),I=(0,eM.z$)();(0,v.useEffect)(()=>ou.T.on("openSharePanel",e=>{let{view:t}=e;f(),C(t)}),[f,C]);let A=(0,v.useCallback)(()=>{null==I||I.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"share_panel",type:E?"full":"personal"}),x()},[I,E,null==i?void 0:i.id,x]);if(!w||!b||!i)return null;let _=i.collaborators||[],T=i.channels||[],O=(0,hI.Hs)([..._].sort((e,t)=>e.user.id===b.id?-1:t.user.id===b.id?1:0).map(e=>e.user.id===b.id?"You":e.user.displayName||"").concat(i.orgAccess?T.map(e=>{let{name:t}=e;return t||""}):[])),D=(0,hE.h_)(i,b),R=D?(0,hE.Xp)()[D]:null,P=(0,hE.Gi)(i,y);return null===R?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(a.Fragment,{children:[P&&(0,a.jsx)(d.x,{fontWeight:"bold",children:(0,a.jsx)(m.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),R.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,a.jsx)(d.x,{children:R.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,a.jsx)(d.x,{fontSize:"xs",children:R.subtitle?R.subtitle(O||""):""})]}),children:(0,a.jsx)("span",{children:(0,a.jsx)(dF.h,{"data-guider-highlight":"share-button",onMouseDown:cR.br,icon:(0,a.jsx)(u.xu,{children:(0,a.jsx)(hw.aA,{visibility:R,isFromOtherOrg:P})}),isDisabled:!S,onClick:f,children:(0,a.jsx)(m.cC,{id:"Z8lGw6"})})})}),(0,a.jsx)(hw.WQ,{doc:i,editor:k,isSharePanelOpen:p,onSharePanelOpen:f,onSharePanelClose:g,onAnalyticsPanelOpen:A,view:j,setView:C,showAnalytics:r,showSharePublic:s,showEmbed:o}),c&&(0,a.jsx)(s5,{doc:i,onSharePanelOpen:f,onAnalyticsPanelClose:h,isAnalyticsPanelOpen:c,mode:E?"full":"personal"})]})},h_=(0,v.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i}=(0,y.$gs)(),r=(0,tr.ye)("offline"),s=(null==t?void 0:t.title)||"";return(0,a.jsxs)(c.k,{flex:1,w:32,children:[(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"g/+TNk"})}),(0,a.jsx)(d.x,{color:"gray.500",children:(0,a.jsx)(m.cC,{id:"ZfQLKw"})})]}),"aria-label":f.ag._({id:"g/+TNk"}),children:(0,a.jsx)(ef.z,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,a.jsx)(p.G,{icon:x.SCr}),onClick:n,children:(0,a.jsx)(d.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:s})})}),!i&&(0,a.jsx)(ej.kH,{label:(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"ysdDIA"})}),r&&(0,a.jsx)(d.x,{color:"gray.500",children:(0,a.jsx)(m.cC,{id:"+QNhGE"})})]}),"aria-label":f.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",mr:2,children:(0,a.jsx)(p.G,{icon:x.bKP})})})]})});h_.displayName="EditableDocTitle";let hT=e=>(0,a.jsx)(hO,{...e}),hO=(0,v.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,[i]=(0,d$.X)(B.H.lastHomeUrl,"/"),r=(0,F.CG)(e_.lH),{confirmNavigation:s}=(0,tw._i)(),{push:o}=(0,ev.useRouter)(),l={as:nz(),href:i||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},h=(0,ep.ff)("gray.800","gray.100");return(0,a.jsx)(em.U,{flex:1,children:(0,a.jsxs)(em.U,{spacing:2,divider:(0,a.jsx)(u.xu,{border:"none",as:p.G,icon:x._tD,size:"sm",color:"gray.300"}),w:"100%",color:h,children:[(0,a.jsx)(iQ.r,{as:dF.h,href:l.href,onClick:e=>{let t=!e.shiftKey&&(e.metaKey||e.ctrlKey);t||(e.preventDefault(),s().then(()=>{o(l.href)}))},mr:-1,colorScheme:"gray",children:(0,a.jsx)(p.G,{size:"1x",icon:x.J9Y})}),r&&(null==r?void 0:r.routes.length)>1&&(0,a.jsx)(c.k,{flexGrow:0,flexShrink:1,children:(0,a.jsx)(d.x,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==r?void 0:r.name})}),(0,a.jsx)(h_,{doc:t,onClick:()=>{null==n||n()}})]})})});hO.displayName="PageBreadcrumbGroup";let hD=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,tw._i)(),i=(0,v.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,a.jsx)(c.k,{children:(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsxs)(d.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,a.jsx)(d.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,a.jsx)(dF.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{i(),e.target.blur()},icon:(0,a.jsx)(p.G,{icon:x.QMW}),children:"Spotlight"})})})};var hR=n(6554),hP=n(80211),hL=n(75586);let hz=(0,v.memo)(e=>{let{isOpen:t,onClose:n,setDocTheme:i}=e,r=(0,F.CG)(W.Pu),s=(0,v.useCallback)(()=>{nu.pw.emit(nu.TI.OPEN_PAGE_SETUP,"background"),null==n||n()},[n]);return(0,a.jsx)(ej.Wk,{isDark:!1,children:(0,a.jsxs)(tB.d,{returnFocusOnClose:!1,trapFocus:!1,isOpen:t,placement:"right",onClose:n,size:"md",blockScrollOnMount:!1,children:[(0,a.jsx)(tq.Z,{background:"none"}),(0,a.jsxs)(tV.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(rd.x,{pb:4,children:(0,a.jsx)(hL.v,{title:(0,a.jsx)(m.cC,{id:"FEr96N"}),description:(0,a.jsx)(d.x,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,a.jsx)(m.cC,{id:"S9uQm/"})}),showDrawerCloseButton:!0,currentTheme:r})}),(0,a.jsx)(tZ.f,{overflowX:"hidden","data-theme-picker-scroll-container":!0,children:(0,a.jsx)(hP.t,{currentTheme:r,openBackgroundPanel:s,setTheme:i})})]})]})})});hz.displayName="DocThemeDrawer";let hN=(0,v.memo)(()=>{let e=(0,n9.p)(),[t]=(0,y.Iyu)(),n=(0,F.CG)(e_.$U),{docId:i,getCollaborativeEditorInstance:r}=(0,tw._i)(),{isOpen:s,onOpen:o,onClose:l}=(0,na.M)({id:"themeStyleDrawer"}),d=(0,F.CG)(W.Pu),u=r(),h=(0,eM.z$)(),{updateDocThemeWithAccentImages:x}=(0,eR.vi)({docId:i,editor:u}),p=(0,v.useCallback)(e=>{n&&e.id!==d.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:y.ASj,fragmentName:"DefaultThemeFields"});t.updateQuery({query:y.BYL,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,d.id,t]),f=(0,v.useCallback)(t=>{t.id!==d.id&&x(t.id).then(()=>{null==h||h.track(eM.AA.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,a.jsx)(m.cC,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[h,d.id,i,e,x]),g=(0,v.useCallback)(e=>n?p(e):f(e),[n,f,p]);return(0,v.useEffect)(()=>{let e=ou.T.on("toggleThemeBlock",o),t=nu.pw.on(nu.TI.OPEN_THEME_DRAWER,o);return()=>{e(),t()}},[o]),(0,a.jsxs)(c.k,{children:[(0,a.jsx)(hz,{isOpen:s,onClose:l,setDocTheme:g}),(0,a.jsx)(hR.g,{onThemeCreated:g,getCollaborativeEditorInstance:r})]})}),hG=(0,v.memo)(()=>{let{isConnected:e}=(0,y.$gs)();return(0,a.jsx)(ej.kH,{label:e?(0,a.jsx)(m.cC,{id:"JkEyR8"}):(0,a.jsx)(m.cC,{id:"GvC+mL",components:{0:(0,a.jsx)(d.x,{}),1:(0,a.jsx)(d.x,{color:"gray.300"})}}),"aria-label":f.ag._({id:"JkEyR8"}),children:(0,a.jsx)(u.xu,{children:(0,a.jsx)(dF.h,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{ou.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,a.jsx)(p.G,{icon:x.q2v}),"data-testid":"toolbar-theme-button",children:(0,a.jsx)(m.cC,{id:"FEr96N"})})})})});hG.displayName="ThemeToolbarButton";let hM=()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(hN,{}),(0,a.jsx)(hG,{})]});hN.displayName="ThemeDrawers";let hU=[.5,.8,.9,1,1.1,1.2,1.5,2],hF=e=>"".concat((100*e).toFixed(0),"%"),hW=()=>{let e=(0,tr.ye)("presentZoom"),{editor:t}=(0,tw._i)(),n=(0,eM.z$)(),i=(0,C.I0)(),r=(0,F.CG)(W.SU),s=(0,v.useCallback)(e=>{i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),o=(0,v.useCallback)(()=>{i((0,W.fT)({enabled:!0}))},[i]),l=(0,v.useCallback)(()=>{let e=Math.min(aB.v4,hH(r)+.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),c=(0,v.useCallback)(()=>{let e=Math.max(aB.Ou,hH(r)-.1);i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),u=(0,v.useCallback)(()=>{let e=aB.aX;i((0,W.Ic)({zoomLevel:e})),i((0,W.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),h=(0,F.CG)(rm.C),g=(0,a_.rJ)();return((0,v.useEffect)(()=>{if(e)return eC.F7.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,eV.Hx)(e.target);return!(h||!t||(0,af.KB)(t))&&!n&&((0,nR.ZP)("=")(e)?(l(),e.preventDefault(),!0):(0,nR.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,nR.ZP)("0")(e)?(u(),e.preventDefault(),!0):!!(0,nR.ZP)("9")(e)&&(o(),e.preventDefault(),!0))})},[h,e,t,l,c,u,o]),e)?(0,a.jsxs)(eg.h,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:f.ag._({id:"FjkaiT"}),children:(0,a.jsx)(T.h,{"aria-label":f.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,a.jsx)(p.G,{icon:x.Kl4})})}),(0,a.jsxs)(nC.v,{closeOnSelect:!0,children:[(0,a.jsx)(ej.kH,{label:f.ag._({id:"VZ3UQG"}),children:(0,a.jsx)(nb.j,{minW:20,as:ef.z,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,a.jsx)(p.G,{icon:x.ptq}),children:g?(0,a.jsx)(m.cC,{id:"R9Khdg"}):hF(r)})}),(0,a.jsxs)(ny.q,{maxW:"220px",children:[(0,a.jsx)(nk._,{value:g?"auto":r.toString(),type:"radio",children:(0,a.jsx)(nw.i,{value:"auto",onClick:o,children:(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(d.x,{children:[(0,a.jsx)(m.cC,{id:"R9Khdg"})," ",(0,a.jsx)(d.x,{as:"span",color:"gray.500",children:(0,a.jsx)(m.cC,{id:"P9Cyl9"})})]}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(d.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,a.jsx)(ri.R,{}),(0,a.jsx)(nk._,{value:g?"auto":r.toString(),type:"radio",children:hU.map(e=>(0,a.jsx)(nw.i,{value:(e/100).toString(),onClick:()=>{s(e)},children:(0,a.jsxs)(em.U,{children:[(0,a.jsx)(d.x,{children:hF(e)}),(0,a.jsx)(e1.L,{}),e===aB.aX&&(0,a.jsx)(d.x,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,a.jsx)(ej.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:f.ag._({id:"AWOSPo"}),children:(0,a.jsx)(T.h,{fontWeight:"normal","aria-label":f.ag._({id:"AWOSPo"}),onClick:l,icon:(0,a.jsx)(p.G,{icon:x.r8p})})})]}):null},hH=e=>Math.round(10*e)/10,hB=(0,v.memo)(function(e){let{scrollingParentSelector:t,toggleCommentsPanel:i,isCommentsPanelOpen:r,isPagesPanelOpen:s,togglePagesPanel:o,editorWrapperEl:l,docEditorType:d,isDark:u}=e,[h]=(0,dM.a)(["(max-width: 840px)","(min-width: 841px)"]),x=(0,tr.ye)("editDocAI"),p=(0,eo.i)({base:!0,lg:!1}),m=(0,F.CG)(W.gh),f=(0,F.CG)(tU.yx),g=(0,F.CG)(e_.lH),{editor:j}=(0,tw._i)(),C=(0,eX.py)("comment",f),b=(0,eE.O1)(),y=(0,eE.lP)(),{enabled:k}=(0,dU.g)(j),w=(0,eD.Vr)(g),S="SLIDE_VIEW"!==m,E=(0,F.CG)(W.hN),I=d!==tk.Z.COLLABORATIVE,A=(0,F.CG)(W.Tf),_=(0,F.CG)((0,$.SL)("left")),T=(0,F.CG)((0,$.SL)("right")),O=(0,tr.ye)("aiChat"),{enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:N}=rE({editorWrapperEl:l,scrollingParentSelector:t});window.exportToPptx=async e=>{if(!j)return;let{exportToPptx:t}=await Promise.all([n.e(9775),n.e(5743),n.e(2966)]).then(n.bind(n,42648));return t(j,e)};let G=U((0,v.useCallback)(e=>{let t=M.current;if(!t)return!1;let n=t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||_||T;return!!n||e.clientY<100},[_,T]),!A),M=(0,v.useRef)(null),H=!A||A&&G,B=!(0,eb.s2)();return j?(0,a.jsx)(ej.Wk,{isDark:u,children:(0,a.jsxs)(c.k,{"data-editor-toolbar":!0,ref:M,bg:u?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:u?"whiteAlpha.100":"blackAlpha.100",zIndex:tF.S.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,gap:2,transform:H?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,a.jsx)(hx,{}),(0,a.jsx)(em.U,{flex:1,children:g?(0,a.jsx)(hT,{doc:f,pagesPanelEnabled:b,isPagesPanelOpen:s,togglePagesPanel:o}):(0,a.jsx)(d1,{doc:f})}),(0,a.jsxs)(em.U,{children:[!h&&(0,a.jsx)(ul,{}),!h&&!S&&(0,a.jsx)(hW,{}),!h&&!S&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(hD,{spotlightingByBlock:k})}),!h&&!I&&E&&y&&(0,a.jsx)(hM,{}),!I&&(0,a.jsx)(hA,{doc:f,showButton:!h}),B&&!w&&(0,a.jsx)(hy,{doc:f,isStaticEditor:I,editorWrapperEl:l,scrollingParentSelector:t,enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:N,shouldHide:h,docEditorType:d}),B&&w&&b&&(0,a.jsx)(hk,{doc:f}),!I&&C&&(0,a.jsx)(u$,{doc:f,mode:m,isCommentsPanelOpen:r,toggleCommentsPanel:i}),x&&E?(0,a.jsx)(hc,{editor:j}):!1===x&&!h&&p&&!I&&E&&O?(0,a.jsx)(u0,{}):null,!h&&!I&&!w&&(0,a.jsx)(dH,{doc:f}),!h&&!I&&(0,a.jsx)(hp,{doc:f,toggleCommentsPanel:i,editorWrapperEl:l,scrollingParentSelector:t}),(0,a.jsx)(c.k,{children:(0,a.jsx)(tQ.DY,{showRing:!0})})]})]})}):null});var hq=n(35503),hV=n(59322);let hK=(0,nR.ZP)("mod+S"),hZ=(0,nR.ZP)("mod+shift+O"),hY=()=>{let e=(0,n9.p)();(0,v.useEffect)(()=>{let t=t=>{hK(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,a.jsx)(m.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,eV.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},hJ=()=>{let e=(0,F.qr)(),t=(0,F.TL)(),{editor:n}=(0,tw._i)();(0,v.useEffect)(()=>{if(!n)return;let i=i=>{if(!hZ(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,W.i2)(r),{total:c,expanded:d,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,W.bj)({disable:!0})),setTimeout(()=>{t((0,W.bj)({disable:!1}))},100);let h=c===d;hX(n,100,!h),(0,rg.Nn)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},hX=(e,t,n)=>{let i;let r=(0,eB.cC)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,af.Je)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=hQ(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,eV.wO)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,c=(0,eV.LY)(o,r.scrollSelector),d=a-c,u=d<0?0:Math.max(d+200,0),h=()=>{if(!o)return;let e=(0,eV.LY)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-c-u)});let n=+new Date-l;n<t&&requestAnimationFrame(h)};h()},hQ=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,af.Sh)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,af.nv)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,eq.KH)(t.node),r=(0,hq.SA)(t.node),l=(0,hV.CU)(t.node),a=i||t.node.isAtom?t.pos:t.start;s=(0,af.Sh)(e,a);let c=!n&&i&&t.depth>2;if(c||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var h$=n(95993),h0=n(39486),h1=n(78537),h2=n(22537),h5=n(1010),h4=n(52906),h3=n(13793);class h6 extends h$.GJ{constructor(e){super({transform:async(t,n)=>{var i;if("data"!==t.event){n.enqueue(t);return}let{content:r}=t.data,s=r.attrs.id,o=r.content.find(e=>"cardAccentLayoutItem"===e.type);o&&(!o.attrs.background||(null===(i=o.attrs.background)||void 0===i?void 0:i.type)===h3.E.NONE)&&(o.attrs.background=(0,u6.Bv)(e,s),(0,u6.Tm)(r)),n.enqueue(t)}})}}var h8=n(50775),h9=n(97253),h7=n(90775);class xe extends h$.GJ{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,c=await (0,h8.B)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,h9.j6)(o,c),"cardAccentLayoutItem"===o.type.name&&"error"===c.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,u6.Bv)(l,s)});return}requestAnimationFrame(()=>{(0,u8.tf)({editor:t,loadImageId:n,newAttrs:c,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){let i=async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,h7.N)(i.data.content,i=>{var r;if("text"===i.type)return;let l=tX.NB.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,h9.XU)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:c,loadImageParams:d}=a;this.imageAttrs[c]||(this.imageAttrs[c]=l.attrs),this.loadImagePromises[c]||(this.loadImagePromises[c]=this.loadImage({editor:e,loadImageId:c,loadImageParams:d,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[c])&&void 0!==r?r:this.imageAttrs[c]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)};super({transform:i}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var xt=n(91760);let xn=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class xi extends h$.GJ{constructor(e){let t=async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,F.bh)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield xn(i,r,s,n)}return}if(!t.content){yield xn(i,r,t,n);return}let s=0;for(let o of t.content){let t=[...r,s];for(let r of e(o,n,i,t))yield r;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,is.qn)(e)(i.getState());await xr(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})};super({transform:t}),this.index=0,this.startTime=performance.now()}}let xr=e=>new Promise(t=>xt.iK(t,e));var xs=n(98991);let xo=e=>{let{enabled:t,type:n}=e,i=(0,xs.As)(n),r=(0,v.useRef)(!0);(0,v.useEffect)(()=>{if(!t)return;let e=i.scroller;if(!e)return;let n=()=>{i.isAtBottom(40)?r.current=!0:r.current=!1},s=()=>{r.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",s)}},[i,t]);let s=(0,v.useCallback)(()=>{if(r.current){var e;null===(e=i.scroller)||void 0===e||e.scrollTo({top:i.scroller.scrollHeight,behavior:"auto"})}},[i]),o=(0,df.Z_)(s,100);return o};var xl=n(16268);let xa="[CONTENT_FILTER]",xc=()=>(0,a.jsxs)(nF.b,{status:"error",variant:"solid",children:[(0,a.jsx)(rR.z,{}),(0,a.jsx)(nH.X,{children:(0,a.jsxs)(tE.K,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(m.cC,{id:"7g5s/N"})}),(0,a.jsx)(d.x,{children:(0,a.jsx)(m.cC,{id:"Xp43Ei"})})]})})]}),xd=()=>(0,a.jsxs)(nF.b,{variant:"light",children:[(0,a.jsx)(tI.$,{size:"sm",mr:2}),(0,a.jsxs)(nH.X,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(m.cC,{id:"n2cF1o"})})," ",(0,a.jsx)(m.cC,{id:"BFGwQA"})]})]}),xu=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,eF.N2)(t.state.doc,e=>(0,dh.KH)(e))[0],l=(0,eF.N2)(t.state.doc,e=>(0,dh.KH)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,cJ.t)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},xh=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}h2.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,h1.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,iq.hx)((0,iq.VA)(s)).key,lazyImages:o,theme:(0,W.Pu)(i.getState())};return(0,h0.Nl)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},xx=(e,t)=>{let n=(0,F.CG)(W.Pu),i=(0,F.qr)(),r=(0,F.TL)(),s=(0,F.CG)(W.KV),o=(0,tr.ye)("streamResumingEnabled"),l=(0,tr.ye)("generatorLazyImages"),a=(0,v.useRef)(!1),c=(0,tr.ye)("generatorLazyImages"),{isStreaming:d,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:p,onAbortStream:m}=xp({docId:e}),f=xo({enabled:d,type:"editor"}),g=(0,v.useCallback)(async r=>{let s,o;if(!t)return;p({editor:t});let l=xm({streamResponse:r,editor:t,store:i,theme:n,docId:e}),c=l.getReader();try{for(;!(s=await c.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),f())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,p,f,i,n]);(0,X.v)(()=>{if(!t||!s||d||!e)return;let n=(0,is.oH)(e)(i.getState()),r=(0,is.nl)(i.getState());if(n){"running"===n.status&&g(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,iq.VA)(t);if("streaming"!==a){let n=new URLSearchParams(window.location.search);if(n.get("restream")){let n={interactionId:l.interactionId,streamId:l.streamId},r=xh({docId:e,aiOptions:u,generateInfo:{...n,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:c});r&&g(r)}return}let h=(0,W.yx)(i.getState()),x=(null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5;if(x){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let p=xh({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:c});p&&g(p)},[e,t,i,s,p,x,u,h,o,g,d,l,c],[t,s]),(0,v.useEffect)(()=>()=>{let n=(0,is.oH)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,m({editor:t,streamResponse:n}))},[r,e,m,t,i])},xp=e=>{let{docId:t}=e,n=(0,n9.p)(),i=(0,F.TL)(),r=(0,F.qr)(),s=(0,tr.ye)("aiWizardUploadImages"),[o,l]=(0,v.useState)(!1),c=(0,tr.ye)("debugLogging"),d=(0,v.useRef)(null);(0,v.useEffect)(()=>()=>{d.current&&(n.close(d.current),d.current=null)},[n]);let u=(0,v.useCallback)(()=>{d.current||(d.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>xd(),position:"top",duration:null}))},[n]),h=(0,v.useCallback)(e=>{let{editor:t}=e;t&&(l(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),x=(0,v.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:o,index:l,content:a}=n;xu({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:o}),o&&s&&(0,u8.g1)({editor:t,cardId:r})},[s]),p=(0,v.useCallback)(e=>{var t,s,o;let{editor:u,streamResponse:h}=e;if(!u||!h)return;let x=h.id,p=(0,iq.hx)((0,iq.VA)(u)),{aiOptions:f,generateInfo:g}=(0,iq.VA)(u);l(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let j=(0,h4.NV)(),v=j.debugInfo();c&&console.log("[AIStream] ImageStore DEBUG",{imageStore:j,debug:v}),(0,h4.Uu)(),i((0,is.G0)({id:x,status:"complete"}));let C=(0,xl.R)(u),b=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),y=C?C/b.byteLength:void 0;h2.a.trackStreamComplete(r,x,{imageProvider:null===(t=f.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:v.requests.length,imageSearches:v.requests,ydocToJsonRatio:y});let k=(0,W.yx)(r.getState());k&&(null===(s=k.docGenerateInput)||void 0===s?void 0:s.id)?(0,tu.d)((null===(o=f.imageOptions)||void 0===o?void 0:o.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",k.organization,x):(0,tu.d)("wizardCreation",null==k?void 0:k.organization,x),d.current&&n.update(d.current,{title:(0,a.jsx)(m.cC,{id:"2/LpWt",values:{0:p.generationLabel||p.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,c,r,n]),f=(0,v.useCallback)(e=>{let{err:s,editor:o,streamResponse:u}=e,h=u.id,{errorMessage:x,errorCode:p}=(0,h5.uS)(s);console.error("StreamError: ",{interactionId:h,errorMessage:x,errorCode:p,stack:s.stack}),c&&console.log("StreamError: (".concat(p,") - ").concat(x),s.stack),l(!1),o.commands.setAIGenerationRunning(!1),o.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,h4.Uu)(),i((0,is.G0)({id:h,status:"error"}));let f=(0,is.Sn)(h)(r.getState());if(f){let{latency:e,...n}=f;(0,tc.pQ)({...n,errorName:"StreamError",errorMessage:x,errorCode:p,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:u.isResuming,docId:t})}d.current&&(x===xa?n.update(d.current,{render:xc,position:"top",duration:null,isClosable:!0}):n.update(d.current,{title:(0,a.jsx)(m.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[i,t,c,r,n]),g=(0,v.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;l(!1),t.commands.setAIGenerationRunning(!1),h2.a.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,is.Of)({id:s}))},[i,r]);return{isStreaming:o,onStreamStart:h,onStreamData:x,onStreamError:f,onStreamDone:p,onAbortStream:g}},xm=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new h6(s)).pipeThrough(new xi(t.id)).pipeThrough(new xe({editor:n,theme:s,interactionId:o})).pipeThrough(new h$.GJ({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(xa));return}t.enqueue(e)}})).pipeThrough((0,h0.c1)(e=>{a&&"data"===e.event&&(h2.a.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,u8.JZ)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},xf="doc_archived_warning",xg=(e,t)=>{let n=(0,n9.p)(),[i]=(0,y.iX9)(),[r]=(0,y.sJX)(),s=null==e?void 0:e.site;(0,v.useEffect)(()=>()=>{n.close(xf)},[]),(0,v.useEffect)(()=>{if(s&&!s.archived){n.close(xf);return}!e||e.site||e.archived||n.close(xf)});let o=(0,v.useCallback)(async()=>{if((null==s?void 0:s.id)&&await r({variables:{id:s.id},optimisticResponse:{unarchiveSite:{id:s.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,a.jsx)(m.cC,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==s?void 0:s.id,i,r]);(0,v.useEffect)(()=>{e&&t===tk.Z.COLLABORATIVE&&((null==s?void 0:s.archived)||(null==e?void 0:e.archived))&&!n.isActive(xf)&&n({id:xf,title:(0,a.jsxs)(d.x,{"data-testid":"trash-confirmation-toast",children:[(0,a.jsx)(m.cC,{id:"fkHPZu"})," ",(0,a.jsx)(iQ.r,{textDecoration:"underline",onClick:o,children:(0,a.jsx)(m.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,o,s,n,i])},xj=()=>{let e=(0,tr.ye)("filmstrip"),t=(0,F.CG)(tU.fh),n=(0,nJ.Br)("comment"),i=(0,F.CG)(W.gh),r=(0,F.CG)((0,$.SL)("left")),s=(0,F.CG)(ek.Lw);return e&&t===tk.Z.COLLABORATIVE&&n&&i===eK.q.DOC_VIEW&&!(0,eb.s2)()&&!r&&!s};var xv=n(85e3),xC=n(60265);let xb=()=>{let e=ee(),t=et(),n=xy(),i=(0,eo.i)({base:!1,lg:!0,[n?"3xl":"2xl"]:!1}),r=(0,F.CG)(W.Hl),s=(0,F.CG)(cA.GX),o=xj(),l=(0,c_.WD)(),a=(0,xv.k)(),c=(0,of.S)({base:"0px",[xC.K0]:nA.bk})||"0px",{width:d}=dt(),u=(0,v.useMemo)(()=>({"--doc-padding-left":s&&o&&i?"".concat(d,"px"):l.src&&"bottom-left"===l.position?"".concat(l.width+l.paddingX/2,"px"):"0px","--doc-padding-right":r?c:a?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(t,"px"),"--comment-slide-margin":c}),[d,s,e,r,t,a,i,c,o,l]);return u},xy=()=>{let{editor:e}=(0,tw._i)(),{defaultContentWidth:t}=(0,F.CG)(W.US);if("lg"===t)return!0;if(!e)return!1;let{doc:n}=e.state;return(0,af.Jn)(n.firstChild.content).some(e=>(0,dh.KH)(e)&&"lg"===e.attrs.container.width)};var xk=n(85679),xw=n(44663),xS=n(27902);let xE=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,a.jsxs)(c.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,a.jsx)(eQ.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,a.jsx)(p.G,{icon:u1.xHz,size:"2x"}),(0,a.jsxs)(c.k,{direction:"column",ml:3,children:[(0,a.jsx)(u.xu,{children:(0,a.jsx)(d.x,{lineHeight:6,fontSize:"sm",children:(0,a.jsx)(m.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("b",{})}})})}),(0,a.jsx)(d.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,a.jsx)(m.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)(ef.z,{as:iQ.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},xI="no-snapshot-warning",xA=(e,t)=>{let n=(0,xw.G)(),i=(0,n9.p)(),r=(0,xS.z$)(),s=null==e?void 0:e.id,o=t===tk.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,v.useEffect)(()=>{!o||i.isActive(xI)||(i({id:xI,render:xE({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(eM.xW.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},x_=e=>{let t=(0,F.TL)(),n=(0,F.CG)(cA.GX),i=(0,v.useRef)(!1);(0,v.useEffect)(()=>{!e||i.current||n||(i.current=!0,t((0,cA.dQ)({isOpen:!0})))},[t,n,e])},xT=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,F.TL)(),r=(0,F.qr)(),{asPath:s}=(0,ev.useRouter)(),o=(0,F.CG)(ek.tv),l=(0,v.useRef)(n),a=(0,eD.BZ)(s),c=(0,v.useRef)(t);c.current=t,(0,rp.r)(()=>{let e=(0,$.nm)("pages")(r.getState()),t=c.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,v.useEffect)(()=>{let e=a?(0,eb.s2)()?"mobile":o||"desktop":null;i((0,ek.Tj)({previewSize:e}))},[i,a,o])};var xO=n(56675);let xD=e=>{let t=(0,xO.x)(),n=(0,F.CG)((0,oL.cn)(e));(0,v.useEffect)(()=>{n&&t.cache.updateQuery({query:iv.yE1,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])};var xR=n(56400);let xP=(e,t)=>{let{isUnauthorized:n}=(0,nh._)();(0,eM.If)(i=>{!0!==n&&void 0!==n&&(i.track(eM.AA.DOC_VIEWED,{doc_id:e}),t===tk.Z.EXAMPLE_STATIC&&i.track(eM.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,xR.d)();let i=(0,tr.ye)("realUserMetrics"),r=t===tk.Z.COLLABORATIVE&&i,s=(0,tr.ye)("rumKeystrokeSampleRate");(0,rf.lh)(r,s)},xL=e=>{let t=(0,C.I0)(),n=(0,eM.z$)();(0,v.useEffect)(()=>{let i;let r=()=>{let r=(0,F.bh)().getState();i=(0,W.Q5)(r),(0,rg.I7)(e),t((0,W.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(eM.AA.DOC_PRINTED)},s=()=>{t((0,W.lx)({isEditingDisabled:!1})),t((0,W.xn)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},xz="doc-root",xN=e=>{let{isConnected:t}=e;return(0,a.jsx)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,a.jsx)(m.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsxs)(c.k,{m:8,alignItems:"center",direction:"row",children:[(0,a.jsx)(p.G,{icon:x.bKP,size:"4x"}),(0,a.jsx)(d.x,{ml:8,children:(0,a.jsx)(m.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})})]})})},xG=e=>{let{doc:t,user:n,docEditorType:i}=e,r=(0,k.$m)(t,n),s=(0,C.v9)(W.gh),o=i===tk.Z.COLLABORATIVE&&!r,l=o&&s===eK.q.SLIDE_VIEW,c=i===tk.Z.COLLABORATIVE&&!n;return c?(0,a.jsx)(i4.m,{docWorkspace:null==t?void 0:t.organization}):l?(0,a.jsx)(Z,{}):o?(0,a.jsx)(E.C,{showTourReplay:!0}):null},xM=(0,tw.eT)(e=>{let{docEditorType:t}=e,n=(0,F.TL)(),{docId:i,isUnauthorized:r,passwordRequired:s,setCollaborativeEditorInstance:o,editor:l}=(0,tw._i)(),d=(0,F.CG)(tU.yx),x=(0,F.CG)(e_.lH),p=(0,F.CG)(e_.$U),m=(0,eE.O1)(),{isConnected:g}=(0,y.$gs)(),E=(0,tH.mb)(null==d?void 0:d.id,p),[I,A]=(0,v.useState)(null),_=(0,F.CG)(ek.tv),T=null!==_,O=(0,C.v9)(W.gh),{user:D}=(0,eX.SE)();(0,w.F3)({isSite:!!(null==d?void 0:d.site)}),xg(d,t),xA(d,t),xx(i,I===i?l:void 0),xD(i),xP(i,t),eO(l,t===tk.Z.COLLABORATIVE),(0,xk.j)(),hY();let{editorAnimationsClass:R,editorAnimationsCSSVars:P}=(0,eL.k)({editor:l,scrollingParentSelector:".".concat(xz),disabledOverride:T});hJ(),ag(l,".".concat(xz)),aw(l),ty(),xL(l),(0,k.DD)(d,t===tk.Z.COLLABORATIVE);let L=(0,v.useRef)(null),z=(0,eR.Yy)(),N=(0,v.useMemo)(()=>(0,ez.vu)(z),[z]),G=xj();x_(G),console.debug("%c[DocEditorComponent] RENDER - ".concat(i),"background-color: gold");let{togglePanel:M,isPanelOpen:U}=en(ac,m),{togglePanel:H,isPanelOpen:B}=en(nD),{togglePanel:q,isPanelOpen:V}=en(n6);n3({toggleDesignPartnerPanel:q,isDesignPartnerPanelOpen:V,editor:l});let{togglePanel:K,isPanelOpen:Z}=en(tj);tC({toggleCardNotesPanel:K,isCardNotesPanelOpen:Z,editor:l}),(0,v.useEffect)(()=>()=>{n((0,$.qo)()),n((0,e_.mc)())},[n]),xT({togglePagesPanel:M,isPagesPanelOpen:U});let Y=(0,eD.Vr)(x)&&(null==x?void 0:x.navEnabled)&&!T&&O!==eK.q.SLIDE_VIEW,X=!!(x&&!T&&x.routes.length>1&&l);(0,tf.vm)(()=>{X&&M({override:"open",disableTransition:!1})},[M,X],[X]),(0,v.useEffect)(()=>{O===eK.q.SLIDE_VIEW&&M({override:"closed",disableTransition:!0})},[O,M]);let ee=(0,v.useCallback)(()=>!!(l&&l.state.selection.empty),[l]),{leftPanelLifecycle:et,rightPanelLifecycle:er,globalPanelLifecycle:es}=ei(),eo=(0,J.dU)(null==d?void 0:d.organization),el=(0,S.U)(null==d?void 0:d.title,eo),ea=f.ag._({id:"X6YCwz"}),ec=f.ag._({id:"abr3hR"}),ed=xb(),eu=(0,v.useMemo)(()=>{let e=Y?{"--doc-padding-top":eN.ik}:void 0;return{...N,...ed,...e}},[N,ed,Y]),ep=(null==d?void 0:d.disabled)||(null==d?void 0:d.archived)||(null==x?void 0:x.archived)||T,em=!(0,ey.LQ)(window.location.href),ef=T&&p?(0,a.jsx)(ew,{docId:i}):em?(0,a.jsx)(hB,{isDark:z,scrollingParentSelector:".".concat(xz),editorWrapperEl:L.current,docEditorType:t,isPagesPanelOpen:U,togglePagesPanel:M,isCommentsPanelOpen:B,toggleCommentsPanel:H}):null,eg=(null==d?void 0:d.disabled)?63:0,ej=(ef?49:0)+eg;return(0,a.jsx)(tH.DN.Provider,{value:E,children:(0,a.jsx)(b.Sy,{children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",children:[(0,a.jsx)(n8,{disabled:null==d?void 0:d.disabled,docId:i}),(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(j(),{children:(0,a.jsx)("title",{children:el})}),(0,a.jsx)(nc,{doc:d,editor:l}),(0,a.jsx)(eS.H9,{isEnabledFn:ee}),ef,s?(0,a.jsx)(am,{docId:i}):r?(0,a.jsx)(xN,{isConnected:g}):(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(ej,"px)"),sx:{"--editor-padding-top":"".concat(ej,"px")},"data-testid":"doc-editor-root",ref:L,children:[(0,a.jsx)(ex,{panelLifecycle:et}),(0,a.jsx)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,a.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,h.cx)(xz,R,V&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(ea,"'"),"--ai-generating-label":"'".concat(ec,"'"),...P},sx:eu,children:[T&&(0,a.jsx)(tG,{loading:i!==I,docId:i,editor:l,previewSize:_},"".concat(i,"__preview-editor")),t===tk.Z.PUBLIC_STATIC?(0,a.jsx)(ay,{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(xz),onCreate:o}):t===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(i8,{docId:i,snapshotId:null==d?void 0:d.currentSnapshotId,scrollingParentSelector:".".concat(xz),onCreate:o}):(0,a.jsxs)(Q.Mn.Provider,{value:es,children:[(0,a.jsx)(eP.Ge,{doc:d,docId:i,readOnly:ep,hideForPreview:T,onCreate:e=>{o(e),A(e.gammaDocId),e.on("destroy",()=>{A(null)})},scrollingParentSelector:".".concat(xz),animationsExtensionEnabled:!0},"".concat(i,"__collaborative-editor")),l&&(0,a.jsx)(eJ,{editor:l})]}),Y&&(0,a.jsx)(tW,{}),!T&&(0,a.jsx)(iY,{editor:l},i)]})}),O===eK.q.SLIDE_VIEW&&(0,a.jsx)(a4,{editor:l}),(0,a.jsx)(eh,{panelLifecycle:er}),(0,a.jsx)(eG.a,{editorId:"main",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(xG,{doc:d,user:D,docEditorType:t}),G&&(0,a.jsx)(dG,{})]})})]})]})})})});var xU=n(69251),xF=n(11881),xW=n(53596);let xH=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:s}=e;return(0,a.jsxs)(u.xu,{gridColumnStart:r+1-s,display:s>r?"none":"block",gridRow:1,as:xF.f,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,a.jsx)(xW.n,{theme:t}),(0,a.jsxs)(tE.K,{direction:"row",spacing:1,pt:1,children:[i&&(0,a.jsx)(nt.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,a.jsx)(d.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};xH.displayName="DemoDocThemePreview";let xB="linen.50",xq=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,s=(0,C.v9)(W.gh),o=s===eK.q.SLIDE_VIEW,[l,d]=(0,v.useState)([]),[u,h]=(0,v.useState)(!1),[f,g]=(0,v.useState)(0),j=(0,eo.i)({base:3,md:4,lg:5})||3;(0,v.useEffect)(()=>{n.e(4392).then(n.bind(n,44392)).then(e=>{d(e.GLOBAL_THEMES)})},[]);let b=[...t?[t]:[],...l.filter(e=>e.id!==(null==t?void 0:t.id))],y=(0,v.useCallback)(e=>{1===e?g(e=>e+1):g(e=>e-1)},[]);return o?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(i9.h,{children:(0,a.jsxs)(c.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:xB,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,a.jsx)(c.k,{alignItems:"flex-end",justify:"flex-end",children:(0,a.jsx)(ef.z,{variant:"ghost",size:"sm",rightIcon:(0,a.jsx)(p.G,{icon:u?x.gc2:x.onQ}),onClick:()=>h(e=>!e),children:u?(0,a.jsx)(m.cC,{id:"yz7wBu"}):(0,a.jsx)(m.cC,{id:"x6tIe+"})})}),(0,a.jsx)(c.k,{justify:"flex-start",align:"flex-start",bgColor:xB,w:"100%",children:u&&(0,a.jsxs)(tE.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,a.jsx)(T.h,{"aria-label":"Left",onClick:()=>y(-1),variant:"ghost",isDisabled:0===f,icon:(0,a.jsx)(p.G,{icon:x.EyR})}),(0,a.jsx)(xU.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(j,", calc(100% / ").concat(j," - 1em))")],gap:"0 1em",bgColor:xB,children:b.map((e,t)=>(0,a.jsx)(xH,{index:t,startIndex:f,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,a.jsx)(T.h,{"aria-label":"Right",variant:"ghost",isDisabled:f+j>b.length,onClick:()=>y(1),icon:(0,a.jsx)(p.G,{icon:x.yOZ})})]})})]})})};var xV=n(89833),xK=n(34303);let xZ=[{description:(0,a.jsx)(m.cC,{id:"gtWy3j"}),shortcut:["",""]},{description:(0,a.jsx)(m.cC,{id:"UCxK2S"}),shortcut:["",""]},{description:(0,a.jsx)(m.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,a.jsx)(m.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,a.jsx)(m.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,a.jsx)(m.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,a.jsx)(m.cC,{id:"K0Oq/D"}),shortcut:"R"}],xY=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:s,isFullscreen:o,enterFullscreen:l,exitFullscreen:c}=rE({editorWrapperEl:t,scrollingParentSelector:n}),d=(0,F.CG)(W.gh),u=(0,v.useRef)(d);return(0,v.useEffect)(()=>{u.current=d},[d]),(0,a.jsxs)(em.U,{children:[(0,a.jsxs)(eg.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(ej.kH,{label:d===eK.q.DOC_VIEW?(0,a.jsx)(m.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(m.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ef.z,{variant:d===eK.q.DOC_VIEW?"solid":"plain",cursor:d===eK.q.SLIDE_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.SLIDE_VIEW&&r()},leftIcon:(0,a.jsx)(p.G,{icon:x.cwv}),children:(0,a.jsx)(m.cC,{id:"7Zdnlq"})})}),(0,a.jsx)(ej.kH,{label:d===eK.q.SLIDE_VIEW?(0,a.jsx)(m.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(m.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ef.z,{variant:d===eK.q.SLIDE_VIEW?"solid":"plain",cursor:d===eK.q.DOC_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,a.jsx)(p.G,{icon:x.bgy}),children:(0,a.jsx)(m.cC,{id:"FOoDGS"})})})]}),d===eK.q.SLIDE_VIEW&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rA.i,{orientation:"vertical"}),(0,a.jsx)(ej.kH,{label:o?(0,a.jsx)(m.cC,{id:"IkOhTI"}):(0,a.jsx)(m.cC,{id:"q8ARHN"}),children:(0,a.jsx)(T.h,{size:"sm","aria-label":o?f.ag._({id:"IkOhTI"}):f.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,a.jsx)(p.G,{icon:o?x.Qj4:x.TL5}),onClick:o?()=>{s(!0),c()}:l})}),(0,a.jsxs)(A.J,{children:[(0,a.jsx)(_.x,{children:(0,a.jsx)(ef.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,a.jsx)(m.cC,{id:"77Emn0"})})}),(0,a.jsxs)(O.y,{border:"1px solid #eee !important",children:[(0,a.jsx)(ud.Q,{}),(0,a.jsx)(xV.u,{}),(0,a.jsx)(D.b,{children:(0,a.jsx)(xK.A,{list:xZ})})]})]})]})]})},xJ=(0,v.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,F.CG)(tU.yx);let i=(0,v.useRef)(null);return(0,a.jsx)(c.k,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,a.jsx)(c.k,{direction:"column",w:"100%",children:(0,a.jsx)(xY,{editorWrapperEl:n,scrollingParentSelector:t})})})});var xX=n(5689),xQ=n(91148);let x$=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,xQ.F)(),s=(0,F.CG)(W.gh),[o,l]=(0,v.useState)(s!==eK.q.SLIDE_VIEW),[a,c]=(0,v.useState)(!1),d=(0,C.I0)();(0,tf.vm)(()=>{n()},[r,t,n,d],[]),(0,tf.vm)(()=>{s===eK.q.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===eK.q.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},x0="doc-root",x1=(0,tw.eT)(e=>{var t;let{docEditorType:n=tk.Z.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:s}=(0,tw._i)(),o=(0,F.CG)(tU.yx);xP(i,n),(0,xk.j)(),hY(),hJ(),ag(s,".".concat(x0)),aw(s),ty(),xL(s),(0,k.DD)(o,n===tk.Z.COLLABORATIVE);let l=(0,v.useRef)(null),d=null==o?void 0:o.theme,[h,x]=(0,v.useState)(()=>d),p=(0,F.TL)(),m=(0,v.useRef)(!1),{data:f}=(0,y.EDv)({variables:{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId},skip:!(null==o?void 0:o.currentSnapshotId)}),g=null==f?void 0:null===(t=f.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,v.useEffect)(()=>{d&&!m.current&&(x(d),m.current=!0)},[d]),(0,v.useEffect)(()=>{if(!s)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){g&&s.commands.setContent(g);return}s.commands.updateThemeAccentImages(e)},[s,h,g]);let{togglePanel:C,isPanelOpen:b,initPanel:w}=en(xX.Q);x$({toggleToCPanel:C,isToCPanelOpen:b,initializeToCPanel:w}),(0,v.useEffect)(()=>()=>{p((0,$.qo)())},[p]);let{leftPanelLifecycle:S}=ei();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(j(),{children:(0,a.jsxs)("title",{children:["".concat(o?(0,oa.$)(o.title)+" | ":""),"Gamma"]})}),(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,a.jsx)(ex,{panelLifecycle:S}),(0,a.jsxs)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[s&&(0,a.jsx)(xJ,{scrollingParentSelector:".".concat(x0),editorWrapperEl:l.current,setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==d?void 0:d.id),templateTheme:d}),(0,a.jsxs)(u.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:x0,children:[(0,a.jsx)(ay,{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId,scrollingParentSelector:".".concat(x0),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,a.jsx)(a4,{editor:s,showNavigationControls:!0})]})]}),(0,a.jsx)(xq,{setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==d?void 0:d.id),templateTheme:d})]})]})}),x2="body";var x5=n(73077);let x4=e=>{let t=(0,xs.As)(e),[n,i]=(0,v.useState)("up");return(0,v.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let n=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-n)>0,s=e=>{let t=e>n&&!(n>0&&0===e)&&!(e>0&&0===n);return t},o=()=>{let t=(null==e?void 0:e.scrollTop)||0;if(r(t)){let e=s(t)?"down":"up";i(e),n=t>0?t:0}},l=z()(()=>window.requestAnimationFrame(o),500,{leading:!0});return null==e||e.addEventListener("scroll",l),()=>null==e?void 0:e.removeEventListener("scroll",l)},[t.scrollSelector]),n};var x3=n(62685),x6=n(1887);let x8=e=>{let t=(0,F.CG)(W.e_),n=(0,F.TL)(),i=(0,v.useCallback)(e=>{n((0,W.Qt)({docAttrs:{format:e}}))},[n]);return(0,a.jsx)(eg.h,{size:"sm",isAttached:!0,my:2,children:x6.n.map(e=>(0,a.jsx)(ef.z,{isActive:e.key===t.key,onClick:()=>i(e.key),children:nE()(e.label)},e.key))})},x9=(0,v.memo)(()=>(0,a.jsx)(u.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));x9.displayName="MenuDivider";let x7=(0,v.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,a.jsx)(u.xu,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,a.jsxs)(em.U,{children:[t&&(0,a.jsx)(u.xu,{children:t}),(0,a.jsx)(u.xu,{children:n})]})})});x7.displayName="MenuItem";let pe=e=>{var t,n;let{isOpen:i,onClose:r,doc:s,editingEnabled:o}=e,{user:l}=(0,eX.SE)(),{isConnected:u}=(0,y.$gs)(),h=(0,i$.e)(),{editor:f}=(0,tw._i)(),g=(0,oa.$)(null==s?void 0:s.title),j=(null==s?void 0:s.createdTime)&&(0,oo.Z)((0,ol.Z)(s.createdTime),"PPP"),C=null==s?void 0:s.id,{isOpen:b,onClose:k,onOpen:w}=(0,na.M)({id:"analyticsPanelDisclosure"}),[S]=(0,y.LT4)(),[E]=(0,y.iX9)(),I=(0,eM.z$)(),A=(0,eX.py)("manage",s)&&!!l,_=(0,eX.py)("manage",s)&&!!l,T=!!(l&&0!==l.workspaceMemberships.length),O=(0,tr.ye)("docFormats"),D=(0,v.useCallback)(async()=>{if(!f)return;let e=f.getJSON();await h({docId:C,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[C,h,f,r]),R=(0,v.useCallback)(()=>{null==I||I.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:C,source:"toolbar_doc_menu",type:"personal"}),w()},[I,C,w]),P=(0,v.useCallback)(e=>()=>{if(!C)return;let t={id:C};e?S({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):E({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[S,C,E]);return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(ej.Aj,{isOpen:i,onClose:r,children:(0,a.jsxs)(c.k,{w:"100%",h:i?"100%":void 0,direction:"column",children:[(0,a.jsxs)(em.U,{align:"flex-start",p:6,children:[(0,a.jsxs)(tE.K,{spacing:0,children:[(0,a.jsx)(d.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:g}),(0,a.jsx)(d.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"jlWdji",values:{createdTime:j}})}),(0,a.jsx)(ej.kH,{label:null==s?void 0:null===(t=s.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(d.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(m.cC,{id:"t490IT",values:{0:null==s?void 0:null===(n=s.createdBy)||void 0===n?void 0:n.displayName}})})})]}),(0,a.jsx)(e1.L,{}),(0,a.jsx)(eQ.P,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,a.jsxs)(tE.K,{p:3,pt:0,children:[O&&(0,a.jsx)(x8,{}),(0,a.jsx)(x9,{}),_&&(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.nNP,fixedWidth:!0}),onClick:()=>{r(),ou.T.emit("openSharePanel",{view:"invite"})},children:(0,a.jsx)(m.cC,{id:"iyga2M"})}),o&&(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.q2v,fixedWidth:!0}),onClick:()=>{r(),ou.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,a.jsx)(m.cC,{id:"W15e8B"})}),(0,a.jsx)(x9,{}),u&&(0,a.jsxs)(a.Fragment,{children:[!!l&&_&&(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.Ma4,fixedWidth:!0}),onClick:()=>{r(),R()},children:(0,a.jsx)(m.cC,{id:"qcxxQS"})}),T&&(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.kZ_,fixedWidth:!0}),onClick:D,children:(0,a.jsx)(m.cC,{id:"euc6Ns"})}),A&&(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.kwI,fixedWidth:!0}),onClick:()=>{r(),ou.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(m.cC,{id:"U8WPSi"})}),(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.gr5,fixedWidth:!0}),onClick:()=>{r(),ou.T.emit("openPageSetup","cards")},children:(0,a.jsx)(m.cC,{id:"Kx2GmY"})}),_&&(0,a.jsx)(x9,{}),_?s.archived?(0,a.jsx)(x7,{icon:(0,a.jsx)(p.G,{icon:x.ZeM,fixedWidth:!0}),onClick:P(!1),children:(0,a.jsx)(m.cC,{id:"yKu/3Y"})}):(0,a.jsx)(x7,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(p.G,{icon:x.XAH,fixedWidth:!0}),onClick:P(!0),children:(0,a.jsx)(m.cC,{id:"1C/Yjq"})}):null]})]})]})}),s&&b&&(0,a.jsx)(s5,{doc:s,isAnalyticsPanelOpen:b,onAnalyticsPanelClose:k,mode:"full"}),o&&(0,a.jsx)(oZ,{editor:f}),o&&(0,a.jsx)(hN,{})]})},pt=e=>{var t;let{doc:n,editor:i,commentsEnabled:r,editingEnabled:s,onCommentFeedOpen:o,onTocOpen:l}=e,[c]=(0,d$.X)(B.H.lastHomeUrl,"/"),{user:u}=(0,eX.SE)(),h=(0,eX.py)("manage",n),m=(null==n?void 0:null===(t=n.comments)||void 0===t?void 0:t.filter(e=>e.status===y.Ux9.Open).length)||0,f=x4("editor"),g=(0,C.v9)(W.Pu),j=(0,x3.Jh)(g),b=(0,lM.wj)(g)?"white":"gray.800",k=(0,lM.wj)(g)?"trueblue.300":"trueblue.700",w=(0,v.useCallback)(()=>{i&&i.commands.undo()},[i]),{isOpen:S,onOpen:E,onClose:A}=(0,I.q)();return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pe,{doc:n,isOpen:S,onClose:A,editingEnabled:s}),(0,a.jsxs)(em.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==f?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==f?1:0,zIndex:"sticky",sx:{...(0,x3.Oj)(j,g,!0),border:"none",filter:"none",borderRadius:0},color:b,children:[u&&(0,a.jsx)(nz(),{href:c,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(T.h,{as:iQ.r,"aria-label":"Home",color:b,_hover:{bg:"transparent",color:k},icon:(0,a.jsx)(p.G,{icon:x.J9Y,size:"1x"}),variant:"ghost"})}),(0,a.jsx)(d.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:b,children:null==n?void 0:n.title}),(0,a.jsxs)(eg.h,{variant:"ghost",children:[r&&(0,a.jsx)(ef.z,{color:b,_hover:{bg:"transparent",color:k},fontSize:"sm",onClick:o,leftIcon:(0,a.jsx)(p.G,{icon:x.Mzg}),children:m}),s&&(0,a.jsx)(T.h,{color:b,"aria-label":"Undo",onClick:w,_hover:{bg:"transparent",color:k},icon:(0,a.jsx)(p.G,{icon:x.X7o})}),!s&&(0,a.jsx)(T.h,{color:b,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:k},onClick:l,icon:(0,a.jsx)(p.G,{icon:x.xiG})}),(h||s)&&(0,a.jsx)(T.h,{color:b,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:k},onClick:E,icon:(0,a.jsx)(p.G,{icon:x.S6C})})]})]})]}):null},pn=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,{docId:r,setCollaborativeEditorInstance:s,editor:o}=(0,tw._i)(),{isOpen:l,onOpen:d,onClose:u}=(0,I.q)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:h,onOpen:x,onClose:p}=(0,I.q)({id:"mobile-toc-drawer"}),[m,f]=(0,v.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let g=(0,tr.ye)("mobileEditing"),j=(0,eX.py)("edit",t),C=g&&j;return(0,a.jsx)(b.Sy,{children:(0,a.jsxs)(c.k,{ref:(0,v.useCallback)(e=>f(e),[]),direction:"column",flex:1,children:[(0,a.jsx)(pt,{doc:t,editor:o,onCommentFeedOpen:d,commentsEnabled:!C&&i,editingEnabled:C,onTocOpen:x}),n===tk.Z.PUBLIC_STATIC?(0,a.jsx)(ay,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:x2,onCreate:s}):n===tk.Z.EXAMPLE_STATIC?(0,a.jsx)(i8,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:x2,onCreate:s}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.Ge,{doc:t,docId:r,readOnly:!C,onCreate:s,scrollingParentSelector:x2}),o&&(0,a.jsx)(eJ,{editor:o})]}),i&&l&&(0,a.jsx)(ej.Aj,{isOpen:l,onClose:u,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,a.jsx)(nO,{onClose:u,editor:o})}),h&&(0,a.jsx)(ej.Aj,{isOpen:h,onClose:p,drawerProps:{returnFocusOnClose:!1},children:(0,a.jsx)(x5.o,{rootElement:m,handleClose:p})}),(0,a.jsx)(hA,{doc:t,showButton:!1}),(0,a.jsx)(eG.a,{children:(0,a.jsx)(iY,{editor:o})})]})})},pi=(0,tw.eT)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:s}=(0,tw._i)();xP(n,t);let{editorAnimationsClass:o,editorAnimationsCSSVars:l}=(0,eL.k)({editor:s,scrollingParentSelector:x2});xx(n,s),(0,xk.j)();let d=(0,v.useRef)(null),u=(0,F.CG)(tU.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===tk.Z.COLLABORATIVE;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(j(),{children:[(0,a.jsxs)("title",{children:["".concat(u?(0,oa.$)(u.title)+" | ":""),"Gamma"]}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,a.jsx)(lS.xB,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,a.jsx)(am,{docId:n}):i?(0,a.jsxs)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",Y.Yc,"."]}):(0,a.jsx)(c.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,flex:"1",className:o,style:{...l},children:(0,a.jsx)(pn,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},31003:function(e){e.exports=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return I}),n.d(t,"Serializer",function(){return A}),n.d(t,"Socket",function(){return _}),n.d(t,"LongPoll",function(){return T}),n.d(t,"Ajax",function(){return O}),n.d(t,"Presence",function(){return D});var d="undefined"!=typeof self?self:null,u="undefined"!=typeof window?window:null,h=d||u||void 0,x="closed",p="errored",m="joined",f="joining",g="leaving",j="phx_close",v="phx_error",C="phx_join",b="phx_reply",y="phx_leave",k=[j,v,C,b,y],w="websocket",S=function(e){return"function"==typeof e?e:function(){return e}},E=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return c(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),I=function(){function e(t,n,i){var r=this;l(this,e),this.state=x,this.topic=t,this.params=S(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new E(this,C,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new R(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=m,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=p,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=x,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=p,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new E(r,y,S({}),r.timeout).send(),r.state=p,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(b,function(e,t){r.trigger(r.replyEventName(t),e)})}return c(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(j,e)}},{key:"onError",value:function(e){return this.on(v,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new E(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=g;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(j,"leave")},i=new E(this,y,S({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return k.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=f,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===x}},{key:"isErrored",value:function(){return this.state===p}},{key:"isJoined",value:function(){return this.state===m}},{key:"isJoining",value:function(){return this.state===f}},{key:"isLeaving",value:function(){return this.state===g}}]),e}(),A={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),c=0;a.setUint8(c++,this.KINDS.push),a.setUint8(c++,t.length),a.setUint8(c++,n.length),a.setUint8(c++,r.length),a.setUint8(c++,i.length),Array.from(t,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(c++,e.charCodeAt(0))});var d=new Uint8Array(l.byteLength+s.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(s),l.byteLength),d.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var c=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:c,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var c=n.decode(e.slice(l,l+r));l+=r;var d=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:c,topic:d,event:b,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},_=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||h.WebSocket||T,this.defaultEncoder=A.encode.bind(A),this.defaultDecoder=A.decode.bind(A),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==T?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),u&&u.addEventListener&&u.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=S(i.params||{}),this.endPoint="".concat(t,"/").concat(w),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new R(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return c(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=O.appendParams(O.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=S(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(v)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new I(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,s,l)&&c.trigger(i,s,o,l)}for(var d=0;d<t.stateChangeCallbacks.message.length;d++)(0,r(t.stateChangeCallbacks.message[d],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),T=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return c(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+w),"$1/longpoll")}},{key:"endpointURL",value:function(){return O.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||O.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;O.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),O=function(){function e(){l(this,e)}return c(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(h.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new h.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();O.states={complete:4};var D=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return c(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),c=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),d=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});c.length>0&&(o[e]=t,o[e].metas=c),d.length>0&&(l[e]=r.clone(n),l[e].metas=d)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),c=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(c)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(c)||s(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),R=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return c(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},75461:function(e,t,n){"use strict";n.d(t,{W:function(){return i},w:function(){return r}});var[i,r]=(0,n(9165).k)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},25215:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var i=n(75461),r=n(31053),s=n(25578),o=n(68023),l=n(91982),a=n(84586),c=n(76801),d=n(2784),u=n(52322),h=(0,o.G)(function(e,t){let n=(0,l.jC)("Breadcrumb",e),o=(0,a.Lr)(e),{children:h,spacing:x="0.5rem",separator:p="/",className:m,listProps:f,...g}=o,j=(0,s.W)(h),v=j.length,C=j.map((e,t)=>(0,d.cloneElement)(e,{separator:p,spacing:x,isLastChild:v===t+1})),b=(0,r.cx)("chakra-breadcrumb",m);return(0,u.jsx)(c.m.nav,{ref:t,"aria-label":"breadcrumb",className:b,__css:n.container,...g,children:(0,u.jsx)(i.W,{value:n,children:(0,u.jsx)(c.m.ol,{className:"chakra-breadcrumb__list",...f,__css:{display:"flex",alignItems:"center",...n.list},children:C})})})});h.displayName="Breadcrumb"},58450:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(41421),r=n(75461),s=n(68023),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{spacing:n,...i}=e,s=(0,r.w)(),a={mx:n,...s.separator};return(0,l.jsx)(o.m.span,{ref:t,role:"presentation",...i,__css:a})});a.displayName="BreadcrumbSeparator";var c=n(25578),d=n(31053),u=n(2784),h=(0,s.G)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,c.W)(p),j=g.map(e=>e.type===i.A?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),v=(0,r.w)(),C={display:"inline-flex",alignItems:"center",...v.item},b=(0,d.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.m.li,{ref:t,className:b,...f,__css:C,children:[j,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},41421:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(75461),r=n(68023),s=n(76801),o=n(31053),l=n(52322),a=(0,r.G)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:c,...d}=e,u=(0,i.w)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...d};return n?(0,l.jsx)(s.m.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.m.a,{__css:u.link,href:c,...h})});a.displayName="BreadcrumbLink"},75397:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(32388),r=n(31053),s=n(68023),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{className:n,...s}=e,a=(0,i.v)();return(0,l.jsx)(o.m.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},32388:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},v:function(){return r}});var[i,r]=(0,n(15706).eC)("Card")},56453:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(32388),r=n(31053),s=n(68023),o=n(84586),l=n(91982),a=n(76801),c=n(52322),d=(0,s.G)(function(e,t){let{className:n,children:s,direction:d="column",justify:u,align:h,...x}=(0,o.Lr)(e),p=(0,l.jC)("Card",e);return(0,c.jsx)(a.m.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:d,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,c.jsx)(i.Y,{value:p,children:s})})})},19521:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=6579-a25a4dd2b60351df.js.map