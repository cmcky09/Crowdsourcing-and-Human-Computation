(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3722],{20342:function(e,t){"use strict";t.Z={src:"/_next/static/media/GammaLogoGradient.43edb67f.svg",height:197,width:170,blurWidth:0,blurHeight:0}},77620:function(e,t){"use strict";t.Z={src:"/_next/static/media/google-drive.2d314cf9.svg",height:78,width:87,blurWidth:0,blurHeight:0}},21979:function(e,t,r){"use strict";r.d(t,{I:function(){return h}});var i=r(52322),n=r(26284),a=r(70065),o=r(24772),l=r(62614),s=r(85573),c=r(43297),d=r(74105),u=r(20816),m=r(5879),p=r(2784);let h=e=>{let{url:t,placeholder:r,isDisabled:h=!1,variant:g="plain",customLabel:f,onClick:x,...v}=e,[b,y]=(0,p.useState)(!1),{hasCopied:j,onCopy:w}=(0,n.V)(t),C=(0,p.useRef)(null),A=(0,a.p)(),k="link-copied-toast",_=(0,o.S)({base:!0,sm:!1},{fallback:"sm"});(0,p.useEffect)(()=>{C.current&&b&&(C.current.focus(),C.current.select())},[b]);let P=(0,p.useCallback)(()=>y(!0),[]),E=(0,p.useCallback)(()=>y(!1),[]),S=(0,p.useCallback)(()=>{w(),A.isActive(k)||A({id:k,title:(0,i.jsx)(m.cC,{id:"pQjjYo"}),status:"success",duration:5e3}),null==x||x()},[w,A]),U=f||(0,i.jsx)(m.cC,{id:"he3ygx"}),I=!!(_&&void 0!==f),R=(0,i.jsx)(l.z,{isDisabled:h,onClick:S,variant:g,w:"100%",...I?{}:{height:"2rem",margin:2},...h?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:j?(0,i.jsx)(m.cC,{id:"6V3Ea3"}):U}),T=(0,i.jsx)(s.I,{ref:C,type:"text",variant:"filled",value:t,isReadOnly:!0,isDisabled:h,placeholder:r||void 0,onClick:P,onBlur:E,pointerEvents:h?"none":void 0,h:"3rem",...v});return I?(0,i.jsxs)(c.K,{w:"100%",children:[T,R]}):(0,i.jsxs)(d.B,{children:[T,(0,i.jsx)(u.x,{h:"3rem",zIndex:1,w:"unset",children:R})]})}},11355:function(e,t,r){"use strict";r.d(t,{o:function(){return l}});var i=r(52322),n=r(29494),a=r(2784),o=r(93441);let l=(0,a.forwardRef)((e,t)=>{let{initialHeight:r="1em",bottomSpacing:l=0,onChange:s,...c}=e,d=(0,a.useCallback)(()=>{"function"!=typeof t&&(null==t?void 0:t.current)&&(t.current.style.height=r,t.current.style.height="".concat(t.current.scrollHeight+l,"px"))},[r,t,l]);(0,a.useEffect)(()=>{d()},[d]),(0,a.useEffect)(()=>{d()},[d,c.value]);let u=(0,o.lz)(100);return(0,a.useEffect)(()=>{u&&d()},[u,d]),(0,i.jsx)(n.g,{h:r,minH:r,ref:t,resize:"none",overflow:"hidden",...c,onChange:e=>{d(),null==s||s(e)}})});l.displayName="ResizingTextarea"},21156:function(e,t,r){"use strict";r.d(t,{V:function(){return a}});var i=r(93624),n=r(89918);class a extends n.j{getSystemChatMessage(e){return{role:i.XaP.System,operation:this.systemPromptOperation,variables:e}}getUserChatMessage(e){return{role:i.XaP.User,operation:this.userPromptOperation,variables:e}}constructor({variables:e,systemPromptOperation:t,userPromptOperation:r,params:i}){super({params:i}),this.variables=e,this.systemPromptOperation=t,this.userPromptOperation=r}}},89918:function(e,t,r){"use strict";r.d(t,{j:function(){return a}});var i=r(93624);let n={model:"gpt-3.5-turbo-1106",provider:i.nyn.Azure};class a{prepare(e){let{variables:t,history:r=[],params:i}=e,n=this.getSystemChatMessage(t),a=this.getUserChatMessage(t);return{messages:[n,...r,a],params:{...this.params,...i}}}constructor({params:e}){this.params={...n,...e}}}},77787:function(e,t,r){"use strict";r.d(t,{c:function(){return o}});var i=r(37243),n=r(30764),a=r(396);let o=(e,t)=>{let r=l(e),i=n.HY.from(t),o=r.serializeFragment(i),s=(0,a.S)(o),c=document.createElement("div");c.appendChild(s);let d=c.innerHTML;return d},l=e=>{let{schema:t,extensionManager:r}=e;if(t.cached.aiDomSerializer)return t.cached.aiDomSerializer;let a=n.PW.marksFromSchema(t),o=n.PW.nodesFromSchema(t),l=e.extensionManager.attributes;r.extensions.forEach(e=>{if(!e.config.renderHTMLforAI)return;let t=l.filter(t=>t.type===e.name);o[e.name]&&(o[e.name]=r=>{let n=(0,i.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({node:r,HTMLAttributes:n})}),a[e.name]&&(a[e.name]=(r,n)=>{let a=(0,i.m7)(r,t);return e.config.renderHTMLforAI.bind(e)({mark:r,inline:n,HTMLAttributes:a})})});let s=new n.PW(o,a);return t.cached.aiDomSerializer=s,s}},32221:function(e,t,r){"use strict";r.d(t,{X:function(){return h}});var i,n,a=r(95993),o=r(9231);async function l(e,t){let r;let i=e.getReader();for(;!(r=await i.read()).done;)t(r.value)}function s(){return{data:"",event:"",id:"",retry:void 0}}(i=n||(n={}))[i.NewLine=10]="NewLine",i[i.CarriageReturn=13]="CarriageReturn",i[i.Space=32]="Space",i[i.Colon=58]="Colon";let c="text/event-stream",d="last-event-id";function u(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(c)))throw Error("Expected content-type to be ".concat(c,", Actual: ").concat(t))}class m extends a.GJ{constructor(){super({transform:async(e,t)=>{if("error"===e.event){t.error(new o.T1("StreamError message received: ".concat(JSON.stringify(e)),e.data));return}t.enqueue(e)}})}}class p extends Error{constructor(e){super(),this.timeout=e}}function h(e,t,r){var i;let n=r.retries||0,h=r.backoff||1e3,g=r.timeout||null,f=null!==(i=r.streamResumingEnabled)&&void 0!==i&&i,x=0,v=new AbortController,b=!1,y=!1,j=!1,w=null,C=!1,A=()=>h*Math.pow(2,Math.max(x-1,0)),k={};f&&(k["gamma-stream-resuming-enabled"]="true");let _=new a.Pz({async start(r){null!=g&&(w=setTimeout(()=>{C=!0,v.abort(),r.error(new o.rm("Stream timed out after ".concat(g,"ms")))},g));let{headers:i,...a}=t;(function(e,t){let{signal:r,headers:i,onopen:n,onmessage:a,onclose:o,onerror:m,openWhenHidden:p,fetch:h,...g}=t;return new Promise((t,f)=>{let x;let v={...i};function b(){x.abort(),document.hidden||k()}v.accept||(v.accept=c),p||document.addEventListener("visibilitychange",b);let y=1e3,j=0;function w(){document.removeEventListener("visibilitychange",b),window.clearTimeout(j),x.abort()}null==r||r.addEventListener("abort",()=>{w(),t()});let C=null!=h?h:window.fetch,A=null!=n?n:u;async function k(){var r,i;x=new AbortController;try{let i,n,c,u;let m=await C(e,{...g,headers:v,signal:x.signal});await A(m),await l(m.body,(r=function(e,t,r){let i=s(),n=new TextDecoder,a=!1;return function(o,l){if(0===o.length)null==r||r(i),i=s(),a=!1;else if(l>0){let r=n.decode(o.subarray(0,l)),s=l+(32===o[l+1]?2:1),c=n.decode(o.subarray(s));switch(r){case"data":a?i.data=i.data+"\n"+c:(i.data=c,a=!0);break;case"event":i.event=c;break;case"id":e(i.id=c);break;case"retry":let d=parseInt(c,10);isNaN(d)||t(i.retry=d)}}}}(e=>{e?v[d]=e:delete v[d]},e=>{y=e},a),u=!1,function(e){void 0===i?(i=e,n=0,c=-1):i=function(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}(i,e);let t=i.length,a=0;for(;n<t;){u&&(10===i[n]&&(a=++n),u=!1);let e=-1;for(;n<t&&-1===e;++n)switch(i[n]){case 58:-1===c&&(c=n-a);break;case 13:u=!0;case 10:e=n}if(-1===e)break;r(i.subarray(a,e),c),a=n,c=-1}a===t?i=void 0:0!==a&&(i=i.subarray(a),n-=a)})),null==o||o(),w(),t()}catch(e){if(!x.signal.aborted)try{let t=null!==(i=null==m?void 0:m(e))&&void 0!==i?i:y;window.clearTimeout(j),j=window.setTimeout(k,t)}catch(e){w(),f(e)}}}k()})})(e,{openWhenHidden:!0,credentials:"include",...a,headers:{...i,...k},signal:v.signal,onopen:async e=>{if(!e.ok||e.headers.get("content-type")!==c){if(e.status>=400&&e.status<500&&429!==e.status)v.abort(),r.error(new o.VG("Unable to complete request"));else if(x++<n&&!b)throw new p(A());else v.abort(),r.error(new o.VG("Unable to complete request"))}},onmessage(e){if(j){y||(y=!0,console.log("[AIStream] enqueue cancel event",{...e,event:"cancel",data:""}),r.enqueue({...e,event:"cancel",data:""}),r.close(),v.abort());return}C||(r.enqueue(e),b=!0)},onclose(){w&&(clearTimeout(w),w=null),r.close()},onerror(e){if(e instanceof p){if(j)throw console.error("Stream cancelled - not retrying"),Error("Stream cancelled");return e.timeout}if(e instanceof Error){if(console.error("Uncaught stream error",e),!f)throw e;if(x++<n)return A();throw e}if(b){let e="Stream closed unexpectedly";throw console.error("Uncaught stream error",e),new o.Vh(e)}}}).catch(e=>{w&&(clearTimeout(w),w=null),j||r.error(e)})}});return{stream:_.pipeThrough(new m),cancel:()=>{j||(j=!0)}}}},9231:function(e,t,r){"use strict";r.d(t,{T1:function(){return i},VG:function(){return a},Vh:function(){return o},rm:function(){return n}});class i extends Error{constructor(e,t){super(e),this.name="StreamError",this.code="stream_error",t&&(this.code=t)}}class n extends i{constructor(e){super(e),this.name="StreamTimeoutError",this.code="timeout"}}class a extends i{constructor(e){super(e),this.name="StreamOnOpenError",this.code="on_open"}}class o extends i{constructor(e){super(e),this.name="StreamUnexpectedCloseError",this.code="unexpected_close"}}},50634:function(e,t,r){"use strict";r.d(t,{P3:function(){return m},Kk:function(){return u},jz:function(){return d}});var i=r(2784),n=r(78537),a=r(1010),o=r(31490),l=r(95993);class s extends l.GJ{getContent(){return this.content}constructor(e){super({start:()=>{var t;null===(t=e.onStart)||void 0===t||t.call(e)},transform:async(t,r)=>{var i,n,a;"content"===t.event&&(this.content+=t.data,null===(i=e.onContent)||void 0===i||i.call(e,this.content)),"done"===t.event&&(null===(n=e.onComplete)||void 0===n||n.call(e,this.content)),"cancel"===t.event&&(null===(a=e.onCancel)||void 0===a||a.call(e)),r.enqueue(t)},flush(){var t;null===(t=e.onFlush)||void 0===t||t.call(e)}}),this.content=""}}var c=r(39278);let d=(e,t)=>{let r=(0,i.useCallback)(r=>u({...r,promptKey:e,opts:t}),[t,e]);return{generate:r}},u=e=>{let{promptKey:t,opts:r,variables:i,interactionId:l,workspaceId:c}=e;l=l||(0,o.nZ)();let{cancel:d,stream:u}=(0,n.ZE)({promptKey:t,variables:i,interactionId:l,workspaceId:c},{timeout:r.timeout}),m=new s(r),p=u.pipeThrough(m),h=new Promise((e,t)=>{(0,a.GO)(p,{onError(e){var i;null===(i=r.onError)||void 0===i||i.call(r,e),t(e)},onDone(){e(m.getContent())}})});return{cancel:d,promise:h}},m=e=>{let{promptKey:t,variables:r,interactionId:i,workspaceId:a=(0,c.n_)(),opts:l={}}=e;return i=i||(0,o.nZ)(),(0,n.Ur)({promptKey:t,interactionId:i,workspaceId:a,variables:r},l)}},78537:function(e,t,r){"use strict";r.d(t,{Ur:function(){return l},ZE:function(){return o},pM:function(){return c},z4:function(){return s}});var i=r(14274),n=r(9231),a=r(32221);function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/v2/generation",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let o={method:"POST",headers:n,body:JSON.stringify(e)};return(0,a.X)(r,o,t)}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/v2/render-generation",n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},a=await u(r,n,t);return a.result}let s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.v.API_HOST+"/ai/chatCompletion",n={"Content-Type":"application/json"};t.streamId&&(n["gamma-chat-completion-stream-id"]=t.streamId);let o={method:"POST",headers:n,body:JSON.stringify(e)};return(0,a.X)(r,o,t)},c=e=>{let{streamId:t,lastEventId:r,interactionId:n,...o}=e,l=new URL(i.v.API_HOST+"/ai/resumeChatCompletion");return l.searchParams.set("interactionId",n),(0,a.X)(l.toString(),{method:"GET",headers:{"gamma-chat-completion-stream-id":t,"last-event-id":r}},{streamResumingEnabled:!0,...o})},d=e=>new Promise(t=>setTimeout(t,e)),u=async(e,t,r)=>{let{timeout:i=null,maxRetries:a=3,retryAttempts:o=0}=r,l=new AbortController,s=null;null!=i&&(s=setTimeout(()=>{throw l.abort(),Error("Request timed out after ".concat(i,"ms"))},i));let c=()=>{s&&clearTimeout(s)},m=await fetch(e,{credentials:"include",...t,signal:l.signal});if(m.ok){let e=await m.json();return c(),e}if(c(),m.status>=400&&m.status<500&&429!==m.status)throw new n.VG("Unable to complete request");if(o++<a){let r=1e3*Math.pow(2,Math.max(o-1,0));return await d(r),u(e,t,{timeout:i,retryAttempts:o,maxRetries:a})}throw Error("Unable to complete request, status="+m.status)}},1010:function(e,t,r){"use strict";r.d(t,{GO:function(){return a},fZ:function(){return l},uS:function(){return o}});var i=r(37164),n=r(9231);let a=(e,t)=>{let r=e.getReader(),i=async()=>{var e,n,a;try{let{done:a,value:o}=await r.read();if(a)null===(n=t.onDone)||void 0===n||n.call(t);else{null===(e=t.onMessage)||void 0===e||e.call(t,o),i();return}}catch(e){null===(a=t.onError)||void 0===a||a.call(t,e instanceof Error?e:Error(e))}};i()},o=e=>e instanceof n.T1?{errorCode:e.code,errorMessage:e.message}:e instanceof Error?{errorMessage:e.message}:{errorMessage:e},l=(0,i.kP)("0123456789abcdefghijklmnopqrstuvwxyz",16)},31490:function(e,t,r){"use strict";r.d(t,{Io:function(){return y},Lt:function(){return b},Wf:function(){return g},XH:function(){return x},e9:function(){return v},fM:function(){return f},gb:function(){return c},hq:function(){return s},mV:function(){return d},nZ:function(){return l.n},o:function(){return m},pQ:function(){return h},qZ:function(){return u},vL:function(){return p}});var i=r(14274),n=r(1163),a=r(11050),o=r(39278),l=r(57398);let s=e=>{a.co.track(a.AA.AI_REQUEST_SENT,{...e,gitSHA:i.v.GIT_SHA})},c=e=>{a.co.track(a.AA.AI_REQUEST_COMPLETE,{...e,gitSHA:i.v.GIT_SHA})},d=e=>{a.co.track(a.AA.AI_REQUEST_ABORT,{...e,gitSHA:i.v.GIT_SHA})},u=e=>{a.co.track(a.AA.AI_REQUEST_STREAM_START,{...e,gitSHA:i.v.GIT_SHA})},m=e=>{a.co.track(a.AA.AI_REQUEST_RESPONSE,{...e,gitSHA:i.v.GIT_SHA})},p=e=>{a.co.track(a.AA.AI_SUGGESTION_APPLY,{...e,gitSHA:i.v.GIT_SHA})},h=e=>{a.co.track(a.AA.AI_REQUEST_ERROR,{...e,gitSHA:i.v.GIT_SHA})},g=e=>{a.co.track(a.AA.AI_REQUEST_RETRY,{...e,gitSHA:i.v.GIT_SHA})},f=e=>{a.co.track(a.AA.AI_DOC_RATED,{...e,gitSHA:i.v.GIT_SHA,product:(0,n.K9)((0,o.rW)())})},x=e=>{let t=e.tags.reduce((e,t)=>(e[t]=!0,e),{});a.co.track(a.AA.AI_DOC_FEEDBACK_SUBMITTED,{...e,tags_map:t,gitSHA:i.v.GIT_SHA,product:(0,n.K9)((0,o.rW)())})},v=e=>{a.co.track(a.AA.AI_IMPORT_SLIDE_RATED,{...e,gitSHA:i.v.GIT_SHA})},b=e=>{a.co.track(a.AA.AI_IMAGE_FEEDBACK_SUBMITTED,{...e,gitSHA:i.v.GIT_SHA})},y=e=>{a.co.track(a.AA.AI_IMAGE_RATED,{...e,gitSHA:i.v.GIT_SHA})}},14764:function(e,t,r){"use strict";r.d(t,{r:function(){return b}});var i=r(52322),n=r(38035),a=r(11550),o=r(57124),l=r(97763),s=r(40651),c=r(62614),d=r(81540),u=r(77533),m=r(42946),p=r(49929),h=r(94523),g=r(5879),f=r(2784),x=r(86704);let v=(0,f.memo)(e=>{let{credits:t,lowCreditStatus:r,onClick:n,variant:a="solid",isDark:o=!1}=e,l=null===t,s=(0,x.ko)();return(0,i.jsx)(h.kH,{label:(0,i.jsx)(g.cC,{id:"IY3q+2"}),placement:"top",children:(0,i.jsx)(c.z,{onClick:n,isDisabled:l,..."ghost"===a?{variant:"ghost",size:"sm",colorScheme:o?"gray":"blackAlpha"}:{variant:"unstyled",bg:"white",px:4},color:r?s[r].lightColor:void 0,fontWeight:"500",leftIcon:(0,i.jsx)(p.G,{icon:m.owJ,size:"sm"}),rightIcon:(0,i.jsx)(p.G,{color:o?"var(--chakra-colors-gray-400)":"var(--chakra-colors-gray-600)",icon:m.DBf,size:"xs"}),children:l?(0,i.jsx)(d.$,{size:"xs"}):(0,i.jsx)(u.x,{as:"span",color:null===r?void 0:s[r].lightColor,children:(0,i.jsx)(g.cC,{id:"T57gLR",values:{credits:t}})})})})}),b=e=>{let{modalId:t="ai-credits-modal",variant:r,segmentEvent:c,isDark:d,...u}=e,{credits:m,lowCreditStatus:p}=(0,l.qO)(),h=(0,o.Y)("unlimited_credits"),{isOpen:g,onOpen:f,onClose:x}=(0,a.M)({id:t});return h?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.k,{...u,children:(0,i.jsx)(v,{credits:m,onClick:f,lowCreditStatus:p,variant:r,isDark:d})}),(0,i.jsx)(s.H,{isOpen:g,onOpen:f,onClose:x,credits:m,segmentEvent:c})]})}},40651:function(e,t,r){"use strict";r.d(t,{H:function(){return Z}});var i=r(52322),n=r(29705),a=r(92850),o=r(26468),l=r(22226),s=r(2338),c=r(17993),d=r(77533),u=r(54326),m=r(29117),p=r(28535),h=r(81540),g=r(97217),f=r(75768),x=r(62614),v=r(82554),b=r(11082),y=r(42946),j=r(49929),w=r(94523),C=r(5879),A=r(87254),k=r(2784),_=r(21979),P=r(42111),E=r(1196),S=r(94199),U=r(44663),I=r(87342),R=r(57124),T=r(11050),O=r(39278),M=r(78462),N=r(86704),L=r(97763),D=r(49259),H=r(97010),z=r(87436),G=r(95897),W=r(89511),F=r(11121),B=r(57574);let q=e=>{let{onContactUsClick:t,...r}=e,n=(0,P.ye)("aiDebits"),a=(0,P.ye)("ai-credits").enabled,o=n.generateCard,l=n.wizardCreation,s=n.chatSuggestion,c=n.autocomplete,d=n.generateImage,u=(0,P.ye)("aiAutocomplete"),m=(0,P.ye)("aiGeneratedImages"),p=(0,P.ye)("addCard2");return(0,i.jsxs)(D.U,{allowMultiple:!0,...r,children:[(0,i.jsx)(V,{accordionLabel:A.ag._({id:"IVVQ18"}),children:(0,i.jsxs)(H.QI,{children:[(0,i.jsxs)(H.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"p4u+sD"})})," ",(0,i.jsx)(C.cC,{id:"XSCvWA",values:{aiGeneration:l,GAMMA_ARTIFACT_PROPER_NOUN:S.Yc}})]}),p&&(0,i.jsxs)(H.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"R8xLRW"})})," ",(0,i.jsx)(C.cC,{id:"M3I7Cf",values:{aiAddCard:o}})]}),(0,i.jsxs)(H.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"gPyWmV"})})," ",(0,i.jsx)(C.cC,{id:"8HgQlf",values:{aiEditing:s}}),(0,i.jsx)(C.cC,{id:"bO6EBT"})]}),m&&(0,i.jsxs)(H.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"0jmvoW"})})," ",(0,i.jsx)(C.cC,{id:"OY40J+",values:{aiImages:d}})]}),u&&(0,i.jsxs)(H.HC,{children:[(0,i.jsx)("strong",{children:(0,i.jsx)(C.cC,{id:"eBVeIQ"})})," ",(0,i.jsx)(C.cC,{id:"AJ11w6",values:{aiAutocomplete:c,AUTOCOMPLETE_SLASH_SHORTCUT:B.Y,AUTOCOMPLETE_INPUT_SHORTCUT:B.o}})]})]})}),a&&(0,i.jsx)(V,{accordionLabel:A.ag._({id:"1pwdRz"}),children:(0,i.jsx)(C.cC,{id:"1Ijs7v",values:{GAMMA_PRO_PROPER_NOUN:S.x8,GAMMA_PROPER_NOUN:S.N6}})})]})},V=e=>{let{accordionLabel:t,children:r}=e;return(0,i.jsxs)(z.Q,{children:[(0,i.jsx)("h2",{children:(0,i.jsxs)(G.K,{px:2,py:2,fontSize:"sm",children:[(0,i.jsx)(p.xu,{as:"span",flex:"1",textAlign:"left",fontWeight:500,children:t}),(0,i.jsx)(W.X,{})]})}),(0,i.jsx)(F.H,{pb:4,px:2,fontSize:"sm",children:r})]})},K=()=>({friend:{label:A.ag._({id:"uU68PM"})},teammate:{label:A.ag._({id:"O/k8gF"})},buy:{label:A.ag._({id:"/2RIKE"})}}),Q={fontWeight:500,letterSpacing:"normal",color:"gray.600"},X=e=>{let{onClose:t,onOpen:r,credits:A,segmentEvent:D=T.AA.GAMMA_PRO_UPSELL_CALLOUT_AI_CREDITS}=e,{user:H,currentWorkspace:z}=(0,O.SE)(),G=(0,O.d3)(),W=(0,P.ye)("upsellUXEnabled_Pro"),F=(0,R.Y)("unlimited_credits"),[B,V]=(0,k.useState)(W?"buy":"friend"),X=(0,P.ye)("ai-credits"),Z=(0,P.ye)("intercom"),Y=(0,U.G)(),{lowCreditStatus:J}=(0,L.qO)(),$=(0,k.useMemo)(()=>H?"teammate"===B&&z&&G?(0,M.Mr)({userId:H.id,workspace:z}):"friend"===B?(0,M.Mr)({userId:H.id}):"":"",[G,z,B,H]),ee=X.enabled,et=X.referralBonus,er=K()[B],ei=(0,k.useCallback)(()=>{Y(),t()},[Y,t]),en=(0,N.ko)();return(0,i.jsx)(w.Wk,{isDark:!1,children:(0,i.jsxs)(a.u_,{isOpen:!0,onClose:t,size:"xl",children:[(0,i.jsx)(o.Z,{}),(0,i.jsxs)(l.h,{children:[(0,i.jsx)(s.o,{}),(0,i.jsxs)(c.g,{py:4,px:6,textAlign:"center",children:[(0,i.jsx)(d.x,{...Q,fontSize:"md",color:J?en[J].darkColor:void 0,children:J?en[J].description:(0,i.jsx)(C.cC,{id:"xy3nnP"})}),(0,i.jsx)(u.x,{p:0,color:J?en[J].lightColor:void 0,children:(0,i.jsxs)(m.U,{children:[(0,i.jsx)(p.xu,{as:"span",fontSize:"xl",children:(0,i.jsx)(j.G,{icon:y.owJ})})," ",null===A?(0,i.jsx)(h.$,{size:"sm"}):(0,i.jsx)(C.cC,{id:"T57gLR",values:{credits:A}})]})}),(0,i.jsx)(d.x,{textAlign:"left",fontSize:"sm",pt:2,...Q,children:(0,i.jsx)(C.cC,{id:"lUUl1i"})})]}),(0,i.jsxs)(g.f,{pb:4,children:[ee?(0,i.jsxs)(c.g,{spacing:4,children:[(0,i.jsxs)(f.h,{variant:"ghost",size:"sm",spacing:0,gap:2,justifyContent:"center",flexWrap:"wrap",alignItems:"center",children:[!F&&W&&(0,i.jsx)(x.z,{onClick:()=>V("buy"),isActive:"buy"===B,color:"buy"===B?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"KctW9G"})}),(0,i.jsx)(x.z,{onClick:()=>V("friend"),isActive:"friend"===B,color:"friend"===B?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"KSBmDv"})}),G&&(0,i.jsx)(x.z,{leftIcon:(0,i.jsx)(j.G,{icon:y.FKd}),onClick:()=>V("teammate"),isActive:"teammate"===B,color:"teammate"===B?void 0:"gray.700",children:(0,i.jsx)(C.cC,{id:"dUOpaF"})})]}),("friend"===B||"teammate"===B)&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(m.U,{spacing:2,children:[(0,i.jsxs)(d.x,{fontSize:"sm",minW:"50%",children:["friend"===B&&(0,i.jsx)(C.cC,{id:"tBKKYy",values:{referralBonusAmount:et,GAMMA_PROPER_NOUN:S.N6}}),"teammate"===B&&(0,i.jsx)(C.cC,{id:"q8MWFp",values:{referralBonusAmount:et}})]}),(0,i.jsxs)(v.C,{colorScheme:"green",fontSize:"xs",px:"0.4em",py:"0.2em",children:["+"," ",(0,i.jsx)(C.cC,{id:"NFNFrR",values:{referralBonusAmount:et}})]})]}),(0,i.jsx)(_.I,{url:$,customLabel:er.label,variant:"solid"})]}),"buy"===B&&(0,i.jsx)(I.m,{segmentEvent:D,onOpenCallback:t,onCloseCallback:r})]}):(0,i.jsxs)(m.U,{align:"baseline",spacing:1,children:[(0,i.jsx)(d.x,{children:(0,i.jsx)(C.cC,{id:"0TJN6B"})}),Z?(0,i.jsx)(x.z,{onClick:ei,variant:"link",children:(0,i.jsx)(C.cC,{id:"Bhgd0l"})}):(0,i.jsxs)(b.r,{href:"mailto:".concat(E.p),children:[(0,i.jsx)(C.cC,{id:"Bhgd0l"}),(0,i.jsx)(n.h,{ml:1,transform:"translateY(-2px)"})]})]}),(0,i.jsx)(q,{my:4,onContactUsClick:Z?ei:void 0})]})]})]})})},Z=(0,k.memo)(e=>{let{isOpen:t,...r}=e;return t?(0,i.jsx)(X,{...r}):null})},85420:function(e,t,r){"use strict";r.d(t,{J:function(){return h}});var i=r(52322),n=r(82554),a=r(29117),o=r(77533),l=r(42946),s=r(49929),c=r(94523),d=r(5879),u=r(42111),m=r(57124),p=r(86704);let h=e=>{var t;let{type:r,...h}=e,g=(0,u.ye)("aiDebits"),f=(0,m.Y)("unlimited_credits");if(f)return null;let x=null!==(t=g[r])&&void 0!==t?t:p.Sy[r];return(0,i.jsx)(c.kH,{label:(0,i.jsx)(d.cC,{id:"B7jvsP",values:{numCredits:x}}),children:(0,i.jsx)(n.C,{colorScheme:"whiteAlpha",bg:"whiteAlpha.300",textTransform:"none",textShadow:"none",fontSize:"xxs",ml:2,...h,children:(0,i.jsxs)(a.U,{spacing:1,children:[(0,i.jsx)(o.x,{children:x}),(0,i.jsx)(s.G,{icon:l.owJ,size:"sm"})]})})})}},7144:function(e,t,r){"use strict";r.d(t,{d:function(){return u},i:function(){return m}});var i=r(93624),n=r(42111),a=r(57124),o=r(91994),l=r(11050),s=r(50267),c=r(86704),d=r(17749);let u=async(e,t,r)=>{var u,p;let h=(0,a.uL)("unlimited_credits",t),g=n.VH.get("aiDebits"),f=null!==(p=g[e])&&void 0!==p?p:c.Sy[e];if(m(e,t,r),0===f||h)return;let x=(null==t?void 0:t.id)||(0,s.n_)();if(!x)return;let v=(0,i.WQq)(),b=await v.mutate({mutation:i.ATM,variables:{value:f,workspaceId:x}}),y=null===(u=b.data)||void 0===u?void 0:u.deductCredits;if(!y)return null;l.co.track(l.AA.AI_CREDITS_DEDUCTED,{operation:e,used:f,remaining:y.credits,interactionId:r});let j=(0,o.bh)();return j.dispatch((0,d.B1)({availableCredits:y.credits})),y.credits},m=(e,t,r)=>{var i;let o=(0,a.uL)("unlimited_credits",t),s=n.VH.get("aiDebits"),d=null!==(i=s[e])&&void 0!==i?i:c.Sy[e];l.co.track(l.AA.AI_CREDITS_USED,{operation:e,used:d,has_unlimited_ai:o,interactionId:r})}},1196:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});let i="support@gamma.app"},39877:function(e,t,r){"use strict";r.d(t,{C:function(){return h},J:function(){return g}});var i=r(84636),n=r.n(i),a=r(14274),o=r(42111),l=r(87205),s=r(81674),c=r(38914),d=r(46152),u=r.n(d);let m=async e=>{let t=e.split(" ")[0];try{var r;let e=await fetch("/api/icons/search?count=5&query=".concat(t),{credentials:"include"}),i=null===(r=await e.json())||void 0===r?void 0:r.data;if(!i||0===i.length)return console.warn("[fetchIcons] No icons found. Using default set"),u()(p);return console.debug("[AI fetchIcons] fetched icons",i),i}catch(e){return console.error("(caught) [fetchIcons] fetchResults:",e),u()(p)}},p=[c.ILF,c.Y$T,c.Tab,c.Mzg,c.Qz9,c.gMD].map(e=>{let t=(0,s.qv)(e),[r,i]=t.icon;return{id:e.iconName,provider:"fa",styles:["light"],src:"".concat(a.v.FRONTEND_URL,"/api/icons/").concat(e.iconName,".svg?provider=fa&style=light"),html:t.html[0],width:r,height:i}}),h=async e=>{let{query:t,provider:r,options:i={},count:n=35,prefetch:a=!1}=e,s="web"===r?o.VH.get("webImageProviderType"):void 0;if("fontawesome"===r){let e=(await m(t)).map(e=>({id:e.id,imageUrl:e.src,width:e.width,height:e.height,attributionUrl:"",thumbnailUrl:"",credit:""}));return e}let c=f({query:t,provider:r,options:{type:s,...i},count:n});try{let e=await fetch(c,{credentials:"include"}),t=await e.json();if(!((null==t?void 0:t.length)>=0))throw Error(t);return a&&Promise.all(t.map(e=>(0,l.GN)(e.imageUrl))).then(()=>{console.debug("[fetchImageSearchResults] images downloaded in background")}).catch(e=>{console.debug("[fetchImageSearchResults] error downloading image:",e)}),t}catch(e){return console.error("(caught) [fetchImages] fetchResults:",e),[]}},g=async e=>{let{queries:t,count:r,provider:i,prefetch:a,options:o}=e,l=(await Promise.all(t.map(e=>h({query:e,count:r,provider:i,prefetch:a,options:o}).then(t=>t.map(t=>({query:e,image:t,provider:i})))))).flat(),s=n()(l,e=>e.image.id||e.image.imageUrl);return s},f=e=>{let{query:t,count:r,provider:i,options:n={}}=e,o=new URLSearchParams,l=a.v.API_HOST||"https://api.gamma.app";return o.append("query",t),o.append("provider",i),o.append("count",String(r)),Object.entries(n).forEach(e=>{let[t,r]=e;void 0!==r&&o.append(t,String(r))}),"".concat(l).concat("/media/images/search","?").concat(o.toString())}},2090:function(e,t,r){"use strict";r.d(t,{Ge:function(){return g},N$:function(){return x},ND:function(){return y},WY:function(){return w},cT:function(){return j},eb:function(){return m},pK:function(){return u},u0:function(){return p},xQ:function(){return b}});var i=r(65616),n=r(48484),a=r(42340),o=r(13326),l=r(14274),s=r(81345),c=r(87205);let d={auth:{key:l.v.TRANSLOADIT_AUTH_KEY},template_id:l.v.TRANSLOADIT_IMAGE_TEMPLATE_ID},u=["image/*",o.Z.heic,o.Z.heif],m=["application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation"],p=[o.Z.doc,o.Z.docx],h=[...p,...m,o.Z.pdf],g=["font/otf","font/ttf","application/x-font-ttf","application/x-font-otf",".otf",".ttf"],f={all:[...h,...m,...u],importDoc:[...h],importPpt:[...m],importPdf:[o.Z.pdf],doc:h,font:g,image:u,icon:[".png",".ico",".gif",".svg"]},x={autoProceed:!0,restrictions:{allowedFileTypes:[],maxNumberOfFiles:1}},v={},b=async e=>{let t=v[e];if(t&&t.expires&&+new Date(t.expires)-3e5>Date.now())return v[e];let r=await fetch("/api/transloadit/signature",{method:"POST",body:JSON.stringify({templateId:e})}),{signature:i,expires:n}=await r.json();return i&&n?(v[e]={signature:i,expires:n},v[e]):(console.error("Error getting Transloadit signature"),{signature:"",expires:""})},y={createUppyInstance:function(e,t){let{onUploadStart:r,onOriginalFileUpload:a,onUploadComplete:o,onUploadFailed:l,onProgress:u,setErrorMessage:m}=t,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"node",h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4?arguments[4]:void 0,v=arguments.length>5?arguments[5]:void 0,y=2560,j="false";"background"===p||"themeBackground"===p?y=3840:"icon"===p?y=250:"profile"===p?(y=1024,j="true"):"workspaceLogo"===p&&(y=1024);let w=[];g=g||"image";let C=new i.ZP({...x,restrictions:{...x.restrictions,maxNumberOfFiles:h,allowedFileTypes:f[g]}});return C.use(n.ZP,{assemblyOptions:async()=>{let t=v||d.template_id,{signature:r,expires:i}=await b(t);return{params:{...d,auth:{...d.auth,expires:i},template_id:v||d.template_id},fields:{orgId:e,imageType:p,resizePx:y,cropPadding:"50%",detectAndCropFace:j},signature:r}},waitForEncoding:!0}),C.on("file-added",async e=>{try{var t;(null==e?void 0:null===(t=e.type)||void 0===t?void 0:t.includes("image"))&&(null==e?void 0:e.data)instanceof File&&await (0,c.sy)(e),r&&1===h&&r({tempUrl:URL.createObjectURL(e.data),file:e}),u&&u(0)}catch(t){console.error("[Uppy.file-added] ".concat(t.message)),C.removeFile(e.id)}}),C.on("files-added",e=>{r&&1!==h&&e.forEach(e=>{r({tempUrl:URL.createObjectURL(e.data),file:e})}),u&&u(0)}),C.on("error",e=>{let t="Error uploading to Transloadit: ".concat(e.message);m&&m(""),l&&l(t),console.error(t)}),C.on("upload-progress",(e,t)=>{if(!u)return;let r=t.bytesUploaded/t.bytesTotal*100;u(r)}),C.on("transloadit:result",(e,t,r)=>{if(1===h){if(!a||"original_file"!==e||0===r.uploads.length||(0,c.Ns)(r.uploads[0].mime)||(0,s.kO)(r.uploads[0].mime,r.uploads[0].ext)||!t)return;let{url:i,meta:n,name:o}=t;m&&m(""),i?a({src:i,meta:n,name:o,uploadResultStep:"original"}):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}else{if("filter_skip_optimize"===e){w=w.concat(t);return}{let e,n;if((0,c.Ns)(t.mime))n=t;else{var i;e=null===(i=w.find(e=>e.name===t.name))||void 0===i?void 0:i.url,n=t}if(!n)return;let{url:a,meta:s,name:d}=n;m&&m(""),a?o&&o({src:a,meta:s,name:d,uploadResultStep:"optimized",fullResults:r.results},e):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}}}),C.on("transloadit:complete",e=>{var t,r,i,n,a;let d,u,p,f;if(1!=h)return;if(0===e.uploads.length)throw console.error("[transloadit:complete] No uploads in assembly",e),Error("No uploads in assembly");if("importDoc"===g)u=e.results.convert_to_html[0];else if("importPpt"===g)u=e.results.convert_to_html[0];else{if((0,s.S9)(e.uploads[0].ext))return;(0,s.O7)(e.uploads[0].mime)?(u=e.results.original_file[0],p=e.results.doc_thumbnail[0].url):(0,s.kO)(e.uploads[0].mime,e.uploads[0].ext)?(u=e.results.convert_to_pdf[0],p=e.results.doc_thumbnail[0].url):(0,c.Ns)(e.uploads[0].mime)?(u=(null===(t=e.results.optimized)||void 0===t?void 0:t[0])||(null===(r=e.results.filter_skip_optimize)||void 0===r?void 0:r[0]),f=null===(i=e.results.detect_and_crop_face)||void 0===i?void 0:i[0].url):(d=e.results.original_file[0].url,f=null===(n=e.results.detect_and_crop_face)||void 0===n?void 0:n[0].url,u=(null===(a=e.results.optimized)||void 0===a?void 0:a[0])||e.results.original_file[0])}let{url:x,ssl_url:v,meta:b,name:y}=u;m&&m(""),v||x?o&&o({src:v||x,meta:b,name:y,thumbnail:p,croppedFace:f,uploadResultStep:"optimized",fullResults:e.results},d):(l&&l("Error uploading to Transloadit"),console.error("Error uploading to Transloadit"))}),C}},j=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"image",a=arguments.length>5?arguments[5]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let o=y.createUppyInstance(t,r,i,1,n,a);o.addFile({name:e.name,type:e.type,data:e}),o.upload()},w=async function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"node",o=arguments.length>4?arguments[4]:void 0;if(!t)throw Error("Tried uploading an image with no orgId");let l=y.createUppyInstance(t,r,i,"themeBackground"===i?null:1,void 0,o);l.use(a.Z,{companionUrl:n.Zm});let s=await l.getPlugin("Url").addFile(e);if(s instanceof Error){var c;null==r||null===(c=r.onUploadFailed)||void 0===c||c.call(r,s.message)}}},46772:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var i=r(21156),n=r(76332);let a=new i.V({systemPromptOperation:n.Run.GenerateImagePromptSystem,userPromptOperation:n.Run.GenerateImagePromptUser,variables:["input","html"],params:{temperature:.7,maxTokens:50}})},9883:function(e,t,r){"use strict";r.d(t,{q:function(){return A}});var i=r(52322),n=r(35183),a=r(10625),o=r(67046),l=r(62614),s=r(29117),c=r(38035),d=r(75009),u=r(77533),m=r(332),p=r(99058),h=r(25481),g=r(42946),f=r(49929),x=r(13413),v=r(41003),b=r(62131),y=r(2953),j=r(91994),w=r(11050),C=r(47968);let A=e=>{let{value:t,setValue:r,isDisabled:A}=e,k=(0,x.mw)(t),_=(0,j.CG)(C.yx),P=(0,v.Y)("ai_premium_models",null==_?void 0:_.organization),{openUpsellModal:E}=(0,y.z)();return(0,i.jsx)(n.NI,{children:(0,i.jsxs)(a.v,{children:[(0,i.jsx)(o.j,{as:l.z,variant:"plain",isDisabled:A,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,i.jsx)(f.G,{icon:g.ptq}),boxShadow:"none",children:(0,i.jsxs)(s.U,{spacing:2,children:[(0,i.jsx)(c.k,{width:"24px",height:"24px",align:"center",justify:"center",children:k.image?(0,i.jsx)(d.E,{src:k.image.src,w:"1.25em",h:"1.25em",objectFit:"contain"}):(0,i.jsx)(f.G,{icon:k.icon,fixedWidth:!0})}),(0,i.jsx)(u.x,{as:"span",flex:1,children:null==k?void 0:k.label()})]})}),(0,i.jsx)(m.h,{children:(0,i.jsx)(p.q,{minWidth:"250px",maxH:"350px",overflowY:"auto",overflowX:"hidden",zIndex:"modalPopover",border:"1px solid",borderColor:"gray.200",children:Object.entries(x.Iw).map(e=>{let[t,{label:n,description:a,icon:o,image:l}]=e;if(!(0,x.Hr)(t))return null;let c=(0,x.Om)(t);return(0,i.jsxs)(h.s,{value:t,icon:l?(0,i.jsx)(d.E,{src:l.src,w:"1.5em",h:"1.5em",objectFit:"contain"}):(0,i.jsx)(f.G,{icon:o,fixedWidth:!0}),onClick:()=>{if(c&&!P){E({segmentEvent:w.AA.GAMMA_UPSELL_CALLOUT_AI_IMAGE_MODELS});return}r(t)},children:[(0,i.jsxs)(s.U,{children:[(0,i.jsx)(u.x,{children:n()}),c&&(0,i.jsx)(b.U,{productFeature:"ai_premium_models",workspace:null==_?void 0:_.organization})]}),a&&(0,i.jsx)(u.x,{color:"gray.400",fontSize:"sm",children:a()})]},t)})})})]})})}},62801:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var i=r(52322),n=r(29117),a=r(32899),o=r(28535),l=r(42946),s=r(49929);let c=e=>{let{promptPageInfo:t,nextPrompt:r,prevPrompt:c,isDisabled:d,...u}=e;return(0,i.jsxs)(n.U,{spacing:1,...u,children:[(0,i.jsx)(a.h,{variant:"ghost",icon:(0,i.jsx)(s.G,{icon:l.A35}),isDisabled:d||!t.canGoPrev,onClick:()=>c(),"aria-label":"left",color:"gray.800",size:"xs"}),(0,i.jsxs)(o.xu,{as:"span",color:"gray.800",fontSize:"sm",children:[t.curr," / ",t.total]}),(0,i.jsx)(a.h,{variant:"ghost",icon:(0,i.jsx)(s.G,{icon:l._tD}),color:"gray.800",isDisabled:d||!t.canGoNext,onClick:()=>r(),"aria-label":"left",size:"xs"})]})}},67475:function(e,t,r){"use strict";r.d(t,{A:function(){return P}});var i=r(52322),n=r(55478),a=r(35183),o=r(38035),l=r(43679),s=r(34071),c=r(62614),d=r(29117),u=r(75009),m=r(28535),p=r(39429),h=r(48394),g=r(17993),f=r(74409),x=r(20437),v=r(29494),b=r(77533),y=r(42946),j=r(49929),w=r(2784),C=r(91994),A=r(47968),k=r(715),_=r(9766);let P=(0,w.memo)(e=>{var t;let{stylePreset:r,setStylePreset:b,stylePrompt:P,setStylePrompt:S,presetOptions:U,isDisabled:I,contextualTheme:R,findThemeNameFromStylePrompt:T,getTargetPresetData:O}=e,{isOpen:M,onToggle:N,onClose:L}=(0,n.q)(),D=(0,w.useMemo)(()=>k.gL.find(e=>e.stylePreset===r),[r]),[H,z]=(0,w.useState)(D),G=(0,C.CG)(A.Pu),W=R||G,F=null==W?void 0:null===(t=W.config)||void 0===t?void 0:t.stylePrompt,B=(0,w.useCallback)(e=>{S(e.target.value),r!==k.si.Custom&&(b(k.si.Custom),z(k.gL.find(e=>e.stylePreset===k.si.Custom)))},[S,b,r]),q=(0,w.useCallback)(e=>{let{targetStylePrompt:t,targetStylePreset:r}=O(e);S(t),b(e),z(r),L()},[O,L,b,S]),V=(0,w.useMemo)(()=>{if(r===k.si.Theme)return T(P)},[T,r,P]),{scrollContainerRef:K}=(0,_.n1)(r||"",M);return(0,i.jsx)(a.NI,{children:(0,i.jsxs)(o.k,{direction:"column",gap:2,children:[(0,i.jsxs)(l.J,{placement:"bottom-start",matchWidth:!0,isOpen:M,onClose:L,closeOnBlur:!0,children:[(0,i.jsx)(s.x,{children:(0,i.jsx)(c.z,{width:"100%",type:"button",boxShadow:"none",onClick:N,rightIcon:(0,i.jsx)(j.G,{icon:y.ptq}),isDisabled:I,justifyContent:"space-between",children:(0,i.jsxs)(d.U,{spacing:2,children:[(null==H?void 0:H.icon)?(0,i.jsx)(j.G,{icon:H.icon}):(0,i.jsx)(u.E,{width:"24px",height:"24px",src:null==H?void 0:H.imageUrl,borderRadius:"md"}),(0,i.jsx)(m.xu,{flex:1,children:"".concat(null==H?void 0:H.name()).concat(V?" (".concat(V,")"):"")})]})})}),(0,i.jsx)(p.y,{width:"auto",maxHeight:"max(350px, 40vh)",overflowY:"auto",ref:K,children:(0,i.jsx)(h.b,{children:(0,i.jsx)(g.g,{spacing:4,children:U.map(e=>(0,i.jsxs)(g.g,{alignItems:"start",width:"100%",spacing:0,children:[(0,i.jsx)(f.X,{size:"sm",mb:2,children:e.title()}),(0,i.jsx)(x.M,{columns:{base:3,"2xl":4},spacing:2,children:e.presets.filter(e=>!("Theme"===e.stylePreset&&!F)).map(e=>(0,i.jsx)(m.xu,{"data-popover-scroll-id":e.stylePreset,children:(0,i.jsx)(E,{preset:e,onClick:()=>q(e.stylePreset),isSelected:e.stylePreset===r},e.stylePreset)},e.stylePreset))})]},e.title()))})})})]}),r!==k.si.None&&(0,i.jsx)(v.g,{isDisabled:I,height:"80px",value:P,onChange:B,resize:"none"})]})})});P.displayName="StylePresetMenu";let E=e=>{let{preset:t,onClick:r,isSelected:n}=e;return(0,i.jsxs)(g.g,{_hover:{cursor:n?"default":"pointer",borderColor:n?"trueblue.200":"gray.200",backgroundColor:n?"trueblue.50":"gray.50"},onClick:r,borderRadius:"md",spacing:1,p:2,border:"1px",width:"100%",color:n?"trueblue.500":"gray.900",bgColor:n?"trueblue.50":"transparent",borderColor:n?"trueblue.200":"transparent",children:[t.icon?(0,i.jsx)(m.xu,{width:{base:"120px","2xl":"123.5px"},height:"35px",display:"flex",justifyContent:"center",alignItems:"center",children:(0,i.jsx)(m.xu,{width:"100%",height:"100%",bgColor:"transparent",rounded:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,i.jsx)(j.G,{icon:t.icon})})}):(0,i.jsx)(u.E,{src:t.imageUrl,width:"100%",height:"auto",borderRadius:"md"}),(0,i.jsx)(b.x,{color:n?"trueblue.500":"gray.900",fontSize:"sm",children:t.name()})]})}},715:function(e,t,r){"use strict";r.d(t,{sl:function(){return l},gL:function(){return s},me:function(){return a},si:function(){return o}});var i=r(42946),n=r(87254);let a={Default:()=>n.ag._({id:"46F406"}),Realistic:()=>n.ag._({id:"uFPBcL"}),Artistic:()=>n.ag._({id:"tqhB0N"})},o={None:"None",Anime:"Anime",Digital_Art_Concept_Art:"Digital_Art_Concept_Art",Ethereal_Fantasy_Art:"Ethereal_Fantasy_Art",Photography:"Photography",Analog_film:"Analog_film",Vaporwave:"Vaporwave",Isometric:"Isometric",Low_Poly:"Low_Poly",Claymation:"Claymation",Origami:"Origami",Line_Art:"Line_Art",Pixel_Art:"Pixel_Art",Texture:"Texture",Theme:"Theme",Custom:"Custom"},l={square:1,landscape:4/3,portrait:3/4},s=[{stylePreset:o.None,name:()=>n.ag._({id:"iXzipJ"}),imageUrl:"https://cdn.gamma.app/ai-image-assets/default.jpg",icon:i.gPx,category:a.Default,stylePrompt:""},{stylePreset:o.Anime,name:()=>n.ag._({id:"RulMCV"}),imageUrl:"/_next/static/media/anime.c842eccd.jpg",category:a.Artistic,stylePrompt:"anime artwork. anime style, key visual, vibrant, studio anime, highly detailed"},{stylePreset:o.Digital_Art_Concept_Art,name:()=>n.ag._({id:"PADW9l"}),imageUrl:"/_next/static/media/digital-art.728c3ff0.jpg",category:a.Artistic,stylePrompt:"concept art. digital artwork, illustrative, painterly, matte painting, highly detailed"},{stylePreset:o.Ethereal_Fantasy_Art,name:()=>n.ag._({id:"C1chBY"}),imageUrl:"/_next/static/media/fantasy.86ede605.jpg",category:a.Artistic,stylePrompt:"ethereal fantasy concept art of. magnificent, celestial, ethereal, painterly, epic, majestic, magical, fantasy art, cover art, dreamy"},{stylePreset:o.Photography,name:()=>n.ag._({id:"j1ao1Y"}),imageUrl:"/_next/static/media/photography.bce47d9c.jpg",category:a.Realistic,stylePrompt:"cinematic photo. 35mm photograph, film, bokeh, professional, 4k, highly detailed"},{stylePreset:o.Analog_film,name:()=>n.ag._({id:"bK8OnA"}),imageUrl:"/_next/static/media/analog-film.105509c1.jpg",category:a.Realistic,stylePrompt:"analog film photo. faded film, desaturated, 35mm photo, grainy, vignette, vintage, Kodachrome, Lomography, stained, highly detailed, found footage"},{stylePreset:o.Vaporwave,name:()=>n.ag._({id:"rPpJGr"}),imageUrl:"/_next/static/media/vaporwave.f8a9afd0.jpg",category:a.Artistic,stylePrompt:"vaporwave synthwave style. cyberpunk, neon, vibes, stunningly beautiful, crisp, detailed, sleek, ultramodern, high contrast, cinematic composition"},{stylePreset:o.Isometric,name:()=>n.ag._({id:"rHgk/g"}),imageUrl:"/_next/static/media/isometric.86adffe4.jpg",category:a.Artistic,stylePrompt:"isometric style. vibrant, beautiful, crisp, detailed, ultra detailed, intricate"},{stylePreset:o.Low_Poly,name:()=>n.ag._({id:"X3ZAzR"}),imageUrl:"/_next/static/media/low-poly.e2805ce4.jpg",category:a.Artistic,stylePrompt:"low-poly style. ambient occlusion, low-poly game art, polygon mesh, jagged, blocky, wireframe edges, centered composition"},{stylePreset:o.Claymation,name:()=>n.ag._({id:"Q61KDs"}),imageUrl:"/_next/static/media/claymation.92bfacf1.jpg",category:a.Artistic,stylePrompt:"claymation style. sculpture, clay art, centered composition, play-doh"},{stylePreset:o.Origami,name:()=>n.ag._({id:"MHkaLx"}),imageUrl:"/_next/static/media/origami.2586b331.jpg",category:a.Artistic,stylePrompt:"origami style. paper art, pleated paper, folded, origami art, pleats, cut and fold, centered composition"},{stylePreset:o.Line_Art,name:()=>n.ag._({id:"i6SPYf"}),imageUrl:"/_next/static/media/line-art.bd2852c5.jpg",category:a.Artistic,stylePrompt:"line art drawing. professional, sleek, modern, minimalist, graphic, line art, vector graphics"},{stylePreset:o.Pixel_Art,name:()=>n.ag._({id:"3a27VZ"}),imageUrl:"/_next/static/media/pixel-art.ca70c7b3.jpg",category:a.Artistic,stylePrompt:"pixel-art. low-res, blocky, pixel art style, 16-bit graphics"},{stylePreset:o.Texture,name:()=>n.ag._({id:"MCId55"}),imageUrl:"/_next/static/media/texture.6214fde9.jpg",category:a.Artistic,stylePrompt:"texture. top down close-up, video game"},{stylePreset:o.Theme,name:()=>n.ag._({id:"c8dzFk"}),imageUrl:"",icon:i.q2v,category:a.Default,stylePrompt:""},{stylePreset:o.Custom,name:()=>n.ag._({id:"zkWoIW"}),imageUrl:"",icon:i.TzT,category:a.Default,stylePrompt:""}]},9766:function(e,t,r){"use strict";r.d(t,{Qo:function(){return _},Rq:function(){return M},S8:function(){return O},ec:function(){return S},jg:function(){return T},n1:function(){return L},oj:function(){return N}});var i=r(87254),n=r(84636),a=r.n(n),o=r(27191),l=r(2784),s=r(77787),c=r(50634),d=r(31490),u=r(93624),m=r(7144),p=r(42111),h=r(13413);r(46772);var g=r(41003),f=r(91994),x=r(64116),v=r(74684),b=r(47968),y=r(11093),j=r(91073),w=r(39278),C=r(89458),A=r(715);let k=e=>{let{docId:t,themeId:r}=e,[i,n]=(0,l.useState)([]),[o,s]=(0,l.useState)(!1),{data:c,loading:d,fetchMore:m}=(0,u.qOp)({variables:{docId:t,themeId:r,source:"image.ai-generated",type:u.DDH.Image,first:18}}),[p,h]=(0,l.useState)(null),[g]=(0,u.BAq)(),f=(0,l.useCallback)(async e=>{n(t=>t.filter(t=>t.id!==e)),h(e);try{await g({variables:{id:e},update:t=>{let r=RegExp(e,"g");Object.keys(t.data.data).forEach(e=>{e.match(r)&&t.data.delete(e)})},refetchQueries:["GetSavedMedia"]})}catch(e){console.error(e)}h(null)},[g]),x=(0,l.useMemo)(()=>(null==c?void 0:c.savedMedia.edges.map(e=>e.node))||[],[null==c?void 0:c.savedMedia.edges]),v=(0,l.useCallback)(e=>{n(t=>[...e,...t])},[]),b=(0,l.useMemo)(()=>a()([...i,...x],"id"),[i,x]),y=null==c?void 0:c.savedMedia.pageInfo,j=(0,l.useCallback)(()=>{(null==y?void 0:y.hasNextPage)&&(null==y?void 0:y.endCursor)&&(s(!0),m({variables:{after:null==y?void 0:y.endCursor}}).finally(()=>{s(!1)}))},[m,y]);return{history:b,loadMore:j,canFetchMore:!!(null==y?void 0:y.hasNextPage),isLoadingHistory:d,isFetchingMore:o,addToHistory:v,deleteImage:f,deletingId:p}},_=e=>{let t,{selectImage:r}=e,n=(0,f.CG)(b.ke),a=(0,f.CG)(x.OE),o=a;"new"===o&&(o=void 0,t=u.wNJ.Theme);let{currentWorkspace:s}=(0,w.SE)(),[c,g]=(0,l.useState)(""),[v,y]=(0,l.useState)(!1),[j,C]=(0,l.useState)(!1),[_,P]=(0,l.useState)(""),{history:E,isLoadingHistory:S,addToHistory:U,loadMore:I,canFetchMore:R,isFetchingMore:T,deleteImage:O,deletingId:M}=k(o?{themeId:o}:n?{docId:n}:{}),N=(0,l.useCallback)(async e=>{let a=(0,d.nZ)();g(e.prompt),y(!0),C(!1),P("");let l={...e,stylePreset:e.stylePreset||A.si.Theme,stylePrompt:e.stylePrompt||"",docId:e.docId||n,themeId:e.themeId||o,context:t},c=(0,h.mw)(e.model),u=performance.now(),f={interactionId:a,interface:"generate-image",provider:null==c?void 0:c.provider,streaming:!1,inputContent:l.prompt,docId:l.docId,generateImageOptions:l};try{(0,d.hq)(f);let e=await (0,h.Qz)({interactionId:a,workspaceId:null==s?void 0:s.id,rewrite:p.VH.get("rewriteImagePrompts"),...l});if(y(!1),0===e.length)throw Error("No images generated");e.length>0&&(U(e),r(e[0])),(0,m.d)("generateImage",void 0,a),(0,d.o)({...f,latency:performance.now()-u,generateImageUrls:e.map(e=>e.attrs.src)})}catch(e){C(!0),P(e.messageTranslated?e.messageTranslated:i.ag._({id:"QcZqsh"})),y(!1),console.error("(caught) [AIGenerateImage] error:",e),(0,d.pQ)({...f,latency:performance.now()-u,errorName:"GenerateImageError",errorMessage:e.message,outputMessage:""})}y(!1)},[n,o,t,null==s?void 0:s.id,U,r]);return{generate:N,isGenerating:v,hasError:j,errorMessage:_,isLoadingHistory:S,imageResults:E,searchQuery:c,loadMore:I,canLoadMore:R,isLoadingMore:T,deleteImage:O,deletingId:M}},P=e=>{var t,r;if(!(e instanceof o.qv))return null;if("smartLayoutCell"===e.node.type.name&&(null===(t=e.node.textContent)||void 0===t?void 0:t.length)>=5)return e.node.content;let i=e.$from;for(;i.depth>0;){let e=i.node(i.depth);if("smartLayoutCell"===e.type.name&&(null===(r=e.textContent)||void 0===r?void 0:r.length)>=5)return e.content;i=i.doc.resolve(i.before(i.depth))}return null},E=e=>{let t=(0,l.useCallback)(()=>{if(!e)return null;let{selection:t}=e.state,r=(0,y.Ru)(t.$from,j.KH)[0],i=r&&(0,v.NE)(r.node,r.pos),{content:n}=e.state.doc.slice(i.pos+1,i.pos+i.node.nodeSize-1),a=P(t);return a?(0,s.c)(e,a):(0,s.c)(e,n)},[e]);return t},S=e=>{let{editor:t,prompt:r,stylePrompt:i,addPrompt:n}=e,a=(0,f.CG)(b.Wl),[o,s]=(0,l.useState)(!1),d=E(t),u=(0,l.useCallback)(()=>{s(!0),n("","push")},[n]),m=(0,l.useCallback)(e=>{n(e,"update")},[n]),p=(0,l.useCallback)(()=>{s(!1)},[]),h=(0,l.useCallback)(e=>{console.error("Error enhancing image",e),s(!1)},[]),{generate:g}=(0,c.jz)("EnhanceAIImage",{onStart:u,onContent:m,onComplete:p,onError:h,timeout:3e4}),x=(0,l.useCallback)(()=>{var e;if(!o&&(null==a?void 0:a.id))return g({variables:{currentPrompt:r,stylePrompt:i,cardHtml:(null==t?void 0:t.isSiteNavbarEditor)?void 0:null!==(e=d())&&void 0!==e?e:void 0},workspaceId:a.id}).promise},[o,null==a?void 0:a.id,g,r,i,null==t?void 0:t.isSiteNavbarEditor,d]);return{isEnhancing:o,setIsEnhancing:s,runEnhanceImagePrompt:x}},U=e=>e.ind===e.history.length-1,I=e=>e.history[e.history.length-1],R={load:(e,t)=>({history:[t],ind:0}),push(e,t){return""===I(e).trim()?this.replace(e,t):{history:[...e.history,t],ind:e.history.length}},replace(e,t){let r=e.history.slice(0,-1);return{history:[...r,t],ind:r.length}},select(e,t){return U(e)&&I(e)===t?e:this.push(e,t)}},T=()=>{let e=(0,l.useRef)(!1),[t,r]=(0,l.useState)({history:[""],ind:0}),i=(0,l.useCallback)((t,i)=>{"load"===i&&r(e=>R.load(e,t)),"push"===i&&r(e=>R.push(e,t)),"update"===i&&(e.current?r(e=>R.push(e,t)):r(e=>R.replace(e,t))),"select"===i&&r(e=>R.select(e,t)),e.current="update"!==i},[]),n=(0,l.useCallback)(()=>{let{ind:e}=t;e<=0||r(e=>({...e,ind:e.ind-1}))},[t]),a=(0,l.useCallback)(()=>{let{history:e,ind:i}=t;i>=e.length-1||r(e=>({...e,ind:e.ind+1}))},[t]),{ind:o,history:s}=t;return{prompt:s[o]||"",addPrompt:i,promptPageInfo:{curr:o+1,total:s.length,canGoNext:o<s.length-1,canGoPrev:o>0},nextPrompt:a,prevPrompt:n}},O=()=>{let[e,t]=(0,C.I)("aiImageRatings",{}),r=(0,l.useCallback)((r,i)=>{r.savedMediaId&&(e[r.savedMediaId]=i,t(e))},[]),i=(0,l.useCallback)(t=>!t.savedMediaId||!!e[t.savedMediaId],[]);return{saveImageRating:r,hasRatedImage:i}},M=(e,t)=>{let{data:r,loading:i}=(0,u.qOp)({variables:{interactionId:e,source:"image.ai-generated",type:u.DDH.Image,first:3}}),n=(0,l.useMemo)(()=>(null==r?void 0:r.savedMedia.edges.map(e=>e.node).filter(e=>e.attrs.query===t))||[],[null==r?void 0:r.savedMedia.edges,t]);return{savedMedia:n,isLoading:i}},N=()=>{let e=(0,f.CG)(b.yx),t=(0,g.Y)("ai_premium_models",null==e?void 0:e.organization),r=(0,l.useCallback)(e=>(0,h.Hr)(e)&&(t||!(0,h.Om)(e)),[t]);return r},L=(e,t)=>{let r=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!t)return;let i=r.current;if(!i)return;let n=i.querySelector('[data-popover-scroll-id="'.concat(e,'"]'));if(!(n instanceof HTMLElement))return;let a=n.offsetHeight/2,o=i.offsetHeight/2,l=n.offsetTop-o+a;i.scrollTo({top:l,behavior:"instant"})},[t,e]),{scrollContainerRef:r}}},62327:function(e,t,r){"use strict";r.d(t,{MI:function(){return y},yD:function(){return b},sK:function(){return v},mG:function(){return x},k8:function(){return f},Ac:function(){return g},Xc:function(){return j}});var i=r(27875),n=r.n(i),a=r(2784),o=r(42111),l=r(13413),s=r(9766),c=r(91994),d=r(14324),u=r(67613),m=r(47968),p=r(715);let h=(e,t,r)=>{var i,n,o,l,s,h,g;(0,d.a)();let f=(0,c.CG)(u.ez),x=(0,c.CG)(m.Pu),v=e||x,b=(0,c.CG)(m.yx),y=!!b,j=(0,a.useMemo)(()=>{var e;return(null==r?void 0:null===(e=r.aiParams)||void 0===e?void 0:e.stylePreset)||(null==t?void 0:t.stylePreset)||p.si.None},[r,t]),w=(0,a.useMemo)(()=>{var e,i,n;let a=null===(e=p.gL.find(e=>e.stylePreset===j))||void 0===e?void 0:e.stylePrompt;return j===p.si.Theme?(null==v?void 0:null===(i=v.config)||void 0===i?void 0:i.stylePrompt)||"":a||(null==r?void 0:null===(n=r.aiParams)||void 0===n?void 0:n.stylePrompt)||(null==t?void 0:t.stylePrompt)||""},[null==r?void 0:null===(i=r.aiParams)||void 0===i?void 0:i.stylePrompt,null==v?void 0:null===(n=v.config)||void 0===n?void 0:n.stylePrompt,j,null==t?void 0:t.stylePrompt]),[C,A]=(0,a.useState)(j),[k,_]=(0,a.useState)(w),P=(0,a.useMemo)(()=>Object.values(p.me).map(e=>({title:e,presets:p.gL.filter(t=>t.category===e&&!t.hidden&&(y||t.stylePreset!==p.si.Custom))})),[y]),E=(0,a.useCallback)(e=>{var i,n,a,o,l;return e===p.si.Theme?(null==v?void 0:null===(n=v.config)||void 0===n?void 0:n.stylePrompt)||"":e===p.si.Custom?(null==r?void 0:null===(a=r.aiParams)||void 0===a?void 0:a.stylePrompt)===(null==v?void 0:null===(o=v.config)||void 0===o?void 0:o.stylePrompt)?(null==t?void 0:t.stylePrompt)||"":(null==r?void 0:null===(l=r.aiParams)||void 0===l?void 0:l.stylePrompt)||(null==t?void 0:t.stylePrompt)||"":(null===(i=p.gL.find(t=>t.stylePreset===e))||void 0===i?void 0:i.stylePrompt)||""},[null==r?void 0:null===(o=r.aiParams)||void 0===o?void 0:o.stylePrompt,null==v?void 0:null===(l=v.config)||void 0===l?void 0:l.stylePrompt,null==t?void 0:t.stylePrompt]),S=(0,a.useCallback)(e=>{var i,n,a;let o;let l=p.gL.find(t=>t.stylePreset===e),s=(null==l?void 0:l.stylePrompt)||"";switch(e){case p.si.Theme:o={targetStylePrompt:(null==v?void 0:null===(i=v.config)||void 0===i?void 0:i.stylePrompt)||"",targetStylePreset:l};break;case p.si.Custom:o={targetStylePrompt:(null==r?void 0:null===(n=r.aiParams)||void 0===n?void 0:n.stylePreset)===p.si.Custom?(null==r?void 0:null===(a=r.aiParams)||void 0===a?void 0:a.stylePrompt)||(null==t?void 0:t.stylePrompt)||"":(null==t?void 0:t.stylePrompt)||"",targetStylePreset:l};break;case p.si.None:o={targetStylePrompt:"",targetStylePreset:l};break;default:o={targetStylePrompt:s,targetStylePreset:l}}return o},[null==r?void 0:null===(s=r.aiParams)||void 0===s?void 0:s.stylePreset,null==r?void 0:null===(h=r.aiParams)||void 0===h?void 0:h.stylePrompt,null==v?void 0:null===(g=v.config)||void 0===g?void 0:g.stylePrompt,null==t?void 0:t.stylePrompt]),U=(0,a.useCallback)(e=>p.gL.find(t=>t.stylePreset===e),[]),I=(0,a.useCallback)(e=>{var t;return(null===(t=f.find(t=>t.config.stylePrompt===e))||void 0===t?void 0:t.name)||""},[f]);return{stylePresetOptions:P,stylePreset:C,stylePrompt:k,defaultPreset:j,defaultPrompt:w,setStylePreset:A,setStylePrompt:_,getTargetPresetData:S,findStylePromptFromPreset:E,findThemeNameFromStylePrompt:I,findStylePresetObjectFromPresetId:U}},g=100,f=8,x=200,v=30,b=1,y=5,j=(e,t,r)=>{var i,c,d,u,m,p,b,j,C;let A=(0,o.ye)("aiGeneratedImagesDefaultModel"),k=null==t?void 0:null===(c=t.getAttributes("document"))||void 0===c?void 0:null===(i=c.aiOptions)||void 0===i?void 0:i.imageOptions,[_,P]=(0,a.useState)(null!==(b=null!==(p=null==r?void 0:null===(d=r.aiParams)||void 0===d?void 0:d.model)&&void 0!==p?p:null==k?void 0:k.model)&&void 0!==b?b:A),[E,S]=(0,a.useState)(v),[U,I]=(0,a.useState)(y),[R,T]=(0,a.useState)((0,o.ye)("aiGeneratedImagesCount")),{prompt:O,addPrompt:M,promptPageInfo:N,nextPrompt:L,prevPrompt:D}=(0,s.jg)(),[H,z]=(0,a.useState)(""),[G,W]=(0,a.useState)(null!==(C=null!==(j=w(null==r?void 0:null===(u=r.aiParams)||void 0===u?void 0:u.height,null==r?void 0:null===(m=r.aiParams)||void 0===m?void 0:m.width))&&void 0!==j?j:w(null==k?void 0:k.height,null==k?void 0:k.width))&&void 0!==C?C:"square"),{stylePresetOptions:F,stylePrompt:B,setStylePrompt:q,stylePreset:V,setStylePreset:K,defaultPreset:Q,defaultPrompt:X,getTargetPresetData:Z,findThemeNameFromStylePrompt:Y}=h(e,k,r),J=(0,l.mw)(_),$=(null==J?void 0:J.aspectRatios[G])||l.vr,ee=(0,a.useMemo)(()=>({prompt:O,model:_,stylePreset:V,stylePrompt:B,height:$.height,width:$.width,steps:n()(E,1,g),count:n()(R,1,f),negative_prompt:H,cfg_scale:n()(U,1,x)}),[O,_,V,B,$.height,$.width,E,R,H,U]),et=(0,s.oj)();(0,a.useEffect)(()=>{et(_)||P(A)},[_,A,P,et]);let er=(0,a.useCallback)((e,t)=>{if(!e)return;let{prompt:r,height:i,width:n,stylePreset:a,stylePrompt:o,cfg_scale:l,negative_prompt:s,steps:c,model:d}=e;i&&n&&W(w(i,n)),r&&M(r,t),o&&q(o),a&&K(a),l&&I(l),s&&z(s),c&&S(c),d&&et(d)&&P(d)},[M,K,q,et]),ei=(0,a.useCallback)(e=>{var t,r,i;let{aiParams:n}=e,{height:a,width:o,model:s,stylePrompt:c,stylePreset:d,prompt:u,negative_prompt:m,steps:p,cfg_scale:h}=null!=n?n:{},g=null!==(r=null!==(t=w(a,o))&&void 0!==t?t:w(null==k?void 0:k.height,null==k?void 0:k.width))&&void 0!==r?r:l.vr.key;W(g),P(null!==(i=null!=s?s:null==k?void 0:k.model)&&void 0!==i?i:A),q(null!=c?c:X),K(null!=d?d:Q),M(null!=u?u:"","load"),z(null!=m?m:""),S(null!=p?p:v),I(null!=h?h:y)},[M,A,Q,X,null==k?void 0:k.height,null==k?void 0:k.model,null==k?void 0:k.width,K,q]),en=(0,a.useMemo)(()=>e=>{if(!e||!e.aiParams)return!1;let t=w(e.aiParams.height,e.aiParams.width);return O!==e.aiParams.prompt||_!==e.aiParams.model||G!==t||V!==e.aiParams.stylePreset},[G,_,O,V]);return{model:_,setModel:P,prompt:O,addPrompt:M,promptPageInfo:N,nextPrompt:L,prevPrompt:D,stylePrompt:B,setStylePrompt:q,stylePreset:V,setStylePreset:K,stylePresetOptions:F,getTargetPresetData:Z,findThemeNameFromStylePrompt:Y,aspectRatio:G,setAspectRatio:W,imageGenerateConfig:ee,count:R,setCount:T,loadImageAiParams:er,resetImageAiParams:ei,isPromptDirty:en,negativePrompt:H,setNegativePrompt:z,steps:E,setSteps:S,cfgScale:U,setCfgScale:I}},w=(e,t)=>e&&t?e>t?"portrait":e<t?"landscape":"square":"square"},68728:function(e,t,r){"use strict";r.d(t,{A:function(){return b},E:function(){return v}});var i=r(52322),n=r(10625),a=r(67046),o=r(62614),l=r(332),s=r(99058),c=r(44035),d=r(39237),u=r(77533),m=r(54933),p=r(49929),h=r(87254);let g={label:()=>h.ag._({id:"DAmK+T"}),key:"All",description:()=>h.ag._({id:"Zz/1wq"})},f=[g,{label:()=>h.ag._({id:"10G8Kb"}),key:"Share",description:()=>h.ag._({id:"EVNJ2h"})},{label:()=>h.ag._({id:"SjDzTh"}),key:"ShareCommercially",description:()=>h.ag._({id:"DHhpJP"})}],x=g.key,v=e=>{var t;return null===(t=f.find(t=>t.key===e))||void 0===t?void 0:t.label()},b=e=>{let{value:t=x,onChange:r}=e;return(0,i.jsxs)(n.v,{children:[(0,i.jsx)(a.j,{w:"100%",as:o.z,boxShadow:"sm",size:"sm",variant:"plain",rightIcon:(0,i.jsx)(p.G,{icon:m.ptq}),textAlign:"left",children:v(t)}),(0,i.jsx)(l.h,{children:(0,i.jsx)(s.q,{zIndex:"tooltip",w:"350px",children:(0,i.jsx)(c._,{type:"radio",w:"100%",defaultValue:g.key,value:t,onChange:e=>r(e),children:f.map(e=>{let{key:t,label:r,description:n}=e;return(0,i.jsxs)(d.i,{value:t,children:[r(),(0,i.jsx)(u.x,{fontSize:"sm",color:"gray.400",children:n()})]},t)})})})})]})}},53345:function(e,t,r){"use strict";r.d(t,{Z:function(){return Z}});var i=r(52322),n=r(32899),a=r(17993),o=r(74105),l=r(20816),s=r(28535),c=r(85573),d=r(35183),u=r(97166),m=r(42946),p=r(49929),h=r(94523),g=r(5879),f=r(87254),x=r(38045),v=r(4742),b=r.n(v),y=r(2784),j=r(66028),w=r(93441),C=r(68728),A=r(14274),k=r(39877),_=r(13773),P=r(87205);let E=e=>(0,y.useCallback)(t=>{let r="".concat(A.v.API_HOST||"","/media/images/track");fetch(r,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:e,id:t.id})})},[e]),S=e=>{let{provider:t,enablePagination:r,resultsPerPage:i}=e,[n,a]=(0,y.useState)(""),[o,l]=(0,y.useState)([]),[s,c]=(0,y.useState)(!1),[d,u]=(0,y.useState)(!1),[m,p]=(0,y.useState)(1),[h,g]=(0,y.useState)("All"),f=(0,y.useRef)(h),x=r&&o.length>0&&m<6,v=(0,y.useCallback)(async(e,r)=>{c(!0),u(!1);try{let n={license:f.current,page:r,gammaFeature:"mediaDrawer"};"bing"===t&&(n.minWidth=_.x.minWidth,n.maxWidth=_.x.maxWidth);let a=await (0,k.C)({query:e,count:i,provider:t,options:n});if(c(!1),!((null==a?void 0:a.length)>=0))throw Error("No images found");let o=a.filter(e=>(0,P.VE)(e.imageUrl));l(e=>e.concat(o))}catch(e){u(!0),c(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t,i]),b=(0,y.useCallback)(e=>{l([]),p(1),a(e),v(e,1)},[v]),j=(0,y.useCallback)(()=>{v(n,m+1),p(m+1)},[v,n,m]),w=(0,y.useCallback)(()=>{a(""),l([]),p(1)},[]),C=(0,y.useCallback)(e=>{g(e),f.current=e,w(),b(n)},[w,b,n]);return{search:b,isLoading:s,loadMore:j,canLoadMore:x,hasError:d,imageResults:o,resetResults:w,searchQuery:n,license:h,updateLicense:C}};var U=r(38035),I=r(62614),R=r(77533),T=r(47443),O=r(52929),M=r(20437),N=r(30523),L=r(67109),D=r(2689),H=r.n(D),z=r(75641),G=r(50279),W=r(75009),F=r(78071),B=r(42822),q=r(11082);let V=(0,y.memo)(e=>{let{image:t,isSelected:r,onImageClick:n,resizeThumbnail:a}=e,o=a?(0,P.SN)(t.thumbnailUrl,P.Iv):t.thumbnailUrl;return(0,i.jsxs)(I.z,{borderRadius:"base",overflow:"hidden",display:"block",variant:"ghost",width:"100%",opacity:1,textAlign:"left",pos:"relative",p:0,minH:"auto",h:"auto",_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>n(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",children:[(0,i.jsx)(W.E,{w:"100%",src:o,fallback:(0,i.jsx)(L.O,{height:"120px",borderRadius:"base"})}),(0,i.jsx)(F.p,{in:r,children:(0,i.jsx)(s.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,i.jsx)(B.M,{h:"100%",w:"100%",children:(0,i.jsx)(p.G,{icon:m.LEp})})})}),!t.thumbnailUrl&&(0,i.jsx)(N.P,{width:"100%",children:(0,i.jsx)(L.O,{height:"80px",borderRadius:"base"})}),(0,i.jsxs)(s.xu,{left:0,right:0,bottom:0,p:2,pos:"absolute",color:"white",fontSize:"xs",textOverflow:"ellipsis",overflow:"hidden",bg:"linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 100%)",borderBottomRadius:"base",className:"attribution-container",opacity:0,transitionProperty:"common",transitionDuration:"normal",children:[t.attributionUrl&&t.credit&&(0,i.jsx)(h.kH,{label:t.credit,placement:"left",children:(0,i.jsx)(q.r,{mr:1,target:"_blank",rel:"noopener noreferrer",href:t.attributionUrl,tabIndex:-1,children:(0,i.jsx)(p.G,{transform:"shrink-4",icon:m.Xjp})})}),t.credit]})]})});V.displayName="ImageSearchGridItem";let K=e=>{let{searchQuery:t,currentImageUrl:r,updateAttributes:n,provider:a,imageResults:o,isLoading:l,canLoadMore:c,loadMore:d,hasError:u,resultsPerPage:m,resizeThumbnails:p}=e,h=E(a),f=(0,y.useCallback)(e=>{h(e),n((0,G.C)(e,t,a))},[a,t,h,n]),x=o.map(e=>{let t=e.imageUrl.split("?")[0],n=r&&r.split("?")[0];return(0,i.jsx)(V,{provider:a,image:e,isSelected:t===n,onImageClick:f,resizeThumbnail:p},e.id)});return(0,i.jsxs)(U.k,{direction:"column",align:"stretch",children:[l&&0===o.length&&(0,i.jsx)(Q,{resultsPerPage:m}),o.length>0&&(0,i.jsx)(z.Z,{columnsCount:3,gutter:"0.5rem",children:x}),c&&(0,i.jsx)(I.z,{variant:"plain",onClick:d,mt:4,isLoading:l,children:(0,i.jsx)(g.cC,{id:"yQ2kGp"})}),0===o.length&&!l&&(0,i.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,i.jsx)(R.x,{style:{color:"gray"},children:(0,i.jsx)(g.cC,{id:"SihI8q",values:{searchQuery:t}})})}),u&&(0,i.jsxs)(T.b,{status:"error",children:[(0,i.jsx)(O.z,{}),(0,i.jsx)(g.cC,{id:"Fkbzp8"})]})]})},Q=e=>{let{resultsPerPage:t}=e;return(0,i.jsx)(M.M,{columns:3,spacing:2,children:H()(t).map((e,t)=>(0,i.jsx)(N.P,{children:(0,i.jsx)(L.O,{height:"120px",borderRadius:"base"})},t))})},X=(0,x.E)(n.h),Z=e=>{let{currentImageUrl:t,updateAttributes:r,defaultQuery:n,randomQueries:x,provider:v,enablePagination:A=!0,enableSearch:k=!0,enableLicenseFilter:_=!1,resultsPerPage:P=18,resizeThumbnails:E=!1}=e,[U,I]=(0,y.useState)(""),{search:R,isLoading:T,loadMore:O,canLoadMore:M,hasError:N,imageResults:L,resetResults:D,searchQuery:H,license:z,updateLicense:G}=S({provider:v,enablePagination:A,resultsPerPage:P});(0,w.vm)(()=>{if(n){I(n),R(n);return}I(""),x?R(b()(x)||""):D()},[n,x,D,R],[v]);let W=(0,y.useCallback)(()=>{let e=b()(x);e&&R(e)},[x,R]),F=(0,w.Kt)(R,1e3);return(0,i.jsxs)(a.g,{spacing:4,align:"stretch",translate:"no",children:[(0,i.jsx)(h.kH,{placement:"top",label:(0,i.jsx)(g.cC,{id:"wj1Zq8"}),isDisabled:k,children:(0,i.jsxs)(o.B,{size:"md",children:[(0,i.jsx)(l.Z,{pointerEvents:"none",children:(0,i.jsx)(s.xu,{color:"gray.400",children:(0,i.jsx)(p.G,{icon:m.wn1})})}),(0,i.jsx)(c.I,{isDisabled:!k,placeholder:f.ag._({id:"6YBjmV"}),value:U,onChange:e=>{I(e.target.value),F(e.target.value)},"data-testid":"image-search-input"}),x&&(0,i.jsx)(l.x,{children:(0,i.jsx)(h.kH,{placement:"top",label:(0,i.jsx)(g.cC,{id:"OVjfHO"}),children:(0,i.jsx)(X,{icon:(0,i.jsx)(p.G,{icon:m.RJo}),"aria-label":"Surprise me",variant:"ghost",onClick:W,size:"sm",whileTap:{y:"-5px"},onMouseDown:j.br})})})]})}),_&&(0,i.jsxs)(d.NI,{children:[(0,i.jsx)(u.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(g.cC,{id:"6TSHCF"})}),(0,i.jsx)(C.A,{value:z,onChange:G})]}),H&&(0,i.jsx)(K,{updateAttributes:r,currentImageUrl:t,searchQuery:H,provider:v,imageResults:L,isLoading:T,canLoadMore:M,loadMore:O,hasError:N,resultsPerPage:P,resizeThumbnails:E})]})}},13833:function(e,t,r){"use strict";r.d(t,{v:function(){return k},ft:function(){return A},QW:function(){return w}});var i=r(52322),n=r(17993),a=r(74409),o=r(29117),l=r(85573),s=r(62614),c=r(47443),d=r(52929),u=r(5879),m=r(87254),p=r(2784),h=r(91994),g=r(47968),f=r(87205),x=r(15425);let v={thumbnail:void 0,embed:void 0,meta:void 0,sourceUrl:void 0},b=async e=>{var t,r,i,n,a,o;let l=await fetch("https://cdn.iframe.ly/api/iframely/?url=".concat(encodeURIComponent(e),"&key=").concat("a68bac8b6624d46b6d0ba46e5b3f8971","&iframe=1&omit_script=1")),s=await l.json();if(console.debug("[Iframely]",s),s.error)return Promise.reject(s);let{html:c,links:d,meta:u}=s,{icon:m,player:p,reader:h,app:g,thumbnail:f}=d,x=p||h||g,v=x?x.filter(e=>"text/html"===e.type&&e.href)[0]||x[0]:null,b=u&&!u.xframe&&(!u.csp||!u.csp.includes("frame-ancestors"));return{sourceUrl:(null==u?void 0:u.canonical)||e,embed:v?{url:v.href,html:c,height:null===(t=v.media)||void 0===t?void 0:t.height,width:(null===(r=v.media)||void 0===r?void 0:r.width)||(null===(i=v.media)||void 0===i?void 0:i["max-width"]),aspectRatio:null===(n=v.media)||void 0===n?void 0:n["aspect-ratio"]}:b?{url:e}:void 0,meta:{...u||{},icon:m&&m[0]?m[0].href:void 0},thumbnail:f&&f[0]?{src:f[0].href,height:null===(a=f[0].media)||void 0===a?void 0:a.height,width:null===(o=f[0].media)||void 0===o?void 0:o.width}:void 0}};var y=r(2090),j=r(74071);let w=e=>{try{var t,r;let i=new DOMParser().parseFromString(e,"text/html");return(null===(t=i.querySelector("iframe"))||void 0===t?void 0:t.src)||(null===(r=i.querySelector("blockquote"))||void 0===r?void 0:r.cite)||!1}catch(e){return!1}},C=async e=>{var t,r,i,n,a;let o,l;try{o=await b(e)}catch(t){if(403===t.status||404===t.status||415===t.status){for(let{key:t,urlRegex:r,canEmbedPrivate:i,label:n,defaultDisplayStyle:a}of j.yC)if(r&&e.match(r)&&i)return{...v,source:t,proxy:!1,url:e,meta:{title:m.ag._({id:"SuoEIZ"})},sourceUrl:e,displayStyle:a||"inline"}}throw Error("Code: ".concat(t.status,". Message: ").concat(t.error))}if(!o)throw Error("No link metadata found");for(let{key:e,urlRegex:t}of j.yC)if(t&&(null===(n=o.sourceUrl)||void 0===n?void 0:n.match(t))){l=e;break}if(l){let e=j.zX[l];return{...v,...o,source:l,proxy:!1,url:(null===(a=o.embed)||void 0===a?void 0:a.url)||o.sourceUrl,displayStyle:e.defaultDisplayStyle}}return(null===(t=o.meta)||void 0===t?void 0:t.medium)=="audio"||(null===(r=o.meta)||void 0===r?void 0:r.medium)==="video"?{...v,...o,source:j.wj.key}:(null===(i=o.embed)||void 0===i?void 0:i.url)?{...v,...o,source:j.Hw.key,proxy:!1,url:o.embed.url}:{...v,...o,source:j.Hw.key,proxy:!0,url:e}},A=async(e,t)=>await C(e).then(e=>(t(e),e)).then(e=>_(e,t)),k=e=>{let{currentUrl:t="",updateAttributes:r,handleSubmit:h,handleDataSubmit:g,placeholder:v,noHeader:b}=e,[y,j]=(0,p.useState)(t||""),[C,k]=(0,p.useState)(),_=y!==t;(0,p.useEffect)(()=>{t&&j(t)},[t]),(0,p.useEffect)(()=>{k(void 0)},[y]);let P=(0,p.useCallback)(e=>{if(0===e.indexOf("data:")){if(g){try{(0,f.v9)(e)}catch(e){k(m.ag._({id:"YqH0TR"}));return}return g(e)}return void k(m.ag._({id:"YqH0TR"}))}let t=w(e);if(t&&(e=t),!(0,x.kr)(e)&&(e="https://"+e,!(0,x.jv)(e))){k(m.ag._({id:"YqH0TR"}));return}return h?h(e):r?A(e,r).catch(e=>{console.error("Error fetching URL",e),k(m.ag._({id:"dZyJFB"}))}):void console.error("No submit handler provided")},[g,h,r]),E=(0,p.useCallback)(()=>{P(y.trim())},[P,y]),S=(0,p.useCallback)(e=>{if(t)return;let r=e.clipboardData.getData("text/plain");P(r.trim())},[t,P]);return(0,i.jsxs)(n.g,{align:"flex-start",spacing:4,w:"100%",children:[!b&&(0,i.jsx)(a.X,{size:"md",children:(0,i.jsx)(u.cC,{id:"D89ve+"})}),(0,i.jsxs)(o.U,{align:"flex-start",spacing:2,w:"100%",children:[(0,i.jsx)(l.I,{placeholder:v,onKeyDown:e=>{"Enter"===e.key&&E()},onPaste:S,value:y,onChange:e=>j(e.target.value),flex:1,"data-testid":"url-input"}),(0,i.jsx)(s.z,{onClick:E,isDisabled:!_,children:(0,i.jsx)(u.cC,{id:"4pSxwB"})})]}),C&&(0,i.jsxs)(c.b,{status:"error",children:[(0,i.jsx)(d.z,{}),C]})]})},_=async(e,t)=>{let r=(0,h.bh)().getState(),i=(0,g.KV)(r);if(!i){console.error("[uploadIframelyThumbnail] No orgId specified, bailing");return}let n={...e.thumbnail},a=n.src;if(a&&void 0!==n)try{await (0,y.WY)(a,i,{onUploadComplete:e=>(n&&(n.src=e.src,n.width=e.meta.width,n.height=e.meta.height,t({thumbnail:n})),Promise.resolve()),onOriginalFileUpload:e=>(n&&(n.src=e.src,n.width=e.meta.width,n.height=e.meta.height,t({thumbnail:n})),Promise.resolve()),onUploadFailed:e=>(console.error("[iframely] Thumbnail upload error: ",e),Promise.reject())},"iframelyThumbnail")}catch(e){console.error("[iframely] Thumbnail upload error: ",e)}}},26433:function(e,t,r){"use strict";r.d(t,{u:function(){return h}});var i=r(52322),n=r(47443),a=r(52929),o=r(17993),l=r(38035),s=r(82655),c=r(49929),d=r(87254),u=r(91710),m=r(2784),p=r(2090);r(65331),r(41779),r(24472);let h=e=>{let{orgId:t,uploadType:r,editType:h,onUploadStart:g,onUploadSuccess:f,onUploadFailed:x,dropHereText:v=d.ag._({id:"mgPDos",values:{0:"%{browse}"}}),customHeight:b,customFontSize:y,maxFilesAllowed:j=1,templateId:w,sx:C,tipText:A}=e,[k,_]=(0,m.useState)(""),P=(0,m.useMemo)(()=>p.ND.createUppyInstance(t,{onUploadStart:g,onOriginalFileUpload:f,onUploadComplete:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];f(...t),P.cancelAll()},onUploadFailed:x,setErrorMessage:_},h,j,r,w),[t,h,r,j,w,f,g,x]);return(0,i.jsxs)(o.g,{align:"stretch",spacing:4,fontSize:y||void 0,sx:C,pos:"relative",children:[(0,i.jsx)(l.k,{pos:"absolute",inset:0,justify:"center",align:"center",zIndex:1,pointerEvents:"none",mt:-14,color:"gray.600",children:(0,i.jsx)(c.G,{icon:s.PLj,size:"3x"})}),(0,i.jsx)(u.v0,{width:"100%",height:b||"100%",note:A||void 0,uppy:P,locale:{strings:{dropHereOr:v,browse:d.ag._({id:"wZ9s+A"})}}}),k&&(0,i.jsxs)(n.b,{status:"error",children:[(0,i.jsx)(a.z,{}),k]})]})}},99787:function(e,t,r){"use strict";r.d(t,{$5:function(){return a.$5},BF:function(){return a.BF},BM:function(){return a.BM},BR:function(){return a.BR},Bo:function(){return a.Bo},DN:function(){return a.DN},DU:function(){return a.DU},Ds:function(){return a.Ds},F6:function(){return a.F6},FH:function(){return a.FH},Ge:function(){return i.Ge},Hw:function(){return a.Hw},LE:function(){return a.LE},N$:function(){return i.N$},ND:function(){return i.ND},NX:function(){return a.NX},Q0:function(){return a.Q0},QR:function(){return a.QR},QT:function(){return a.QT},TQ:function(){return a.TQ},VI:function(){return a.VI},Vy:function(){return a.Vy},WY:function(){return i.WY},bD:function(){return a.bD},bO:function(){return a.bO},cT:function(){return i.cT},eK:function(){return a.eK},f0:function(){return a.f0},hq:function(){return a.hq},iL:function(){return a.iL},in:function(){return a.in},jS:function(){return a.jS},jt:function(){return a.jt},oC:function(){return a.oC},p7:function(){return a.p7},pK:function(){return i.pK},qz:function(){return a.qz},ud:function(){return a.ud},un:function(){return n.u},w4:function(){return a.w4},wj:function(){return a.wj},zX:function(){return a.zX},zs:function(){return a.zs}});var i=r(2090);r(53345);var n=r(26433),a=r(74071)},97794:function(e,t,r){"use strict";r.d(t,{N:function(){return eG},r:function(){return ez}});var i=r(54933),n=r(87254),a=r(52322),o=r(17993),l=r(47443),s=r(52929),c=r(74444),d=r(29117),u=r(77533),m=r(28535),p=r(49259),h=r(87436),g=r(95897),f=r(74409),x=r(89511),v=r(11121),b=r(62614),y=r(42946),j=r(49929),w=r(5879),C=r(2784),A=r(11355),k=r(31490),_=r(14764),P=r(85420),E=r(97763),S=r(42111),U=r(38035),I=r(75641),R=r(30523),T=r(75009),O=r(78071),M=r(42822),N=r(67109),L=r(75320),D=r(87205),H=r(82642),z=r(70065),G=r(55478),W=r(75768),F=r(32899),B=r(92850),q=r(26468),V=r(22226),K=r(94523),Q=r(66028);let X=e=>{var t,r;let{currentAttributes:i,onDeleteImage:o,...l}=e,s=(0,z.p)(),c=(0,C.useCallback)(async e=>{try{let t=document.createElement("a");t.href=e,t.target="_blank",t.download="image.jpg",document.body.appendChild(t),t.click(),document.body.removeChild(t),s({title:(0,a.jsx)(w.cC,{id:"BZBUfX"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}catch(e){console.error(e),s({title:(0,a.jsx)(w.cC,{id:"4+qb0c"}),description:(0,a.jsx)(w.cC,{id:"XLO6fp"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[s]),{isOpen:d,onOpen:u,onClose:p}=(0,G.q)();return(0,a.jsxs)(W.h,{size:"sm",...l,children:[(0,a.jsx)(K.kH,{label:(0,a.jsx)(w.cC,{id:"niRN2H"}),placement:"top",children:(0,a.jsx)(F.h,{"aria-label":"download image",borderWidth:"1px",icon:(0,a.jsx)(j.G,{icon:y.fuY}),onClick:()=>c(null!==(t=i.src)&&void 0!==t?t:"")})}),(0,a.jsx)(K.kH,{label:(0,a.jsx)(w.cC,{id:"GpbSs9"}),placement:"top",children:(0,a.jsx)(F.h,{"aria-label":"zoom in",borderWidth:"1px",icon:(0,a.jsx)(j.G,{icon:y.q9v}),onClick:e=>{e.stopPropagation(),u()}})}),d&&(0,a.jsxs)(B.u_,{isOpen:d,size:"6xl",onClose:p,isCentered:!0,children:[(0,a.jsx)(q.Z,{bg:"blackAlpha.900"}),(0,a.jsxs)(V.h,{width:"fit-content",children:[(0,a.jsx)(m.xu,{position:"absolute",right:2,top:2,zIndex:"toast",contentEditable:!1,suppressContentEditableWarning:!0,children:(0,a.jsx)(F.h,{"aria-label":n.ag._({id:"8qZ5De"}),colorScheme:"gray",size:"md",onClick:p,onMouseDown:Q.br,icon:(0,a.jsx)(H.T,{})})}),(0,a.jsx)(T.E,{src:null!==(r=i.src)&&void 0!==r?r:"",objectFit:"contain",rounded:"lg",maxH:"90vh",maxW:"90vw"})]})]}),(0,a.jsx)(K.kH,{label:(0,a.jsx)(w.cC,{id:"GBe7fh"}),placement:"top",children:(0,a.jsx)(F.h,{"aria-label":"delete image",color:"red.500",borderWidth:"1px",icon:(0,a.jsx)(j.G,{icon:y.XAH}),onClick:e=>{var t;e.stopPropagation(),o(null!==(t=i.savedMediaId)&&void 0!==t?t:"")}})})]})},Z=(0,C.memo)(e=>{let{image:t,isSelected:r,onImageClick:i,resizeThumbnail:n,isDeleting:o,onDeleteImage:l,h:s,hideQuickActions:c}=e,[d,u]=(0,C.useState)(!0),p=n?(0,D.SN)(t.attrs.src,D.Iv,t.attrs.meta):t.attrs.src,{ref:h,width:g}=(0,L.h)();return(0,a.jsx)(R.P,{children:(0,a.jsxs)(b.z,{borderRadius:"base",display:"block",variant:"ghost",opacity:1,width:"100%",ref:h,height:"100%",minHeight:"0",textAlign:"left",pos:"relative",overflow:"hidden",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>i(t),sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},isDisabled:o,"data-testid":"image-search-grid-item",role:"group",children:[(0,a.jsx)(T.E,{w:"100%",h:s||"100%",src:p,borderRadius:"base",objectFit:"cover",onLoad:()=>u(!1)}),!d&&(0,a.jsx)(O.p,{in:r,children:(0,a.jsx)(m.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,a.jsx)(M.M,{h:"100%",w:"100%",children:(0,a.jsx)(j.G,{icon:y.LEp})})})}),!r&&g>=125&&!c&&(0,a.jsx)(m.xu,{position:"absolute",bottom:-2,left:"50%",transform:"translate(-50%, -50%)",display:"none",_groupHover:{display:"block"},children:(0,a.jsx)(X,{currentAttributes:t.attrs,onDeleteImage:()=>l(t.id)})}),!t.attrs.src&&(0,a.jsx)(R.P,{width:"100%",children:(0,a.jsx)(N.O,{height:"80px",borderRadius:"base"})})]})},t.id)});Z.displayName="AIImageHistoryItem";let Y=e=>{let{onSelectImage:t,savedMediaId:r,imageResults:i,onDeleteImage:n,deletingId:o,canLoadMore:l,isLoadingMore:s,loadMore:c,resizeThumbnails:d}=e,u=i.map(e=>(0,a.jsx)(Z,{image:e,isSelected:e.id===r,isDeleting:e.id===o,onDeleteImage:n,onImageClick:t,resizeThumbnail:d},e.id));return(0,a.jsxs)(U.k,{direction:"column",align:"stretch",children:[(0,a.jsx)(I.Z,{columnsCount:3,gutter:"0.5rem",children:u}),l&&(0,a.jsx)(b.z,{variant:"plain",onClick:c,mt:4,isLoading:s,children:(0,a.jsx)(w.cC,{id:"yQ2kGp"})})]})};var J=r(35183),$=r(10625),ee=r(67046),et=r(99058),er=r(44035),ei=r(39237),en=r(13413);let ea={square:y.pL1,portrait:y.j8N,landscape:y.r9b},eo=(0,C.memo)(e=>{let{value:t,setValue:r,isDisabled:i,model:n}=e,o=(0,en.mw)(n),l=(null==o?void 0:o.aspectRatios)||{},s=l[t]||en.vr;return(0,a.jsx)(J.NI,{children:(0,a.jsxs)($.v,{children:[(0,a.jsx)(ee.j,{as:b.z,variant:"plain",isDisabled:i,w:"100%",textAlign:"left",justifyContent:"space-between",rightIcon:(0,a.jsx)(j.G,{icon:y.ptq}),boxShadow:"none",children:(0,a.jsxs)(d.U,{spacing:2,children:[(0,a.jsx)(U.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,a.jsx)(j.G,{icon:ea[s.key],fixedWidth:!0})}),(0,a.jsx)(u.x,{as:"span",flex:1,children:s.name()})]})}),(0,a.jsx)(et.q,{minWidth:"240px",maxH:"290px",overflowY:"auto",overflowX:"hidden",children:(0,a.jsx)(er._,{value:t,type:"radio",onChange:e=>{r(e)},children:Object.values(l).map(e=>(0,a.jsx)(ei.i,{value:e.key,children:(0,a.jsxs)(d.U,{spacing:2,children:[(0,a.jsx)(U.k,{width:"24px",height:"24px",align:"center",justify:"center",children:(0,a.jsx)(j.G,{icon:ea[e.key],fixedWidth:!0})}),(0,a.jsx)(u.x,{as:"span",flex:1,children:e.name()})]})},e.key))})})]})})});eo.displayName="AspectRatioSelect";var el=r(9766),es=r(62327),ec=r(62801),ed=r(67475),eu=r(91994),em=r(25566),ep=r(31181),eh=r(31866),eg=r(93441),ef=r(29494),ex=r(20437),ev=r(63176);let eb=e=>{let{enabled:t,isGenerating:r,negativePrompt:i,setNegativePrompt:n,count:l,setCount:s,steps:c,setSteps:u,cfgScale:m,setCfgScale:p,model:h}=e,{usesNegativePrompt:g,usesSteps:x,usesCFG:v}={usesNegativePrompt:"stable-diffusion-xl-v1-0"===h||h.startsWith("imagen"),usesSteps:"stable-diffusion-xl-v1-0"===h,usesCFG:"stable-diffusion-xl-v1-0"===h||h.startsWith("imagen")};return(0,a.jsxs)(o.g,{align:"stretch",spacing:3,children:[g&&(0,a.jsxs)(o.g,{align:"stretch",spacing:2,children:[(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"cwxGog"})}),(0,a.jsx)(ef.g,{isDisabled:!t||r,value:i,onChange:e=>{n(e.target.value)},rows:3})]}),(0,a.jsxs)(ex.M,{columns:2,gap:2,children:[(0,a.jsxs)(d.U,{children:[(0,a.jsx)(K.kH,{placement:"top",label:(0,a.jsx)(w.cC,{id:"pKdwsO",values:{MAX_COUNT:es.k8,DEFAULT_COUNT:es.yD}}),children:(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"wBMjJ2"})})}),(0,a.jsx)(ev.Y2,{defaultValue:l,value:l||"",min:1,max:es.k8,isDisabled:!t||r,onChange:(e,t)=>{s(t)},children:(0,a.jsx)(ev.zu,{paddingInline:2})})]}),x&&(0,a.jsxs)(d.U,{children:[(0,a.jsx)(K.kH,{placement:"top",label:(0,a.jsx)(w.cC,{id:"5H4Pmz",values:{MAX_STEPS:es.Ac,DEFAULT_STEPS:es.sK}}),children:(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"A9onc2"})})}),(0,a.jsx)(ev.Y2,{defaultValue:c,value:c||"",min:1,max:es.Ac,isDisabled:!t||r,onChange:(e,t)=>{u(t)},children:(0,a.jsx)(ev.zu,{paddingInline:2})})]}),v&&(0,a.jsxs)(d.U,{children:[(0,a.jsx)(K.kH,{placement:"top",label:(0,a.jsx)(w.cC,{id:"Hcpaw+",values:{MAX_CFG_SCALE:es.mG,DEFAULT_CFG_SCALE:es.MI}}),children:(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"hsYa9i"})})}),(0,a.jsx)(ev.Y2,{defaultValue:m,value:m||"",min:1,max:es.mG,isDisabled:!t||r,onChange:(e,t)=>{p(t)},children:(0,a.jsx)(ev.zu,{paddingInline:2})})]})]})]})};var ey=r(4425),ej=r(43297);let ew=(0,C.memo)(e=>{var t;let{attrs:r,onRateImage:i}=e,l=null===(t=r.aiParams)||void 0===t?void 0:t.interactionId,[s,c]=(0,C.useState)(null),[d,m]=(0,C.useState)(""),[p,h]=(0,C.useState)("rate");(0,C.useEffect)(()=>{r.savedMediaId&&(h("rate"),m(""),c(null))},[r.savedMediaId]);let g=(0,C.useCallback)(e=>{c(e),h("feedback"),i(e)},[i]),f=(0,C.useCallback)(()=>{h("thanks"),setTimeout(()=>{h("hide"),m(""),c(null)},3e3)},[]),x=(0,C.useCallback)(()=>{f()},[f]),v=(0,C.useCallback)(()=>{var e;(null===(e=r.aiParams)||void 0===e?void 0:e.interactionId)&&((0,k.Lt)({feedback:d,aiParams:r.aiParams,imageUrl:r.src,interactionId:r.aiParams.interactionId}),f())},[r,d,f]);return l&&"hide"!==p?"thanks"===p?(0,a.jsx)(U.k,{position:"absolute",zIndex:1,bottom:1,p:2,right:1,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,a.jsx)(u.x,{fontSize:"xs",children:(0,a.jsx)(w.cC,{id:"yOrM5+"})})}):(0,a.jsxs)(o.g,{position:"absolute",bottom:2,zIndex:"sticky",right:2,align:"flex-end",spacing:1,children:["feedback"===p&&(0,a.jsx)(U.k,{p:2,bg:"white",borderRadius:"md",borderWidth:"1px",borderColor:"gray.200",shadow:"xl",children:(0,a.jsxs)(ej.K,{alignItems:"flex-end",children:[(0,a.jsx)(ef.g,{value:d,onChange:e=>m(e.target.value),fontSize:"xs",placeholder:n.ag._({id:"eYeGuP"}),p:1,px:2,borderRadius:"0"}),(0,a.jsxs)(W.h,{size:"xs",children:[(0,a.jsx)(b.z,{variant:"ghost",onClick:x,children:(0,a.jsx)(w.cC,{id:"6Uau97"})}),(0,a.jsx)(b.z,{variant:"solid",onClick:v,children:(0,a.jsx)(w.cC,{id:"1m41/U"})})]})]})}),(0,a.jsxs)(W.h,{size:"sm",children:[(0,a.jsx)(K.kH,{label:(0,a.jsx)(w.cC,{id:"kR82DG"}),placement:"top",children:(0,a.jsx)(F.h,{"aria-label":"thumbs down",color:"poor"===s?"red.600":void 0,borderWidth:"1px",borderColor:"poor"===s?"red.600":"transparent",bg:"poor"===s?"red.100":void 0,_hover:{bg:"poor"===s?"red.200":"red.100"},icon:(0,a.jsx)(j.G,{icon:y.bam}),onClick:()=>{g("poor")}})}),(0,a.jsx)(K.kH,{label:(0,a.jsx)(w.cC,{id:"y1GvbS"}),placement:"top",children:(0,a.jsx)(F.h,{"aria-label":"thumbs up",color:"good"===s?"green.600":void 0,borderWidth:"1px",borderColor:"good"===s?"green.600":"transparent",bg:"good"===s?"green.100":void 0,_hover:{bg:"good"===s?"green.200":"green.100"},icon:(0,a.jsx)(j.G,{icon:y.u8Q}),onClick:()=>{g("good")}})})]})]}):null});ew.displayName="AIImageRating";var eC=r(715);let eA=e=>{let{imagesMatchingInteractionId:t,currentAttributes:r,isGenerating:i,selectedSavedMediaId:n,deletingId:o,hasRatedImage:l,deleteImage:s,selectImage:c,onRateImage:d}=e,[u,m]=(0,C.useState)({wA:0,hA:0,wBCD:0,hBCD:0}),p=(0,C.useMemo)(()=>(0,ey.n)(),[]),{ref:h,width:g}=(0,L.h)(),f=t.length<=1||e_([...t.map(e=>e.attrs),r]);return(0,eg.vm)(()=>{var e,i,n,a;if((null==r?void 0:null===(e=r.meta)||void 0===e?void 0:e.width)&&(null==r?void 0:null===(i=r.meta)||void 0===i?void 0:i.height)){let e=ek({vpWidth:g||624,gap:8,ratioW:(null==r?void 0:null===(n=r.meta)||void 0===n?void 0:n.width)||1024,ratioH:(null==r?void 0:null===(a=r.meta)||void 0===a?void 0:a.height)||1024,thumbCount:t.length});(Math.abs(e.wA-u.wA)>=p||Math.abs(e.hA-u.hA)>=p||Math.abs(e.wBCD-u.wBCD)>=p||Math.abs(e.hBCD-u.hBCD)>=p)&&m(e)}},[r,t,g,u,p],[r,t,g]),(0,a.jsxs)(U.k,{dir:"row",w:"100%",ref:h,overflow:"hidden",alignItems:"center",justifyContent:"center",gap:"".concat(8,"px"),children:[(0,a.jsxs)(U.k,{justifyContent:"center",position:"relative",overflow:"hidden",h:u.hA,w:"".concat(100-(f?0:100/3),"%"),children:[i?(0,a.jsx)(N.O,{w:"100%",h:u.hA}):(0,a.jsx)(T.E,{h:"100%",w:"100%",objectFit:"cover",src:r.src||void 0,fallbackSrc:r.tempUrl||void 0,alt:"",borderRadius:"md"}),!i&&(0,a.jsx)(X,{currentAttributes:r,onDeleteImage:s,position:"absolute",bottom:2,zIndex:"sticky",left:2}),!l(r)&&!i&&(0,a.jsx)(ew,{attrs:r,onRateImage:d})]}),!f&&(0,a.jsx)(U.k,{alignItems:"center",justifyContent:"center",direction:"column",overflow:"hidden",gap:"".concat(8,"px"),h:u.hA,borderRadius:"base",children:i?Array.from({length:3},(e,t)=>(0,a.jsx)(N.O,{w:u.wBCD,h:u.hBCD})):(0,a.jsx)(a.Fragment,{children:t.slice(0,3).map(e=>(0,a.jsx)(Z,{image:e,isSelected:e.id===n,isDeleting:e.id===o,onDeleteImage:s,onImageClick:c,resizeThumbnail:!0,h:"".concat(u.hBCD,"px"),hideQuickActions:!0},e.id))})})]})},ek=e=>{let{vpWidth:t,gap:r,ratioW:i,ratioH:n,thumbCount:a}=e,o=i/n,l=o>eC.sl.square?eC.sl.landscape:o<eC.sl.square?eC.sl.portrait:eC.sl.square,s=l===eC.sl.portrait?.6:.7,c=t*s,d=c/l;return{wA:Math.floor(c),hA:Math.floor(d),wBCD:Math.floor(t-c-r),hBCD:Math.floor((d-r*(a-1))/a)}},e_=e=>{var t,r;let i=new Set(e.map(e=>{var i,n;return(null!==(t=null==e?void 0:null===(i=e.meta)||void 0===i?void 0:i.width)&&void 0!==t?t:1)/(null!==(r=null==e?void 0:null===(n=e.meta)||void 0===n?void 0:n.height)&&void 0!==r?r:1)}));return i.size>1};var eP=r(81540),eE=r(94199);let eS=e=>{let{isEnhancingPrompt:t,isGenerating:r,runEnhancePrompt:i}=e;return(0,a.jsx)(d.U,{position:"absolute",bottom:2,right:2,children:(0,a.jsx)(K.kH,{placement:"top",label:(0,a.jsx)(w.cC,{id:"LwcIt2",values:{GAMMA_PROPER_NOUN:eE.N6}}),children:(0,a.jsx)(b.z,{variant:"ghost",rightIcon:(0,a.jsx)(j.G,{icon:y.qHV}),isLoading:t,isDisabled:r,"aria-label":n.ag._({id:"eoAiXB"}),onClick:i,zIndex:"sticky",size:"sm",loadingText:n.ag._({id:"6xU0OU"}),spinner:(0,a.jsx)(eP.$,{size:"sm",right:2,alignSelf:"flex-end"}),spinnerPlacement:"end",children:(0,a.jsx)(w.cC,{id:"Uehxdq"})})})})};var eU=r(9883),eI=r(54326),eR=r(2338),eT=r(97217),eO=r(50250),eM=r(82713),eN=r(14274);let eL=async e=>{let{imageUrl:t,upscaleFactor:r}=e,i="".concat(eN.v.API_HOST||"https://api.gamma.app","/media/images/upscale"),n=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:t,upscaleFactor:r})});if(!n.ok){let e=await n.json(),t="".concat(e.error,": ").concat(e.message);throw Error(t,e)}let a=await n.json();return a.data},eD=e=>{let{canGenerate:t,isEnhancingPrompt:r,images:i,canLoadMore:l,isLoadingMore:s,loadMore:c}=e,{isOpen:m,onOpen:p,onClose:h}=(0,G.q)(),[g,x]=(0,C.useState)([]),[v,y]=(0,C.useState)(2),[j,A]=(0,C.useState)(!1),[k,_]=(0,C.useState)(!1),P=(0,z.p)(),E=(0,C.useCallback)(e=>{x(t=>t.includes(e.id)?t.filter(t=>t!==e.id):[...t,e.id])},[]),S=(0,C.useCallback)(()=>{k?x([]):x(i.map(e=>e.id)),_(!k)},[i,k]),U=(0,C.useCallback)(async e=>{let t=atob(e),r=Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);let i=new Uint8Array(r),n=new Blob([i],{type:"image/jpeg"}),a=window.URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download="image.jpg",o.click()},[]),I=(0,C.useCallback)(async()=>{A(!0);let e=i.filter(e=>g.includes(e.id)),t=1;await Promise.all(e.map(async e=>{let r=await eL({imageUrl:e.attrs.src,upscaleFactor:v});U(r),P({title:"Image ".concat(t," downloaded"),status:"success",duration:3e3,isClosable:!0}),t++})),A(!1)},[i,g,v,A,P,U]);return(0,a.jsxs)(o.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(b.z,{variant:"outline",isDisabled:!t||r,onClick:p,px:12,children:(0,a.jsx)(w.cC,{id:"DN9OsQ"})}),(0,a.jsxs)(B.u_,{isOpen:m,onClose:h,size:"2xl",scrollBehavior:"inside",children:[(0,a.jsx)(q.Z,{}),(0,a.jsxs)(V.h,{children:[(0,a.jsx)(eI.x,{children:(0,a.jsx)(w.cC,{id:"Ud0Jjb"})}),(0,a.jsx)(eR.o,{}),(0,a.jsxs)(eT.f,{children:[(0,a.jsx)(ex.M,{gap:2,columns:5,children:i.map(e=>(0,a.jsx)(eH,{image:e,isSelected:g.includes(e.id),onSelectImage:E},e.id))}),l&&(0,a.jsx)(b.z,{variant:"plain",onClick:c,mt:4,isLoading:s,children:(0,a.jsx)(w.cC,{id:"yQ2kGp"})})]}),(0,a.jsxs)(eO.m,{justifyContent:"space-between",children:[(0,a.jsxs)(d.U,{spacing:2,children:[(0,a.jsx)(eM.X,{checked:k,onChange:S}),(0,a.jsx)(u.x,{size:"sm",children:(0,a.jsx)(w.cC,{id:"wgNoIs"})})]}),(0,a.jsxs)(d.U,{spacing:4,children:[(0,a.jsx)(K.kH,{placement:"top",label:(0,a.jsx)(w.cC,{id:"UiTWCg"}),children:(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"yT2JRA"})})}),(0,a.jsx)(b.z,{variant:"solid",mr:3,onClick:I,isLoading:j,isDisabled:0===g.length,children:n.ag._({id:"0/T2Xv",values:{0:g.length}})})]})]})]})]})]})},eH=e=>{let{image:t,isSelected:r,onSelectImage:i}=e,n=(0,D.Ly)(t.attrs.src);return(0,a.jsx)(R.P,{children:(0,a.jsx)(b.z,{borderRadius:"base",display:"block",variant:"ghost",width:"100%",opacity:1,height:"100px",textAlign:"left",pos:"relative",p:0,_hover:{shadow:"outline"},_active:{shadow:"outline"},transition:"box-shadow .2s ease",cursor:"pointer",onClick:()=>i(t),backgroundImage:n,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center",sx:{_focusVisible:{".attribution-container":{opacity:1}},_hover:{".attribution-container":{opacity:1}}},"data-testid":"image-search-grid-item",role:"group",children:(0,a.jsx)(O.p,{in:r,children:(0,a.jsx)(m.xu,{pointerEvents:"none",color:"white",pos:"absolute",inset:0,bg:"rgba(0,0,0,.5)",borderRadius:"base",children:(0,a.jsx)(M.M,{h:"100%",w:"100%",children:(0,a.jsx)(j.G,{icon:y.LEp})})})})})},t.id)},ez="image.ai-generated",eG={key:ez,Panel:e=>{var t,r;let{currentAttributes:i,updateAttributes:U,editor:I,contextualTheme:R}=e,{hasEnoughCreditsToGenerateImage:T}=(0,E.qO)(),O=(0,S.ye)("aiGeneratedImagesAdvancedOptions"),{prompt:M,addPrompt:N,promptPageInfo:L,nextPrompt:H,prevPrompt:z,count:G,setCount:W,model:F,setModel:B,stylePreset:q,setStylePreset:V,stylePrompt:K,setStylePrompt:Q,stylePresetOptions:X,getTargetPresetData:Z,findThemeNameFromStylePrompt:J,aspectRatio:$,setAspectRatio:ee,imageGenerateConfig:et,loadImageAiParams:er,resetImageAiParams:ei,isPromptDirty:en,negativePrompt:ea,setNegativePrompt:ef,steps:ex,setSteps:ev,cfgScale:ey,setCfgScale:ej}=(0,es.Xc)(R,I,i),ew=en(i),ek=(0,eh.b)(I),e_=(0,C.useCallback)(e=>{er(e.attrs.aiParams,"select"),U({tempUrl:(0,D.SN)(e.attrs.src,D.Iv,e.attrs.meta),...e.attrs}),I&&ek(null==I?void 0:I.state.selection.from)},[I,er,ek,U]),{generate:eP,isGenerating:eE,isLoadingMore:eI,hasError:eR,imageResults:eT,loadMore:eO,canLoadMore:eM,errorMessage:eN,deleteImage:eL,deletingId:eH}=(0,el.Qo)({selectImage:e_}),ez=(null==i?void 0:i.source)==="image.ai-generated"&&!!(null==i?void 0:i.src),eG=null==i?void 0:i.savedMediaId,eW=ez?null==i?void 0:i.src:void 0;(0,eg.vm)(()=>{var e;I&&(ez&&(null===(e=i.aiParams)||void 0===e?void 0:e.prompt)&&er(i.aiParams,"load"),!ez&&i.query&&N(i.query,"load"))},[N,i.aiParams,i.query,ez,I,er],[i.aiParams,i.query]);let eF=(0,C.useRef)(null);(0,C.useEffect)(()=>{setTimeout(()=>{var e;null===(e=eF.current)||void 0===e||e.focus()},200)},[]);let eB=(0,eu.CG)(ep.lH),eq="Logo for ".concat(null==eB?void 0:eB.name),{isEnhancing:eV,setIsEnhancing:eK,runEnhanceImagePrompt:eQ}=(0,el.ec)({editor:I,prompt:(null==I?void 0:I.isSiteNavbarEditor)?eq:M,stylePrompt:K,addPrompt:N});(0,C.useEffect)(()=>{!eW&&I&&eQ()},[I]);let eX=(0,C.useCallback)(e=>{var t,r;let{stylePreset:i,model:n}=et,{stylePrompt:a}=(null==I?void 0:null===(r=I.getAttributes("document"))||void 0===r?void 0:null===(t=r.aiOptions)||void 0===t?void 0:t.imageOptions)||{},o={stylePreset:i,model:n,...e?{stylePrompt:e}:{stylePrompt:a}};null==I||I.commands.updateNestedAttributesAtPos(0,{aiOptions:{imageOptions:o}})},[I,et]),eZ=(0,C.useCallback)(async()=>{if(!eV&&!eE){if(0===M.trim().length){let e=await eQ();try{eP({...et,prompt:e||""}),eX()}catch(e){console.error("Error enhancing AI image prompt",e)}finally{eK(!1)}}else eP(et),eX(et.stylePreset===eC.si.Custom?et.stylePrompt:void 0)}},[eP,et,eV,eE,M,eQ,eK,eX]),eY=(0,E.YO)(eZ,"generateImage",em.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES),eJ=(0,C.useCallback)(e=>{"Enter"===e.key&&e.metaKey&&(e.preventDefault(),eY()),e.stopPropagation()},[eY]),{saveImageRating:e$,hasRatedImage:e0}=(0,el.S8)(),e1=(0,C.useCallback)(e=>{var t;(null===(t=i.aiParams)||void 0===t?void 0:t.interactionId)&&((0,k.Io)({rating:e,aiParams:i.aiParams,imageUrl:i.src,interactionId:i.aiParams.interactionId}),e$(i,e))},[]),e2=!!(null===(t=i.aiParams)||void 0===t?void 0:t.interactionId),{savedMedia:e4}=(0,el.Rq)((null===(r=i.aiParams)||void 0===r?void 0:r.interactionId)||"",i.query||"");return(0,a.jsxs)(o.g,{spacing:4,align:"stretch",translate:"no",children:[eW&&(0,a.jsx)(eA,{imagesMatchingInteractionId:e2?e4:[],currentAttributes:i,isGenerating:eE,selectedSavedMediaId:eG||void 0,deletingId:eH,hasRatedImage:e0,deleteImage:eL,selectImage:e_,onRateImage:e1}),eR&&(0,a.jsxs)(l.b,{status:"error",flexDirection:"row",alignItems:"start",justifyContent:"start",borderRadius:"md",children:[(0,a.jsx)(s.z,{}),(0,a.jsx)(c.X,{children:eN})]}),(0,a.jsxs)(o.g,{align:"stretch",spacing:4,children:[(0,a.jsxs)(o.g,{align:"stretch",spacing:1,children:[(0,a.jsx)(d.U,{position:"relative",align:"center",justify:"space-between",children:(0,a.jsx)(d.U,{children:(0,a.jsx)(u.x,{fontSize:"sm",fontWeight:"semibold",color:eE?"gray.500":"",children:(0,a.jsx)(w.cC,{id:"W9uQXX"})})})}),(0,a.jsxs)(m.xu,{position:"relative",children:[(0,a.jsx)(A.o,{ref:eF,isDisabled:eE,placeholder:eV?"":n.ag._({id:"6RfNWb"}),onKeyDown:eJ,value:M,onChange:e=>{N(e.target.value,"update")},"data-testid":"image-search-input",rows:5,initialHeight:"65px",bottomSpacing:35}),I&&(0,a.jsx)(eS,{isEnhancingPrompt:eV,isGenerating:eE,runEnhancePrompt:eQ})]}),L.total>1&&(0,a.jsx)(ec.O,{alignSelf:"end",promptPageInfo:L,nextPrompt:H,prevPrompt:z,isDisabled:eE||eV})]}),(0,a.jsxs)(o.g,{align:"stretch",gap:4,display:"flex",children:[(0,a.jsxs)(o.g,{align:"stretch",children:[(0,a.jsx)(u.x,{fontSize:"sm",fontWeight:"semibold",color:eE?"gray.500":"",children:(0,a.jsx)(w.cC,{id:"1CalO6"})}),(0,a.jsx)(ed.A,{stylePreset:q,stylePrompt:K,setStylePrompt:Q,setStylePreset:V,presetOptions:X,isDisabled:eE,contextualTheme:R,findThemeNameFromStylePrompt:J,getTargetPresetData:Z})]}),(0,a.jsxs)(d.U,{w:"100%",children:[(0,a.jsxs)(o.g,{w:"100%",align:"stretch",children:[(0,a.jsx)(u.x,{fontSize:"sm",fontWeight:"semibold",color:eE?"gray.500":"",children:(0,a.jsx)(w.cC,{id:"iKM2jY"})}),(0,a.jsx)(eo,{value:$,setValue:ee,model:F,isDisabled:eE})]}),(0,a.jsxs)(o.g,{w:"100%",align:"stretch",children:[(0,a.jsx)(u.x,{fontSize:"sm",fontWeight:"semibold",color:eE?"gray.500":"",children:(0,a.jsx)(w.cC,{id:"scu3wk"})}),F&&(0,a.jsx)(eU.q,{value:F,setValue:e=>{B(e)},isDisabled:eE})]})]})]}),O&&(0,a.jsx)(p.U,{allowToggle:!0,children:(0,a.jsxs)(h.Q,{children:[(0,a.jsxs)(g.K,{children:[(0,a.jsx)(m.xu,{as:"span",flex:"1",textAlign:"left",children:(0,a.jsx)(f.X,{size:"sm",children:(0,a.jsx)(w.cC,{id:"sxkWRg"})})}),(0,a.jsx)(x.X,{})]}),(0,a.jsx)(v.H,{pb:4,children:(0,a.jsx)(eb,{enabled:!0,isGenerating:eE,negativePrompt:ea,setNegativePrompt:ef,count:G,setCount:W,steps:ex,setSteps:ev,cfgScale:ey,setCfgScale:ej,model:F})})]})}),(0,a.jsxs)(o.g,{spacing:1,align:"stretch",children:[(0,a.jsxs)(b.z,{variant:"solid",isLoading:eE,isDisabled:eV,onClick:eY,px:12,children:[(0,a.jsx)(w.cC,{id:"OSaxlZ"}),(0,a.jsx)(P.J,{type:"generateImage",position:"absolute",right:4})]}),!!I&&(0,a.jsx)(b.z,{onClick:()=>ei(i),leftIcon:(0,a.jsx)(j.G,{icon:y.XnX}),isDisabled:!ew||eE,sx:{opacity:ew?1:.5,transition:"opacity 0.2s ease-in-out",_hover:{color:ew?"trueblue.500":""}},children:(0,a.jsx)(w.cC,{id:"HbpJRz"})}),(0,a.jsx)(_.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:em.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_IMAGES}),O&&(0,a.jsx)(eD,{canGenerate:T,isEnhancingPrompt:eV,images:eT,canLoadMore:eM,isLoadingMore:eI,loadMore:eO})]})]}),(0,a.jsx)(Y,{onSelectImage:e_,savedMediaId:eG,imageResults:eT,onDeleteImage:eL,deletingId:eH,isLoading:eE,canLoadMore:eM,isLoadingMore:eI,loadMore:eO,resultsPerPage:G,resizeThumbnails:!0})]})},checkDisabled:()=>!1,label:()=>n.ag._({id:"O+LXs1"}),icon:i.ddb,description:()=>n.ag._({id:"yXA4hx"}),keywords:["ai","image","illustration","graphics","generate"],resizeToFit:!0,badge:()=>n.ag._({id:"isRobC"})}},13773:function(e,t,r){"use strict";r.d(t,{x:function(){return i}});let i={minWidth:1800,maxWidth:5e3,count:10}},68430:function(e,t,r){"use strict";r.d(t,{E:function(){return w}});var i=r(52322),n=r(70065),a=r(17993),o=r(74409),l=r(77533),s=r(75009),c=r(62614),d=r(85573),u=r(29494),m=r(29117),p=r(5879),h=r(87254),g=r(26433),f=r(16494),x=r(91994),v=r(28553),b=r(47968),y=r(87205),j=r(13833);let w=e=>{let{updateAttributes:t,currentAttributes:r}=e,{sourceUrl:w,meta:C,thumbnail:A}=r,k=(0,x.CG)(b.KV),_=(0,n.p)(),P=async()=>{w&&await (0,j.ft)(w,t).catch(e=>{console.error("[EMBED METADATA] Error restoring preview defaults",e),_({title:h.ag._({id:"cgB+pO",values:{0:e.error}}),status:"error",isClosable:!0,position:"top"})})};return(0,i.jsxs)(a.g,{pt:4,align:"stretch",spacing:4,children:[(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(o.X,{size:"md",children:(0,i.jsx)(p.cC,{id:"qbzc6p"})}),(0,i.jsx)(l.x,{fontSize:"sm",color:"gray.600",children:(0,i.jsx)(p.cC,{id:"D9R1mI"})})]}),(0,i.jsxs)(a.g,{align:"stretch",p:4,borderRadius:"lg",border:"1px solid var(--chakra-colors-blue-500)",bg:"gray.100",spacing:4,children:[(null==A?void 0:A.showPlaceholder)?(0,i.jsx)(v.k3,{hasUploadError:(null==A?void 0:A.uploadStatus)===f.D.Error,isUploading:(null==A?void 0:A.uploadStatus)===f.D.Uploading}):A?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.E,{src:A.src||A.tempUrl||"",alt:(null==C?void 0:C.title)||"",ignoreFallback:!0,borderRadius:"md"}),(0,i.jsx)(c.z,{isDisabled:A.uploadStatus===f.D.Uploading,onClick:()=>{t({thumbnail:void 0})},children:(0,i.jsx)(p.cC,{id:"YFcW0s"})})]}):k&&(0,i.jsx)(g.u,{onUploadStart:e=>{let{file:r,tempUrl:i}=e;r.type&&(0,y.Ns)(r.type)?t({thumbnail:{uploadStatus:f.D.Uploading,showPlaceholder:!0,tempUrl:null}}):t({thumbnail:{tempUrl:i,uploadStatus:f.D.Uploading,showPlaceholder:!1}})},onUploadSuccess:e=>{let{src:r}=e;t({thumbnail:{src:r}})},onUploadFailed:e=>{console.error("[EMBED METADATA] Error uploading thumbnail image",e),t({thumbnail:{uploadStatus:f.D.Error,showPlaceholder:!0,tempUrl:null}})},orgId:k||"",uploadType:"image",editType:"icon",dropHereText:h.ag._({id:"yxTfZB",values:{0:"%{browse}"}}),customHeight:"200px",customFontSize:"sm"}),(0,i.jsxs)(a.g,{mt:2,align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(p.cC,{id:"MHrjPM"})}),(0,i.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.title)||"",placeholder:h.ag._({id:"bTzMt5"}),onChange:e=>{t({meta:{...C,title:e.target.value}})},"data-testid":"title-input"})]}),(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(p.cC,{id:"Nu4oKW"})}),(0,i.jsx)(u.g,{bg:"white",rows:4,value:(null==C?void 0:C.description)||"",placeholder:h.ag._({id:"2VBqT4"}),onChange:e=>{t({meta:{...C,description:e.target.value}})}})]}),(0,i.jsxs)(a.g,{align:"stretch",children:[(0,i.jsx)(l.x,{children:(0,i.jsx)(p.cC,{id:"On0aF2"})}),(0,i.jsxs)(m.U,{children:[(null==C?void 0:C.icon)&&(0,i.jsx)(s.E,{src:C.icon,h:"1.5em",borderRadius:"sm"}),(0,i.jsx)(d.I,{bg:"white",value:(null==C?void 0:C.site)||"",placeholder:h.ag._({id:"SmWcKR"}),onChange:e=>{t({meta:{...r.meta,site:e.target.value}})}})]})]})]}),(0,i.jsx)(c.z,{onClick:P,children:(0,i.jsx)(p.cC,{id:"Z00hdC"})})]})}},69396:function(e,t,r){"use strict";r.d(t,{j:function(){return G}});var i=r(52322),n=r(82655),a=r(87254),o=r(30523),l=r(62614),s=r(28535),c=r(38035),d=r(20437),u=r(77533),m=r(47443),p=r(52929),h=r(82729),g=r(67109),f=r(32899),x=r(17993),v=r(74105),b=r(20816),y=r(85573),j=r(42946),w=r(49929),C=r(94523),A=r(5879),k=r(38045),_=r(2689),P=r.n(_),E=r(4742),S=r.n(E),U=r(2784),I=r(66028),R=r(93441),T=r(87205);let O="60px",M=(0,U.memo)(e=>{let{icon:t,isSelected:r,onIconClick:n}=e;return(0,i.jsx)(o.P,{height:O,width:O,children:(0,i.jsx)(l.z,{borderRadius:"base",bgColor:r?"trueblue.100":void 0,color:"gray.900",display:"block",width:"100%",height:"100%",maxH:"100%",pos:"relative",_hover:{bgColor:r?"trueblue.100":"trueblue.50"},_active:{bgColor:"trueblue.100"},transition:"box-shadow .2s ease",variant:"ghost",cursor:"pointer",onClick:()=>n(t),"data-testid":"icon-search-grid-item",children:(0,i.jsx)(s.xu,{height:"100%",maxH:"100%",sx:{svg:{width:"100%",height:"100%"}},dangerouslySetInnerHTML:{__html:t.html}})})},t.id)});M.displayName="ImageSearchGridItem";let N=e=>{let{searchQuery:t,currentAttributes:r,updateAttributes:n}=e,[a,o]=(0,U.useState)([]),[l,h]=(0,U.useState)(!0),[g,f]=(0,U.useState)(!1),[x,v]=(0,U.useState)(1),b=(0,U.useCallback)(async e=>{let r="/api/icons/search?count=".concat(100,"&query=").concat(t,"&page=").concat(e);h(!0),f(!1);try{var i;let e=await fetch(r,{credentials:"include"}),t=await e.json();if(h(!1),!((null==t?void 0:null===(i=t.data)||void 0===i?void 0:i.length)>=0))throw Error(t);o(t.data)}catch(e){f(!0),h(!1),console.error("(caught) [ImageSearchGrid] fetchResults:",e)}},[t]);(0,U.useEffect)(()=>{o([]),v(1),b(1)},[t,b]),(0,U.useCallback)(()=>{b(x+1),v(x+1)},[b,x]);let y=null==r?void 0:r.src,j=(0,U.useCallback)(async e=>{await (0,T.GN)(e.src),n({src:e.src,tempUrl:y,meta:{height:e.height,width:e.width},providerMeta:{name:e.provider,id:e.id},query:t})},[t,n,y]),w=a.map((e,t)=>{var n,a;let o=e.id===(null==r?void 0:null===(n=r.providerMeta)||void 0===n?void 0:n.id)&&e.provider===(null==r?void 0:null===(a=r.providerMeta)||void 0===a?void 0:a.name);return(0,i.jsx)(M,{provider:e.provider,icon:e,isSelected:o,onIconClick:j},t)});return(0,i.jsxs)(c.k,{direction:"column",align:"stretch",children:[(0,i.jsxs)(d.M,{gap:2,columns:{base:4,"2xl":6},children:[w,l&&(0,i.jsx)(L,{})]}),!1,0===a.length&&!l&&(0,i.jsx)(s.xu,{width:"100%",textAlign:"center",padding:"10px",children:(0,i.jsx)(u.x,{style:{color:"gray"},children:(0,i.jsx)(A.cC,{id:"2AY48J",values:{searchQuery:t}})})}),g&&(0,i.jsxs)(m.b,{status:"error",children:[(0,i.jsx)(p.z,{}),(0,i.jsx)(A.cC,{id:"5hlcZg"})]})]})},L=()=>(0,i.jsx)(i.Fragment,{children:P()(100).map((e,t)=>(0,i.jsx)(o.P,{height:O,children:(0,i.jsx)(h.o,{ratio:1,children:(0,i.jsx)(g.O,{borderRadius:"base"})})},t))}),D=(0,k.E)(f.h),H=e=>{let{currentAttributes:t,updateAttributes:r,defaultQuery:n="",randomQueries:o}=e,[l,c]=(0,U.useState)(n),[d,u]=(0,U.useState)("");(0,U.useEffect)(()=>{u(n),c(n)},[n]);let m=(0,U.useCallback)(()=>{let e=S()(o);for(;e===l;)e=S()(o);e&&(c(e),u(""))},[o,l]),p=(0,R.Kt)(c,500);return(0,i.jsxs)(x.g,{spacing:4,align:"stretch",translate:"no",children:[(0,i.jsxs)(v.B,{size:"md",children:[(0,i.jsx)(b.Z,{pointerEvents:"none",children:(0,i.jsx)(s.xu,{color:"gray.400",children:(0,i.jsx)(w.G,{icon:j.wn1})})}),(0,i.jsx)(y.I,{placeholder:l||a.ag._({id:"oMAM3/"}),value:d,onChange:e=>{u(e.target.value),p(e.target.value)},"data-testid":"image-search-input"}),o&&(0,i.jsx)(b.x,{children:(0,i.jsx)(C.kH,{placement:"top",label:(0,i.jsx)(A.cC,{id:"OVjfHO"}),children:(0,i.jsx)(D,{icon:(0,i.jsx)(w.G,{icon:j.RJo}),"aria-label":a.ag._({id:"OVjfHO"}),variant:"ghost",onClick:m,size:"sm",whileTap:{y:"-5px"},onMouseDown:I.br})})})]}),(0,i.jsx)(N,{currentAttributes:t,updateAttributes:r,searchQuery:l||""})]})},z=["animals","arrows","business","party","nature","food"],G={key:"image.icon",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(H,{updateAttributes:t,currentAttributes:r,currentIconUrl:r.src,defaultQuery:r.query||"",randomQueries:z})},label:()=>a.ag._({id:"mcmuCe"}),icon:n.ocQ,keywords:["icon","symbol","picture"]}},61185:function(e,t,r){"use strict";r.d(t,{Q:function(){return a},s:function(){return o}});var i=r(97794),n=r(83230);let a={bing:"image.bing",giphy:"image.giphy",google:"image.google",web:"image.web",unsplash:"image.unsplash",lexica:"image.lexica",aiGenerated:"image.ai-generated",fontawesome:"image.icon"},o={web:n.Q,aiGenerated:i.N}},83230:function(e,t,r){"use strict";r.d(t,{Q:function(){return s}});var i=r(52322),n=r(82655),a=r(87254),o=r(53345);let l=["modern office workspace","sustainable energy landscape","vintage automobile collection","future technology concept","tropical beach paradise","urban street art","classical music instruments","mountain hiking adventure","wildlife safari","space exploration visuals","ancient ruins aerial view","deep sea marine life","high fashion runway event","robotics in manufacturing","gourmet food presentation","winter sports scene","abstract art paintings","traditional village festival","modern architecture landmarks","digital art fantasy worlds"],s={key:"image.web",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,i.jsx)(o.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enablePagination:!0,enableLicenseFilter:!0,provider:"web",resultsPerPage:48,randomQueries:l,resizeThumbnails:!0})},featureFlag:"webImageSearch",label:()=>a.ag._({id:"coorYU"}),icon:n.Y$T,keywords:["image","photo","pic"],description:()=>a.ag._({id:"NMbF1d"}),resizeToFit:!0}},74071:function(e,t,r){"use strict";r.d(t,{NX:function(){return i.N},LE:function(){return b},BF:function(){return y},jt:function(){return A},QR:function(){return k},in:function(){return B},wj:function(){return q},DN:function(){return V},VI:function(){return Z},$5:function(){return ei},bO:function(){return eo},F6:function(){return el},bD:function(){return es},eK:function(){return ed},jS:function(){return eu.j},f0:function(){return em},FH:function(){return ep},ud:function(){return eg},Vy:function(){return ex},yC:function(){return eK},zX:function(){return eQ},DU:function(){return ev},Bo:function(){return eb},BR:function(){return ey},TQ:function(){return ew},Q0:function(){return eI},p7:function(){return eR},w4:function(){return eT},zs:function(){return eM},iL:function(){return eN},Ds:function(){return eL},hq:function(){return ez},oC:function(){return eG},QT:function(){return eW.Q},Hw:function(){return eB},BM:function(){return eq},qz:function(){return eV}});var i=r(97794),n=r(52322),a=r(82655),o=r(5879),l=r(87254),s=r(17993),c=r(66855),d=r(68430),u=r(13833);let m=e=>{let{editor:t,updateAttributes:r,currentAttributes:i,urlPlaceholder:a,embedTip:o}=e,l=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:l,updateAttributes:r,placeholder:a||"https://..."}),o,l&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})};var p=r(29705),h=r(47443),g=r(52929),f=r(74444),x=r(11082);let v=e=>{let{guideLink:t,extraMessage:r,providerName:i}=e;return(0,n.jsxs)(h.b,{status:"info",children:[(0,n.jsx)(g.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"qBttXb",values:{providerName:i,extraMessage:r},components:{0:(0,n.jsx)(x.r,{href:t,textDecoration:"underline",isExternal:!0}),1:(0,n.jsx)(p.h,{mx:"2px"})}})})]})},b={label:()=>"Airtable",key:"embed.airtable",description:()=>l.ag._({id:"KlL5LU"}),icon:a.u7T,image:{src:"/_next/static/media/airtable.e403549a.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/airtable.com/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://airtable.com/...",embedTip:(0,n.jsx)(v,{guideLink:"https://support.airtable.com/hc/en-us/articles/217846478-Embedding-a-view-or-base",providerName:"Airtable",extraMessage:(0,n.jsx)(o.cC,{id:"gsZDsS"})})}),categories:["app","form"],defaultDisplayStyle:"inline",inlineInteractive:!0,iframeOptions:{allowPopups:!0},keywords:["airtable","database","spreadsheet","table"]},y={label:()=>"Amplitude",key:"embed.amplitude",keywords:["amplitude","analytics"],description:()=>l.ag._({id:"wa1wV8"}),icon:a.Ma4,image:{src:"/_next/static/media/amplitude.5828f141.svg",height:64,width:64,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/analytics.amplitude.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,n.jsx)(v,{guideLink:"https://help.amplitude.com/hc/en-us/articles/235717108-Share-charts-dashboards-and-notebooks-with-stakeholders-outside-your-company#generate-embed-code-for-your-content",extraMessage:(0,n.jsx)(o.cC,{id:"NDM+Av"}),providerName:"Amplitude"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})}};var j=r(97143),w=r(13773),C=r(53345);let A={key:"image.bing",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",enableSearch:!0,enablePagination:!1,provider:"bing",resultsPerPage:w.x.count})},label:()=>l.ag._({id:"2V6hMo"}),icon:j.hVS,image:{src:"/_next/static/media/bing.0f94cfbe.svg",height:1024,width:678,blurWidth:0,blurHeight:0},keywords:["image","photo","bing","pic"]},k={label:()=>"Calendly",key:"embed.calendly",description:()=>l.ag._({id:"grPhlY"}),icon:a.fT7,image:{src:"/_next/static/media/calendly.d1a57857.svg",height:150,width:150,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/calendly.com/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://calendly.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["calendly","meeting","schedule","appointment"]};var _=r(81540),P=r(75009),E=r(77533),S=r(62614),U=r(74409),I=r(91994),R=r(29318),T=r(28553),O=r(47968),M=r(39278),N=r(87205),L=r(26433),D=r(37164),H=r(2784),z=r(97253),G=r(2090),W=r(16494);let F=e=>{let{updateAttributes:t,editType:r,editor:i,source:n}=e,a=(0,I.CG)(O.KV),{currentWorkspace:o}=(0,M.SE)(),{orgId:l,templateId:s}=(0,R.Ds)(a||(null==o?void 0:o.id),r),c=(0,H.useRef)(null),d=(0,H.useCallback)(e=>{let{tempUrl:r,attributes:i}=e;t({uploadStatus:W.D.Uploading,showPlaceholder:!1,tempUrl:r,src:null,...i}),c.current=r},[t]),u=(0,H.useCallback)((e,a)=>{let o=c.current,l=o||a;if(l){if("node"!==r||!i){t({...(0,z.gM)({result:e,isError:!1}),source:n});return}(0,z.Ns)(i,l,e),c.current=null}},[i,r,t,n]),m=(0,H.useCallback)(e=>{if(!c.current||!i){t((0,z.gM)({isError:!0}));return}(0,z.f8)(i,c.current,e)},[i,t]),p=(0,H.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromDataURL - No orgId!");return}d({tempUrl:e});try{let t=(0,N.v9)(e,"image");(0,G.cT)(t,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:m},r,void 0,s)}catch(e){m()}},[r,l,m,d,u,s]),h=(0,H.useCallback)(e=>{if(!l){console.error("[CustomImagePanel] saveImageFromUrl - No orgId!");return}d({tempUrl:e});try{(0,G.WY)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:m},r,s)}catch(e){m()}},[r,l,m,d,u,s]),g=(0,H.useCallback)(async e=>{let{blob:t,attributes:i}=e;if(!l){console.error("[QRCodePanel] saveImageFromDataBlob - No orgId!");return}let n=window.URL.createObjectURL(t);d({tempUrl:n,attributes:i});try{let e=(0,N.GS)({blob:t,filename:"image",ext:"svg"});return await (0,G.cT)(e,l,{onUploadComplete:u,onOriginalFileUpload:u,onUploadFailed:m},r)}catch(e){m()}},[r,l,m,d,u]),f=(0,H.useCallback)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t({uploadStatus:W.D.Uploading,showPlaceholder:!0,tempUrl:e,src:null})},[t]),x=(0,H.useCallback)(e=>{let{file:t,tempUrl:r}=e;if(t.type&&(0,N.Ns)(t.type)){let e="HEIC_tempId_".concat((0,D.x0)());f(e),d({tempUrl:e})}else d({tempUrl:r})},[f,d]),v=(0,H.useCallback)(()=>{t((0,z.gM)({isError:!0}))},[t]);return{setTempUrl:d,setUploadedImage:u,saveImageFromDataURL:p,saveImageFromUrl:h,saveImageFromDataBlob:g,onUploadStart:x,setUploadFailed:v}},B={label:()=>l.ag._({id:"bk8Zu0"}),key:"image.custom",description:()=>l.ag._({id:"RPwTMJ"}),icon:a.VmB,Panel:e=>{let{editor:t,editType:r,updateAttributes:i,currentAttributes:a,resetToPlaceholder:c}=e,{onUploadStart:d,setUploadedImage:m,saveImageFromUrl:p,saveImageFromDataURL:x,setUploadFailed:v}=F({updateAttributes:i,editor:t,editType:r,source:B.key}),b=(0,I.CG)(O.KV),{currentWorkspace:y}=(0,M.SE)(),{orgId:j,templateId:w,useStandardThemeBucket:C}=(0,R.Ds)(b||(null==y?void 0:y.id),r),{src:A,tempUrl:k,meta:D,name:H,showPlaceholder:z,uploadStatus:G}=a,q=A?(0,N.aN)(A,{width:500}):void 0,V=!!(A||k||z);return V?(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[G===W.D.Uploading&&(0,n.jsxs)(h.b,{status:"info",size:"sm",children:[(0,n.jsx)(g.z,{as:_.$,w:5,h:5}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"MEDU34"})})]}),z?(0,n.jsx)(T.k3,{isUploading:G===W.D.Uploading,hasUploadError:G===W.D.Error,width:"100%"}):(0,n.jsx)(P.E,{src:q||k,alt:"",ignoreFallback:!0,borderRadius:"md"}),D&&D.width&&D.height&&(0,n.jsxs)(E.x,{children:[D.width,"\xd7",D.height,"px"]}),H&&(0,n.jsx)(E.x,{children:H}),(0,n.jsx)(S.z,{onClick:c,mt:2,w:"100%",children:(0,n.jsx)(o.cC,{id:"HUPV+K"})})]}):(0,n.jsxs)(s.g,{align:"stretch",spacing:4,children:[C&&(0,n.jsxs)(h.b,{status:"warning",size:"sm",children:[(0,n.jsx)(g.z,{}),(0,n.jsx)(f.X,{children:"[Admin] Theme images will be uploaded to production theme_images bucket"})]}),G===W.D.Error&&(0,n.jsxs)(h.b,{status:"error",size:"sm",children:[(0,n.jsx)(g.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"GymiXM"})})]}),(0,n.jsx)(U.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"IagCbF"})}),(0,n.jsx)(u.v,{currentUrl:"",placeholder:l.ag._({id:"jurEzE"}),handleSubmit:p,handleDataSubmit:x,noHeader:!0}),(0,n.jsx)(U.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"ONWvwQ"})}),j&&(0,n.jsx)(L.u,{onUploadSuccess:m,onUploadStart:d,onUploadFailed:v,orgId:j,uploadType:"image",editType:r,templateId:w,tipText:l.ag._({id:"x4Ts51"})})]})},keywords:["image","upload"],resizeToFit:!0},q={label:()=>l.ag._({id:"0+gRao"}),description:()=>l.ag._({id:"w31i/H"}),key:"video.custom",icon:a.sl_,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["video","audio","podcast","embed"],iframeOptions:{allowPopups:!0},preferHtml:!0},V={label:()=>"Figma",key:"embed.figma",icon:j.uWT,keywords:["design","prototype","wireframe","figjam","whiteboard"],description:()=>l.ag._({id:"riUMyL"}),image:{src:"/_next/static/media/figma.14e7d0c1.svg",height:2500,width:1667,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.figma.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.figma.com/file/..."}),(0,n.jsx)(v,{guideLink:"https://help.figma.com/hc/en-us/articles/360039827134-Embed-files-and-prototypes",providerName:"Figma/FigJam"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,rewriteEmbedUrl:e=>e.includes("figma.com/embed")?e:"https://www.figma.com/embed?embed_host=share&url=".concat(encodeURIComponent(e))};var K=r(20342),Q=r(15425),X=r(78462);let Z={label:()=>"Gamma embed",key:"embed.gamma",icon:a.m6E,keywords:["embed"],description:()=>l.ag._({id:"wNr9uT"}),image:K.Z,urlRegex:/^https?:\/\/(www\.|staging\.)?gamma.app/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://gamma.app/docs/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,rewriteEmbedUrl:e=>{if((0,X.LQ)(e))return e;let t=(0,X.Wp)(e),r=(0,Q.Gr)(e)||"gamma.app";return"https://".concat(r,"/embed/").concat(t)}};var Y=r(38035),J=r(28535),$=r(42946),ee=r(38421),et=r.n(ee);let er=["funny","surprise","hooray","welcome","excited","nope","fail","sad","cry","angry","teamwork","cats","dogs","high five"],ei={key:"image.giphy",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:er,provider:"giphy"}),(0,n.jsx)(Y.k,{width:"100%",justify:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(J.xu,{maxW:"150px",children:(0,n.jsx)(et(),{src:"/images/powered-by-giphy.png",width:"150",height:"17",alt:"Powered by GIPHY"})})})]})},label:()=>l.ag._({id:"E435oC",values:{GIPHY_PROPER_NOUN:"GIPHY"}}),description:()=>l.ag._({id:"QmULXm"}),icon:$.qt5,image:{src:"/_next/static/media/giphy.2d92c9c6.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},keywords:["gif","animation","animated","giphy"],resizeToFit:!0};var en=r(94199),ea=r(77620);let eo={label:()=>"Google Drive",key:"embed.gdrive",description:()=>l.ag._({id:"1q3pN1",values:{SHEETS_PROPER_NOUN:"Sheets",DOCS_PROPER_NOUN:"Docs",SLIDES_PROPER_NOUN:"Slides",GAMMA_ARTIFACT_PROPER_NOUN:en.Yc}}),icon:j.Uuo,image:ea.Z,urlRegex:/^https?:\/\/docs.google.com\//,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://docs.google.com/...",embedTip:(0,n.jsx)(v,{guideLink:"https://support.google.com/docs/answer/183965?hl=en&co=GENIE.Platform%3DDesktop#zippy=%2Cedit-embedded-spreadsheets%2Cembed-a-document-spreadsheet-or-presentation",extraMessage:(0,n.jsx)(o.cC,{id:"G6PCHK",values:{GAMMA_ARTIFACT_PROPER_NOUN:en.Yc}}),providerName:"Google Sheets, Docs, or Slides"})}),canEmbedPrivate:!0,rewriteEmbedUrl:e=>{if(e.includes("/presentation/")){let t=new URL(e.replace("/edit","/preview"));return t.searchParams.set("rm","minimal"),t.toString()}{let t=new URL(e.replace("/preview","/edit"));return t.toString()}},keywords:["docs","sheet","slide","gdrive","document"]},el={label:()=>"Google Form",key:"embed.google.form",description:()=>l.ag._({id:"sgbNf4"}),icon:j.Uuo,image:{src:"/_next/static/media/google-form.c5494f4d.svg",height:66,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/docs.google.com\/forms/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://docs.google.com/forms/..."}),canEmbedPrivate:!0,keywords:["google form","form","survey","questionnaire"],defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},es={key:"image.google",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query||"",provider:"google"})})},label:()=>l.ag._({id:"h2JWN5"}),icon:j.xYR,image:{src:"/_next/static/media/google-image.5d5a5835.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["image","photo"]};var ec=r(1978);let ed={key:"color.gradient",Panel:e=>{let{updateAttributes:t,currentAttributes:r,isDark:i}=e;return(0,n.jsx)(ec._,{value:r,updateValue:t,isDark:i})},label:()=>l.ag._({id:"/S8bMP"}),description:()=>l.ag._({id:"/XRwS6"}),icon:a.e2K,keywords:["gradient","color","mesh"]};var eu=r(69396);let em={label:()=>"Instagram",key:"embed.instagram",icon:j.Zzi,image:{src:"/_next/static/media/instagram.d0a61bd7.svg",height:132,width:132,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.instagram.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.instagram.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},inlineInteractive:!0,preferHtml:!0,keywords:["instagram","insta","social"],minWidth:"328px"},ep={label:()=>"Jotform",key:"embed.jotform",description:()=>l.ag._({id:"7yLOnm"}),icon:a.Lc0,image:{src:"/_next/static/media/jotform.0a55e4a9.svg",height:334,width:304,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/form\.jotform\.com/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://form.jotform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["jotform","form","survey","questionnaire"]},eh=["wallpaper","textures","background","nature","gradient","relax","sky","water","pattern","abstract"],eg={key:"image.lexica",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:eh,provider:"lexica",enablePagination:!1}),(0,n.jsx)(J.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(E.x,{fontSize:"sm",color:"gray.500",children:(0,n.jsx)(o.cC,{id:"rbDrRg",components:{0:(0,n.jsx)(x.r,{href:"https://lexica.art",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},featureFlag:"lexicaImageSearch",label:()=>l.ag._({id:"cSVX+F"}),description:()=>l.ag._({id:"RdyK6U"}),image:{src:"/_next/static/media/lexica.8699ff3f.png",height:48,width:48,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVMaXG5ubm/v782NjYNDQ0UFBSvr6+mpqa0tLSoMQVUAAAACXRSTlMAr+A2F1nir64H2A2bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAI0lEQVR4nGNgYGBmZoAAdjYog5GJMIODjYUFzGBmZWVlYQAACCkATB93BkwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},keywords:["ai","lexica","stable diffusion","generated","photo","photography","image"]},ef=H.lazy(()=>Promise.all([r.e(7576),r.e(5053)]).then(r.bind(r,35053)).then(e=>({default:e.LoomPanel}))),ex={key:"video.loom",Panel:e=>(0,n.jsx)(H.Suspense,{fallback:(0,n.jsx)(_.$,{size:"md"}),children:(0,n.jsx)(ef,{...e})}),label:()=>l.ag._({id:"yrPgHm"}),description:()=>l.ag._({id:"NMTPSf"}),icon:a.IyC,image:{src:"/_next/static/media/loom.a033778e.svg",height:190,width:190,blurWidth:0,blurHeight:0},urlRegex:/^https:\/\/www.loom.com/,rewriteEmbedUrl:e=>{if(!e.includes("/embed/"))return e;let t=new URL(e);return t.searchParams.set("hideEmbedTopBar","true"),t.toString()},keywords:["video","recording","loom","screen"]},ev={key:"embed.microsoft.office",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),(0,n.jsx)(v,{guideLink:"https://support.microsoft.com/en-us/office/embed-a-word-document-in-your-blog-0faa0253-2751-44bf-8486-ea7837fe7db1",extraMessage:(0,n.jsx)(o.cC,{id:"2csAkv"}),providerName:"Word, Excel, or PowerPoint"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"Office 365",description:()=>l.ag._({id:"cbRq5v",values:{MICROSOFT_PROPER_NOUN:"Microsoft",WORD_PROPER_NOUN:"Word",POWERPOINT_PROPER_NOUN:"PowerPoint",EXCEL_PROPER_NOUN:"Excel",ONENOTE_PROPER_NOUN:"OneNote"}}),icon:j.hVS,image:{src:"/_next/static/media/office-365.868363a8.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/.*\.sharepoint\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},rewriteEmbedUrl:e=>{let t=new URL(e.replace("/:p:/r","").replace("/doc2.aspx","/Doc.aspx"));return t.searchParams.set("action","embedview"),t.searchParams.delete("mobileredirect"),t.toString()},keywords:["word","excel","powerpoint","office","microsoft","msoffice"]},eb={label:()=>l.ag._({id:"yA1Sb+",values:{MIRO_PROPER_NOUN:"Miro"}}),key:"embed.miro",icon:a.EhQ,description:()=>l.ag._({id:"Px3dYF"}),image:{src:"/_next/static/media/miro.78878247.svg",height:2500,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/miro.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.miro.com/..."}),(0,n.jsx)(v,{guideLink:"https://help.miro.com/hc/en-us/articles/360016335640-How-to-embed-editable-boards-into-websites",providerName:"Miro"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},canEmbedPrivate:!0,forcePreviewOnMobile:!0,iframeOptions:{allowPopups:!0},keywords:["whiteboard","workshop","brainstorm","miro"],rewriteEmbedUrl:e=>e.includes("/embed/")||e.includes("/live-embed/")?e:e.replace("/board/","/embed/")},ey={label:()=>l.ag._({id:"1r0gtu"}),key:"embed.pdf",description:()=>l.ag._({id:"2SUV3x"}),icon:a.gSj,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,I.CG)(O.KV),m=(0,c.NW)(i),p=(0,H.useRef)(null),h=(0,H.useCallback)(e=>{let{tempUrl:t,file:i}=e,n=(0,z.B0)(i);p.current=t,r({...n,url:t})},[r]),g=(0,H.useCallback)((e,r)=>{if(!t)return;let i=p.current,n=i||r;(0,z.QZ)(t,n,e),p.current=null},[t]);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:m,updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),m&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i}),(0,n.jsx)(U.X,{size:"md",children:(0,n.jsx)(o.cC,{id:"ONWvwQ"})}),a&&(0,n.jsx)(L.u,{onUploadSuccess:g,onUploadStart:h,orgId:a,uploadType:"doc",dropHereText:l.ag._({id:"ByKyau",values:{0:"%{browse}"}}),editType:"node"})]})},urlRegex:/\.pdf$/,image:{src:"/_next/static/media/PDF_icon.2d280cf2.svg",height:512,width:512,blurWidth:0,blurHeight:0},featureFlag:"uploadPDF",iframeOptions:{noSandbox:!0},downloadable:!0,keywords:["pdf","doc","upload","file"]};var ej=r(54933);let ew={key:"embed.microsoft.powerbi",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:l.ag._({id:"ORLSr4"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"PowerBI",image:{src:"/_next/static/media/powerbi.94baf198.svg",height:630,width:630,blurWidth:0,blurHeight:0},icon:ej.t5N,urlRegex:/^https?:\/\/app\.powerbi\.com\//,canEmbedPrivate:!0,iframeOptions:{allowPopups:!0},keywords:["microsoft","powerbi"]};var eC=r(35183),eA=r(97166),ek=r(74105),e_=r(85573),eP=r(43297),eE=r(94523);let eS=e=>eU(e),eU=async e=>{let t=(await r.e(3542).then(r.t.bind(r,63542,23))).default,{text:i,foregroundColor:n,backgroundColor:a,logoUrl:o,dotOption:l}=e,s=new t({width:300,height:300,type:"svg",data:i,image:o,margin:10,dotsOptions:{color:n||"#000",type:l},backgroundOptions:{color:a||"#fff"},imageOptions:{crossOrigin:"anonymous",imageSize:.4,margin:0}});return s.getRawData("svg")},eI={label:()=>l.ag._({id:"toutGW"}),key:"image.qrCode",icon:$.rtB,Panel:e=>{var t;let{editor:r,editType:i,updateAttributes:a,currentAttributes:c}=e,{saveImageFromDataBlob:d}=F({updateAttributes:a,editor:r,editType:i,source:eI.key}),[u,m]=(0,H.useState)(!1),p="#000000",x="#FFFFFF",v="square",[b,y]=(0,H.useState)(null==c?void 0:null===(t=c.meta)||void 0===t?void 0:t.title),[j,w]=(0,H.useState)(null==c?void 0:c.src),C=(0,H.useRef)(),A=(0,H.useCallback)(()=>{m(!0)},[]),k=(0,H.useCallback)(async()=>{if(!b)return;let e=await eS({text:b,foregroundColor:p,backgroundColor:x,dotOption:v});e&&(w(window.URL.createObjectURL(e)),C.current=e)},[b,p,x,v]);(0,H.useEffect)(()=>{k()},[v,x,p,b,b,k]);let{src:U,tempUrl:I,meta:R,showPlaceholder:O,uploadStatus:M}=c,L=U?(0,N.aN)(U,{width:500}):void 0,D=!u&&!!(U||I||O),z=(0,H.useCallback)(async()=>{C.current&&(m(!0),await d({blob:C.current,attributes:{meta:{title:b,foregroundColor:p,backgroundColor:x,dotOption:v}}}),m(!1))},[d,b,p,x,v]);return D?(0,n.jsxs)(s.g,{align:"center",spacing:4,children:[M===W.D.Uploading&&(0,n.jsxs)(h.b,{status:"info",size:"sm",children:[(0,n.jsx)(g.z,{as:_.$,w:5,h:5}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"MEDU34"})})]}),O?(0,n.jsx)(T.k3,{isUploading:M===W.D.Uploading,hasUploadError:M===W.D.Error,width:"100%"}):(0,n.jsx)(P.E,{src:L||I,alt:"",ignoreFallback:!0,borderRadius:"md"}),(null==R?void 0:R.title)&&(0,n.jsx)(E.x,{textAlign:"left",w:"100%",children:R.title}),M!==W.D.Uploading&&(0,n.jsx)(S.z,{onClick:A,mt:2,w:"100%",children:(0,n.jsx)(o.cC,{id:"4uW88M"})})]}):(0,n.jsxs)(s.g,{align:"stretch",spacing:4,children:[M===W.D.Error&&(0,n.jsxs)(h.b,{status:"error",size:"sm",children:[(0,n.jsx)(g.z,{}),(0,n.jsx)(f.X,{children:(0,n.jsx)(o.cC,{id:"GymiXM"})})]}),(0,n.jsxs)(eC.NI,{id:"qr-url",children:[(0,n.jsx)(eA.l,{children:(0,n.jsx)(o.cC,{id:"IagCbF"})}),(0,n.jsx)(ek.B,{size:"lg",children:(0,n.jsx)(e_.I,{id:"qr-url",value:b,placeholder:l.ag._({id:"qf63PF"}),type:"url",onChange:e=>{y(e.target.value)}})})]}),r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.xu,{p:4,py:2,bg:"gray.100",borderRadius:"md",children:(0,n.jsxs)(eP.K,{spacing:2,children:[(0,n.jsx)(E.x,{children:(0,n.jsx)(o.cC,{id:"a37vfH"})}),(0,n.jsx)(Y.k,{align:"center",justify:"center",h:"200px",p:1,border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",bg:"white",children:j?(0,n.jsx)(eP.K,{h:"100%",children:(0,n.jsx)(P.E,{src:j,maxH:"100%"})}):(0,n.jsx)(J.xu,{p:2,children:(0,n.jsx)(E.x,{size:"xs",color:"gray.500",textAlign:"center",children:(0,n.jsx)(o.cC,{id:"eu7KCb"})})})}),(0,n.jsx)(E.x,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(o.cC,{id:"wjRHQb"})})]})}),(0,n.jsx)(eE.kH,{isDisabled:!!j,shouldWrapChildren:!0,label:(0,n.jsx)(o.cC,{id:"Y1WnIF"}),children:(0,n.jsx)(S.z,{onClick:z,w:"100%",variant:"solid",tabIndex:0,isDisabled:!j,children:(0,n.jsx)(o.cC,{id:"IChvxB"})})})]})]})},keywords:["qr","qrcode"],resizeToFit:!0},eR={label:()=>"Spotify",key:"video.spotify",keywords:["spotify","music","podcast","playlist","song","album"],description:()=>l.ag._({id:"lrKTd0"}),icon:j.Ha7,image:{src:"/_next/static/media/spotify.2dd06f33.svg",height:1333,width:1333,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/open.spotify.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a||"",updateAttributes:r,placeholder:"https://open.spotify.com/..."}),(0,n.jsx)(v,{guideLink:"https://artists.spotify.com/en/help/article/embedded-players-follow-buttons",providerName:"Spotify",extraMessage:(0,n.jsx)(o.cC,{id:"ItAUcI"})}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},preferHtml:!0},eT={label:()=>"Tally Form",key:"embed.tally",description:()=>l.ag._({id:"Qzo1BZ"}),icon:a.Lc0,image:{src:"/_next/static/media/tally.dd047104.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAOVBMVEVMaXHpG9s0E1swDVk0E1s0El/0GeU3H14yEVszEl03El8jElM0El5tFIXjG9v/HO6cF6Y5E2A9E2gHheKrAAAAEnRSTlMAVyclXeYiCNf+fdCl9uif/aFquzWYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANElEQVR4nC3FWRLAEBRFwWPKcxNi2P9iFaV/Grvw+fBQpjQHEJLUHcCr+rcHsPS5PcR4uhY8sgFUhN0cjQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},urlRegex:/^https?:\/\/tally.so/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://tally.so/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0}},eO=/\/video\/(\d+)/,eM={label:()=>"TikTok",key:"video.tiktok",icon:j.ABo,image:{src:"/_next/static/media/tiktok.cbd7f7ff.svg",height:256,width:256,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www.tiktok.com/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.tiktok.com/..."}),(0,n.jsx)(v,{guideLink:"https://developers.tiktok.com/doc/embed-videos/",providerName:"TikTok"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},defaultDisplayStyle:"inline",iframeOptions:{allowPopups:!0},preferHtml:!0,rewriteEmbedUrl(e){var t;let r=null===(t=e.match(eO))||void 0===t?void 0:t[1];return r?"https://www.tiktok.com/embed/v2/".concat(r):e},keywords:["tiktok","video","social"],minWidth:"325px",maxWidth:"325px"},eN={key:"embed.twitter",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://twitter.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>"Tweet",icon:j.mdU,image:{src:"/_next/static/media/twitter.c7499c85.svg",height:1110,width:1110,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(www\.)?twitter\.com/,keywords:["twitter","tweet"],preferHtml:!0,defaultDisplayStyle:"inline",inlineInteractive:!0},eL={label:()=>"Typeform",key:"embed.typeform",description:()=>l.ag._({id:"yjYR46"}),icon:ej.Lc0,image:{src:"/_next/static/media/typeform.6d709d2e.svg",height:800,width:800,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/([a-z0-9]*\.)?typeform\.com/,Panel:e=>(0,n.jsx)(m,{...e,urlPlaceholder:"https://typeform.com/..."}),defaultDisplayStyle:"inline",inlineInteractive:!0,categories:["form"],iframeOptions:{allowPopups:!0},keywords:["typeform","form","survey","questionnaire"]},eD="Unsplash",eH=["wallpaper","textures","architecture","background","nature","gradient","experimental","animals","california","flowers","relax","sky","water","pattern","abstract"],ez={key:"image.unsplash",Panel:e=>{let{updateAttributes:t,currentAttributes:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(C.Z,{updateAttributes:t,currentImageUrl:r.src,defaultQuery:r.query,randomQueries:eH,provider:"unsplash"}),(0,n.jsx)(J.xu,{width:"100%",textAlign:"center",padding:"10px",paddingTop:"30px",children:(0,n.jsx)(E.x,{fontSize:"sm",color:"gray.500",children:(0,n.jsx)(o.cC,{id:"k16iQH",values:{UNSPLASH_PROPER_NOUN:eD},components:{0:(0,n.jsx)(x.r,{href:"https://unsplash.com",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"underline"}})}})})})]})},label:()=>l.ag._({id:"olwQVc",values:{UNSPLASH_PROPER_NOUN:eD}}),description:()=>l.ag._({id:"tQSDXx"}),icon:j.WxC,image:{src:"/_next/static/media/unsplash.1957709b.svg",height:24,width:24,blurWidth:0,blurHeight:0},keywords:["stock","photo","photography","image","unsplash"],resizeToFit:!0},eG={key:"video.vimeo",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://vimeo.com/..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>l.ag._({id:"M1Uyl1"}),icon:j.XZc,image:{src:"/_next/static/media/vimeo.4de20653.svg",height:48,width:48,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/(player\.)?vimeo\.com/,keywords:["vimeo","video"]};var eW=r(83230),eF=r(82713);let eB={label:()=>l.ag._({id:"/hLjBB"}),description:()=>l.ag._({id:"wRlboO"}),key:"embed.custom",icon:a.m6E,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,{proxy:a,displayStyle:m}=i,p=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:p||"",updateAttributes:r,placeholder:l.ag._({id:"gzZk6e"})}),p&&m&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(eF.X,{isChecked:a,onChange:e=>r({proxy:e.target.checked}),children:(0,n.jsx)(o.cC,{id:"Fl9cgp"})}),(0,n.jsx)(E.x,{fontSize:"sm",color:"gray.500",mt:-2,children:(0,n.jsx)(o.cC,{id:"J87/8N"})})]}),p&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["webpage","website","app","embed","iframe"]},eq={label:()=>"Wistia",key:"video.wistia",icon:a.IyC,image:{src:"/_next/static/media/wistia.613af213.svg",height:1899,width:2500,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/fast.wistia.net/,Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"<iframe..."}),(0,n.jsx)(v,{guideLink:"https://wistia.com/support/embed-and-share/media-on-your-website",providerName:"Wistia"}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},keywords:["wistia","video"]},eV={key:"video.youtube",Panel:e=>{let{editor:t,updateAttributes:r,currentAttributes:i}=e,a=(0,c.NW)(i);return(0,n.jsxs)(s.g,{align:"flex-start",spacing:4,children:[(0,n.jsx)(u.v,{currentUrl:a,updateAttributes:r,placeholder:"https://www.youtube.com/watch?v=..."}),a&&(0,n.jsx)(d.E,{editor:t,updateAttributes:r,currentAttributes:i})]})},label:()=>l.ag._({id:"7J5KkU"}),icon:j.opf,image:{src:"/_next/static/media/youtube.b0610934.svg",height:461,width:461,blurWidth:0,blurHeight:0},urlRegex:/^https?:\/\/www\.youtube\.com/,keywords:["youtube","video"]},eK=[A,ei,es,eW.Q,eg,ez,eV,ex,V,el,eo,eB,B,eI,i.N,ev,ew,eN,eG,q,ey,eb,b,y,eq,eR,eM,em,ed,eu.j,k,eL,ep,eT,Z],eQ=Object.fromEntries(Object.values(eK).flat().map(e=>[e.key,e]))},16494:function(e,t,r){"use strict";var i,n;r.d(t,{D:function(){return i}}),(n=i||(i={}))[n.Done=0]="Done",n[n.Uploading=1]="Uploading",n[n.Error=2]="Error",n[n.Queued=3]="Queued"},50279:function(e,t,r){"use strict";r.d(t,{C:function(){return a},K:function(){return n}});var i=r(61185);let n=e=>{var t,r,i,n,a,o;return(null===(t=e.meta)||void 0===t?void 0:t.description)||(null===(r=e.meta)||void 0===r?void 0:r.alt_description)||(null===(i=e.meta)||void 0===i?void 0:i.title)||(null===(n=e.meta)||void 0===n?void 0:n.snippet)||(null===(o=e.meta)||void 0===o?void 0:null===(a=o.tags)||void 0===a?void 0:a.join(", "))||e.query},a=(e,t,r)=>{let n={src:e.imageUrl,tempUrl:e.thumbnailUrl,meta:{height:e.height,width:e.width,description:e.description,alt_description:e.altDescription,title:e.title,snippet:e.snippet},query:t,source:i.Q[r]};return"aiGenerated"===r&&(n.aiParams={prompt:e.aiPrompt,height:e.height,width:e.width,model:e.aiModel,stylePreset:e.aiStylePreset}),n}},11550:function(e,t,r){"use strict";r.d(t,{M:function(){return l}});var i=r(55478),n=r(2784),a=r(43997),o=r(87827);let l=e=>{let{id:t,...r}=e,{isOpen:l,onOpen:s,onClose:c}=(0,i.q)(r),d=(0,a.I0)();return(0,n.useEffect)(()=>{t&&d((0,o.VN)({id:t,isOpen:l}))},[l,d,t]),(0,n.useEffect)(()=>()=>{t&&d((0,o.VN)({id:t,isOpen:!1}))},[d,t]),{isOpen:l,onOpen:s,onClose:c}}},62131:function(e,t,r){"use strict";r.d(t,{ER:function(){return s},U:function(){return d},Y7:function(){return c}});var i=r(52322),n=r(82554),a=r(57124),o=r(1163),l=r(12265);let s=e=>{let{product:t="pro",...r}=e;return(0,i.jsx)(n.C,{size:"sm",variant:"solid",bottom:0,right:0,bg:"pro"===t?"linear-gradient(97deg, #3300D9 -10%, #9D20C9 56.82%, #DF7A6C 120%)":"trueblue.500",color:"white",textShadow:"0px 0px 1px rgba(0, 0, 0, .5)",fontSize:"11px",...r,children:(0,l.KL)()[t].name})},c=e=>{let{workspace:t,...r}=e,n=(0,o.K9)(t);return n?(0,i.jsx)(s,{variant:"subtle",...r,product:n}):null},d=e=>{let{workspace:t,productFeature:r,...n}=e,l=(0,a.Y)(r,t),c=(0,o.I4)(r);return l||null===c?null:(0,i.jsx)(s,{variant:"solid",product:c,...n})}},87342:function(e,t,r){"use strict";r.d(t,{m:function(){return x}});var i=r(52322),n=r(38035),a=r(43297),o=r(29117),l=r(77533),s=r(62614),c=r(5879),d=r(93624),u=r(42111),m=r(94199),p=r(76249),h=r(2953),g=r(1163),f=r(62131);let x=e=>{let{title:t=(0,i.jsx)(c.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:m.x8}}),description:r,buttonLabel:x,onOpenCallback:v,onCloseCallback:b,segmentEvent:y,isNarrow:j,...w}=e,C=(0,u.ye)("upsellUXEnabled_Pro"),{openUpsellModal:A,product:k,proYearlyProductPrice:_}=(0,h.z)();if("pro"===k||!C)return null;let P=((null==_?void 0:_.price)||19200)/(0,g.kK)(null==_?void 0:_.currency)/12,E=(null==_?void 0:_.currency)||d.Fa6.Usd,S=(0,g.aS)(null==_?void 0:_.currency);return(0,i.jsxs)(n.k,{flex:1,w:"100%",mb:4,p:4,borderRadius:"md",bg:"trueblue.50",borderColor:"trueblue.200",position:"relative",borderWidth:1,shadow:"sm",flexDirection:j?"column":"row",align:"center",gap:4,...w,children:[(0,i.jsxs)(a.K,{flex:2,alignSelf:"stretch",children:[(0,i.jsxs)(o.U,{children:[(0,i.jsx)(f.ER,{variant:"solid"}),(0,i.jsx)(l.x,{fontWeight:"bold",children:t})]}),(0,i.jsx)(l.x,{color:"gray.700",fontSize:"xs",children:r||(0,i.jsx)(c.cC,{id:"gGlaFH",values:{GAMMA_PROPER_NOUN:m.N6}})})]}),(0,i.jsxs)(a.K,{spacing:1,flex:1,alignSelf:"stretch",children:[(0,i.jsx)(s.z,{variant:"solid",colorScheme:"trueblue",size:"sm",onClick:()=>{A({onOpenCallback:v,onCloseCallback:b,segmentEvent:y})},children:x||(0,i.jsx)(c.cC,{id:"kwkhPe"})}),(0,i.jsx)(l.x,{textAlign:"center",fontSize:"xs",color:"gray.700",children:(0,i.jsx)(c.cC,{id:"LTohGv",values:{0:(0,p.x)(P,{currency:E,notation:S})}})})]})]})}},41003:function(e,t,r){"use strict";r.d(t,{R4:function(){return i.R},dU:function(){return n.dU},Y:function(){return n.Y},_O:function(){return n._O}}),r(41052);var i=r(43979),n=r(57124);r(2784)},4425:function(e,t,r){"use strict";r.d(t,{n:function(){return i}});let i=()=>{let e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);let t=document.createElement("div");e.appendChild(t);let r=e.offsetWidth-t.offsetWidth;return e.parentNode.removeChild(e),r}},1978:function(e,t,r){"use strict";r.d(t,{_:function(){return D}});var i=r(52322),n=r(29117),a=r(28535),o=r(43297),l=r(38035),s=r(10625),c=r(67046),d=r(62614),u=r(99058),m=r(44035),p=r(39237),h=r(75768),g=r(32899),f=r(42946),x=r(49929),v=r(94523),b=r(5879),y=r(87254),j=r(62349),w=r.n(j),C=r(2784),A=r(98621),k=r.n(A),_=r(93441),P=r(82729),E=r(27875),S=r.n(E);let U={soft:{name:"Soft",spin:[0,-40,40],lighten:[0,0,0]},duo:{name:"Duo",spin:[0,180],lighten:[0,0]},crescent:{name:"Crescent",spin:[0,-45,45,-90,90],lighten:[0,0,0,0,0]},wisp:{name:"Wisp",spin:[0,72,216],lighten:[0,0,0]},mono:{name:"Mono",spin:[0,0,0],lighten:[0,20,40]},cosmos:{name:"Cosmos",spin:[0,72,144,216,288],lighten:[0,0,0,0,0]}},I=e=>{let t=[];e.forEach((e,r)=>{let i=e.setAlpha(1),n=i.toHsl().h*r,a="radial-gradient(circle at ".concat(50*(2*n%360/360),"% ").concat(50*(3*n%360/360),"%, ").concat(i.setAlpha(.5).toHex8String()," 0, ").concat(i.setAlpha(0).toHex8String()," ").concat(50*(1*n%360/360)+50,"%)");t.push(a)});let r=e[0].setAlpha(.5).toHex8String();return t.push("linear-gradient(0deg, ".concat(r," 0%, ").concat(r," 100%)")),{backgroundImage:t.join(",")}},R=(e,t)=>{let r=U[e],i=[];return r.spin.forEach(e=>{let r=k()(t.toHsv()).spin(e);i.push(r)}),r.lighten.forEach((e,t)=>{i[t].lighten(e)}),i},T=(e,t)=>{let r=R(e,t),i=I(r);return{colors:r,gradient:i}},O=(e,t,r)=>{t.forEach(e=>{e&&(e.style.opacity="0")}),e.forEach((e,i)=>{let n=t[i];if(!n||!r)return;let a=function(e,t){let r=e.offsetWidth,i=k()(t),n=i.toHsl().h*(Math.PI/180),a=i.toHsl().l,o=-(a*r)+r;return{x:r/2-o*Math.cos(n),y:r/2-o*Math.sin(n)}}(r,e);n.style.transform="translate(calc(".concat(a.x,"px - 50%),calc(").concat(a.y,"px - 50%))"),n.style.backgroundColor=e.toHexString(),n.style.opacity="1"})},M=(0,C.forwardRef)(function(e,t){let{isPrimary:r=!1,noTransition:n=!1}=e;return(0,i.jsx)(a.xu,{ref:t,borderRadius:"full",boxSize:r?7:5,pos:"absolute",zIndex:r?2:1,shadow:"base",border:"2px solid white",pointerEvents:"none",transitionProperty:n?"none":"transform",transitionDuration:"normal"})}),N=(0,C.memo)(e=>{let{updateColor:t,colors:r}=e,n=(0,C.useRef)(null),o=(0,C.useRef)(null),s=(0,C.useRef)(null),c=(0,C.useRef)(null),d=(0,C.useRef)(null),u=(0,C.useRef)(null),m=(0,C.useMemo)(()=>[o,s,c,d,u],[]);(0,C.useEffect)(()=>{let e=m.map(e=>e.current);O(r,e,n.current)},[r,m]);let p=(0,C.useCallback)(e=>{if(!n.current)return;let r=n.current.getBoundingClientRect();(e.clientX||e.clientY)&&t(function(e,t,r){let i=e.current.offsetWidth,n=e.current.offsetHeight,a=i/2,o=n/2,l=function(e,t,r,i,n){let a=r-e,o=i-t;return S()(Math.sqrt(o*o+a*a),0,n)}(t,r,a,o,i/2),s=Math.atan2(o-r,a-t),c=s*(180/Math.PI),d=Math.abs(-l/i+1);return k().fromRatio({h:c+360*Math.ceil(-c/360)+1,s:1,l:d})}(n,e.clientX-r.left,e.clientY-r.top))},[t]),h=(0,C.useCallback)(()=>{document.removeEventListener("mousemove",p)},[p]),g=(0,C.useCallback)(e=>{document.addEventListener("mousemove",p),document.addEventListener("mouseup",h,{once:!0}),p(e)},[p,h]);return(0,i.jsxs)(a.xu,{onMouseDown:g,p:4,m:-4,position:"relative",children:[(0,i.jsx)(M,{ref:o,noTransition:!0,isPrimary:!0}),(0,i.jsx)(M,{ref:s}),(0,i.jsx)(M,{ref:c}),(0,i.jsx)(M,{ref:d}),(0,i.jsx)(M,{ref:u}),(0,i.jsx)(P.o,{ratio:1,children:(0,i.jsxs)(l.k,{ref:n,position:"relative",borderRadius:"full",shadow:"lg",children:[(0,i.jsx)(l.k,{pos:"absolute",borderRadius:"full",bg:"radial-gradient(circle closest-side, rgb(255, 255, 255), transparent)",inset:0,zIndex:1}),(0,i.jsx)(l.k,{pos:"absolute",inset:0,bg:"conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",transform:"rotateZ(270deg)",borderRadius:"full"})]})})]})}),L={vibe:"mono",primaryColor:"#75d8ff",css:{}},D=e=>{let{value:t,updateValue:r,isDark:j}=e,{vibe:A,primaryColor:P}={...L,...t},[E,S]=(0,C.useState)(k()(P)),{colors:I,gradient:R}=(0,C.useMemo)(()=>T(A,E),[A,E]),O=(0,C.useCallback)(e=>{let{gradient:t}=T(A,e);r({vibe:A,primaryColor:e.toHexString(),css:t})},[A,r]),M=(0,_.Z_)(O,100),D=(0,C.useCallback)(e=>{S(e),M(e)},[M]);return(0,i.jsxs)(n.U,{spacing:4,alignItems:"stretch",wrap:"wrap",children:[(0,i.jsx)(a.xu,{flex:"1",minW:"120px",children:(0,i.jsx)(N,{vibe:U[A],color:E,updateColor:D,colors:I})}),(0,i.jsxs)(o.K,{flex:"2",spacing:4,minW:"180px",children:[(0,i.jsx)(l.k,{backgroundColor:j?"black":"white",...R,opacity:1,flex:"1",borderRadius:"md",shadow:"md",minH:"80px",mt:2}),(0,i.jsxs)(n.U,{children:[(0,i.jsxs)(s.v,{children:[(0,i.jsx)(c.j,{w:"100%",as:d.z,size:"sm",variant:"plain",textAlign:"left",rightIcon:(0,i.jsx)(x.G,{icon:f.ptq}),children:U[A].name}),(0,i.jsx)(u.q,{minWidth:"240px",zIndex:"dropdown",children:(0,i.jsx)(m._,{onChange:e=>{let{gradient:t}=T(e,E);r({vibe:e,primaryColor:E.toHexString(),css:t})},value:A,title:y.ag._({id:"1CalO6"}),type:"radio",children:Object.entries(U).map(e=>{let[t,{name:r}]=e;return(0,i.jsx)(p.i,{value:t,children:r},t)})})})]}),(0,i.jsx)(h.h,{size:"sm",variant:"plain",children:(0,i.jsx)(v.kH,{placement:"top",label:(0,i.jsx)(b.cC,{id:"OVjfHO"}),children:(0,i.jsx)(g.h,{icon:(0,i.jsx)(x.G,{icon:f.RJo}),"aria-label":y.ag._({id:"OVjfHO"}),onClick:()=>{D(k().fromRatio({h:w()(0,360),s:1,l:w()(.5,.8)}))}})})})]})]})]})}},14324:function(e,t,r){"use strict";r.d(t,{a:function(){return s}});var i=r(2784),n=r(93624),a=r(91994),o=r(67613),l=r(39278);let s=()=>{let e=(0,l.n_)(),t=(0,a.TL)(),{data:r,loading:s}=(0,n.BCl)({variables:{workspaceId:e,archived:!1},skip:!e,fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),{data:c,loading:d}=(0,n.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),u=(0,i.useMemo)(()=>(null==c?void 0:c.themes)||[],[null==c?void 0:c.themes]),m=(0,i.useMemo)(()=>(null==r?void 0:r.themes)||[],[null==r?void 0:r.themes]);return(0,i.useEffect)(()=>{u.length>0&&t((0,o.cn)({globalThemes:u}))},[t,u]),(0,i.useEffect)(()=>{m.length>0&&t((0,o.PA)({workspaceThemes:m}))},[t,m]),{isLoadingThemes:s||d,globalThemes:u}}},29560:function(e,t,r){"use strict";r.d(t,{B:function(){return l},T:function(){return o}});var i=r(2784),n=r(91994),a=r(47968);let o=()=>{let e=(0,n.bh)();if(!e){console.error("[MediaDrawer].openMediaDrawer: can't open because getStore() returned ".concat(e));return}e.dispatch((0,a.AK)({isEditingMedia:!0}))},l=()=>{let e=(0,n.qr)();return(0,i.useCallback)(t=>{e.dispatch((0,a.AK)({isEditingMedia:t}))},[e])}},57574:function(e,t,r){"use strict";r.d(t,{Y:function(){return n},o:function(){return i}});let i="+++",n="/continue"},52332:function(e,t,r){"use strict";r.d(t,{Ay:function(){return x},E0:function(){return p},HD:function(){return h},I7:function(){return f},K9:function(){return m},Nn:function(){return g}});var i=r(37243),n=r(1842),a=r.n(n),o=r(27191),l=r(91994),s=r(47968),c=r(90604),d=r(91073),u=r(93814);let m=i.hj.create({name:"cardCollapse",addKeyboardShortcuts:()=>({Escape:e=>{let{editor:t}=e,r=(0,l.bh)(),n=(0,s.gh)(r.getState());if(n!==c.q.DOC_VIEW)return!1;let{selection:a}=t.state;if(!a.empty)return!1;let o=(0,i.Kk)(d.KH)(a);return!!o&&o.depth>u.k_&&!h(o.node)&&(g(o.node.attrs.id,!0),!0)}}),addProseMirrorPlugins:()=>[new o.Sy({key:new o.H$("cardCollapse"),appendTransaction:(e,t,r)=>{if(r.selection.eq(t.selection)||!r.selection.empty)return;let n=(0,i.Kk)(d.KH)(r.selection);if(!n)return;let{node:a,pos:l}=n,s=h(a);if(s)try{let{tr:e}=r,t=o.qv.create(e.doc,l);if(!t)return;return e.setSelection(t)}catch(e){console.error("Error moving selection out of collapsed card",{node:a,pos:l},e)}}})]}),p=(e,t)=>{let r=[],i=[];e.descendants((e,t,n)=>{if(!(0,d.KH)(e))return;let{id:a}=e.attrs,o=n&&"document"===n.type.name;o?r.push(a):i.push(a)}),t((0,s.rH)({cardIds:r,isCollapsed:!1})),t((0,s.rH)({cardIds:i,isCollapsed:!0}))},h=e=>{let t="string"==typeof e?e:e.attrs.id;if(!t)return;let r=(0,l.bh)().getState();return(0,s.yH)(t)(r)},g=(e,t)=>{if(a()(e)){console.error("[setCardCollapsed] Input is unexpectedly not string | string[]: ",e);return}let r=Array.isArray(e)?e:[e],i=(0,l.bh)();(1!==r.length||(0,s.yH)(r[0])(i.getState())!==t)&&i.dispatch((0,s.rH)({cardIds:r,isCollapsed:t}))},f=e=>{let t=[];e.state.doc.descendants(e=>{if(!(0,d.KH)(e))return;let{id:r}=e.attrs;t.push(r)}),g(t,!1)},x=e=>{let t=(0,l.bh)(),r=t.getState();void 0===r.TipTap.memoState.expandedCards[e]&&t.dispatch((0,s.rH)({cardIds:[e],isCollapsed:!1}))}},15468:function(e,t,r){"use strict";r.d(t,{$U:function(){return u},Ap:function(){return w},BA:function(){return v},Fi:function(){return y},Hh:function(){return s},Ux:function(){return x},Vc:function(){return l},eZ:function(){return c},gF:function(){return m},jS:function(){return d},pt:function(){return b},q9:function(){return j},wz:function(){return p}});var i=r(13793),n=r(11093),a=r(96255),o=r(48751);let l=e=>["left","right"].includes(e),s=e=>{let{layout:t,parentCards:r,isMobileDevice:i}=e;return i&&"left"===t?"mobileLeft":i&&"right"===t?"mobileRight":l(t)&&c(r)?"blank":t},c=e=>e.some(e=>l(e.attrs.layout)),d=e=>{let t=u(e),r={};return Object.entries(t.items).forEach(e=>{var t;let[i,n]=e,a=null!==(t=null==n?void 0:n.style)&&void 0!==t?t:{gridArea:i};r['> [data-layout-item-id="'.concat(i,'"]')]=a}),r},u=e=>o.q[null!=e?e:"blank"]||o.q.blank,m=e=>{let t={},r=e.pos,i=e.nodeAfter;return i?i.descendants((e,i)=>{if(!(0,a.pv)(e))return!1;t[e.attrs.itemId]={node:e,pos:r+1+i}}):console.error("[getCardLayoutItems] could not find card node at pos ".concat(r)),t},p=(e,t)=>m(e.doc.resolve(t)),h=(e,t,r)=>{let i=e.doc.resolve(t.pos+1),n=i.blockRange(e.doc.resolve(i.end()));n&&e.wrap(n,[{type:r.nodes.cardLayoutItem}]).setMeta("annotationEvent",{type:"wrap-nodes",start:n.start,end:n.end,level:1})},g=(e,t,r,i)=>{let n=r.nodes.cardLayoutItem.createAndFill({itemId:"body",...i});e.insert(t+1,n)},f=(e,t,r,n)=>{let a=r.nodes.cardAccentLayoutItem.createAndFill({itemId:"accent",background:{type:i.E.NONE},...n});e.insert(t+1,a)},x=(e,t,r,i)=>{let n=e.doc.nodeAt(t),a=p(e,t);if(0===Object.keys(a).length){h(e,{node:n,pos:t},r),i.items.accent&&f(e,t,r);return}i.items.body&&!a.body&&g(e,t,r),i.items.accent&&!a.accent?f(e,t,r):a.accent&&"cardLayoutItem"===a.accent.node.type.name&&v(e,a.accent.pos,a.accent.node,r)},v=(e,t,r,i)=>{e.replaceRangeWith(t,t+r.nodeSize,i.nodes.cardAccentLayoutItem.createAndFill({...r.attrs}))},b=e=>"cardAccentLayoutItem"===e.type.name&&"accent"===e.attrs.itemId,y=e=>"cardLayoutItem"===e.type.name&&"body"===e.attrs.itemId,j=(e,t)=>{if(!t)return 0;let r=t.findIndex(t=>t.accentId===e.accentId);return -1===r||void 0===r?0:(r+1)%t.length},w=e=>{let t=(0,n.sS)(e,b)[0];if(!t)return;let r=t.node.attrs;return r.background}},74684:function(e,t,r){"use strict";r.d(t,{AQ:function(){return f},J9:function(){return g},NE:function(){return w},YS:function(){return b},jz:function(){return y},pE:function(){return x}});var i=r(37243),n=r(27191),a=r(91994),o=r(24781),l=r(35759),s=r(47968),c=r(11093),d=r(60742),u=r(90604),m=r(52332),p=r(93814),h=r(96255);let g=(e,t,r)=>{let n=e=>{let t=(0,h.KH)(e),i="boolean"!=typeof r||(0,m.HD)(e)===r;return t&&i},a=e.state.doc.nodeAt(t),o=e.state.doc.resolve(t);return a&&n(a)?{node:a,pos:t,start:o.start,depth:o.depth}:(0,i.qv)(e.state.doc.resolve(t),n)},f=(e,t)=>{try{let r=(e,t)=>(0,h.KH)(e)&&t===p.k_,i=e.resolve(t),n=e.nodeAt(t);if(n&&r(n,i.depth+1))return{node:n,pos:t};return(0,c.Ci)(i,r)}catch(e){console.error("[findTopCardNodeParent] error",e);return}},x=e=>{let{pos:t,editor:r}=e,i=(0,c.nv)(r.state.doc.resolve(t),h.KH),n=i.map(e=>e.node.attrs.id);(0,m.Nn)(n,!1)},v=async e=>{let{cardId:t,pos:r,editor:i,cardEl:a,isNested:s=!1,origin:c="editor"}=e;if(!a){console.error("[scrollToCard] no cardEl specified");return}(0,m.Nn)(t,!1),x({pos:r,editor:i}),await (0,o.cC)("editor").scrollElementIntoView({element:a,delay:s?p.nY:0}),i.commands.command(e=>{let{tr:t}=e;return t.setSelection(n.Y1.near(i.state.doc.resolve(r))).setMeta(l.C,c),!0})},b=e=>{let{cardId:t,editor:r}=e;if(!t)return;let i=(0,a.bh)(),n=(0,s.gh)(i.getState());if(n===u.q.SLIDE_VIEW){r.commands.spotlightCardById(t);return}let o=document.querySelector('[data-card-id="'.concat(t,'"]'));if(!o)return;let{pos:l}=(0,h.Bw)(r,t)||{};if(!l)return;let c=r.state.doc.resolve(l),d=c.depth>p.k_;v({cardId:t,pos:l,editor:r,cardEl:o,isNested:d})},y=(e,t,r)=>{let i;let n=t.target;if(n.closest(".".concat(p.ar))&&!n.closest("[data-outside-card-body]")||r&&!j(r,e.state.schema))return null;let a=n.closest(".".concat(p.vD));if(!a)return{pos:e.state.doc.content.size-1};let o=a.querySelector(".".concat(p.ar)),l=null==o?void 0:o.getBoundingClientRect();if(!l)return null;let{doc:s}=e.state;try{let t=e.posAtDOM(a,0);if(-1===t)return null;let r=(0,c.nv)(s.resolve(t),h.KH);if(0===r.length)return null;i=r[r.length-1]}catch(e){return console.error("(caught) [checkBetweenCardsDropTarget] error finding parent node:",e),null}let{node:u,pos:m}=i;if(!m||!u)return null;let[g]=(0,d.qs)(o),f=g+l.top,x=g+l.bottom,v=g+t.clientY;return v<f?{pos:m}:v>x?{pos:m+u.nodeSize}:null},j=(e,t)=>t.nodes.card.validContent(e.content),w=(e,t)=>{let r=(0,c.sS)(e,e=>"cardLayoutItem"===e.type.name);return r.length>0?{node:r[0].node,pos:t+r[0].pos+1}:{node:e,pos:t}}},56253:function(e,t,r){"use strict";r.d(t,{Bk:function(){return s},DB:function(){return c},HQ:function(){return u},Rs:function(){return d},r1:function(){return l}});var i=r(6238),n=r.n(i),a=r(90439),o=r(93814);let l=95,s=115,c=.5*l,d=function(e,t,r){var i;let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=null!==(i=e.config.fontSize)&&void 0!==i?i:1,c=(r?s:l)*(.5/a),d=n*o.GG,u=t?1.5:3.5;return{baseFontSize:a*(t?1:1.125),contentWidthEms:c,themeFontSize:a,innerPaddingX:u,cardWidthEms:c+2*u+2*d,commentPadding:u+d}},u=n()(e=>{let{isPresentMode:t,isNested:r,nestedDepth:i,isFullBleed:n,displayFullBleed:a,isWideContent:o,isThumbnail:l,theme:s,cardDimensions:c,showPresentBackdrop:u,attrs:f,userZoomLevel:x,isMobileDevice:v}=e,b="none"!==f.background.type&&!r,y=a||r?"0em":v?"".concat(.5,"em"):"".concat(2,"em"),j="calc(var(--card-outer-padding-x) + ".concat(n||r?"0px":"var(--doc-padding-left, 0px)"," + ").concat(t?"var(--present-padding-left, 0px)":"0px",")"),w="calc(var(--card-outer-padding-x) + ".concat(n||r?"0px":"var(--doc-padding-right, 0px)"," + ").concat(t?"var(--present-padding-right, 0px)":"0px",")"),C=a||r?"0em":v?"".concat(.5,"em"):!b||t||l?"".concat(2,"em"):"8em",{baseFontSize:A,contentWidthEms:k,cardWidthEms:_,innerPaddingX:P,commentPadding:E}=d(s,v,o,i),S=t||l?c.aspectRatio?g:h:v?p:m,U=S({baseFontSize:A,contentWidthEms:k,cardWidthEms:_,cardAspectRatio:c.aspectRatio,showPresentBackdrop:u,isNested:r,isFullBleed:n,isThumbnail:l});return{"--card-inner-padding-x":"".concat(P,"em"),"--card-inner-padding":"var(--card-inner-padding-y) var(--card-inner-padding-x)","--card-outer-padding-left":j,"--card-outer-padding-right":w,"--card-outer-padding-x":y,"--card-outer-padding-y":C,"--comment-padding":"".concat(E,"em"),"--nested-card-margin":"calc(-1 * var(--comment-padding))","--card-vertical-align":c.defaultVerticalAlign,"--top-accent-height":"12.5em","--behind-accent-height":"24em","--zoom-level":x,...U}}),m=e=>{let{baseFontSize:t,contentWidthEms:r,cardWidthEms:i,cardAspectRatio:n,isFullBleed:a}=e;return{"--font-size":"calc(".concat(t," * var(--editor-font-size, 1rem))"),"--card-inner-padding-y":"".concat(2.75+(a?2:0),"em"),"--card-width":"".concat(i,"em"),"--card-min-height":n?"calc(min(var(--card-width), var(--editor-width)) / ".concat(n,")"):void 0,"--max-content-width":"".concat(r,"em")}},p=e=>{let{cardWidthEms:t,baseFontSize:r,isNested:i,cardAspectRatio:n,isFullBleed:a}=e;return{"--card-inner-padding-y":"".concat(i?2.25:1.5+(a?1:0),"em"),"--font-size":"".concat(r,"rem"),"--card-width":"".concat(t,"em"),"--card-min-height":n?"calc(min(var(--card-width), var(--editor-width)) / ".concat(n,")"):void 0,"--top-accent-height":"8em","--behind-accent-height":"12em"}},h=e=>{let{contentWidthEms:t,cardWidthEms:r,showPresentBackdrop:i,isFullBleed:n,baseFontSize:o,isNested:l,isThumbnail:s}=e,c=a.Pv?"".concat(o,"rem"):"calc(var(--zoom-level) * clamp(".concat(s?"0rem":"1rem",", var(--card-max-width) / ").concat(r,", 3vh))"),d=!i||n;return{"--card-inner-padding-y":"".concat(2.75,"em"),"--font-size":c,"--card-width":d?"var(--editor-width)":"".concat(r,"em"),"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-min-height":s?"var(--thumbnail-min-height, 0px)":d&&!l?"100vh":"0vh","--max-content-width":"".concat(1.15*t,"em")}},g=e=>{let{cardAspectRatio:t,cardWidthEms:r,isThumbnail:i}=e,n=a.Pv?"calc(var(--card-max-width) / ".concat(t,")"):"calc(100vh - 2 * var(--card-outer-padding-y))",o=a.Pv||i?"0px":"15px",l="calc((var(--card-width) - ".concat(o,") / ").concat(r,")");return{"--card-inner-padding-y":"".concat(2.75,"em"),"--card-width":"calc(var(--zoom-level) * min(var(--card-max-width), calc(var(--card-max-height) * ".concat(t,")))"),"--font-size":l,"--card-max-width":"calc(var(--editor-width) - 2 * var(--card-outer-padding-x))","--card-max-height":n,"--card-min-height":"calc(var(--card-width) / ".concat(t,")")}}},65396:function(e,t,r){"use strict";r.d(t,{F:function(){return i}});let i=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[].slice.call(e.querySelectorAll(t),0);return r&&i.reverse(),i}},65282:function(e,t,r){"use strict";r.d(t,{e:function(){return o},v:function(){return a}});var i=r(44368),n=r(18455);let a=e=>{var t;if(null==e?void 0:null===(t=e.parentElement)||void 0===t?void 0:t.matches("ol, ul"))return e.parentElement;let r=[e],n=e;for(;(n=n.nextElementSibling)&&"LI"===n.tagName;){let t=parseInt(n.getAttribute("indent")||"0")-parseInt(e.getAttribute("indent")||"0");if(t<0)break;if(0==t){if(n.getAttribute("variant")!=e.getAttribute("variant"))break;r.push(n)}else n=a(n),r.push(n)}let o=e.getAttribute("variant")==i.W.Numbered?document.createElement("ol"):document.createElement("ul");return e.replaceWith(o),r.forEach(e=>{e.removeAttribute("variant"),e.removeAttribute("indent")}),o.append(...r),o},o=e=>{var t,r;let a;let o=e,l=0,s="false";for(e.innerHTML.startsWith("[ ]")?(a=i.W.Todo,s="false",e.innerHTML.startsWith("[ ]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)):e.innerHTML.startsWith("[x]")&&(a=i.W.Todo,s="true",e.innerHTML.startsWith("[x]  ")?e.innerHTML=e.innerHTML.slice(4):e.innerHTML=e.innerHTML.slice(3)),"checkbox"===e.getAttribute("role")&&(a=i.W.Todo,s=e.getAttribute("aria-checked")||"false"),("todo"===e.getAttribute("variant")||e.getAttribute("checked"))&&(a=i.W.Todo,s=e.getAttribute("checked")||"false"),(0,n.b)(e);o=null===(t=e.parentElement)||void 0===t?void 0:t.closest("li, ul, ol");){if(o.matches("ul, ol")){l++;let e=o.className.match(/lst-kix_\w+-(\d+)/);e&&(l=parseInt(e[1])+1),a||"OL"!=o.tagName?a||"UL"!=o.tagName||(a=i.W.Bullet):a=i.W.Numbered}o.after(e)}e.setAttribute("indent",Math.max(l-1,0).toString()),e.setAttribute("variant",a||i.W.Bullet),a==i.W.Todo&&e.setAttribute("checked",s),1===e.children.length&&(null===(r=e.firstElementChild)||void 0===r?void 0:r.tagName)==="P"&&(e.innerHTML=e.firstElementChild.innerHTML)}},396:function(e,t,r){"use strict";r.d(t,{S:function(){return a}});var i=r(65396),n=r(65282);let a=e=>((0,i.F)(e,"li").forEach(e=>{(0,n.v)(e)}),e)},18455:function(e,t,r){"use strict";r.d(t,{b:function(){return j},B:function(){return b}});var i=r(87008),n=r(87205),a=r(65396);let o=e=>{(0,a.F)(e,"p.title").forEach(u),(0,a.F)(e,"br").forEach(d),(0,a.F)(e,"a[href]").forEach(p),(0,a.F)(e,"a[href][id]").forEach(h),(0,a.F)(e,"span").forEach(g),(0,a.F)(e,"a[href][id]").forEach(t=>x(t,e))},l=e=>{(0,a.F)(e,"h1").forEach(s),(0,a.F)(e,"li > span").forEach(c)},s=e=>{if("always"==e.style.pageBreakBefore){let t=document.createElement("hr");t.style.pageBreakBefore="always",t.classList.add("divider"),e.before(t)}},c=e=>{var t;(null===(t=e.textContent)||void 0===t?void 0:t.trim())==="•"&&e.remove()},d=e=>{var t;((null===(t=e.previousElementSibling)||void 0===t?void 0:t.tagName)=="P"||e.classList.contains("Apple-interchange-newline"))&&e.remove()},u=e=>{let t=document.createElement("h1");t.className="title",t.innerHTML=e.innerHTML,e.replaceWith(t)},m=/^https:\/\/docs\.google\.com\/document\/d\/[^/]+\/edit#heading=(h\.[^/]+)/,p=e=>{let t=e.getAttribute("href");if(t&&(t.startsWith("#h.")||m.test(t))){let t=e.closest("p");t&&t.textContent==e.textContent?t.remove():e.removeAttribute("href")}},h=e=>{var t,r;if(null===(t=e.getAttribute("id"))||void 0===t?void 0:t.startsWith("cmnt_ref")){let t=e.closest("sup");null==t||t.remove()}else if(null===(r=e.getAttribute("id"))||void 0===r?void 0:r.startsWith("cmnt")){let t=e.closest("div");null==t||t.remove()}},g=e=>{e.innerHTML=e.innerHTML.replace(/(&nbsp;){2,}/g,"").replace(/&nbsp;/g," ")},f=/ftnt_ref(\d+)/,x=(e,t)=>{let r=e.getAttribute("id");if(r&&r.startsWith("ftnt_ref")){var i;let n=parseInt((null===(i=r.match(f))||void 0===i?void 0:i[1])||""),a=e.closest("sup"),o=t.querySelector("#ftnt".concat(n)),l=null==o?void 0:o.closest("div");if(!n||!a||!l)return;null==o||o.remove();let s=document.createElement("div");s.className="imported-footnote",s.appendChild(l),a.replaceWith(s)}};var v=r(65282);let b=e=>{try{let t=new DOMParser().parseFromString(e,"text/html");return(0,a.F)(t,y).forEach(j),(0,a.F)(t,"li",!0).forEach(v.e),(0,a.F)(t,"img").forEach(w),(0,a.F)(t,"img").forEach(A),(0,a.F)(t,"script, style").forEach(e=>e.remove()),l(t),o(t),(0,a.F)(t,"p").forEach(C),t.body.innerHTML}catch(t){return console.error("Error transforming pasted HTML",t),e}},y="p, h1, h2, h3, h4, h5, h6",j=e=>{let t=e.querySelectorAll(y);t.forEach(e=>{if(e.tagName.match(/H\d/)){let t=document.createElement("b");t.innerHTML=e.innerHTML,e.replaceWith(t)}e.replaceWith(...e.childNodes)})},w=e=>{let t=e.closest("p, h1, h2, h3, h4, h5, h6, ul, ol, li");t&&t.after(e)},C=e=>{if((0,i.np)(e)){var t;(null===(t=e.parentElement)||void 0===t?void 0:t.childElementCount)!==1&&e.remove()}},A=e=>{if(e.src){if(e.src.startsWith("data:")){let t=(0,n.v9)(e.src),r=URL.createObjectURL(t);e.src=r}else e.src.startsWith("blob:")||e.src.startsWith("http")||e.remove()}}},87008:function(e,t,r){"use strict";r.d(t,{G8:function(){return s},Xb:function(){return a},np:function(){return l}});var i=r(30764),n=r(396);let a=(e,t,r)=>{null!=r||(r=i.PW.fromSchema(t));let a=r.serializeFragment(e);return(0,n.S)(a)},o=["img"],l=e=>{var t;return!e.hasChildNodes()||!((null===(t=e.textContent)||void 0===t?void 0:t.trim())!=""||o.includes(e.nodeName))&&[...e.childNodes].every(e=>l(e))},s=(e,t,r)=>{let i=a(e,t,r),n=document.createElement("div");n.appendChild(i);let o=n.innerHTML;return o}},20182:function(e,t,r){"use strict";r.d(t,{Z:function(){return d}});var i=r(26151),n=r(11093),a=r(26282),o=r(15468),l=r(96255);let s=(e,t)=>!!c(e),c=e=>{let t=e.parent&&(0,l.KH)(e.parent);if(!t)return!0;let r=(0,n.nv)(e,l.KH)[0];if(!r)return!0;let i=e.doc.resolve(r.pos),a=(0,o.gF)(i);return 0===Object.keys(a).length},d=(e,t,r)=>{var o;let l=e.posAtCoords({left:t.clientX,top:t.clientY});if(!l||l.inside<0)return null;let c=e.state.doc.resolve(l.pos);if(!c)return null;let d=l.pos,u=e.state.doc.resolve(l.inside),m=e.state.doc.nodeAt(l.inside),p=e.state.doc.nodeAt(l.pos);if((null==m?void 0:m.type.name)==="smartLayout"&&(null==p?void 0:p.type.name)==="smartLayoutCell")return null;let h=(0,n.Ru)(u,a.E)[0];if(h&&(d=l.inside,h.pos===d)||!d||r&&null==(d=(0,i.nj)(e.state.doc,d,r)))return null;let g=s(e.state.doc.resolve(d),null===(o=e.dragging)||void 0===o?void 0:o.slice);return g?d:null}},26282:function(e,t,r){"use strict";r.d(t,{E:function(){return i},G:function(){return n}});let i=e=>"smartLayoutCell"===e.type.name,n=e=>"smartLayout"===e.type.name},44368:function(e,t,r){"use strict";var i,n;r.d(t,{W:function(){return i},y:function(){return a}}),(n=i||(i={})).Todo="todo",n.Bullet="bullet",n.Numbered="numbered";let a=e=>["todo","bullet","numbered"].includes(e.type.name)},31866:function(e,t,r){"use strict";r.d(t,{A:function(){return n},b:function(){return a}});var i=r(2784);let n=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(null),[r,n]=(0,i.useState)(0),[a,o]=(0,i.useState)(0),[l,s]=(0,i.useState)(null),c=(0,i.useCallback)(()=>{var r,i;let a=null===(r=e.current)||void 0===r?void 0:r.getBoundingClientRect(),l=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if(a&&l){let e=l.width/l.height,t=a.width,r=a.width/e;if(0===t||isNaN(t)||0===r||isNaN(r))return;n(t),o(r),s(e)}},[]);return{width:r,height:a,aspectRatio:l,setSize:c,containerWrapperRef:e,imageRef:t}},a=e=>{let t=(0,i.useCallback)(t=>{if(!e)return;let r=null==e?void 0:e.view.domAtPos(t);if(!r){console.warn("scrollOnImageLoad could not domAtPos",{pos:t});return}let i=r.node.childNodes[r.offset];if(!i){console.warn("scrollOnImageLoad could not find node",{parentNode:r.node,offset:r.offset});return}let n=i.querySelector("[data-image-node-element] img");if(!n){console.warn("scrollOnImageLoad could not find <img> element");return}let a=()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run(),setTimeout(()=>{e.chain().selectNodeAtPos(t,!1).focus().scrollIntoView().run()},1e3),n.removeEventListener("load",a)};n.addEventListener("load",a)},[e]);return t}},28553:function(e,t,r){"use strict";r.d(t,{s7:function(){return I},k3:function(){return R},HI:function(){return U},W6:function(){return T}});var i=r(52322),n=r(16556),a=r(81540),o=r(77533),l=r(38035),s=r(17993),c=r(28535),d=r(29117),u=r(82655),m=r(42946),p=r(49929),h=r(5879),g=r(2784),f=r(91994),x=r(29318),v=r(38769),b=r(29560),y=r(73235),j=r(28165),w=r(42822);function C(){let e=(0,y._)(["\n      from {transform: rotate(-5deg) scale(1)}\n        to {transform: rotate(5deg) scale(1.2)}\n  "]);return C=function(){return e},e}let A=e=>{let{provider:t,color:r="gray"}=e,n=(0,j.F4)(C()),l="aiGenerated"===t?m.ddb:m.Y$T;return(0,i.jsxs)(w.M,{className:"image-loading-spinner",children:[(0,i.jsx)(a.$,{color:"".concat(r,".300"),thickness:"3px",size:"xl",position:"absolute",speed:"0.7s",emptyColor:"transparent"}),(0,i.jsx)(o.x,{color:"".concat(r,".400"),position:"absolute",lineHeight:"2",fontSize:"lg",animation:"".concat(n," infinite alternate 700ms ease-out"),children:(0,i.jsx)(p.G,{icon:l,fixedWidth:!0})})]})};var k=r(47968),_=r(2333),P=r(78820),E=r(24813),S=r(19850);let U=e=>{let{removeBackground:t=!1,scootRight:r=!1}=e;return(0,i.jsxs)(n.Vp,{size:"sm",variant:"subtle",colorScheme:"gray",pos:"absolute",top:4,left:4,p:1,ml:r?28:0,children:[(0,i.jsx)(a.$,{color:"gray.600",size:"xs"}),t&&(0,i.jsx)(o.x,{as:"span",ml:1,children:(0,i.jsx)(h.cC,{id:"gVcJ1/"})})]})},I=()=>(0,i.jsx)(n.Vp,{size:"sm",variant:"subtle",colorScheme:"red",pos:"absolute",top:4,left:4,children:(0,i.jsxs)(n.Sn,{children:[(0,i.jsx)(p.G,{icon:m.RLE})," ",(0,i.jsx)(h.cC,{id:"rmh/nq"})]})}),R=(0,g.memo)(e=>{let{children:t,icon:r=u.VmB,isLoading:n=!1,isUploading:a=!1,hasUploadError:o=!1,isAccentImageDrawer:m=!1,loadingProvider:h,openEditBackgroundDrawer:y,onSelectAndFocus:j,defaultSource:w,hideQuickActions:C=!1,...R}=e,T=(0,f.TL)(),[O,M]=(0,g.useState)(!1),N=(0,b.B)(),L=(0,f.CG)(k.hN),D=(0,x.Yy)();return(0,g.useEffect)(()=>{w&&!1===(0,E.FD)(w)?M(!1):C||!L?M(!1):M(!0)},[w,C,L]),(0,i.jsxs)(l.k,{"data-testid":"media-placeholder","data-test-media-source":w,color:D?P.Z.DARK_COLOR:P.Z.LIGHT_COLOR,align:"center",justify:"center",p:3,bg:D?P.Z.DARK_BG:P.Z.LIGHT_BG,className:"placeholder","data-drag-handle":!0,"data-export-as-image":!0,position:"relative",cursor:"default",sx:{containerType:"size","@container (width < 150px) or (height < 140px)":{".quick-actions":{display:"none"},".ai-image-loading-spinner":{transform:"scale(0.5)"}}},onClick:()=>{L&&j&&j()},onDoubleClick:()=>{L&&(j&&j(),m?(T((0,_.G9)()),null==y||y()):(T((0,v.W7)()),N(!0)))},transition:"background-color 0.2s",...R,children:[!n&&(0,i.jsxs)(s.g,{pointerEvents:"none",children:[(0,i.jsx)(c.xu,{color:D?P.Z.DARK_ICON_COLOR:P.Z.LIGHT_ICON_COLOR,sx:{"@container (0px <= width <= 32px)":{fontSize:"sm"},"@container (32px < width <= 80px)":{fontSize:"2xl"},fontSize:"4xl"},children:(0,i.jsx)(p.G,{icon:r,fixedWidth:!0})}),O&&(0,i.jsx)(d.U,{pointerEvents:"auto",className:"quick-actions",children:(0,i.jsx)(S.N,{onSelectImage:j,isAccentImageDrawer:m,openEditBackgroundDrawer:y})})]}),n&&(0,i.jsx)(A,{provider:h}),a&&(0,i.jsx)(U,{}),o&&(0,i.jsx)(I,{}),t]})});R.displayName="MediaPlaceholderImage";let T={minW:16,minH:16,bg:"gray.200"}},19850:function(e,t,r){"use strict";r.d(t,{N:function(){return b}});var i=r(52322),n=r(28535),a=r(38035),o=r(32899),l=r(54933),s=r(49929),c=r(94523),d=r(5879),u=r(87254),m=r(2784),p=r(99787),h=r(29318),g=r(29560),f=r(66028),x=r(78820),v=r(82533);let b=e=>{let{onSelectImage:t,isAccentImageDrawer:r=!1,openEditBackgroundDrawer:o,...s}=e,{setMediaDrawerSourceKeyAction:c,setBackgroundDrawerSourceKeyAction:m}=(0,v.j)(),h=[{id:"image.custom",label:(0,i.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),c(p.in.key,!0),setTimeout(()=>(0,g.T)(),0)}},{id:"image.web",label:(0,i.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),c(p.QT.key,!0),setTimeout(()=>(0,g.T)(),0)}},{id:"image.ai-generated",label:(0,i.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),c(p.NX.key,!0),setTimeout(()=>(0,g.T)(),0)}}],x=[{id:"image.custom",label:(0,i.jsx)(d.cC,{id:"6MxxvO"}),ariaLabel:u.ag._({id:"6MxxvO"}),icon:l.A$k,onClick:()=>{t(),m(p.in.key),setTimeout(()=>null==o?void 0:o(),0)}},{id:"image.web",label:(0,i.jsx)(d.cC,{id:"Of4gkp"}),ariaLabel:u.ag._({id:"Of4gkp"}),icon:l.Y$T,onClick:()=>{t(),m(p.QT.key),setTimeout(()=>null==o?void 0:o(),0)}},{id:"image.ai-generated",label:(0,i.jsx)(d.cC,{id:"UQ4o1/"}),ariaLabel:u.ag._({id:"UQ4o1/"}),icon:l.ddb,onClick:()=>{t(),m(p.NX.key),setTimeout(()=>null==o?void 0:o(),0)}}];return(0,i.jsx)(n.xu,{pos:"relative",zIndex:100,...s,children:(0,i.jsx)(a.k,{marginBottom:"-8px",onClick:f.UW,children:(r?x:h).map((e,t)=>(0,i.jsx)(y,{...e},t))})})},y=(0,m.memo)(e=>{let{label:t,ariaLabel:r,icon:n,id:a,onClick:l}=e,d=(0,h.Yy)();return(0,i.jsx)(c.kH,{label:t,placement:"top",closeOnClick:!0,children:(0,i.jsx)(o.h,{icon:(0,i.jsx)(s.G,{icon:n,size:"1x"}),"aria-label":r,"data-testid":"quick-action","data-test-media-source":a,variant:"ghost",rounded:"md",onMouseDown:l,width:"32px",height:"32px",color:d?x.Z.DARK_ICON_COLOR:x.Z.LIGHT_ICON_COLOR,display:"flex",alignItems:"center",justifyContent:"center",p:1,cursor:"pointer",_hover:"image.ai-generated"===a?d?{color:x.Z.DARK_AI_BTN_HOVER_COLOR,bg:x.Z.DARK_AI_BTN_HOVER_BG}:{color:x.Z.LIGHT_AI_BTN_HOVER_COLOR,bg:x.Z.LIGHT_AI_BTN_HOVER_BG}:d?{color:x.Z.DARK_BTN_HOVER_COLOR,bg:x.Z.DARK_BTN_HOVER_BG}:{color:x.Z.LIGHT_BTN_HOVER_COLOR,bg:x.Z.LIGHT_BTN_HOVER_BG},animation:"fadeIn",transition:"color 0.2s, background-color 0.2s"})})});y.displayName="QuickActionButton"},82533:function(e,t,r){"use strict";r.d(t,{j:function(){return s},q:function(){return l}});var i=r(2784),n=r(91994),a=r(38769),o=r(2333);let l=(e,t)=>{let r=(0,i.useCallback)(()=>{e.chain().focus().selectNodeAtPos(t(),!1).run(),setTimeout(()=>{e.view.focus()})},[e,t]);return r},s=()=>{let e=(0,n.TL)(),t=(0,n.CG)(a.RF),r=(0,n.CG)(a.Fk),l=(0,n.CG)(o.TB),s=(0,i.useCallback)(function(t){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e((0,a.c9)({sourceKey:t,overrideDefault:r}))},[e]),c=(0,i.useCallback)(t=>{e((0,o.df)({sourceKey:t}))},[e]);return{currentMediaDrawerSourceKey:t,isQuickAction:r,setMediaDrawerSourceKeyAction:s,currentEditBackgroundDrawerSourceKey:l,setBackgroundDrawerSourceKeyAction:c}}},24813:function(e,t,r){"use strict";r.d(t,{FD:function(){return a},jn:function(){return i.j},qs:function(){return i.q}}),r(19850);var i=r(82533);let n=["image.custom","image.web","image.ai-generated","accent.theme"],a=e=>n.includes(e)},78820:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});let i={LIGHT_BG:"gray.200",LIGHT_COLOR:"gray.300",LIGHT_ICON_COLOR:"gray.400",LIGHT_BTN_HOVER_BG:"gray.100",LIGHT_BTN_HOVER_COLOR:"gray.500",LIGHT_AI_BTN_HOVER_BG:"trueblue.100",LIGHT_AI_BTN_HOVER_COLOR:"trueblue.300",DARK_BG:"gray.800",DARK_COLOR:"gray.600",DARK_ICON_COLOR:"gray.600",DARK_BTN_HOVER_BG:"gray.700",DARK_BTN_HOVER_COLOR:"gray.400",DARK_AI_BTN_HOVER_BG:"trueblue.800",DARK_AI_BTN_HOVER_COLOR:"trueblue.300",LIGHT_GALLERY_BG:"gray.100",DARK_GALLERY_BG:"gray.900"}},54653:function(e,t,r){"use strict";r.d(t,{R:function(){return c}});var i=r(37243),n=r(16494),a=r(87205),o=r(66855),l=r(15636),s=r(59366);let c=i.hj.create({name:"mediaUpload",addCommands(){return{cancelImageUploadsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.editor.isEditable)return!1;let a=(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.uploadStatus===n.D.Uploading)});return a.forEach(e=>{let r=(0,s.XU)(e.node),i=(0,s.j6)(e.node,(null==r?void 0:r.src)?{uploadStatus:n.D.Done}:{tempUrl:null,uploadStatus:n.D.Error});t.setNodeMarkup(e.pos,null,i).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},uploadBlobsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.storage.orgId||!this.editor.isEditable)return!1;let n=(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("blob:")});return n.forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let i=r.src,n=(0,s.j6)(e.node,(0,s.BF)(i));t.setNodeMarkup(e.pos,null,n).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.wG)(this.editor,i)}),!0},uploadRemoteUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.storage.orgId||!this.editor.isEditable)return!1;let o=(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("http")&&(0,a.dW)(t.src)&&t.uploadStatus!==n.D.Done});return o.forEach(e=>{var r;let i=(0,s.XU)(e.node);if(!i)return;let a=i.src,o=(0,s.j6)(e.node,{uploadStatus:n.D.Uploading,source:null!==(r=i.source)&&void 0!==r?r:"image.custom",tempUrl:a});t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,a,void 0,!0)}),!0},uploadDataUrlsOnLoad:()=>e=>{let{tr:t,state:r}=e;if(!this.storage.orgId||!this.editor.isEditable)return!1;let n=(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(null==t?void 0:t.src)&&t.src.startsWith("data:")});return n.forEach(e=>{let r=(0,s.XU)(e.node);if(!r)return;let i=(0,a.v9)(r.src),n=URL.createObjectURL(i),o=(0,s.j6)(e.node,(0,s.BF)(n));t.setNodeMarkup(e.pos,null,o).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0),(0,l.Sm)(this.editor,n,i)}),!0},initializeUploadExtension:e=>t=>{let{chain:r}=t;return this.storage.orgId=e,r().cancelImageUploadsOnLoad().uploadBlobsOnLoad().uploadDataUrlsOnLoad().uploadRemoteUrlsOnLoad().revokeAllImageTempURLs().run(),!0},revokeAllImageTempURLs:()=>e=>{let{tr:t,state:r}=e,a=(0,i.N2)(r.doc,e=>{let t=(0,s.XU)(e);return!!(t&&t.tempUrl&&t.src&&t.uploadStatus===n.D.Done)});return a.forEach(e=>{let r=(0,s.j6)(e.node,{tempUrl:null});t.setNodeMarkup(e.pos,null,r).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),!0},revokeImageTempURLs:e=>t=>{let{tr:r,state:n}=t,a=(0,i.N2)(n.doc,t=>{let r=(0,s.XU)(t);return!!r&&r.tempUrl===e});return a.forEach(e=>{let t=(0,s.j6)(e.node,{tempUrl:null});r.setNodeMarkup(e.pos,null,t).setMeta("addToHistory",!1).setMeta("imageUploadUpdateAttrs",!0)}),URL.revokeObjectURL(e),!0},updateImageOnUploadFailure:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r=>{let{tr:i,state:a}=r,o=a.doc.nodeAt(e);if(!o||!o.attrs)return!1;let l=(0,s.XU)(o),c=t?{...l,uploadStatus:n.D.Done}:(0,s.gM)({isError:!0}),d=(0,s.j6)(o,c);return i.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}},updateImageOnUploadSuccess:(e,t)=>r=>{let{tr:i,state:n}=r,a=n.doc.nodeAt(e);if(!a||!a.attrs)return!1;let l=(0,s.gM)({isError:!1,result:t,attrs:a.attrs}),c=(0,o.UZ)(l),d=(0,s.j6)(a,c);return i.setNodeMarkup(e,void 0,d).setMeta("imageUploadUpdateAttrs",!0).setMeta("addToHistory",!1).setMeta("annotationEvent",{type:"update-node-attrs",pos:e}),!0}}},addStorage:()=>({orgId:void 0,completedUploads:{}}),addProseMirrorPlugins(){return[(0,l.SZ)(this.editor)]}})},97253:function(e,t,r){"use strict";r.d(t,{B0:function(){return n.B0},Ns:function(){return n.Ns},QZ:function(){return n.QZ},R:function(){return i.R},XU:function(){return n.XU},f8:function(){return n.f8},gM:function(){return n.gM},j6:function(){return n.j6}});var i=r(54653),n=r(59366)},32581:function(e,t,r){"use strict";r.d(t,{j:function(){return u},x:function(){return m}});var i=r(37164),n=r(99787),a=r(16494),o=r(13793),l=r(38322),s=r(81345),c=r(87205),d=r(59366);let u=(e,t,r,l)=>{var s;let u;let m={type:o.E.IMAGE,source:n.in.key,image:{uploadStatus:a.D.Uploading,source:n.in.key}};(0,c.Ns)(r.type)?(m.image.showPlaceholder=!0,u="HEIC_tempId_".concat((0,i.x0)())):u=URL.createObjectURL(r),m.image.tempUrl=u;let p=(t,r)=>{if(!u&&!r)return;let i=u||r;(0,d.Ns)(e,i,t)};t.setNodeAttribute(l,"background",m).setMeta("imageUploadUpdateAttrs",!0),(0,n.cT)(r,null===(s=e.storage.mediaUpload)||void 0===s?void 0:s.orgId,{onOriginalFileUpload:p,onUploadComplete:p,onUploadFailed:t=>{(0,d.f8)(e,u,t),URL.revokeObjectURL(u)}})},m=function(e,t,r){let i=t.map(t=>(0,c.fU)(t.type)?p(t,e):(0,s.kO)(t.type,(0,s.mD)(t))?h(t,e):null).filter(e=>null!==e);if(0==i.length)return;let n=i.map(e=>e.content),a=e.state.doc.resolve(r),o=a.parent.inlineContent,d=r;o&&0===a.parentOffset?d=r-1:o&&null===a.nodeAfter&&(d=r+1),e.chain().insertContentAt(d,n,{updateSelection:!1}).command(e=>{var t;let{tr:r}=e,i=r.doc.resolve(r.mapping.map(d)),n=(0,l.t)(r.doc.resolve(i.pos-((null===(t=i.nodeBefore)||void 0===t?void 0:t.nodeSize)||1)));return n&&r.setSelection(n),!0}).run(),i.forEach(e=>{e.upload()}),setTimeout(()=>{e.commands.scrollIntoView()},200)},p=(e,t)=>{let r={uploadStatus:a.D.Uploading,source:n.in.key};(0,c.Ns)(e.type)?(r.showPlaceholder=!0,r.tempUrl="HEIC_tempId_".concat((0,i.x0)())):r.tempUrl=URL.createObjectURL(e);let o=(e,i)=>{let n=r.tempUrl;if(!n&&!i)return;let a=n||i;(0,d.Ns)(t,a,e)},l={onOriginalFileUpload:o,onUploadComplete:o,onUploadFailed:e=>{r.tempUrl&&((0,d.f8)(t,r.tempUrl,e),URL.revokeObjectURL(r.tempUrl))}};return{name:e.name,content:{type:"image",attrs:r},upload:()=>{var r;return(0,n.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,l)}}},h=(e,t)=>{let r=URL.createObjectURL(e),i={...(0,d.B0)(e),url:r},a=(e,i)=>{if(!r&&!i)return;let n=r||i;(0,d.QZ)(t,n,e)},o={onOriginalFileUpload:a,onUploadComplete:a};return{name:e.name,content:{type:"embed",attrs:i},upload:()=>{var r;return(0,n.cT)(e,null===(r=t.storage.mediaUpload)||void 0===r?void 0:r.orgId,o,"node","doc")}}}},15636:function(e,t,r){"use strict";r.d(t,{SZ:function(){return h},RC:function(){return v},bC:function(){return g},wG:function(){return m},Sm:function(){return u}});var i=r(27191),n=r(99787),a=r(81345),o=r(87205),l=r(20182),s=r(32581);let c=e=>RegExp("^\\s*<svg.*<\\/svg>\\s*$","s").test(e);var d=r(59366);let u=(e,t,r,i)=>{let a=(r,i)=>{(0,d.Ns)(e,i||t,r)},o={onOriginalFileUpload:a,onUploadComplete:a,onUploadFailed:r=>{(0,d.f8)(e,t,r,i)}};r?(0,n.cT)(r,e.storage.mediaUpload.orgId,o):(0,n.WY)(t,e.storage.mediaUpload.orgId,o)},m=async(e,t)=>{try{let r=await fetch(t),i=await r.blob(),n=new File([i],"blob.png",{type:i.type});u(e,t,n)}catch(r){(0,d.f8)(e,t,r)}},p=e=>(0,o.fU)(e.type)||(0,a.kO)(e.type,(0,a.mD)(e)),h=e=>new i.Sy({props:{transformPasted:t=>(t.content.descendants(t=>{if("image"===t.type.name&&t.attrs.tempUrl){let r=e.storage.mediaUpload,i=r.completedUploads[t.attrs.tempUrl];i&&Object.assign(t.attrs,(0,d.j6)(t,(0,d.gM)({isError:!1,result:i})))}else if("image"===t.type.name&&t.attrs.src&&!(0,o.S6)(t.attrs.src)){let r,i=t.attrs.src;if(i.startsWith("blob:")){Object.assign(t.attrs,(0,d.BF)(i)),m(e,i);return}i.startsWith("data:")&&(r=(0,o.v9)(t.attrs.src),i=URL.createObjectURL(r)),Object.assign(t.attrs,(0,d.BF)(i)),u(e,i,r)}}),t),handlePaste:(t,r,i)=>x(e,t,r,i),handleDOMEvents:{drop:(t,r)=>f(e,t,r)}}}),g=(e,t)=>{var r;if(!e.clipboardData)return null;let i=e.clipboardData.getData("text/html"),n=e.clipboardData.getData("text/plain");if(n&&!i&&c(n))return[(0,o.K$)(n)];let a=Array.prototype.slice.call(e.clipboardData.items);return a.some(e=>"text/html"===e.type)&&(t.content.childCount>1||(null===(r=t.content.firstChild)||void 0===r?void 0:r.type.name)!=="image")?null:a.map(e=>e.getAsFile()).filter(e=>!!e).filter(p)},f=(e,t,r)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let i=v(r).filter(p);if(0===i.length)return!1;let n=(0,l.Z)(t,r);return!!n&&(r.preventDefault(),(0,s.x)(e,i,n),!0)},x=(e,t,r,i)=>{if(t.props.editable&&!t.props.editable(t.state))return!1;let n=g(r,i);if(!n||0===n.length)return!1;let{selection:a}=t.state,o=a.from;return a.empty||e.commands.deleteSelection(),(0,s.x)(e,n,o),!0};function v(e){let t=[],r=e.target;if(e.dataTransfer){let r=e.dataTransfer;r.files&&r.files.length?t=r.files:r.items&&r.items.length&&(t=r.items)}else r&&r.files&&(t=r.files);return Array.prototype.slice.call(t)}},59366:function(e,t,r){"use strict";r.d(t,{B0:function(){return w},BF:function(){return p},Ns:function(){return v},QZ:function(){return j},XU:function(){return g},f8:function(){return b},gM:function(){return m},j6:function(){return h}});var i=r(37243),n=r(72579),a=r.n(n),o=r(98537),l=r.n(o),s=r(16765),c=r.n(s),d=r(16494),u=r(81345);let m=e=>{let{result:t,isError:r,attrs:i}=e;if(r)return{uploadStatus:d.D.Error,showPlaceholder:!0,tempUrl:null,src:null};let{fullResults:n,...a}=t;return{uploadStatus:d.D.Done,showPlaceholder:!1,source:(null==i?void 0:i.source)||"image.custom",...a}},p=e=>({tempUrl:e,uploadStatus:d.D.Uploading,src:null,source:"image.custom"}),h=(e,t)=>{let r=e.type.spec.imageKeyPath,i=r?c()({},r,t):t,n=l()({},e.attrs,i);return n},g=e=>{let t=e.type.spec.imageKeyPath;return t||"image"===e.type.name?t?a()(e.attrs,t,e.attrs):e.attrs:null},f=(e,t)=>(0,i.N2)(e.state.doc,e=>{let r=g(e);return[null==r?void 0:r.tempUrl,null==r?void 0:r.src].includes(t)}),x=(e,t)=>(0,i.N2)(e.state.doc,e=>"embed"===e.type.name&&e.attrs.url===t),v=(e,t,r)=>{e.parentEditor&&(e=e.parentEditor),t&&y(e,r,t);let i=f(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{let{pos:i}=t;e.commands.updateImageOnUploadSuccess(i,r)}),setTimeout(()=>{e.commands.revokeImageTempURLs(t)},3e4)},b=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.parentEditor&&(e=e.parentEditor);let n=f(e,t);if(0==n.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}n.forEach(t=>e.commands.updateImageOnUploadFailure(t.pos,i)),console.error(r)},y=(e,t,r)=>{let i=e.storage.mediaUpload;i.completedUploads[r]=t},j=(e,t,r)=>{let i=x(e,t);if(0==i.length){console.warn("[MediaUpload] Couldn't find placeholder node");return}i.forEach(t=>{e.commands.updateAttributesAtPos(t.pos,{url:r.src,sourceUrl:r.src,embed:{url:r.src},thumbnail:{src:r.thumbnail,uploadStatus:d.D.Done,showPlaceholder:!1}})})},w=e=>({meta:{title:e.name,description:(0,u.td)(e.size,1)},thumbnail:{uploadStatus:d.D.Uploading,showPlaceholder:!0},source:"embed.pdf"})},5626:function(e,t,r){"use strict";r.d(t,{SV:function(){return a},gS:function(){return o},lt:function(){return n},m4:function(){return l}});var i=r(56253);let n=30,a=16,o=i.DB*a,l=.6},66855:function(e,t,r){"use strict";r.d(t,{Bp:function(){return l},NW:function(){return c},UZ:function(){return p},fP:function(){return a},gp:function(){return u},iJ:function(){return s},k7:function(){return d},vb:function(){return o},zd:function(){return m}});var i=r(5626);let n=["image","video","embed","mediaPlaceholder"],a=e=>o(e.type),o=e=>n.includes(e.name),l=e=>"video"===e.type.name||"embed"===e.type.name,s=e=>e.href||e.url||e.sourceUrl||e.embedUrl||void 0,c=e=>{var t;return(null===(t=e.embed)||void 0===t?void 0:t.url)?e.embed.url:"embedUrl"in e&&e.embedUrl?e.embedUrl:s(e)},d=e=>{var t,r;let i=e.attrs;return[null===(t=i.meta)||void 0===t?void 0:t.title,null===(r=i.meta)||void 0===r?void 0:r.site].filter(Boolean).join(" - ")},u=(e,t)=>{var r;return null!==(r=e.clickBehavior)&&void 0!==r?r:t?"newTab":"expand"},m=e=>{var t,r;return null!==(r=null==e?void 0:null===(t=e.split(".").pop())||void 0===t?void 0:t.startsWith("svg"))&&void 0!==r&&r},p=e=>{let{width:t,height:r,resize:n}=e.meta||{};if(!t||!r||(null==n?void 0:n.isAuto)===!1)return e;let a=i.gS,o=window.innerHeight*i.m4;return r/t*a>o?{...e,resize:{width:Math.min(a,o*(t/r)),clipType:null,clipPath:null,clipAspectRatio:null,isAuto:!0}}:e}},38322:function(e,t,r){"use strict";r.d(t,{G:function(){return o},t:function(){return function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{doc:a}=t,o=r<0;if(!t.nodeAfter)return null;if(t.nodeAfter.inlineContent)return n.Y1.near(a.resolve(t.pos+(o?t.nodeAfter.content.size+1:0)),r);let l=(0,i.N2)(t.nodeAfter,e=>e.inlineContent||n.qv.isSelectable(e));if(!l||0===l.length)return n.qv.create(a,t.pos);let s=t.start(t.depth+1)+(o?l[l.length-1].pos:l[0].pos);return e(a.resolve(s),r)}}});var i=r(37243),n=r(27191),a=r(26151);let o=(e,t)=>{var r;let i;let n=e.doc,o=e.steps.length-1,l=e.steps[o];if(!l||!(l instanceof a.Pu||l instanceof a.FC)||0===l.slice.content.size)return null;let s=t||(null===(r=l.slice.content.child(l.slice.openStart))||void 0===r?void 0:r.type.name),c=e.mapping.maps[o];if(c.forEach((e,t,r)=>{null==i&&(i=r)}),null==i)return null;let d=n.nodeAt(i);if(d&&d.type.name===s)return n.resolve(i);if(!s)return console.warn("[getInsertedNodePos] Error selecting node, type not found in slice.lastChild",i),null;for(let t=l.from;t<e.mapping.map(l.to);t++){let r=e.doc.nodeAt(t);if(r&&r.type.name===s)return n.resolve(t)}return null}},75320:function(e,t,r){"use strict";r.d(t,{h:function(){return c}});var i=r(30733),n=r.n(i),a=r(2784);class o{observe(e,t){this.observer?(this.observer.observe(e),this.observedElements.set(e,t)):t(s)}unobserve(e){this.observer&&(this.observer.unobserve(e),this.observedElements.delete(e),this.nextTickCallbacks.delete(e))}handleResize(e){let t=!1;for(let r of e){let e=this.observedElements.get(r.target);e&&(t=!0,this.nextTickCallbacks.set(r.target,()=>{e(r.contentRect)}))}t&&this.queueProcess()}queueProcess(){this.frameId&&(cancelAnimationFrame(this.frameId),this.frameId=null),this.frameId=requestAnimationFrame(()=>{for(let e of this.nextTickCallbacks.values())e();this.frameId=null})}constructor(){this.observedElements=new Map,this.nextTickCallbacks=new Map,this.frameId=null,this.observer=null,"undefined"!=typeof ResizeObserver&&(this.observer=new ResizeObserver(e=>this.handleResize(e)))}}let l=n()(()=>new o),s={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function c(e){let t=(0,a.useRef)(null),[{width:r,height:i},n]=(0,a.useState)(s);return(0,a.useEffect)(()=>{let e=t.current;return e&&l().observe(e,n),()=>{e&&l().unobserve(e)}},[e]),{ref:t,width:r,height:i}}},81345:function(e,t,r){"use strict";r.d(t,{O7:function(){return o},S9:function(){return s},kO:function(){return l},mD:function(){return d},td:function(){return c}});var i=r(13326),n=r(56974),a=r.n(n);function o(e){return e===i.Z.pdf}function l(e,t){var r,n;return o(e)||(r=e)===i.Z.doc||r===i.Z.docx||"ppt"===(n=(n=t).toLocaleLowerCase())||"pptx"===n}function s(e){return"otf"===(e=e.toLocaleLowerCase())||"ttf"===e}let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";let r=t<0?0:t,i=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,i)).toFixed(r))," ").concat(["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][i])},d=e=>e.name&&a()(e.name.split("."))||""},24472:function(){}}]);
//# sourceMappingURL=3722-a34043e2266ba119.js.map